var pF=Object.defineProperty;var mF=(t,e,n)=>e in t?pF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Te=(t,e,n)=>mF(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var gF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function D1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var l5={exports:{}},N1={},u5={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ch=Symbol.for("react.element"),yF=Symbol.for("react.portal"),bF=Symbol.for("react.fragment"),vF=Symbol.for("react.strict_mode"),wF=Symbol.for("react.profiler"),kF=Symbol.for("react.provider"),xF=Symbol.for("react.context"),EF=Symbol.for("react.forward_ref"),SF=Symbol.for("react.suspense"),CF=Symbol.for("react.memo"),_F=Symbol.for("react.lazy"),XE=Symbol.iterator;function AF(t){return t===null||typeof t!="object"?null:(t=XE&&t[XE]||t["@@iterator"],typeof t=="function"?t:null)}var c5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f5=Object.assign,d5={};function Mc(t,e,n){this.props=t,this.context=e,this.refs=d5,this.updater=n||c5}Mc.prototype.isReactComponent={};Mc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function h5(){}h5.prototype=Mc.prototype;function Tk(t,e,n){this.props=t,this.context=e,this.refs=d5,this.updater=n||c5}var Mk=Tk.prototype=new h5;Mk.constructor=Tk;f5(Mk,Mc.prototype);Mk.isPureReactComponent=!0;var eS=Array.isArray,p5=Object.prototype.hasOwnProperty,Ok={current:null},m5={key:!0,ref:!0,__self:!0,__source:!0};function g5(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)p5.call(e,r)&&!m5.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ch,type:t,key:o,ref:s,props:i,_owner:Ok.current}}function TF(t,e){return{$$typeof:ch,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Dk(t){return typeof t=="object"&&t!==null&&t.$$typeof===ch}function MF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tS=/\/+/g;function dy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MF(""+t.key):e.toString(36)}function Wp(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ch:case yF:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+dy(s,0):r,eS(i)?(n="",t!=null&&(n=t.replace(tS,"$&/")+"/"),Wp(i,e,n,"",function(u){return u})):i!=null&&(Dk(i)&&(i=TF(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(tS,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",eS(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+dy(o,a);s+=Wp(o,e,n,l,i)}else if(l=AF(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+dy(o,a++),s+=Wp(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Vh(t,e,n){if(t==null)return t;var r=[],i=0;return Wp(t,r,"","",function(o){return e.call(n,o,i++)}),r}function OF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ur={current:null},Jp={transition:null},DF={ReactCurrentDispatcher:ur,ReactCurrentBatchConfig:Jp,ReactCurrentOwner:Ok};function y5(){throw Error("act(...) is not supported in production builds of React.")}We.Children={map:Vh,forEach:function(t,e,n){Vh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vh(t,function(){e++}),e},toArray:function(t){return Vh(t,function(e){return e})||[]},only:function(t){if(!Dk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};We.Component=Mc;We.Fragment=bF;We.Profiler=wF;We.PureComponent=Tk;We.StrictMode=vF;We.Suspense=SF;We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DF;We.act=y5;We.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=f5({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Ok.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)p5.call(e,l)&&!m5.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ch,type:t.type,key:i,ref:o,props:r,_owner:s}};We.createContext=function(t){return t={$$typeof:xF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kF,_context:t},t.Consumer=t};We.createElement=g5;We.createFactory=function(t){var e=g5.bind(null,t);return e.type=t,e};We.createRef=function(){return{current:null}};We.forwardRef=function(t){return{$$typeof:EF,render:t}};We.isValidElement=Dk;We.lazy=function(t){return{$$typeof:_F,_payload:{_status:-1,_result:t},_init:OF}};We.memo=function(t,e){return{$$typeof:CF,type:t,compare:e===void 0?null:e}};We.startTransition=function(t){var e=Jp.transition;Jp.transition={};try{t()}finally{Jp.transition=e}};We.unstable_act=y5;We.useCallback=function(t,e){return ur.current.useCallback(t,e)};We.useContext=function(t){return ur.current.useContext(t)};We.useDebugValue=function(){};We.useDeferredValue=function(t){return ur.current.useDeferredValue(t)};We.useEffect=function(t,e){return ur.current.useEffect(t,e)};We.useId=function(){return ur.current.useId()};We.useImperativeHandle=function(t,e,n){return ur.current.useImperativeHandle(t,e,n)};We.useInsertionEffect=function(t,e){return ur.current.useInsertionEffect(t,e)};We.useLayoutEffect=function(t,e){return ur.current.useLayoutEffect(t,e)};We.useMemo=function(t,e){return ur.current.useMemo(t,e)};We.useReducer=function(t,e,n){return ur.current.useReducer(t,e,n)};We.useRef=function(t){return ur.current.useRef(t)};We.useState=function(t){return ur.current.useState(t)};We.useSyncExternalStore=function(t,e,n){return ur.current.useSyncExternalStore(t,e,n)};We.useTransition=function(){return ur.current.useTransition()};We.version="18.3.1";u5.exports=We;var ee=u5.exports;const tt=D1(ee);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NF=ee,$F=Symbol.for("react.element"),IF=Symbol.for("react.fragment"),RF=Object.prototype.hasOwnProperty,FF=NF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LF={key:!0,ref:!0,__self:!0,__source:!0};function b5(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)RF.call(e,r)&&!LF.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$F,type:t,key:o,ref:s,props:i,_owner:FF.current}}N1.Fragment=IF;N1.jsx=b5;N1.jsxs=b5;l5.exports=N1;var _=l5.exports,F2={},v5={exports:{}},Wr={},w5={exports:{}},k5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,j){var z=B.length;B.push(j);e:for(;0<z;){var J=z-1>>>1,K=B[J];if(0<i(K,j))B[J]=j,B[z]=K,z=J;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var j=B[0],z=B.pop();if(z!==j){B[0]=z;e:for(var J=0,K=B.length,ae=K>>>1;J<ae;){var fe=2*(J+1)-1,ke=B[fe],ve=fe+1,xe=B[ve];if(0>i(ke,z))ve<K&&0>i(xe,ke)?(B[J]=xe,B[ve]=z,J=ve):(B[J]=ke,B[fe]=z,J=fe);else if(ve<K&&0>i(xe,z))B[J]=xe,B[ve]=z,J=ve;else break e}}return j}function i(B,j){var z=B.sortIndex-j.sortIndex;return z!==0?z:B.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=B)r(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(u)}}function g(B){if(m=!1,w(B),!p)if(n(l)!==null)p=!0,S(x);else{var j=n(u);j!==null&&P(g,j.startTime-B)}}function x(B,j){p=!1,m&&(m=!1,y(D),D=-1),h=!0;var z=d;try{for(w(j),f=n(l);f!==null&&(!(f.expirationTime>j)||B&&!C());){var J=f.callback;if(typeof J=="function"){f.callback=null,d=f.priorityLevel;var K=J(f.expirationTime<=j);j=t.unstable_now(),typeof K=="function"?f.callback=K:f===n(l)&&r(l),w(j)}else r(l);f=n(l)}if(f!==null)var ae=!0;else{var fe=n(u);fe!==null&&P(g,fe.startTime-j),ae=!1}return ae}finally{f=null,d=z,h=!1}}var k=!1,E=null,D=-1,O=5,N=-1;function C(){return!(t.unstable_now()-N<O)}function R(){if(E!==null){var B=t.unstable_now();N=B;var j=!0;try{j=E(!0,B)}finally{j?T():(k=!1,E=null)}}else k=!1}var T;if(typeof v=="function")T=function(){v(R)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,A=q.port2;q.port1.onmessage=R,T=function(){A.postMessage(null)}}else T=function(){b(R,0)};function S(B){E=B,k||(k=!0,T())}function P(B,j){D=b(function(){B(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,S(x))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var z=d;d=j;try{return B()}finally{d=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,j){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var z=d;d=B;try{return j()}finally{d=z}},t.unstable_scheduleCallback=function(B,j,z){var J=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?J+z:J):z=J,B){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=z+K,B={id:c++,callback:j,priorityLevel:B,startTime:z,expirationTime:K,sortIndex:-1},z>J?(B.sortIndex=z,e(u,B),n(l)===null&&B===n(u)&&(m?(y(D),D=-1):m=!0,P(g,z-J))):(B.sortIndex=K,e(l,B),p||h||(p=!0,S(x))),B},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(B){var j=d;return function(){var z=d;d=j;try{return B.apply(this,arguments)}finally{d=z}}}})(k5);w5.exports=k5;var BF=w5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PF=ee,qr=BF;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x5=new Set,md={};function Il(t,e){Ku(t,e),Ku(t+"Capture",e)}function Ku(t,e){for(md[t]=e,t=0;t<e.length;t++)x5.add(e[t])}var Jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L2=Object.prototype.hasOwnProperty,zF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nS={},rS={};function jF(t){return L2.call(rS,t)?!0:L2.call(nS,t)?!1:zF.test(t)?rS[t]=!0:(nS[t]=!0,!1)}function qF(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VF(t,e,n,r){if(e===null||typeof e>"u"||qF(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cr(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dn[t]=new cr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dn[e]=new cr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dn[t]=new cr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dn[t]=new cr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dn[t]=new cr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dn[t]=new cr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dn[t]=new cr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dn[t]=new cr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dn[t]=new cr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nk=/[\-:]([a-z])/g;function $k(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nk,$k);Dn[e]=new cr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nk,$k);Dn[e]=new cr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nk,$k);Dn[e]=new cr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dn[t]=new cr(t,1,!1,t.toLowerCase(),null,!1,!1)});Dn.xlinkHref=new cr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dn[t]=new cr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ik(t,e,n,r){var i=Dn.hasOwnProperty(e)?Dn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VF(e,n,i,r)&&(n=null),r||i===null?jF(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ts=PF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uh=Symbol.for("react.element"),pu=Symbol.for("react.portal"),mu=Symbol.for("react.fragment"),Rk=Symbol.for("react.strict_mode"),B2=Symbol.for("react.profiler"),E5=Symbol.for("react.provider"),S5=Symbol.for("react.context"),Fk=Symbol.for("react.forward_ref"),P2=Symbol.for("react.suspense"),z2=Symbol.for("react.suspense_list"),Lk=Symbol.for("react.memo"),As=Symbol.for("react.lazy"),C5=Symbol.for("react.offscreen"),iS=Symbol.iterator;function Qc(t){return t===null||typeof t!="object"?null:(t=iS&&t[iS]||t["@@iterator"],typeof t=="function"?t:null)}var Dt=Object.assign,hy;function yf(t){if(hy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hy=e&&e[1]||""}return`
`+hy+t}var py=!1;function my(t,e){if(!t||py)return"";py=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{py=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?yf(t):""}function UF(t){switch(t.tag){case 5:return yf(t.type);case 16:return yf("Lazy");case 13:return yf("Suspense");case 19:return yf("SuspenseList");case 0:case 2:case 15:return t=my(t.type,!1),t;case 11:return t=my(t.type.render,!1),t;case 1:return t=my(t.type,!0),t;default:return""}}function j2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mu:return"Fragment";case pu:return"Portal";case B2:return"Profiler";case Rk:return"StrictMode";case P2:return"Suspense";case z2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case S5:return(t.displayName||"Context")+".Consumer";case E5:return(t._context.displayName||"Context")+".Provider";case Fk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lk:return e=t.displayName||null,e!==null?e:j2(t.type)||"Memo";case As:e=t._payload,t=t._init;try{return j2(t(e))}catch{}}return null}function HF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j2(e);case 8:return e===Rk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ca(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function WF(t){var e=_5(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hh(t){t._valueTracker||(t._valueTracker=WF(t))}function A5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_5(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function A0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function q2(t,e){var n=e.checked;return Dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function oS(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ca(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function T5(t,e){e=e.checked,e!=null&&Ik(t,"checked",e,!1)}function V2(t,e){T5(t,e);var n=ca(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?U2(t,e.type,n):e.hasOwnProperty("defaultValue")&&U2(t,e.type,ca(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function U2(t,e,n){(e!=="number"||A0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bf=Array.isArray;function Du(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ca(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function H2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function aS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(bf(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ca(n)}}function M5(t,e){var n=ca(e.value),r=ca(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function O5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function W2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?O5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wh,D5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wh=Wh||document.createElement("div"),Wh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JF=["Webkit","ms","Moz","O"];Object.keys(qf).forEach(function(t){JF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qf[e]=qf[t]})});function N5(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qf.hasOwnProperty(t)&&qf[t]?(""+e).trim():e+"px"}function $5(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=N5(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var KF=Dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function J2(t,e){if(e){if(KF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function K2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z2=null;function Bk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var G2=null,Nu=null,$u=null;function uS(t){if(t=hh(t)){if(typeof G2!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=L1(e),G2(t.stateNode,t.type,e))}}function I5(t){Nu?$u?$u.push(t):$u=[t]:Nu=t}function R5(){if(Nu){var t=Nu,e=$u;if($u=Nu=null,uS(t),e)for(t=0;t<e.length;t++)uS(e[t])}}function F5(t,e){return t(e)}function L5(){}var gy=!1;function B5(t,e,n){if(gy)return t(e,n);gy=!0;try{return F5(t,e,n)}finally{gy=!1,(Nu!==null||$u!==null)&&(L5(),R5())}}function yd(t,e){var n=t.stateNode;if(n===null)return null;var r=L1(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var Y2=!1;if(Jo)try{var Xc={};Object.defineProperty(Xc,"passive",{get:function(){Y2=!0}}),window.addEventListener("test",Xc,Xc),window.removeEventListener("test",Xc,Xc)}catch{Y2=!1}function ZF(t,e,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Vf=!1,T0=null,M0=!1,Q2=null,GF={onError:function(t){Vf=!0,T0=t}};function YF(t,e,n,r,i,o,s,a,l){Vf=!1,T0=null,ZF.apply(GF,arguments)}function QF(t,e,n,r,i,o,s,a,l){if(YF.apply(this,arguments),Vf){if(Vf){var u=T0;Vf=!1,T0=null}else throw Error(ne(198));M0||(M0=!0,Q2=u)}}function Rl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function P5(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cS(t){if(Rl(t)!==t)throw Error(ne(188))}function XF(t){var e=t.alternate;if(!e){if(e=Rl(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return cS(i),t;if(o===r)return cS(i),e;o=o.sibling}throw Error(ne(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function z5(t){return t=XF(t),t!==null?j5(t):null}function j5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=j5(t);if(e!==null)return e;t=t.sibling}return null}var q5=qr.unstable_scheduleCallback,fS=qr.unstable_cancelCallback,eL=qr.unstable_shouldYield,tL=qr.unstable_requestPaint,jt=qr.unstable_now,nL=qr.unstable_getCurrentPriorityLevel,Pk=qr.unstable_ImmediatePriority,V5=qr.unstable_UserBlockingPriority,O0=qr.unstable_NormalPriority,rL=qr.unstable_LowPriority,U5=qr.unstable_IdlePriority,$1=null,po=null;function iL(t){if(po&&typeof po.onCommitFiberRoot=="function")try{po.onCommitFiberRoot($1,t,void 0,(t.current.flags&128)===128)}catch{}}var Mi=Math.clz32?Math.clz32:aL,oL=Math.log,sL=Math.LN2;function aL(t){return t>>>=0,t===0?32:31-(oL(t)/sL|0)|0}var Jh=64,Kh=4194304;function vf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function D0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=vf(a):(o&=s,o!==0&&(r=vf(o)))}else s=n&~i,s!==0?r=vf(s):o!==0&&(r=vf(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mi(e),i=1<<n,r|=t[n],e&=~i;return r}function lL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Mi(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=lL(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function X2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function H5(){var t=Jh;return Jh<<=1,!(Jh&4194240)&&(Jh=64),t}function yy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mi(e),t[e]=n}function cL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Mi(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function zk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var st=0;function W5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var J5,jk,K5,Z5,G5,ev=!1,Zh=[],Gs=null,Ys=null,Qs=null,bd=new Map,vd=new Map,Rs=[],fL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dS(t,e){switch(t){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":bd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vd.delete(e.pointerId)}}function ef(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=hh(e),e!==null&&jk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function dL(t,e,n,r,i){switch(e){case"focusin":return Gs=ef(Gs,t,e,n,r,i),!0;case"dragenter":return Ys=ef(Ys,t,e,n,r,i),!0;case"mouseover":return Qs=ef(Qs,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return bd.set(o,ef(bd.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,vd.set(o,ef(vd.get(o)||null,t,e,n,r,i)),!0}return!1}function Y5(t){var e=Ha(t.target);if(e!==null){var n=Rl(e);if(n!==null){if(e=n.tag,e===13){if(e=P5(n),e!==null){t.blockedOn=e,G5(t.priority,function(){K5(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Z2=r,n.target.dispatchEvent(r),Z2=null}else return e=hh(n),e!==null&&jk(e),t.blockedOn=n,!1;e.shift()}return!0}function hS(t,e,n){Kp(t)&&n.delete(e)}function hL(){ev=!1,Gs!==null&&Kp(Gs)&&(Gs=null),Ys!==null&&Kp(Ys)&&(Ys=null),Qs!==null&&Kp(Qs)&&(Qs=null),bd.forEach(hS),vd.forEach(hS)}function tf(t,e){t.blockedOn===e&&(t.blockedOn=null,ev||(ev=!0,qr.unstable_scheduleCallback(qr.unstable_NormalPriority,hL)))}function wd(t){function e(i){return tf(i,t)}if(0<Zh.length){tf(Zh[0],t);for(var n=1;n<Zh.length;n++){var r=Zh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gs!==null&&tf(Gs,t),Ys!==null&&tf(Ys,t),Qs!==null&&tf(Qs,t),bd.forEach(e),vd.forEach(e),n=0;n<Rs.length;n++)r=Rs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rs.length&&(n=Rs[0],n.blockedOn===null);)Y5(n),n.blockedOn===null&&Rs.shift()}var Iu=ts.ReactCurrentBatchConfig,N0=!0;function pL(t,e,n,r){var i=st,o=Iu.transition;Iu.transition=null;try{st=1,qk(t,e,n,r)}finally{st=i,Iu.transition=o}}function mL(t,e,n,r){var i=st,o=Iu.transition;Iu.transition=null;try{st=4,qk(t,e,n,r)}finally{st=i,Iu.transition=o}}function qk(t,e,n,r){if(N0){var i=tv(t,e,n,r);if(i===null)Ay(t,e,r,$0,n),dS(t,r);else if(dL(i,t,e,n,r))r.stopPropagation();else if(dS(t,r),e&4&&-1<fL.indexOf(t)){for(;i!==null;){var o=hh(i);if(o!==null&&J5(o),o=tv(t,e,n,r),o===null&&Ay(t,e,r,$0,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Ay(t,e,r,null,n)}}var $0=null;function tv(t,e,n,r){if($0=null,t=Bk(r),t=Ha(t),t!==null)if(e=Rl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=P5(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $0=t,null}function Q5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nL()){case Pk:return 1;case V5:return 4;case O0:case rL:return 16;case U5:return 536870912;default:return 16}default:return 16}}var qs=null,Vk=null,Zp=null;function X5(){if(Zp)return Zp;var t,e=Vk,n=e.length,r,i="value"in qs?qs.value:qs.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Zp=i.slice(t,1<r?1-r:void 0)}function Gp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gh(){return!0}function pS(){return!1}function Jr(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Gh:pS,this.isPropagationStopped=pS,this}return Dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gh)},persist:function(){},isPersistent:Gh}),e}var Oc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uk=Jr(Oc),dh=Dt({},Oc,{view:0,detail:0}),gL=Jr(dh),by,vy,nf,I1=Dt({},dh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nf&&(nf&&t.type==="mousemove"?(by=t.screenX-nf.screenX,vy=t.screenY-nf.screenY):vy=by=0,nf=t),by)},movementY:function(t){return"movementY"in t?t.movementY:vy}}),mS=Jr(I1),yL=Dt({},I1,{dataTransfer:0}),bL=Jr(yL),vL=Dt({},dh,{relatedTarget:0}),wy=Jr(vL),wL=Dt({},Oc,{animationName:0,elapsedTime:0,pseudoElement:0}),kL=Jr(wL),xL=Dt({},Oc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),EL=Jr(xL),SL=Dt({},Oc,{data:0}),gS=Jr(SL),CL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_L={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=AL[t])?!!e[t]:!1}function Hk(){return TL}var ML=Dt({},dh,{key:function(t){if(t.key){var e=CL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_L[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hk,charCode:function(t){return t.type==="keypress"?Gp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),OL=Jr(ML),DL=Dt({},I1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yS=Jr(DL),NL=Dt({},dh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hk}),$L=Jr(NL),IL=Dt({},Oc,{propertyName:0,elapsedTime:0,pseudoElement:0}),RL=Jr(IL),FL=Dt({},I1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LL=Jr(FL),BL=[9,13,27,32],Wk=Jo&&"CompositionEvent"in window,Uf=null;Jo&&"documentMode"in document&&(Uf=document.documentMode);var PL=Jo&&"TextEvent"in window&&!Uf,e8=Jo&&(!Wk||Uf&&8<Uf&&11>=Uf),bS=" ",vS=!1;function t8(t,e){switch(t){case"keyup":return BL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function n8(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gu=!1;function zL(t,e){switch(t){case"compositionend":return n8(e);case"keypress":return e.which!==32?null:(vS=!0,bS);case"textInput":return t=e.data,t===bS&&vS?null:t;default:return null}}function jL(t,e){if(gu)return t==="compositionend"||!Wk&&t8(t,e)?(t=X5(),Zp=Vk=qs=null,gu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return e8&&e.locale!=="ko"?null:e.data;default:return null}}var qL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qL[t.type]:e==="textarea"}function r8(t,e,n,r){I5(r),e=I0(e,"onChange"),0<e.length&&(n=new Uk("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Hf=null,kd=null;function VL(t){p8(t,0)}function R1(t){var e=vu(t);if(A5(e))return t}function UL(t,e){if(t==="change")return e}var i8=!1;if(Jo){var ky;if(Jo){var xy="oninput"in document;if(!xy){var kS=document.createElement("div");kS.setAttribute("oninput","return;"),xy=typeof kS.oninput=="function"}ky=xy}else ky=!1;i8=ky&&(!document.documentMode||9<document.documentMode)}function xS(){Hf&&(Hf.detachEvent("onpropertychange",o8),kd=Hf=null)}function o8(t){if(t.propertyName==="value"&&R1(kd)){var e=[];r8(e,kd,t,Bk(t)),B5(VL,e)}}function HL(t,e,n){t==="focusin"?(xS(),Hf=e,kd=n,Hf.attachEvent("onpropertychange",o8)):t==="focusout"&&xS()}function WL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return R1(kd)}function JL(t,e){if(t==="click")return R1(e)}function KL(t,e){if(t==="input"||t==="change")return R1(e)}function ZL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Di=typeof Object.is=="function"?Object.is:ZL;function xd(t,e){if(Di(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!L2.call(e,i)||!Di(t[i],e[i]))return!1}return!0}function ES(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function SS(t,e){var n=ES(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ES(n)}}function s8(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?s8(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function a8(){for(var t=window,e=A0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=A0(t.document)}return e}function Jk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GL(t){var e=a8(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&s8(n.ownerDocument.documentElement,n)){if(r!==null&&Jk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=SS(n,o);var s=SS(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var YL=Jo&&"documentMode"in document&&11>=document.documentMode,yu=null,nv=null,Wf=null,rv=!1;function CS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rv||yu==null||yu!==A0(r)||(r=yu,"selectionStart"in r&&Jk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wf&&xd(Wf,r)||(Wf=r,r=I0(nv,"onSelect"),0<r.length&&(e=new Uk("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yu)))}function Yh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bu={animationend:Yh("Animation","AnimationEnd"),animationiteration:Yh("Animation","AnimationIteration"),animationstart:Yh("Animation","AnimationStart"),transitionend:Yh("Transition","TransitionEnd")},Ey={},l8={};Jo&&(l8=document.createElement("div").style,"AnimationEvent"in window||(delete bu.animationend.animation,delete bu.animationiteration.animation,delete bu.animationstart.animation),"TransitionEvent"in window||delete bu.transitionend.transition);function F1(t){if(Ey[t])return Ey[t];if(!bu[t])return t;var e=bu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in l8)return Ey[t]=e[n];return t}var u8=F1("animationend"),c8=F1("animationiteration"),f8=F1("animationstart"),d8=F1("transitionend"),h8=new Map,_S="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ba(t,e){h8.set(t,e),Il(e,[t])}for(var Sy=0;Sy<_S.length;Sy++){var Cy=_S[Sy],QL=Cy.toLowerCase(),XL=Cy[0].toUpperCase()+Cy.slice(1);ba(QL,"on"+XL)}ba(u8,"onAnimationEnd");ba(c8,"onAnimationIteration");ba(f8,"onAnimationStart");ba("dblclick","onDoubleClick");ba("focusin","onFocus");ba("focusout","onBlur");ba(d8,"onTransitionEnd");Ku("onMouseEnter",["mouseout","mouseover"]);Ku("onMouseLeave",["mouseout","mouseover"]);Ku("onPointerEnter",["pointerout","pointerover"]);Ku("onPointerLeave",["pointerout","pointerover"]);Il("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Il("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Il("onBeforeInput",["compositionend","keypress","textInput","paste"]);Il("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Il("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Il("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eB=new Set("cancel close invalid load scroll toggle".split(" ").concat(wf));function AS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QF(r,e,void 0,t),t.currentTarget=null}function p8(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;AS(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;AS(i,a,u),o=l}}}if(M0)throw t=Q2,M0=!1,Q2=null,t}function xt(t,e){var n=e[lv];n===void 0&&(n=e[lv]=new Set);var r=t+"__bubble";n.has(r)||(m8(e,t,2,!1),n.add(r))}function _y(t,e,n){var r=0;e&&(r|=4),m8(n,t,r,e)}var Qh="_reactListening"+Math.random().toString(36).slice(2);function Ed(t){if(!t[Qh]){t[Qh]=!0,x5.forEach(function(n){n!=="selectionchange"&&(eB.has(n)||_y(n,!1,t),_y(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qh]||(e[Qh]=!0,_y("selectionchange",!1,e))}}function m8(t,e,n,r){switch(Q5(e)){case 1:var i=pL;break;case 4:i=mL;break;default:i=qk}n=i.bind(null,e,n,t),i=void 0,!Y2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ay(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Ha(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}B5(function(){var u=o,c=Bk(n),f=[];e:{var d=h8.get(t);if(d!==void 0){var h=Uk,p=t;switch(t){case"keypress":if(Gp(n)===0)break e;case"keydown":case"keyup":h=OL;break;case"focusin":p="focus",h=wy;break;case"focusout":p="blur",h=wy;break;case"beforeblur":case"afterblur":h=wy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=mS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=bL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=$L;break;case u8:case c8:case f8:h=kL;break;case d8:h=RL;break;case"scroll":h=gL;break;case"wheel":h=LL;break;case"copy":case"cut":case"paste":h=EL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=yS}var m=(e&4)!==0,b=!m&&t==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=u,w;v!==null;){w=v;var g=w.stateNode;if(w.tag===5&&g!==null&&(w=g,y!==null&&(g=yd(v,y),g!=null&&m.push(Sd(v,g,w)))),b)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==Z2&&(p=n.relatedTarget||n.fromElement)&&(Ha(p)||p[Ko]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Ha(p):null,p!==null&&(b=Rl(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(m=mS,g="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=yS,g="onPointerLeave",y="onPointerEnter",v="pointer"),b=h==null?d:vu(h),w=p==null?d:vu(p),d=new m(g,v+"leave",h,n,c),d.target=b,d.relatedTarget=w,g=null,Ha(c)===u&&(m=new m(y,v+"enter",p,n,c),m.target=w,m.relatedTarget=b,g=m),b=g,h&&p)t:{for(m=h,y=p,v=0,w=m;w;w=Wl(w))v++;for(w=0,g=y;g;g=Wl(g))w++;for(;0<v-w;)m=Wl(m),v--;for(;0<w-v;)y=Wl(y),w--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=Wl(m),y=Wl(y)}m=null}else m=null;h!==null&&TS(f,d,h,m,!1),p!==null&&b!==null&&TS(f,b,p,m,!0)}}e:{if(d=u?vu(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var x=UL;else if(wS(d))if(i8)x=KL;else{x=WL;var k=HL}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=JL);if(x&&(x=x(t,u))){r8(f,x,n,c);break e}k&&k(t,d,u),t==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&U2(d,"number",d.value)}switch(k=u?vu(u):window,t){case"focusin":(wS(k)||k.contentEditable==="true")&&(yu=k,nv=u,Wf=null);break;case"focusout":Wf=nv=yu=null;break;case"mousedown":rv=!0;break;case"contextmenu":case"mouseup":case"dragend":rv=!1,CS(f,n,c);break;case"selectionchange":if(YL)break;case"keydown":case"keyup":CS(f,n,c)}var E;if(Wk)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else gu?t8(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(e8&&n.locale!=="ko"&&(gu||D!=="onCompositionStart"?D==="onCompositionEnd"&&gu&&(E=X5()):(qs=c,Vk="value"in qs?qs.value:qs.textContent,gu=!0)),k=I0(u,D),0<k.length&&(D=new gS(D,t,null,n,c),f.push({event:D,listeners:k}),E?D.data=E:(E=n8(n),E!==null&&(D.data=E)))),(E=PL?zL(t,n):jL(t,n))&&(u=I0(u,"onBeforeInput"),0<u.length&&(c=new gS("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=E))}p8(f,e)})}function Sd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function I0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=yd(t,n),o!=null&&r.unshift(Sd(t,o,i)),o=yd(t,e),o!=null&&r.push(Sd(t,o,i))),t=t.return}return r}function Wl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function TS(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=yd(n,o),l!=null&&s.unshift(Sd(n,l,a))):i||(l=yd(n,o),l!=null&&s.push(Sd(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var tB=/\r\n?/g,nB=/\u0000|\uFFFD/g;function MS(t){return(typeof t=="string"?t:""+t).replace(tB,`
`).replace(nB,"")}function Xh(t,e,n){if(e=MS(e),MS(t)!==e&&n)throw Error(ne(425))}function R0(){}var iv=null,ov=null;function sv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var av=typeof setTimeout=="function"?setTimeout:void 0,rB=typeof clearTimeout=="function"?clearTimeout:void 0,OS=typeof Promise=="function"?Promise:void 0,iB=typeof queueMicrotask=="function"?queueMicrotask:typeof OS<"u"?function(t){return OS.resolve(null).then(t).catch(oB)}:av;function oB(t){setTimeout(function(){throw t})}function Ty(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),wd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);wd(e)}function Xs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function DS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Dc=Math.random().toString(36).slice(2),Qi="__reactFiber$"+Dc,Cd="__reactProps$"+Dc,Ko="__reactContainer$"+Dc,lv="__reactEvents$"+Dc,sB="__reactListeners$"+Dc,aB="__reactHandles$"+Dc;function Ha(t){var e=t[Qi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ko]||n[Qi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=DS(t);t!==null;){if(n=t[Qi])return n;t=DS(t)}return e}t=n,n=t.parentNode}return null}function hh(t){return t=t[Qi]||t[Ko],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function L1(t){return t[Cd]||null}var uv=[],wu=-1;function va(t){return{current:t}}function Et(t){0>wu||(t.current=uv[wu],uv[wu]=null,wu--)}function vt(t,e){wu++,uv[wu]=t.current,t.current=e}var fa={},Un=va(fa),yr=va(!1),kl=fa;function Zu(t,e){var n=t.type.contextTypes;if(!n)return fa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function br(t){return t=t.childContextTypes,t!=null}function F0(){Et(yr),Et(Un)}function NS(t,e,n){if(Un.current!==fa)throw Error(ne(168));vt(Un,e),vt(yr,n)}function g8(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ne(108,HF(t)||"Unknown",i));return Dt({},n,r)}function L0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fa,kl=Un.current,vt(Un,t),vt(yr,yr.current),!0}function $S(t,e,n){var r=t.stateNode;if(!r)throw Error(ne(169));n?(t=g8(t,e,kl),r.__reactInternalMemoizedMergedChildContext=t,Et(yr),Et(Un),vt(Un,t)):Et(yr),vt(yr,n)}var Fo=null,B1=!1,My=!1;function y8(t){Fo===null?Fo=[t]:Fo.push(t)}function lB(t){B1=!0,y8(t)}function wa(){if(!My&&Fo!==null){My=!0;var t=0,e=st;try{var n=Fo;for(st=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fo=null,B1=!1}catch(i){throw Fo!==null&&(Fo=Fo.slice(t+1)),q5(Pk,wa),i}finally{st=e,My=!1}}return null}var ku=[],xu=0,B0=null,P0=0,ii=[],oi=0,xl=null,zo=1,jo="";function Ra(t,e){ku[xu++]=P0,ku[xu++]=B0,B0=t,P0=e}function b8(t,e,n){ii[oi++]=zo,ii[oi++]=jo,ii[oi++]=xl,xl=t;var r=zo;t=jo;var i=32-Mi(r)-1;r&=~(1<<i),n+=1;var o=32-Mi(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,zo=1<<32-Mi(e)+i|n<<i|r,jo=o+t}else zo=1<<o|n<<i|r,jo=t}function Kk(t){t.return!==null&&(Ra(t,1),b8(t,1,0))}function Zk(t){for(;t===B0;)B0=ku[--xu],ku[xu]=null,P0=ku[--xu],ku[xu]=null;for(;t===xl;)xl=ii[--oi],ii[oi]=null,jo=ii[--oi],ii[oi]=null,zo=ii[--oi],ii[oi]=null}var zr=null,Lr=null,Ct=!1,Ei=null;function v8(t,e){var n=si(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function IS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zr=t,Lr=Xs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zr=t,Lr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xl!==null?{id:zo,overflow:jo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=si(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zr=t,Lr=null,!0):!1;default:return!1}}function cv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fv(t){if(Ct){var e=Lr;if(e){var n=e;if(!IS(t,e)){if(cv(t))throw Error(ne(418));e=Xs(n.nextSibling);var r=zr;e&&IS(t,e)?v8(r,n):(t.flags=t.flags&-4097|2,Ct=!1,zr=t)}}else{if(cv(t))throw Error(ne(418));t.flags=t.flags&-4097|2,Ct=!1,zr=t}}}function RS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zr=t}function ep(t){if(t!==zr)return!1;if(!Ct)return RS(t),Ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sv(t.type,t.memoizedProps)),e&&(e=Lr)){if(cv(t))throw w8(),Error(ne(418));for(;e;)v8(t,e),e=Xs(e.nextSibling)}if(RS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lr=Xs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lr=null}}else Lr=zr?Xs(t.stateNode.nextSibling):null;return!0}function w8(){for(var t=Lr;t;)t=Xs(t.nextSibling)}function Gu(){Lr=zr=null,Ct=!1}function Gk(t){Ei===null?Ei=[t]:Ei.push(t)}var uB=ts.ReactCurrentBatchConfig;function rf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function tp(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function FS(t){var e=t._init;return e(t._payload)}function k8(t){function e(y,v){if(t){var w=y.deletions;w===null?(y.deletions=[v],y.flags|=16):w.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=ra(y,v),y.index=0,y.sibling=null,y}function o(y,v,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<v?(y.flags|=2,v):w):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,w,g){return v===null||v.tag!==6?(v=Fy(w,y.mode,g),v.return=y,v):(v=i(v,w),v.return=y,v)}function l(y,v,w,g){var x=w.type;return x===mu?c(y,v,w.props.children,g,w.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===As&&FS(x)===v.type)?(g=i(v,w.props),g.ref=rf(y,v,w),g.return=y,g):(g=r0(w.type,w.key,w.props,null,y.mode,g),g.ref=rf(y,v,w),g.return=y,g)}function u(y,v,w,g){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Ly(w,y.mode,g),v.return=y,v):(v=i(v,w.children||[]),v.return=y,v)}function c(y,v,w,g,x){return v===null||v.tag!==7?(v=al(w,y.mode,g,x),v.return=y,v):(v=i(v,w),v.return=y,v)}function f(y,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Fy(""+v,y.mode,w),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Uh:return w=r0(v.type,v.key,v.props,null,y.mode,w),w.ref=rf(y,null,v),w.return=y,w;case pu:return v=Ly(v,y.mode,w),v.return=y,v;case As:var g=v._init;return f(y,g(v._payload),w)}if(bf(v)||Qc(v))return v=al(v,y.mode,w,null),v.return=y,v;tp(y,v)}return null}function d(y,v,w,g){var x=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return x!==null?null:a(y,v,""+w,g);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Uh:return w.key===x?l(y,v,w,g):null;case pu:return w.key===x?u(y,v,w,g):null;case As:return x=w._init,d(y,v,x(w._payload),g)}if(bf(w)||Qc(w))return x!==null?null:c(y,v,w,g,null);tp(y,w)}return null}function h(y,v,w,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return y=y.get(w)||null,a(v,y,""+g,x);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Uh:return y=y.get(g.key===null?w:g.key)||null,l(v,y,g,x);case pu:return y=y.get(g.key===null?w:g.key)||null,u(v,y,g,x);case As:var k=g._init;return h(y,v,w,k(g._payload),x)}if(bf(g)||Qc(g))return y=y.get(w)||null,c(v,y,g,x,null);tp(v,g)}return null}function p(y,v,w,g){for(var x=null,k=null,E=v,D=v=0,O=null;E!==null&&D<w.length;D++){E.index>D?(O=E,E=null):O=E.sibling;var N=d(y,E,w[D],g);if(N===null){E===null&&(E=O);break}t&&E&&N.alternate===null&&e(y,E),v=o(N,v,D),k===null?x=N:k.sibling=N,k=N,E=O}if(D===w.length)return n(y,E),Ct&&Ra(y,D),x;if(E===null){for(;D<w.length;D++)E=f(y,w[D],g),E!==null&&(v=o(E,v,D),k===null?x=E:k.sibling=E,k=E);return Ct&&Ra(y,D),x}for(E=r(y,E);D<w.length;D++)O=h(E,y,D,w[D],g),O!==null&&(t&&O.alternate!==null&&E.delete(O.key===null?D:O.key),v=o(O,v,D),k===null?x=O:k.sibling=O,k=O);return t&&E.forEach(function(C){return e(y,C)}),Ct&&Ra(y,D),x}function m(y,v,w,g){var x=Qc(w);if(typeof x!="function")throw Error(ne(150));if(w=x.call(w),w==null)throw Error(ne(151));for(var k=x=null,E=v,D=v=0,O=null,N=w.next();E!==null&&!N.done;D++,N=w.next()){E.index>D?(O=E,E=null):O=E.sibling;var C=d(y,E,N.value,g);if(C===null){E===null&&(E=O);break}t&&E&&C.alternate===null&&e(y,E),v=o(C,v,D),k===null?x=C:k.sibling=C,k=C,E=O}if(N.done)return n(y,E),Ct&&Ra(y,D),x;if(E===null){for(;!N.done;D++,N=w.next())N=f(y,N.value,g),N!==null&&(v=o(N,v,D),k===null?x=N:k.sibling=N,k=N);return Ct&&Ra(y,D),x}for(E=r(y,E);!N.done;D++,N=w.next())N=h(E,y,D,N.value,g),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?D:N.key),v=o(N,v,D),k===null?x=N:k.sibling=N,k=N);return t&&E.forEach(function(R){return e(y,R)}),Ct&&Ra(y,D),x}function b(y,v,w,g){if(typeof w=="object"&&w!==null&&w.type===mu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Uh:e:{for(var x=w.key,k=v;k!==null;){if(k.key===x){if(x=w.type,x===mu){if(k.tag===7){n(y,k.sibling),v=i(k,w.props.children),v.return=y,y=v;break e}}else if(k.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===As&&FS(x)===k.type){n(y,k.sibling),v=i(k,w.props),v.ref=rf(y,k,w),v.return=y,y=v;break e}n(y,k);break}else e(y,k);k=k.sibling}w.type===mu?(v=al(w.props.children,y.mode,g,w.key),v.return=y,y=v):(g=r0(w.type,w.key,w.props,null,y.mode,g),g.ref=rf(y,v,w),g.return=y,y=g)}return s(y);case pu:e:{for(k=w.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(y,v.sibling),v=i(v,w.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=Ly(w,y.mode,g),v.return=y,y=v}return s(y);case As:return k=w._init,b(y,v,k(w._payload),g)}if(bf(w))return p(y,v,w,g);if(Qc(w))return m(y,v,w,g);tp(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,w),v.return=y,y=v):(n(y,v),v=Fy(w,y.mode,g),v.return=y,y=v),s(y)):n(y,v)}return b}var Yu=k8(!0),x8=k8(!1),z0=va(null),j0=null,Eu=null,Yk=null;function Qk(){Yk=Eu=j0=null}function Xk(t){var e=z0.current;Et(z0),t._currentValue=e}function dv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ru(t,e){j0=t,Yk=Eu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gr=!0),t.firstContext=null)}function di(t){var e=t._currentValue;if(Yk!==t)if(t={context:t,memoizedValue:e,next:null},Eu===null){if(j0===null)throw Error(ne(308));Eu=t,j0.dependencies={lanes:0,firstContext:t}}else Eu=Eu.next=t;return e}var Wa=null;function ex(t){Wa===null?Wa=[t]:Wa.push(t)}function E8(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ex(e)):(n.next=i.next,i.next=n),e.interleaved=n,Zo(t,r)}function Zo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ts=!1;function tx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S8(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Uo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ea(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Zo(t,n)}return i=r.interleaved,i===null?(e.next=e,ex(r)):(e.next=i.next,i.next=e),r.interleaved=e,Zo(t,n)}function Yp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zk(t,n)}}function LS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function q0(t,e,n,r){var i=t.updateQueue;Ts=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,c=u=l=null,a=o;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(d=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Dt({},f,d);break e;case 2:Ts=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Sl|=s,t.lanes=s,t.memoizedState=f}}function BS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ne(191,i));i.call(r)}}}var ph={},mo=va(ph),_d=va(ph),Ad=va(ph);function Ja(t){if(t===ph)throw Error(ne(174));return t}function nx(t,e){switch(vt(Ad,e),vt(_d,t),vt(mo,ph),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:W2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=W2(e,t)}Et(mo),vt(mo,e)}function Qu(){Et(mo),Et(_d),Et(Ad)}function C8(t){Ja(Ad.current);var e=Ja(mo.current),n=W2(e,t.type);e!==n&&(vt(_d,t),vt(mo,n))}function rx(t){_d.current===t&&(Et(mo),Et(_d))}var Tt=va(0);function V0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Oy=[];function ix(){for(var t=0;t<Oy.length;t++)Oy[t]._workInProgressVersionPrimary=null;Oy.length=0}var Qp=ts.ReactCurrentDispatcher,Dy=ts.ReactCurrentBatchConfig,El=0,Ot=null,en=null,an=null,U0=!1,Jf=!1,Td=0,cB=0;function Rn(){throw Error(ne(321))}function ox(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Di(t[n],e[n]))return!1;return!0}function sx(t,e,n,r,i,o){if(El=o,Ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qp.current=t===null||t.memoizedState===null?pB:mB,t=n(r,i),Jf){o=0;do{if(Jf=!1,Td=0,25<=o)throw Error(ne(301));o+=1,an=en=null,e.updateQueue=null,Qp.current=gB,t=n(r,i)}while(Jf)}if(Qp.current=H0,e=en!==null&&en.next!==null,El=0,an=en=Ot=null,U0=!1,e)throw Error(ne(300));return t}function ax(){var t=Td!==0;return Td=0,t}function Wi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Ot.memoizedState=an=t:an=an.next=t,an}function hi(){if(en===null){var t=Ot.alternate;t=t!==null?t.memoizedState:null}else t=en.next;var e=an===null?Ot.memoizedState:an.next;if(e!==null)an=e,en=t;else{if(t===null)throw Error(ne(310));en=t,t={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},an===null?Ot.memoizedState=an=t:an=an.next=t}return an}function Md(t,e){return typeof e=="function"?e(t):e}function Ny(t){var e=hi(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=en,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((El&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,s=r):l=l.next=f,Ot.lanes|=c,Sl|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,Di(r,e.memoizedState)||(gr=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Ot.lanes|=o,Sl|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $y(t){var e=hi(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Di(o,e.memoizedState)||(gr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function _8(){}function A8(t,e){var n=Ot,r=hi(),i=e(),o=!Di(r.memoizedState,i);if(o&&(r.memoizedState=i,gr=!0),r=r.queue,lx(O8.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||an!==null&&an.memoizedState.tag&1){if(n.flags|=2048,Od(9,M8.bind(null,n,r,i,e),void 0,null),pn===null)throw Error(ne(349));El&30||T8(n,e,i)}return i}function T8(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function M8(t,e,n,r){e.value=n,e.getSnapshot=r,D8(e)&&N8(t)}function O8(t,e,n){return n(function(){D8(e)&&N8(t)})}function D8(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Di(t,n)}catch{return!0}}function N8(t){var e=Zo(t,1);e!==null&&Oi(e,t,1,-1)}function PS(t){var e=Wi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Md,lastRenderedState:t},e.queue=t,t=t.dispatch=hB.bind(null,Ot,t),[e.memoizedState,t]}function Od(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $8(){return hi().memoizedState}function Xp(t,e,n,r){var i=Wi();Ot.flags|=t,i.memoizedState=Od(1|e,n,void 0,r===void 0?null:r)}function P1(t,e,n,r){var i=hi();r=r===void 0?null:r;var o=void 0;if(en!==null){var s=en.memoizedState;if(o=s.destroy,r!==null&&ox(r,s.deps)){i.memoizedState=Od(e,n,o,r);return}}Ot.flags|=t,i.memoizedState=Od(1|e,n,o,r)}function zS(t,e){return Xp(8390656,8,t,e)}function lx(t,e){return P1(2048,8,t,e)}function I8(t,e){return P1(4,2,t,e)}function R8(t,e){return P1(4,4,t,e)}function F8(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function L8(t,e,n){return n=n!=null?n.concat([t]):null,P1(4,4,F8.bind(null,e,t),n)}function ux(){}function B8(t,e){var n=hi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ox(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function P8(t,e){var n=hi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ox(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function z8(t,e,n){return El&21?(Di(n,e)||(n=H5(),Ot.lanes|=n,Sl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gr=!0),t.memoizedState=n)}function fB(t,e){var n=st;st=n!==0&&4>n?n:4,t(!0);var r=Dy.transition;Dy.transition={};try{t(!1),e()}finally{st=n,Dy.transition=r}}function j8(){return hi().memoizedState}function dB(t,e,n){var r=na(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},q8(t))V8(e,n);else if(n=E8(t,e,n,r),n!==null){var i=or();Oi(n,t,r,i),U8(n,e,r)}}function hB(t,e,n){var r=na(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(q8(t))V8(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Di(a,s)){var l=e.interleaved;l===null?(i.next=i,ex(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=E8(t,e,i,r),n!==null&&(i=or(),Oi(n,t,r,i),U8(n,e,r))}}function q8(t){var e=t.alternate;return t===Ot||e!==null&&e===Ot}function V8(t,e){Jf=U0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function U8(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zk(t,n)}}var H0={readContext:di,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:!1},pB={readContext:di,useCallback:function(t,e){return Wi().memoizedState=[t,e===void 0?null:e],t},useContext:di,useEffect:zS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xp(4194308,4,F8.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xp(4,2,t,e)},useMemo:function(t,e){var n=Wi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dB.bind(null,Ot,t),[r.memoizedState,t]},useRef:function(t){var e=Wi();return t={current:t},e.memoizedState=t},useState:PS,useDebugValue:ux,useDeferredValue:function(t){return Wi().memoizedState=t},useTransition:function(){var t=PS(!1),e=t[0];return t=fB.bind(null,t[1]),Wi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ot,i=Wi();if(Ct){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),pn===null)throw Error(ne(349));El&30||T8(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,zS(O8.bind(null,r,o,t),[t]),r.flags|=2048,Od(9,M8.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Wi(),e=pn.identifierPrefix;if(Ct){var n=jo,r=zo;n=(r&~(1<<32-Mi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Td++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mB={readContext:di,useCallback:B8,useContext:di,useEffect:lx,useImperativeHandle:L8,useInsertionEffect:I8,useLayoutEffect:R8,useMemo:P8,useReducer:Ny,useRef:$8,useState:function(){return Ny(Md)},useDebugValue:ux,useDeferredValue:function(t){var e=hi();return z8(e,en.memoizedState,t)},useTransition:function(){var t=Ny(Md)[0],e=hi().memoizedState;return[t,e]},useMutableSource:_8,useSyncExternalStore:A8,useId:j8,unstable_isNewReconciler:!1},gB={readContext:di,useCallback:B8,useContext:di,useEffect:lx,useImperativeHandle:L8,useInsertionEffect:I8,useLayoutEffect:R8,useMemo:P8,useReducer:$y,useRef:$8,useState:function(){return $y(Md)},useDebugValue:ux,useDeferredValue:function(t){var e=hi();return en===null?e.memoizedState=t:z8(e,en.memoizedState,t)},useTransition:function(){var t=$y(Md)[0],e=hi().memoizedState;return[t,e]},useMutableSource:_8,useSyncExternalStore:A8,useId:j8,unstable_isNewReconciler:!1};function ki(t,e){if(t&&t.defaultProps){e=Dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var z1={isMounted:function(t){return(t=t._reactInternals)?Rl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=or(),i=na(t),o=Uo(r,i);o.payload=e,n!=null&&(o.callback=n),e=ea(t,o,i),e!==null&&(Oi(e,t,i,r),Yp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=or(),i=na(t),o=Uo(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ea(t,o,i),e!==null&&(Oi(e,t,i,r),Yp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=or(),r=na(t),i=Uo(n,r);i.tag=2,e!=null&&(i.callback=e),e=ea(t,i,r),e!==null&&(Oi(e,t,r,n),Yp(e,t,r))}};function jS(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!xd(n,r)||!xd(i,o):!0}function H8(t,e,n){var r=!1,i=fa,o=e.contextType;return typeof o=="object"&&o!==null?o=di(o):(i=br(e)?kl:Un.current,r=e.contextTypes,o=(r=r!=null)?Zu(t,i):fa),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=z1,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function qS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&z1.enqueueReplaceState(e,e.state,null)}function pv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},tx(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=di(o):(o=br(e)?kl:Un.current,i.context=Zu(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(hv(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&z1.enqueueReplaceState(i,i.state,null),q0(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Xu(t,e){try{var n="",r=e;do n+=UF(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Iy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yB=typeof WeakMap=="function"?WeakMap:Map;function W8(t,e,n){n=Uo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){J0||(J0=!0,Cv=r),mv(t,e)},n}function J8(t,e,n){n=Uo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){mv(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){mv(t,e),typeof r!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function VS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yB;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=DB.bind(null,t,e,n),e.then(t,t))}function US(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function HS(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Uo(-1,1),e.tag=2,ea(n,e,1))),n.lanes|=1),t)}var bB=ts.ReactCurrentOwner,gr=!1;function Yn(t,e,n,r){e.child=t===null?x8(e,null,n,r):Yu(e,t.child,n,r)}function WS(t,e,n,r,i){n=n.render;var o=e.ref;return Ru(e,i),r=sx(t,e,n,r,o,i),n=ax(),t!==null&&!gr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Go(t,e,i)):(Ct&&n&&Kk(e),e.flags|=1,Yn(t,e,r,i),e.child)}function JS(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!yx(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,K8(t,e,o,r,i)):(t=r0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:xd,n(s,r)&&t.ref===e.ref)return Go(t,e,i)}return e.flags|=1,t=ra(o,r),t.ref=e.ref,t.return=e,e.child=t}function K8(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(xd(o,r)&&t.ref===e.ref)if(gr=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(gr=!0);else return e.lanes=t.lanes,Go(t,e,i)}return gv(t,e,n,r,i)}function Z8(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(Cu,Ir),Ir|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,vt(Cu,Ir),Ir|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,vt(Cu,Ir),Ir|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,vt(Cu,Ir),Ir|=r;return Yn(t,e,i,n),e.child}function G8(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gv(t,e,n,r,i){var o=br(n)?kl:Un.current;return o=Zu(e,o),Ru(e,i),n=sx(t,e,n,r,o,i),r=ax(),t!==null&&!gr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Go(t,e,i)):(Ct&&r&&Kk(e),e.flags|=1,Yn(t,e,n,i),e.child)}function KS(t,e,n,r,i){if(br(n)){var o=!0;L0(e)}else o=!1;if(Ru(e,i),e.stateNode===null)e0(t,e),H8(e,n,r),pv(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=di(u):(u=br(n)?kl:Un.current,u=Zu(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&qS(e,s,r,u),Ts=!1;var d=e.memoizedState;s.state=d,q0(e,r,s,i),l=e.memoizedState,a!==r||d!==l||yr.current||Ts?(typeof c=="function"&&(hv(e,n,c,r),l=e.memoizedState),(a=Ts||jS(e,n,a,r,d,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,S8(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ki(e.type,a),s.props=u,f=e.pendingProps,d=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=di(l):(l=br(n)?kl:Un.current,l=Zu(e,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||d!==l)&&qS(e,s,r,l),Ts=!1,d=e.memoizedState,s.state=d,q0(e,r,s,i);var p=e.memoizedState;a!==f||d!==p||yr.current||Ts?(typeof h=="function"&&(hv(e,n,h,r),p=e.memoizedState),(u=Ts||jS(e,n,u,r,d,p,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return yv(t,e,n,r,o,i)}function yv(t,e,n,r,i,o){G8(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&$S(e,n,!1),Go(t,e,o);r=e.stateNode,bB.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Yu(e,t.child,null,o),e.child=Yu(e,null,a,o)):Yn(t,e,a,o),e.memoizedState=r.state,i&&$S(e,n,!0),e.child}function Y8(t){var e=t.stateNode;e.pendingContext?NS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&NS(t,e.context,!1),nx(t,e.containerInfo)}function ZS(t,e,n,r,i){return Gu(),Gk(i),e.flags|=256,Yn(t,e,n,r),e.child}var bv={dehydrated:null,treeContext:null,retryLane:0};function vv(t){return{baseLanes:t,cachePool:null,transitions:null}}function Q8(t,e,n){var r=e.pendingProps,i=Tt.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),vt(Tt,i&1),t===null)return fv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=V1(s,r,0,null),t=al(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=vv(n),e.memoizedState=bv,t):cx(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return vB(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ra(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=ra(a,o):(o=al(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?vv(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=bv,r}return o=t.child,t=o.sibling,r=ra(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cx(t,e){return e=V1({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function np(t,e,n,r){return r!==null&&Gk(r),Yu(e,t.child,null,n),t=cx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vB(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Iy(Error(ne(422))),np(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=V1({mode:"visible",children:r.children},i,0,null),o=al(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Yu(e,t.child,null,s),e.child.memoizedState=vv(s),e.memoizedState=bv,o);if(!(e.mode&1))return np(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ne(419)),r=Iy(o,r,void 0),np(t,e,s,r)}if(a=(s&t.childLanes)!==0,gr||a){if(r=pn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Zo(t,i),Oi(r,t,i,-1))}return gx(),r=Iy(Error(ne(421))),np(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=NB.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Lr=Xs(i.nextSibling),zr=e,Ct=!0,Ei=null,t!==null&&(ii[oi++]=zo,ii[oi++]=jo,ii[oi++]=xl,zo=t.id,jo=t.overflow,xl=e),e=cx(e,r.children),e.flags|=4096,e)}function GS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),dv(t.return,e,n)}function Ry(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function X8(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Yn(t,e,r.children,n),r=Tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&GS(t,n,e);else if(t.tag===19)GS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(vt(Tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&V0(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ry(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&V0(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ry(e,!0,n,null,o);break;case"together":Ry(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function e0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Go(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Sl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=ra(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ra(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wB(t,e,n){switch(e.tag){case 3:Y8(e),Gu();break;case 5:C8(e);break;case 1:br(e.type)&&L0(e);break;case 4:nx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;vt(z0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(vt(Tt,Tt.current&1),e.flags|=128,null):n&e.child.childLanes?Q8(t,e,n):(vt(Tt,Tt.current&1),t=Go(t,e,n),t!==null?t.sibling:null);vt(Tt,Tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return X8(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),vt(Tt,Tt.current),r)break;return null;case 22:case 23:return e.lanes=0,Z8(t,e,n)}return Go(t,e,n)}var eT,wv,tT,nT;eT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wv=function(){};tT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ja(mo.current);var o=null;switch(n){case"input":i=q2(t,i),r=q2(t,r),o=[];break;case"select":i=Dt({},i,{value:void 0}),r=Dt({},r,{value:void 0}),o=[];break;case"textarea":i=H2(t,i),r=H2(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=R0)}J2(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(md.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(md.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&xt("scroll",t),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};nT=function(t,e,n,r){n!==r&&(e.flags|=4)};function of(t,e){if(!Ct)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Fn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kB(t,e,n){var r=e.pendingProps;switch(Zk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(e),null;case 1:return br(e.type)&&F0(),Fn(e),null;case 3:return r=e.stateNode,Qu(),Et(yr),Et(Un),ix(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ep(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ei!==null&&(Tv(Ei),Ei=null))),wv(t,e),Fn(e),null;case 5:rx(e);var i=Ja(Ad.current);if(n=e.type,t!==null&&e.stateNode!=null)tT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ne(166));return Fn(e),null}if(t=Ja(mo.current),ep(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Qi]=e,r[Cd]=o,t=(e.mode&1)!==0,n){case"dialog":xt("cancel",r),xt("close",r);break;case"iframe":case"object":case"embed":xt("load",r);break;case"video":case"audio":for(i=0;i<wf.length;i++)xt(wf[i],r);break;case"source":xt("error",r);break;case"img":case"image":case"link":xt("error",r),xt("load",r);break;case"details":xt("toggle",r);break;case"input":oS(r,o),xt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},xt("invalid",r);break;case"textarea":aS(r,o),xt("invalid",r)}J2(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Xh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Xh(r.textContent,a,t),i=["children",""+a]):md.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&xt("scroll",r)}switch(n){case"input":Hh(r),sS(r,o,!0);break;case"textarea":Hh(r),lS(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=R0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=O5(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Qi]=e,t[Cd]=r,eT(t,e,!1,!1),e.stateNode=t;e:{switch(s=K2(n,r),n){case"dialog":xt("cancel",t),xt("close",t),i=r;break;case"iframe":case"object":case"embed":xt("load",t),i=r;break;case"video":case"audio":for(i=0;i<wf.length;i++)xt(wf[i],t);i=r;break;case"source":xt("error",t),i=r;break;case"img":case"image":case"link":xt("error",t),xt("load",t),i=r;break;case"details":xt("toggle",t),i=r;break;case"input":oS(t,r),i=q2(t,r),xt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Dt({},r,{value:void 0}),xt("invalid",t);break;case"textarea":aS(t,r),i=H2(t,r),xt("invalid",t);break;default:i=r}J2(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?$5(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&D5(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&gd(t,l):typeof l=="number"&&gd(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(md.hasOwnProperty(o)?l!=null&&o==="onScroll"&&xt("scroll",t):l!=null&&Ik(t,o,l,s))}switch(n){case"input":Hh(t),sS(t,r,!1);break;case"textarea":Hh(t),lS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ca(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Du(t,!!r.multiple,o,!1):r.defaultValue!=null&&Du(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=R0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Fn(e),null;case 6:if(t&&e.stateNode!=null)nT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ne(166));if(n=Ja(Ad.current),Ja(mo.current),ep(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qi]=e,(o=r.nodeValue!==n)&&(t=zr,t!==null))switch(t.tag){case 3:Xh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xh(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qi]=e,e.stateNode=r}return Fn(e),null;case 13:if(Et(Tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ct&&Lr!==null&&e.mode&1&&!(e.flags&128))w8(),Gu(),e.flags|=98560,o=!1;else if(o=ep(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ne(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ne(317));o[Qi]=e}else Gu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fn(e),o=!1}else Ei!==null&&(Tv(Ei),Ei=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Tt.current&1?tn===0&&(tn=3):gx())),e.updateQueue!==null&&(e.flags|=4),Fn(e),null);case 4:return Qu(),wv(t,e),t===null&&Ed(e.stateNode.containerInfo),Fn(e),null;case 10:return Xk(e.type._context),Fn(e),null;case 17:return br(e.type)&&F0(),Fn(e),null;case 19:if(Et(Tt),o=e.memoizedState,o===null)return Fn(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)of(o,!1);else{if(tn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=V0(t),s!==null){for(e.flags|=128,of(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return vt(Tt,Tt.current&1|2),e.child}t=t.sibling}o.tail!==null&&jt()>ec&&(e.flags|=128,r=!0,of(o,!1),e.lanes=4194304)}else{if(!r)if(t=V0(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),of(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ct)return Fn(e),null}else 2*jt()-o.renderingStartTime>ec&&n!==1073741824&&(e.flags|=128,r=!0,of(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=jt(),e.sibling=null,n=Tt.current,vt(Tt,r?n&1|2:n&1),e):(Fn(e),null);case 22:case 23:return mx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ir&1073741824&&(Fn(e),e.subtreeFlags&6&&(e.flags|=8192)):Fn(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function xB(t,e){switch(Zk(e),e.tag){case 1:return br(e.type)&&F0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qu(),Et(yr),Et(Un),ix(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rx(e),null;case 13:if(Et(Tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));Gu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Et(Tt),null;case 4:return Qu(),null;case 10:return Xk(e.type._context),null;case 22:case 23:return mx(),null;case 24:return null;default:return null}}var rp=!1,zn=!1,EB=typeof WeakSet=="function"?WeakSet:Set,de=null;function Su(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(t,e,r)}else n.current=null}function kv(t,e,n){try{n()}catch(r){It(t,e,r)}}var YS=!1;function SB(t,e){if(iv=N0,t=a8(),Jk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,f=t,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===t)break t;if(d===n&&++u===i&&(a=s),d===o&&++c===r&&(l=s),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ov={focusedElem:t,selectionRange:n},N0=!1,de=e;de!==null;)if(e=de,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,de=t;else for(;de!==null;){e=de;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,b=p.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:ki(e.type,m),b);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(g){It(e,e.return,g)}if(t=e.sibling,t!==null){t.return=e.return,de=t;break}de=e.return}return p=YS,YS=!1,p}function Kf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&kv(e,n,o)}i=i.next}while(i!==r)}}function j1(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rT(t){var e=t.alternate;e!==null&&(t.alternate=null,rT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qi],delete e[Cd],delete e[lv],delete e[sB],delete e[aB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iT(t){return t.tag===5||t.tag===3||t.tag===4}function QS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ev(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=R0));else if(r!==4&&(t=t.child,t!==null))for(Ev(t,e,n),t=t.sibling;t!==null;)Ev(t,e,n),t=t.sibling}function Sv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sv(t,e,n),t=t.sibling;t!==null;)Sv(t,e,n),t=t.sibling}var xn=null,xi=!1;function ds(t,e,n){for(n=n.child;n!==null;)oT(t,e,n),n=n.sibling}function oT(t,e,n){if(po&&typeof po.onCommitFiberUnmount=="function")try{po.onCommitFiberUnmount($1,n)}catch{}switch(n.tag){case 5:zn||Su(n,e);case 6:var r=xn,i=xi;xn=null,ds(t,e,n),xn=r,xi=i,xn!==null&&(xi?(t=xn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xn.removeChild(n.stateNode));break;case 18:xn!==null&&(xi?(t=xn,n=n.stateNode,t.nodeType===8?Ty(t.parentNode,n):t.nodeType===1&&Ty(t,n),wd(t)):Ty(xn,n.stateNode));break;case 4:r=xn,i=xi,xn=n.stateNode.containerInfo,xi=!0,ds(t,e,n),xn=r,xi=i;break;case 0:case 11:case 14:case 15:if(!zn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&kv(n,e,s),i=i.next}while(i!==r)}ds(t,e,n);break;case 1:if(!zn&&(Su(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){It(n,e,a)}ds(t,e,n);break;case 21:ds(t,e,n);break;case 22:n.mode&1?(zn=(r=zn)||n.memoizedState!==null,ds(t,e,n),zn=r):ds(t,e,n);break;default:ds(t,e,n)}}function XS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new EB),e.forEach(function(r){var i=$B.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function bi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:xn=a.stateNode,xi=!1;break e;case 3:xn=a.stateNode.containerInfo,xi=!0;break e;case 4:xn=a.stateNode.containerInfo,xi=!0;break e}a=a.return}if(xn===null)throw Error(ne(160));oT(o,s,i),xn=null,xi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){It(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sT(e,t),e=e.sibling}function sT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bi(e,t),ji(t),r&4){try{Kf(3,t,t.return),j1(3,t)}catch(m){It(t,t.return,m)}try{Kf(5,t,t.return)}catch(m){It(t,t.return,m)}}break;case 1:bi(e,t),ji(t),r&512&&n!==null&&Su(n,n.return);break;case 5:if(bi(e,t),ji(t),r&512&&n!==null&&Su(n,n.return),t.flags&32){var i=t.stateNode;try{gd(i,"")}catch(m){It(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&T5(i,o),K2(a,s);var u=K2(a,o);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?$5(i,f):c==="dangerouslySetInnerHTML"?D5(i,f):c==="children"?gd(i,f):Ik(i,c,f,u)}switch(a){case"input":V2(i,o);break;case"textarea":M5(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Du(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?Du(i,!!o.multiple,o.defaultValue,!0):Du(i,!!o.multiple,o.multiple?[]:"",!1))}i[Cd]=o}catch(m){It(t,t.return,m)}}break;case 6:if(bi(e,t),ji(t),r&4){if(t.stateNode===null)throw Error(ne(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(m){It(t,t.return,m)}}break;case 3:if(bi(e,t),ji(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wd(e.containerInfo)}catch(m){It(t,t.return,m)}break;case 4:bi(e,t),ji(t);break;case 13:bi(e,t),ji(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(hx=jt())),r&4&&XS(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(zn=(u=zn)||c,bi(e,t),zn=u):bi(e,t),ji(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(de=t,c=t.child;c!==null;){for(f=de=c;de!==null;){switch(d=de,h=d.child,d.tag){case 0:case 11:case 14:case 15:Kf(4,d,d.return);break;case 1:Su(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){It(r,n,m)}}break;case 5:Su(d,d.return);break;case 22:if(d.memoizedState!==null){tC(f);continue}}h!==null?(h.return=d,de=h):tC(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=N5("display",s))}catch(m){It(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){It(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:bi(e,t),ji(t),r&4&&XS(t);break;case 21:break;default:bi(e,t),ji(t)}}function ji(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(iT(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(gd(i,""),r.flags&=-33);var o=QS(t);Sv(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=QS(t);Ev(t,a,s);break;default:throw Error(ne(161))}}catch(l){It(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CB(t,e,n){de=t,aT(t)}function aT(t,e,n){for(var r=(t.mode&1)!==0;de!==null;){var i=de,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||rp;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||zn;a=rp;var u=zn;if(rp=s,(zn=l)&&!u)for(de=i;de!==null;)s=de,l=s.child,s.tag===22&&s.memoizedState!==null?nC(i):l!==null?(l.return=s,de=l):nC(i);for(;o!==null;)de=o,aT(o),o=o.sibling;de=i,rp=a,zn=u}eC(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,de=o):eC(t)}}function eC(t){for(;de!==null;){var e=de;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zn||j1(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ki(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&BS(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}BS(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&wd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}zn||e.flags&512&&xv(e)}catch(d){It(e,e.return,d)}}if(e===t){de=null;break}if(n=e.sibling,n!==null){n.return=e.return,de=n;break}de=e.return}}function tC(t){for(;de!==null;){var e=de;if(e===t){de=null;break}var n=e.sibling;if(n!==null){n.return=e.return,de=n;break}de=e.return}}function nC(t){for(;de!==null;){var e=de;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{j1(4,e)}catch(l){It(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){It(e,i,l)}}var o=e.return;try{xv(e)}catch(l){It(e,o,l)}break;case 5:var s=e.return;try{xv(e)}catch(l){It(e,s,l)}}}catch(l){It(e,e.return,l)}if(e===t){de=null;break}var a=e.sibling;if(a!==null){a.return=e.return,de=a;break}de=e.return}}var _B=Math.ceil,W0=ts.ReactCurrentDispatcher,fx=ts.ReactCurrentOwner,ui=ts.ReactCurrentBatchConfig,Ke=0,pn=null,Zt=null,On=0,Ir=0,Cu=va(0),tn=0,Dd=null,Sl=0,q1=0,dx=0,Zf=null,dr=null,hx=0,ec=1/0,Io=null,J0=!1,Cv=null,ta=null,ip=!1,Vs=null,K0=0,Gf=0,_v=null,t0=-1,n0=0;function or(){return Ke&6?jt():t0!==-1?t0:t0=jt()}function na(t){return t.mode&1?Ke&2&&On!==0?On&-On:uB.transition!==null?(n0===0&&(n0=H5()),n0):(t=st,t!==0||(t=window.event,t=t===void 0?16:Q5(t.type)),t):1}function Oi(t,e,n,r){if(50<Gf)throw Gf=0,_v=null,Error(ne(185));fh(t,n,r),(!(Ke&2)||t!==pn)&&(t===pn&&(!(Ke&2)&&(q1|=n),tn===4&&Fs(t,On)),vr(t,r),n===1&&Ke===0&&!(e.mode&1)&&(ec=jt()+500,B1&&wa()))}function vr(t,e){var n=t.callbackNode;uL(t,e);var r=D0(t,t===pn?On:0);if(r===0)n!==null&&fS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fS(n),e===1)t.tag===0?lB(rC.bind(null,t)):y8(rC.bind(null,t)),iB(function(){!(Ke&6)&&wa()}),n=null;else{switch(W5(r)){case 1:n=Pk;break;case 4:n=V5;break;case 16:n=O0;break;case 536870912:n=U5;break;default:n=O0}n=mT(n,lT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lT(t,e){if(t0=-1,n0=0,Ke&6)throw Error(ne(327));var n=t.callbackNode;if(Fu()&&t.callbackNode!==n)return null;var r=D0(t,t===pn?On:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Z0(t,r);else{e=r;var i=Ke;Ke|=2;var o=cT();(pn!==t||On!==e)&&(Io=null,ec=jt()+500,sl(t,e));do try{MB();break}catch(a){uT(t,a)}while(!0);Qk(),W0.current=o,Ke=i,Zt!==null?e=0:(pn=null,On=0,e=tn)}if(e!==0){if(e===2&&(i=X2(t),i!==0&&(r=i,e=Av(t,i))),e===1)throw n=Dd,sl(t,0),Fs(t,r),vr(t,jt()),n;if(e===6)Fs(t,r);else{if(i=t.current.alternate,!(r&30)&&!AB(i)&&(e=Z0(t,r),e===2&&(o=X2(t),o!==0&&(r=o,e=Av(t,o))),e===1))throw n=Dd,sl(t,0),Fs(t,r),vr(t,jt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ne(345));case 2:Fa(t,dr,Io);break;case 3:if(Fs(t,r),(r&130023424)===r&&(e=hx+500-jt(),10<e)){if(D0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){or(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=av(Fa.bind(null,t,dr,Io),e);break}Fa(t,dr,Io);break;case 4:if(Fs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Mi(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_B(r/1960))-r,10<r){t.timeoutHandle=av(Fa.bind(null,t,dr,Io),r);break}Fa(t,dr,Io);break;case 5:Fa(t,dr,Io);break;default:throw Error(ne(329))}}}return vr(t,jt()),t.callbackNode===n?lT.bind(null,t):null}function Av(t,e){var n=Zf;return t.current.memoizedState.isDehydrated&&(sl(t,e).flags|=256),t=Z0(t,e),t!==2&&(e=dr,dr=n,e!==null&&Tv(e)),t}function Tv(t){dr===null?dr=t:dr.push.apply(dr,t)}function AB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Di(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fs(t,e){for(e&=~dx,e&=~q1,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mi(e),r=1<<n;t[n]=-1,e&=~r}}function rC(t){if(Ke&6)throw Error(ne(327));Fu();var e=D0(t,0);if(!(e&1))return vr(t,jt()),null;var n=Z0(t,e);if(t.tag!==0&&n===2){var r=X2(t);r!==0&&(e=r,n=Av(t,r))}if(n===1)throw n=Dd,sl(t,0),Fs(t,e),vr(t,jt()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fa(t,dr,Io),vr(t,jt()),null}function px(t,e){var n=Ke;Ke|=1;try{return t(e)}finally{Ke=n,Ke===0&&(ec=jt()+500,B1&&wa())}}function Cl(t){Vs!==null&&Vs.tag===0&&!(Ke&6)&&Fu();var e=Ke;Ke|=1;var n=ui.transition,r=st;try{if(ui.transition=null,st=1,t)return t()}finally{st=r,ui.transition=n,Ke=e,!(Ke&6)&&wa()}}function mx(){Ir=Cu.current,Et(Cu)}function sl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rB(n)),Zt!==null)for(n=Zt.return;n!==null;){var r=n;switch(Zk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&F0();break;case 3:Qu(),Et(yr),Et(Un),ix();break;case 5:rx(r);break;case 4:Qu();break;case 13:Et(Tt);break;case 19:Et(Tt);break;case 10:Xk(r.type._context);break;case 22:case 23:mx()}n=n.return}if(pn=t,Zt=t=ra(t.current,null),On=Ir=e,tn=0,Dd=null,dx=q1=Sl=0,dr=Zf=null,Wa!==null){for(e=0;e<Wa.length;e++)if(n=Wa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Wa=null}return t}function uT(t,e){do{var n=Zt;try{if(Qk(),Qp.current=H0,U0){for(var r=Ot.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}U0=!1}if(El=0,an=en=Ot=null,Jf=!1,Td=0,fx.current=null,n===null||n.return===null){tn=1,Dd=e,Zt=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=On,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=US(s);if(h!==null){h.flags&=-257,HS(h,s,a,o,e),h.mode&1&&VS(o,u,e),e=h,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){VS(o,u,e),gx();break e}l=Error(ne(426))}}else if(Ct&&a.mode&1){var b=US(s);if(b!==null){!(b.flags&65536)&&(b.flags|=256),HS(b,s,a,o,e),Gk(Xu(l,a));break e}}o=l=Xu(l,a),tn!==4&&(tn=2),Zf===null?Zf=[o]:Zf.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=W8(o,l,e);LS(o,y);break e;case 1:a=l;var v=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ta===null||!ta.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var g=J8(o,a,e);LS(o,g);break e}}o=o.return}while(o!==null)}dT(n)}catch(x){e=x,Zt===n&&n!==null&&(Zt=n=n.return);continue}break}while(!0)}function cT(){var t=W0.current;return W0.current=H0,t===null?H0:t}function gx(){(tn===0||tn===3||tn===2)&&(tn=4),pn===null||!(Sl&268435455)&&!(q1&268435455)||Fs(pn,On)}function Z0(t,e){var n=Ke;Ke|=2;var r=cT();(pn!==t||On!==e)&&(Io=null,sl(t,e));do try{TB();break}catch(i){uT(t,i)}while(!0);if(Qk(),Ke=n,W0.current=r,Zt!==null)throw Error(ne(261));return pn=null,On=0,tn}function TB(){for(;Zt!==null;)fT(Zt)}function MB(){for(;Zt!==null&&!eL();)fT(Zt)}function fT(t){var e=pT(t.alternate,t,Ir);t.memoizedProps=t.pendingProps,e===null?dT(t):Zt=e,fx.current=null}function dT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xB(n,e),n!==null){n.flags&=32767,Zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tn=6,Zt=null;return}}else if(n=kB(n,e,Ir),n!==null){Zt=n;return}if(e=e.sibling,e!==null){Zt=e;return}Zt=e=t}while(e!==null);tn===0&&(tn=5)}function Fa(t,e,n){var r=st,i=ui.transition;try{ui.transition=null,st=1,OB(t,e,n,r)}finally{ui.transition=i,st=r}return null}function OB(t,e,n,r){do Fu();while(Vs!==null);if(Ke&6)throw Error(ne(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(cL(t,o),t===pn&&(Zt=pn=null,On=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ip||(ip=!0,mT(O0,function(){return Fu(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ui.transition,ui.transition=null;var s=st;st=1;var a=Ke;Ke|=4,fx.current=null,SB(t,n),sT(n,t),GL(ov),N0=!!iv,ov=iv=null,t.current=n,CB(n),tL(),Ke=a,st=s,ui.transition=o}else t.current=n;if(ip&&(ip=!1,Vs=t,K0=i),o=t.pendingLanes,o===0&&(ta=null),iL(n.stateNode),vr(t,jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(J0)throw J0=!1,t=Cv,Cv=null,t;return K0&1&&t.tag!==0&&Fu(),o=t.pendingLanes,o&1?t===_v?Gf++:(Gf=0,_v=t):Gf=0,wa(),null}function Fu(){if(Vs!==null){var t=W5(K0),e=ui.transition,n=st;try{if(ui.transition=null,st=16>t?16:t,Vs===null)var r=!1;else{if(t=Vs,Vs=null,K0=0,Ke&6)throw Error(ne(331));var i=Ke;for(Ke|=4,de=t.current;de!==null;){var o=de,s=o.child;if(de.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(de=u;de!==null;){var c=de;switch(c.tag){case 0:case 11:case 15:Kf(8,c,o)}var f=c.child;if(f!==null)f.return=c,de=f;else for(;de!==null;){c=de;var d=c.sibling,h=c.return;if(rT(c),c===u){de=null;break}if(d!==null){d.return=h,de=d;break}de=h}}}var p=o.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(m!==null)}}de=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,de=s;else e:for(;de!==null;){if(o=de,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Kf(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,de=y;break e}de=o.return}}var v=t.current;for(de=v;de!==null;){s=de;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,de=w;else e:for(s=v;de!==null;){if(a=de,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:j1(9,a)}}catch(x){It(a,a.return,x)}if(a===s){de=null;break e}var g=a.sibling;if(g!==null){g.return=a.return,de=g;break e}de=a.return}}if(Ke=i,wa(),po&&typeof po.onPostCommitFiberRoot=="function")try{po.onPostCommitFiberRoot($1,t)}catch{}r=!0}return r}finally{st=n,ui.transition=e}}return!1}function iC(t,e,n){e=Xu(n,e),e=W8(t,e,1),t=ea(t,e,1),e=or(),t!==null&&(fh(t,1,e),vr(t,e))}function It(t,e,n){if(t.tag===3)iC(t,t,n);else for(;e!==null;){if(e.tag===3){iC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ta===null||!ta.has(r))){t=Xu(n,t),t=J8(e,t,1),e=ea(e,t,1),t=or(),e!==null&&(fh(e,1,t),vr(e,t));break}}e=e.return}}function DB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=or(),t.pingedLanes|=t.suspendedLanes&n,pn===t&&(On&n)===n&&(tn===4||tn===3&&(On&130023424)===On&&500>jt()-hx?sl(t,0):dx|=n),vr(t,e)}function hT(t,e){e===0&&(t.mode&1?(e=Kh,Kh<<=1,!(Kh&130023424)&&(Kh=4194304)):e=1);var n=or();t=Zo(t,e),t!==null&&(fh(t,e,n),vr(t,n))}function NB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hT(t,n)}function $B(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(e),hT(t,n)}var pT;pT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yr.current)gr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gr=!1,wB(t,e,n);gr=!!(t.flags&131072)}else gr=!1,Ct&&e.flags&1048576&&b8(e,P0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;e0(t,e),t=e.pendingProps;var i=Zu(e,Un.current);Ru(e,n),i=sx(null,e,r,t,i,n);var o=ax();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,br(r)?(o=!0,L0(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tx(e),i.updater=z1,e.stateNode=i,i._reactInternals=e,pv(e,r,t,n),e=yv(null,e,r,!0,o,n)):(e.tag=0,Ct&&o&&Kk(e),Yn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(e0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=RB(r),t=ki(r,t),i){case 0:e=gv(null,e,r,t,n);break e;case 1:e=KS(null,e,r,t,n);break e;case 11:e=WS(null,e,r,t,n);break e;case 14:e=JS(null,e,r,ki(r.type,t),n);break e}throw Error(ne(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),gv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),KS(t,e,r,i,n);case 3:e:{if(Y8(e),t===null)throw Error(ne(387));r=e.pendingProps,o=e.memoizedState,i=o.element,S8(t,e),q0(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Xu(Error(ne(423)),e),e=ZS(t,e,r,n,i);break e}else if(r!==i){i=Xu(Error(ne(424)),e),e=ZS(t,e,r,n,i);break e}else for(Lr=Xs(e.stateNode.containerInfo.firstChild),zr=e,Ct=!0,Ei=null,n=x8(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gu(),r===i){e=Go(t,e,n);break e}Yn(t,e,r,n)}e=e.child}return e;case 5:return C8(e),t===null&&fv(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,sv(r,i)?s=null:o!==null&&sv(r,o)&&(e.flags|=32),G8(t,e),Yn(t,e,s,n),e.child;case 6:return t===null&&fv(e),null;case 13:return Q8(t,e,n);case 4:return nx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yu(e,null,r,n):Yn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),WS(t,e,r,i,n);case 7:return Yn(t,e,e.pendingProps,n),e.child;case 8:return Yn(t,e,e.pendingProps.children,n),e.child;case 12:return Yn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,vt(z0,r._currentValue),r._currentValue=s,o!==null)if(Di(o.value,s)){if(o.children===i.children&&!yr.current){e=Go(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Uo(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),dv(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ne(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),dv(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Yn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ru(e,n),i=di(i),r=r(i),e.flags|=1,Yn(t,e,r,n),e.child;case 14:return r=e.type,i=ki(r,e.pendingProps),i=ki(r.type,i),JS(t,e,r,i,n);case 15:return K8(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),e0(t,e),e.tag=1,br(r)?(t=!0,L0(e)):t=!1,Ru(e,n),H8(e,r,i),pv(e,r,i,n),yv(null,e,r,!0,t,n);case 19:return X8(t,e,n);case 22:return Z8(t,e,n)}throw Error(ne(156,e.tag))};function mT(t,e){return q5(t,e)}function IB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(t,e,n,r){return new IB(t,e,n,r)}function yx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RB(t){if(typeof t=="function")return yx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fk)return 11;if(t===Lk)return 14}return 2}function ra(t,e){var n=t.alternate;return n===null?(n=si(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function r0(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")yx(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case mu:return al(n.children,i,o,e);case Rk:s=8,i|=8;break;case B2:return t=si(12,n,e,i|2),t.elementType=B2,t.lanes=o,t;case P2:return t=si(13,n,e,i),t.elementType=P2,t.lanes=o,t;case z2:return t=si(19,n,e,i),t.elementType=z2,t.lanes=o,t;case C5:return V1(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E5:s=10;break e;case S5:s=9;break e;case Fk:s=11;break e;case Lk:s=14;break e;case As:s=16,r=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=si(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function al(t,e,n,r){return t=si(7,t,r,e),t.lanes=n,t}function V1(t,e,n,r){return t=si(22,t,r,e),t.elementType=C5,t.lanes=n,t.stateNode={isHidden:!1},t}function Fy(t,e,n){return t=si(6,t,null,e),t.lanes=n,t}function Ly(t,e,n){return e=si(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FB(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yy(0),this.expirationTimes=yy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yy(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bx(t,e,n,r,i,o,s,a,l){return t=new FB(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=si(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tx(o),t}function LB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gT(t){if(!t)return fa;t=t._reactInternals;e:{if(Rl(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(br(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(br(n))return g8(t,n,e)}return e}function yT(t,e,n,r,i,o,s,a,l){return t=bx(n,r,!0,t,i,o,s,a,l),t.context=gT(null),n=t.current,r=or(),i=na(n),o=Uo(r,i),o.callback=e??null,ea(n,o,i),t.current.lanes=i,fh(t,i,r),vr(t,r),t}function U1(t,e,n,r){var i=e.current,o=or(),s=na(i);return n=gT(n),e.context===null?e.context=n:e.pendingContext=n,e=Uo(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ea(i,e,s),t!==null&&(Oi(t,i,s,o),Yp(t,i,s)),s}function G0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function oC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vx(t,e){oC(t,e),(t=t.alternate)&&oC(t,e)}function BB(){return null}var bT=typeof reportError=="function"?reportError:function(t){console.error(t)};function wx(t){this._internalRoot=t}H1.prototype.render=wx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));U1(t,e,null,null)};H1.prototype.unmount=wx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Cl(function(){U1(null,t,null,null)}),e[Ko]=null}};function H1(t){this._internalRoot=t}H1.prototype.unstable_scheduleHydration=function(t){if(t){var e=Z5();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rs.length&&e!==0&&e<Rs[n].priority;n++);Rs.splice(n,0,t),n===0&&Y5(t)}};function kx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function W1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sC(){}function PB(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=G0(s);o.call(u)}}var s=yT(e,r,t,0,null,!1,!1,"",sC);return t._reactRootContainer=s,t[Ko]=s.current,Ed(t.nodeType===8?t.parentNode:t),Cl(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=G0(l);a.call(u)}}var l=bx(t,0,!1,null,null,!1,!1,"",sC);return t._reactRootContainer=l,t[Ko]=l.current,Ed(t.nodeType===8?t.parentNode:t),Cl(function(){U1(e,l,n,r)}),l}function J1(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=G0(s);a.call(l)}}U1(e,s,t,i)}else s=PB(n,e,t,i,r);return G0(s)}J5=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vf(e.pendingLanes);n!==0&&(zk(e,n|1),vr(e,jt()),!(Ke&6)&&(ec=jt()+500,wa()))}break;case 13:Cl(function(){var r=Zo(t,1);if(r!==null){var i=or();Oi(r,t,1,i)}}),vx(t,1)}};jk=function(t){if(t.tag===13){var e=Zo(t,134217728);if(e!==null){var n=or();Oi(e,t,134217728,n)}vx(t,134217728)}};K5=function(t){if(t.tag===13){var e=na(t),n=Zo(t,e);if(n!==null){var r=or();Oi(n,t,e,r)}vx(t,e)}};Z5=function(){return st};G5=function(t,e){var n=st;try{return st=t,e()}finally{st=n}};G2=function(t,e,n){switch(e){case"input":if(V2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=L1(r);if(!i)throw Error(ne(90));A5(r),V2(r,i)}}}break;case"textarea":M5(t,n);break;case"select":e=n.value,e!=null&&Du(t,!!n.multiple,e,!1)}};F5=px;L5=Cl;var zB={usingClientEntryPoint:!1,Events:[hh,vu,L1,I5,R5,px]},sf={findFiberByHostInstance:Ha,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jB={bundleType:sf.bundleType,version:sf.version,rendererPackageName:sf.rendererPackageName,rendererConfig:sf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ts.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=z5(t),t===null?null:t.stateNode},findFiberByHostInstance:sf.findFiberByHostInstance||BB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var op=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!op.isDisabled&&op.supportsFiber)try{$1=op.inject(jB),po=op}catch{}}Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zB;Wr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kx(e))throw Error(ne(200));return LB(t,e,null,n)};Wr.createRoot=function(t,e){if(!kx(t))throw Error(ne(299));var n=!1,r="",i=bT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=bx(t,1,!1,null,null,n,!1,r,i),t[Ko]=e.current,Ed(t.nodeType===8?t.parentNode:t),new wx(e)};Wr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=z5(e),t=t===null?null:t.stateNode,t};Wr.flushSync=function(t){return Cl(t)};Wr.hydrate=function(t,e,n){if(!W1(e))throw Error(ne(200));return J1(null,t,e,!0,n)};Wr.hydrateRoot=function(t,e,n){if(!kx(t))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=bT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=yT(e,null,t,1,n??null,i,!1,o,s),t[Ko]=e.current,Ed(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new H1(e)};Wr.render=function(t,e,n){if(!W1(e))throw Error(ne(200));return J1(null,t,e,!1,n)};Wr.unmountComponentAtNode=function(t){if(!W1(t))throw Error(ne(40));return t._reactRootContainer?(Cl(function(){J1(null,null,t,!1,function(){t._reactRootContainer=null,t[Ko]=null})}),!0):!1};Wr.unstable_batchedUpdates=px;Wr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!W1(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return J1(t,e,n,!1,r)};Wr.version="18.3.1-next-f1338f8080-20240426";function vT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vT)}catch(t){console.error(t)}}vT(),v5.exports=Wr;var K1=v5.exports;const qB=D1(K1);var aC=K1;F2.createRoot=aC.createRoot,F2.hydrateRoot=aC.hydrateRoot;function En(t){this.content=t}En.prototype={constructor:En,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new En(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new En(n)},addToStart:function(t,e){return new En([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new En(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new En(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=En.from(t),t.size?new En(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=En.from(t),t.size?new En(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=En.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};En.from=function(t){if(t instanceof En)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new En(e)};function wT(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=wT(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function kT(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let u=0,c=Math.min(s.text.length,a.text.length);for(;u<c&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let u=kT(s.content,a.content,n-1,r-1);if(u)return u}n-=l,r-=l}}let oe=class Zn{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,a=0;a<n;s++){let l=this.content[s],u=a+l.nodeSize;if(u>e&&r(l,i+a,o||null,s)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,e-c),Math.min(l.content.size,n-c),r,i+c)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(a,l)=>{let u=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&r&&(s?s=!1:o+=r),o+=u},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new Zn(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=l}return new Zn(r,i)}cutByIndex(e,n){return e==n?Zn.empty:e==0&&n==this.content.length?this:new Zn(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Zn(i,o)}addToStart(e){return new Zn([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Zn(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return wT(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return kT(this,e,n,r)}findIndex(e,n=-1){if(e==0)return sp(0,e);if(e==this.size)return sp(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?sp(r+1,s):sp(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Zn.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Zn(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Zn.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new Zn(n||e,r)}static from(e){if(!e)return Zn.empty;if(e instanceof Zn)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Zn([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};oe.empty=new oe([],0);const By={index:0,offset:0};function sp(t,e){return By.index=t,By.offset=e,By}function Y0(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Y0(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Y0(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ft=class Mv{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Y0(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Mv.none;if(e instanceof Mv)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ft.none=[];let Q0=class extends Error{},he=class iu{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=ET(this.content,e+this.openStart,n);return r&&new iu(r,this.openStart,this.openEnd)}removeBetween(e,n){return new iu(xT(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return iu.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new iu(oe.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new iu(e,r,i)}};he.empty=new he(oe.empty,0,0);function xT(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(xT(o.content,e-i-1,n-i-1)))}function ET(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=ET(s.content,e-o-1,n);return a&&t.replaceChild(i,s.copy(a))}function VB(t,e,n){if(n.openStart>t.depth)throw new Q0("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Q0("Inconsistent open depths");return ST(t,e,n,0)}function ST(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=ST(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return ul(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=UB(n,t);return ul(o,_T(t,s,a,e,r))}else return ul(o,X0(t,e,r))}function CT(t,e){if(!e.type.compatibleContent(t.type))throw new Q0("Cannot join "+e.type.name+" onto "+t.type.name)}function Ov(t,e,n){let r=t.node(n);return CT(r,e.node(n)),r}function ll(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Yf(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(ll(t.nodeAfter,r),o++));for(let a=o;a<s;a++)ll(i.child(a),r);e&&e.depth==n&&e.textOffset&&ll(e.nodeBefore,r)}function ul(t,e){return t.type.checkContent(e),t.copy(e)}function _T(t,e,n,r,i){let o=t.depth>i&&Ov(t,e,i+1),s=r.depth>i&&Ov(n,r,i+1),a=[];return Yf(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(CT(o,s),ll(ul(o,_T(t,e,n,r,i+1)),a)):(o&&ll(ul(o,X0(t,e,i+1)),a),Yf(e,n,i,a),s&&ll(ul(s,X0(n,r,i+1)),a)),Yf(r,null,i,a),new oe(a)}function X0(t,e,n){let r=[];if(Yf(null,t,n,r),t.depth>n){let i=Ov(t,e,n+1);ll(ul(i,X0(t,e,n+1)),r)}return Yf(e,null,n,r),new oe(r)}function UB(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(oe.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}let lC=class Dv{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ft.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new em(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),u=o-l;if(r.push(s,a,i+l),!u||(s=s.child(a),s.isText))break;o=u-1,i+=l+1}return new Dv(n,r,o)}static resolveCached(e,n){let r=uC.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else uC.set(e,r=new HB);let i=r.elts[r.i]=Dv.resolve(e,n);return r.i=(r.i+1)%WB,i}},HB=class{constructor(){this.elts=[],this.i=0}};const WB=12,uC=new WeakMap;let em=class{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}};const JB=Object.create(null);let cl=class Nv{constructor(e,n,r,i=ft.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||oe.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Y0(this.attrs,n||e.defaultAttrs||JB)&&ft.sameSet(this.marks,r||ft.none)}copy(e=null){return e==this.content?this:new Nv(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Nv(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return he.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),a=i.start(s),u=i.node(s).content.cut(i.pos-a,o.pos-a);return new he(u,i.depth-s,o.depth-s)}replace(e,n,r){return VB(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return lC.resolveCached(this,e)}resolveNoCache(e){return lC.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),AT(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=oe.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ft.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ft.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=oe.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};cl.prototype.text=void 0;let KB=class $v extends cl{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):AT(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new $v(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new $v(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function AT(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}let Nd=class TT{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new ZB(e,n);if(r.next==null)return TT.empty;let i=MT(r);r.next&&r.err("Unexpected trailing text");let o=nP(tP(i));return rP(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return oe.from(a.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:f}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=o(f,a.concat(c));if(d)return d}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}};Nd.empty=new Nd(!0);let ZB=class{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function MT(t){let e=[];do e.push(GB(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function GB(t){let e=[];do e.push(YB(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function YB(t){let e=eP(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=QB(t,e);else break;return e}function cC(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function QB(t,e){let n=cC(t),r=n;return t.eat(",")&&(t.next!="}"?r=cC(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function XB(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function eP(t){if(t.eat("(")){let e=MT(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=XB(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function tP(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let u={term:l,to:a};return e[s].push(u),u}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,u)=>l.concat(o(u,a)),[]);if(s.type=="seq")for(let l=0;;l++){let u=o(s.exprs[l],a);if(l==s.exprs.length-1)return u;i(u,a=n())}else if(s.type=="star"){let l=n();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let u=0;u<s.min;u++){let c=n();i(o(s.expr,l),c),l=c}if(s.max==-1)i(o(s.expr,l),l);else for(let u=s.min;u<s.max;u++){let c=n();r(l,c),i(o(s.expr,l),c),l=c}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function OT(t,e){return e-t}function fC(t,e){let n=[];return r(e),n.sort(OT);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&n.indexOf(l)==-1&&r(l)}}}function nP(t){let e=Object.create(null);return n(fC(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let c=0;c<i.length;c++)i[c][0]==a&&(u=i[c][1]);fC(t,l).forEach(c=>{u||i.push([a,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new Nd(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(OT);o.next.push({type:i[s][0],next:e[a.join(",")]||n(a)})}return o}}function rP(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function DT(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function NT(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function $T(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function IT(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new oP(t[n]);return e}let dC=class RT{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=IT(r.attrs),this.defaultAttrs=DT(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Nd.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:NT(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new cl(this,this.computeAttrs(e),oe.from(n),ft.setFrom(r))}createChecked(e=null,n,r){return n=oe.from(n),this.checkContent(n),new cl(this,this.computeAttrs(e),n,ft.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=oe.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(oe.empty,!0);return o?new cl(this,e,n.append(o),ft.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){$T(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ft.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new RT(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function iP(t){let e=t.split("|");return n=>{let r=n===null?"null":typeof n;if(e.indexOf(r)<0)throw new RangeError(`Expected value of type ${e}, got ${r}`)}}let oP=class{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default,this.validate=typeof e.validate=="string"?iP(e.validate):e.validate}get isRequired(){return!this.hasDefault}},FT=class LT{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=IT(i.attrs),this.excluded=null;let o=DT(this.attrs);this.instance=o?new ft(this,o):null}create(e=null){return!e&&this.instance?this.instance:new ft(this,NT(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new LT(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){$T(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}},BT=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=En.from(e.nodes),n.marks=En.from(e.marks||{}),this.nodes=dC.compile(this.spec.nodes,this),this.marks=FT.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=Nd.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?hC(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:hC(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof dC){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new KB(r,r.defaultAttrs,e,ft.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return cl.fromJSON(this,e)}markFromJSON(e){return ft.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}};function hC(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function sP(t){return t.tag!=null}function aP(t){return t.style!=null}let xx=class Iv{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(sP(i))this.tags.push(i);else if(aP(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new mC(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new mC(this,n,!0);return r.addAll(e,n.from,n.to),he.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(cP(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=gC(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=gC(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Iv(e,Iv.schemaRules(e)))}};const PT={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},lP={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},zT={ol:!0,ul:!0},tm=1,nm=2,Qf=4;function pC(t,e,n){return e!=null?(e?tm:0)|(e==="full"?nm:0):t&&t.whitespace=="pre"?tm|nm:n&~Qf}let ap=class{constructor(e,n,r,i,o,s,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=a,this.content=[],this.activeMarks=ft.none,this.stashMarks=[],this.match=s||(a&Qf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(oe.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&tm)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=oe.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(oe.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):fP(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!PT.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},mC=class{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,o,s=pC(null,n.preserveWhitespace,0)|(r?Qf:0);i?o=new ap(i.type,i.attrs,ft.none,ft.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new ap(null,null,ft.none,ft.none,!0,null,s):o=new ap(e.schema.topNodeType,null,ft.none,ft.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.style;if(!r||!r.length)return n();let i=this.readStyles(e.style);if(!i)return;let[o,s]=i,a=this.top;for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l]);n();for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&nm||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&tm)r.options&nm?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;zT.hasOwnProperty(r)&&this.parser.normalizeLists&&uP(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(o?o.ignore:lP.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let s,a=this.top,l=this.needsBlock;if(PT.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),s=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}o&&o.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),s&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,o,o.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=ft.none,r=ft.none;if(e.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=e.getPropertyValue(o);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(o,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(u=>{l.clearMark(u)&&(r=u.addToSet(r))}):n=this.parser.schema.marks[l.mark].create(l.attrs).addToSet(n),l.consuming===!1)a=l;else break}}return[n,r]}addElementByRule(e,n,r){let i,o,s;n.node?(o=this.parser.schema.nodes[n.node],o.isLeaf?this.insertNode(o.create(n.attrs))||this.leafFallback(e):i=this.enter(o,n.attrs||null,n.preserveWhitespace)):(s=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(s));let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,s&&this.removePendingMark(s,a)}addAll(e,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=r==null?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let o=this.nodes[i],s=o.findWrapping(e);if(s&&(!n||n.length>s.length)&&(n=s,r=o,!s.length)||o.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let s=pC(e,i,o.options);o.options&Qf&&o.content.length==0&&(s|=Qf),this.nodes.push(new ap(e,n,o.activeMarks,o.pendingMarks,r,null,s)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let u=n[a];if(u==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!c||c.name!=u&&c.groups.indexOf(u)==-1)return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=dP(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let s=i.popFromStashMark(e);s&&i.type&&i.type.allowsMarkType(s.type)&&(i.activeMarks=s.addToSet(i.activeMarks))}if(i==n)break}}};function uP(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&zT.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function cP(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function gC(t){let e={};for(let n in t)e[n]=t[n];return e}function fP(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:c}=a.edge(l);if(u==e||o.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}function dP(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}let mh=class jT{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Py(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let u=s.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(o[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let u=s.marks[l++],c=this.serializeMark(u,s.isInline,n);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=i0(Py(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&i0(Py(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null){return i0(e,n,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new jT(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=yC(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return yC(e.marks)}};function yC(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Py(t){return t.document||window.document}const bC=new WeakMap;function hP(t){let e=bC.get(t);return e===void 0&&bC.set(t,e=pP(t)),e}function pP(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function i0(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=hP(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let f in u)if(u[f]!=null){let d=f.indexOf(" ");d>0?l.setAttributeNS(f.slice(0,d),f.slice(d+1),u[f]):l.setAttribute(f,u[f])}}for(let f=c;f<e.length;f++){let d=e[f];if(d===0){if(f<e.length-1||f>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:p}=i0(t,d,n,r);if(l.appendChild(h),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const qT=65535,VT=Math.pow(2,16);function mP(t,e){return t+e*VT}function vC(t){return t&qT}function gP(t){return(t-(t&qT))/VT}const UT=1,HT=2,o0=4,WT=8;let Rv=class{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&WT)>0}get deletedBefore(){return(this.delInfo&(UT|o0))>0}get deletedAfter(){return(this.delInfo&(HT|o0))>0}get deletedAcross(){return(this.delInfo&o0)>0}},_l=class ou{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&ou.empty)return ou.empty}recover(e){let n=0,r=vC(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+gP(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[a+o],c=this.ranges[a+s],f=l+u;if(e<=f){let d=u?e==l?-1:e==f?1:n:n,h=l+i+(d<0?0:c);if(r)return h;let p=e==(n<0?l:f)?null:mP(a/3,e-l),m=e==l?HT:e==f?UT:o0;return(n<0?e!=l:e!=f)&&(m|=WT),new Rv(h,m,p)}i+=c-u}return r?e+i:new Rv(e+i,0,null)}touches(e,n){let r=0,i=vC(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let u=this.ranges[a+o],c=l+u;if(e<=c&&a==i*3)return!0;r+=this.ranges[a+s]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),u=this.ranges[i+n],c=this.ranges[i+r];e(a,a+u,l,l+c),o+=c-u}}invert(){return new ou(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ou.empty:new ou(e<0?[0,-e,0]:[0,0,e])}};_l.empty=new _l([]);let JT=class s0{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new s0(this.maps,this.mirror,e,n)}copy(){return new s0(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new s0;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Rv(e,i,null)}};const zy=Object.create(null);let Wn=class{getMap(){return _l.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=zy[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in zy)throw new RangeError("Duplicate use of step JSON ID "+e);return zy[e]=n,n.prototype.jsonID=e,n}},Qn=class kf{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new kf(e,null)}static fail(e){return new kf(null,e)}static fromReplace(e,n,r,i){try{return kf.ok(e.replace(n,r,i))}catch(o){if(o instanceof Q0)return kf.fail(o.message);throw o}}};function Ex(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(Ex(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return oe.fromArray(r)}let Sx=class xf extends Wn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new he(Ex(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Qn.fromReplace(e,this.from,this.to,o)}invert(){return new gh(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new xf(n.pos,r.pos,this.mark)}merge(e){return e instanceof xf&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xf(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new xf(n.from,n.to,e.markFromJSON(n.mark))}};Wn.jsonID("addMark",Sx);let gh=class Ef extends Wn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new he(Ex(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Qn.fromReplace(e,this.from,this.to,r)}invert(){return new Sx(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ef(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ef&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ef(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ef(n.from,n.to,e.markFromJSON(n.mark))}};Wn.jsonID("removeMark",gh);let Cx=class Sf extends Wn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Qn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Qn.fromReplace(e,this.pos,this.pos+1,new he(oe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Sf(this.pos,n.marks[i]);return new Sf(this.pos,this.mark)}}return new _x(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Sf(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Sf(n.pos,e.markFromJSON(n.mark))}};Wn.jsonID("addNodeMark",Cx);let _x=class Fv extends Wn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Qn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Qn.fromReplace(e,this.pos,this.pos+1,new he(oe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Cx(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Fv(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Fv(n.pos,e.markFromJSON(n.mark))}};Wn.jsonID("removeNodeMark",_x);let Ni=class La extends Wn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Lv(e,this.from,this.to)?Qn.fail("Structure replace would overwrite content"):Qn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new _l([this.from,this.to-this.from,this.slice.size])}invert(e){return new La(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new La(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof La)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?he.empty:new he(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new La(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?he.empty:new he(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new La(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new La(n.from,n.to,he.fromJSON(e,n.slice),!!n.structure)}};Wn.jsonID("replace",Ni);let _r=class a0 extends Wn{constructor(e,n,r,i,o,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(Lv(e,this.from,this.gapFrom)||Lv(e,this.gapTo,this.to)))return Qn.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Qn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Qn.fromReplace(e,this.from,this.to,r):Qn.fail("Content does not fit in gap")}getMap(){return new _l([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new a0(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new a0(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new a0(n.from,n.to,n.gapFrom,n.gapTo,he.fromJSON(e,n.slice),n.insert,!!n.structure)}};Wn.jsonID("replaceAround",_r);function Lv(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function yP(t,e,n,r){let i=[],o=[],s,a;t.doc.nodesBetween(e,n,(l,u,c)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let d=Math.max(u,e),h=Math.min(u+l.nodeSize,n),p=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(p)||(s&&s.to==d&&s.mark.eq(f[m])?s.to=h:i.push(s=new gh(d,h,f[m])));a&&a.to==d?a.to=h:o.push(a=new Sx(d,h,r))}}),i.forEach(l=>t.step(l)),o.forEach(l=>t.step(l))}function bP(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(r instanceof FT){let u=s.marks,c;for(;c=r.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let u=Math.min(a+s.nodeSize,n);for(let c=0;c<l.length;c++){let f=l[c],d;for(let h=0;h<i.length;h++){let p=i[h];p.step==o-1&&f.eq(i[h].style)&&(d=p)}d?(d.to=u,d.step=o):i.push({style:f,from:Math.max(a,e),to:u,step:o})}}}),i.forEach(s=>t.step(new gh(s.from,s.to,s.style)))}function KT(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<o.childCount;l++){let u=o.child(l),c=a+u.nodeSize,f=r.matchType(u.type);if(!f)s.push(new Ni(a,c,he.empty));else{r=f;for(let d=0;d<u.marks.length;d++)n.allowsMarkType(u.marks[d].type)||t.step(new gh(a,c,u.marks[d]));if(i&&u.isText&&n.whitespace!="pre"){let d,h=/\r?\n|\r/g,p;for(;d=h.exec(u.text);)p||(p=new he(oe.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),s.push(new Ni(a+d.index,a+d.index+d[0].length,p))}}a=c}if(!r.validEnd){let l=r.fillBefore(oe.empty,!0);t.replace(a,a,new he(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function vP(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Nc(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!vP(i,o,s))break}return null}function wP(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),a=i.after(o+1),l=s,u=a,c=oe.empty,f=0;for(let p=o,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,c=oe.from(r.node(p).copy(c)),f++):l--;let d=oe.empty,h=0;for(let p=o,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=oe.from(i.node(p).copy(d)),h++):u++;t.step(new _r(l,u,s,a,new he(c.append(d),f,h),c.size-f,!0))}function Ax(t,e,n=null,r=t){let i=kP(t,e),o=i&&xP(r,e);return o?i.map(wC).concat({type:e,attrs:n}).concat(o.map(wC)):null}function wC(t){return{type:t,attrs:null}}function kP(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function xP(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:s}function EP(t,e,n){let r=oe.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=oe.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new _r(i,o,i,o,new he(r,0,0),n.length,!0))}function SP(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{if(s.isTextblock&&!s.hasMarkup(r,i)&&AP(t.doc,t.mapping.slice(o).map(a),r)){let l=null;if(r.schema.linebreakReplacement){let d=r.whitespace=="pre",h=!!r.contentMatch.matchType(r.schema.linebreakReplacement);d&&!h?l=!1:!d&&h&&(l=!0)}l===!1&&_P(t,s,a,o),KT(t,t.mapping.slice(o).map(a,1),r,void 0,l===null);let u=t.mapping.slice(o),c=u.map(a,1),f=u.map(a+s.nodeSize,1);return t.step(new _r(c,f,c+1,f-1,new he(oe.from(r.create(i,null,s.marks)),0,0),1,!0)),l===!0&&CP(t,s,a,o),!1}})}function CP(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function _P(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function AP(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function TP(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new _r(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new he(oe.from(s),0,0),1,!0))}function Lu(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>o;u--,c--){let f=i.node(u),d=i.index(u);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),p=r&&r[c+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[c]||f;if(!f.canReplace(d+1,f.childCount)||!m.type.validContent(h))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function MP(t,e,n=1,r){let i=t.doc.resolve(e),o=oe.empty,s=oe.empty;for(let a=i.depth,l=i.depth-n,u=n-1;a>l;a--,u--){o=oe.from(i.node(a).copy(o));let c=r&&r[u];s=oe.from(c?c.type.create(c.attrs,s):i.node(a).copy(s))}t.step(new Ni(e,e,new he(o.append(s),n,n),!0))}function ka(t,e){let n=t.resolve(e),r=n.index();return ZT(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function ZT(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function Z1(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&ZT(o,s)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function OP(t,e,n){let r=new Ni(e-n,e+n,he.empty,!0);t.step(r)}function DP(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function GT(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),u=r.node(s),c=!1;if(o==1)c=u.canReplace(l,l,i);else{let f=u.contentMatchAt(l).findWrapping(i.firstChild.type);c=f&&u.canReplaceWith(l,l,f[0])}if(c)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function G1(t,e,n=e,r=he.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return YT(i,o,r)?new Ni(e,n,r):new NP(i,o,r).fit()}function YT(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}let NP=class{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=oe.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=oe.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new he(o,s,a);return e>-1?new _r(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ni(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=jy(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],c,f=null;if(n==1&&(s?u.matchType(s.type)||(f=u.fillBefore(oe.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:f};if(n==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=jy(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new he(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=jy(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new he(Cf(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new he(Cf(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));f=f.matchFragment(i)}let h=a.size+e-(s.content.size-s.openEnd);for(;u<a.childCount;){let m=a.child(u),b=f.matchType(m.type);if(!b)break;u++,(u>1||l==0||m.content.size)&&(f=b,c.push(QT(m.mark(d.allowedMarks(m.marks)),u==1?l:0,u==a.childCount?h:-1)))}let p=u==a.childCount;p||(h=-1),this.placed=_f(this.placed,n,oe.from(c)),this.frontier[n].match=f,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,b=a;m<h;m++){let y=b.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),b=y.content}this.unplaced=p?e==0?he.empty:new he(Cf(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new he(Cf(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!qy(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=qy(e,n,i,r,o);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],c=qy(e,a,u,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=_f(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=_f(this.placed,this.depth,oe.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(oe.empty,!0);n.childCount&&(this.placed=_f(this.placed,this.frontier.length,n))}};function Cf(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Cf(t.firstChild.content,e-1,n)))}function _f(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(_f(t.lastChild.content,e-1,n)))}function jy(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function QT(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,QT(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(oe.empty,!0)))),t.copy(r)}function qy(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!$P(n,o.content,s)?a:null}function $P(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function IP(t){return t.spec.defining||t.spec.definingForContent}function RP(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(YT(i,o,r))return t.step(new Ni(e,n,r));let s=eM(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let d=i.depth,h=i.pos-1;d>0;d--,h--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(d)>-1?a=d:i.before(d)==h&&s.splice(1,0,-d)}let l=s.indexOf(a),u=[],c=r.openStart;for(let d=r.content,h=0;;h++){let p=d.firstChild;if(u.push(p),h==r.openStart)break;d=p.content}for(let d=c-1;d>=0;d--){let h=u[d],p=IP(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(a)-1)))c=d;else if(p||!h.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let h=(d+c+1)%(r.openStart+1),p=u[h];if(p)for(let m=0;m<s.length;m++){let b=s[(m+l)%s.length],y=!0;b<0&&(y=!1,b=-b);let v=i.node(b-1),w=i.index(b-1);if(v.canReplaceWith(w,w,p.type,p.marks))return t.replace(i.before(b),y?o.after(b):n,new he(XT(r.content,0,r.openStart,h),h,r.openEnd))}}let f=t.steps.length;for(let d=s.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>f));d--){let h=s[d];h<0||(e=i.before(h),n=o.after(h))}}function XT(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(XT(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(oe.empty,!0))}return t}function FP(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=DP(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new he(oe.from(r),0,0))}function LP(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=eM(r,i);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return t.delete(r.before(s),n);t.delete(e,n)}function eM(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}let tM=class l0 extends Wn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Qn.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Qn.fromReplace(e,this.pos,this.pos+1,new he(oe.from(i),0,n.isLeaf?0:1))}getMap(){return _l.empty}invert(e){return new l0(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new l0(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new l0(n.pos,n.attr,n.value)}};Wn.jsonID("attr",tM);let nM=class Bv extends Wn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Qn.ok(r)}getMap(){return _l.empty}invert(e){return new Bv(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Bv(n.attr,n.value)}};Wn.jsonID("docAttr",nM);let tc=class extends Error{};tc=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};tc.prototype=Object.create(Error.prototype);tc.prototype.constructor=tc;tc.prototype.name="TransformError";let BP=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new JT}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new tc(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=he.empty){let i=G1(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new he(oe.from(r),0,0))}delete(e,n){return this.replace(e,n,he.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return RP(this,e,n,r),this}replaceRangeWith(e,n,r){return FP(this,e,n,r),this}deleteRange(e,n){return LP(this,e,n),this}lift(e,n){return wP(this,e,n),this}join(e,n=1){return OP(this,e,n),this}wrap(e,n){return EP(this,e,n),this}setBlockType(e,n=e,r,i=null){return SP(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return TP(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new tM(e,n,r)),this}setDocAttribute(e,n){return this.step(new nM(e,n)),this}addNodeMark(e,n){return this.step(new Cx(e,n)),this}removeNodeMark(e,n){if(!(n instanceof ft)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new _x(e,n)),this}split(e,n=1,r){return MP(this,e,n,r),this}addMark(e,n,r){return yP(this,e,n,r),this}removeMark(e,n,r){return bP(this,e,n,r),this}clearIncompatible(e,n,r){return KT(this,e,n,r),this}};const Vy=Object.create(null);let je=class{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new PP(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=he.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:u}=s[a],c=e.mapping.slice(o);e.replaceRange(c.map(l.pos),c.map(u.pos),a?he.empty:n),a==0&&EC(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=e.mapping.slice(r),u=l.map(s.pos),c=l.map(a.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),EC(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new He(e):su(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?su(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):su(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new fl(e.node(0))}static atStart(e){return su(e,e,0,0,1)||new fl(e)}static atEnd(e){return su(e,e,e.content.size,e.childCount,-1)||new fl(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Vy[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Vy)throw new RangeError("Duplicate use of selection JSON ID "+e);return Vy[e]=n,n.prototype.jsonID=e,n}getBookmark(){return He.between(this.$anchor,this.$head).getBookmark()}};je.prototype.visible=!0;let PP=class{constructor(e,n){this.$from=e,this.$to=n}},kC=!1;function xC(t){!kC&&!t.parent.inlineContent&&(kC=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}let He=class Af extends je{constructor(e,n=e){xC(e),xC(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return je.near(r);let i=e.resolve(n.map(this.anchor));return new Af(i.parent.inlineContent?i:r,r)}replace(e,n=he.empty){if(super.replace(e,n),n==he.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Af&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new rM(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Af(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=je.findFrom(n,r,!0)||je.findFrom(n,-r,!0);if(o)n=o.$head;else return je.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(je.findFrom(e,-r,!0)||je.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Af(e,n)}};je.jsonID("text",He);let rM=class iM{constructor(e,n){this.anchor=e,this.head=n}map(e){return new iM(e.map(this.anchor),e.map(this.head))}resolve(e){return He.between(e.resolve(this.anchor),e.resolve(this.head))}},_e=class Tf extends je{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?je.near(o):new Tf(o)}content(){return new he(oe.from(this.node),0,0)}eq(e){return e instanceof Tf&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new zP(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Tf(e.resolve(n.anchor))}static create(e,n){return new Tf(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};_e.prototype.visible=!1;je.jsonID("node",_e);let zP=class oM{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new rM(r,r):new oM(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&_e.isSelectable(r)?new _e(n):je.near(n)}},fl=class u0 extends je{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=he.empty){if(n==he.empty){e.delete(0,e.doc.content.size);let r=je.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new u0(e)}map(e){return new u0(e)}eq(e){return e instanceof u0}getBookmark(){return jP}};je.jsonID("all",fl);const jP={map(){return this},resolve(t){return new fl(t)}};function su(t,e,n,r,i,o=!1){if(e.inlineContent)return He.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&_e.isSelectable(a))return _e.create(t,n-(i<0?a.nodeSize:0))}else{let l=su(t,a,n+i,i<0?a.childCount:0,i,o);if(l)return l}n+=a.nodeSize*i}return null}function EC(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ni||i instanceof _r))return;let o=t.mapping.maps[r],s;o.forEach((a,l,u,c)=>{s==null&&(s=c)}),t.setSelection(je.near(t.doc.resolve(s),n))}const SC=1,lp=2,CC=4;class qP extends BP{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|SC)&~lp,this.storedMarks=null,this}get selectionSet(){return(this.updated&SC)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=lp,this}ensureMarks(e){return ft.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&lp)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~lp,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ft.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(je.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=CC,this}get scrolledIntoView(){return(this.updated&CC)>0}}function _C(t,e){return!e||!t?t:t.bind(e)}let Mf=class{constructor(e,n,r){this.name=e,this.init=_C(n.init,r),this.apply=_C(n.apply,r)}};const VP=[new Mf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Mf("selection",{init(t,e){return t.selection||je.atStart(e.doc)},apply(t){return t.selection}}),new Mf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Mf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Uy{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=VP.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Mf(r.key,r.spec.state,r))})}}class _u{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=i?i[s].n:0,u=i?i[s].state:this,c=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,u,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new _u(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new qP(this)}static create(e){let n=new Uy(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new _u(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Uy(this.schema,e.plugins),r=n.fields,i=new _u(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Uy(e.schema,e.plugins),o=new _u(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=cl.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=je.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],u=l.spec.state;if(l.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[s.name]=u.fromJSON.call(l,e,n[a],o);return}}o[s.name]=s.init(e,o)}}),o}}function sM(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=sM(i,e,{})),n[r]=i}return n}let Kr=class{constructor(e){this.spec=e,this.props={},e.props&&sM(e.props,this,this.props),this.key=e.key?e.key.key:aM("plugin")}getState(e){return e[this.key]}};const Hy=Object.create(null);function aM(t){return t in Hy?t+"$"+ ++Hy[t]:(Hy[t]=0,t+"$")}let xo=class{constructor(e="key"){this.key=aM(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};const Tn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},$d=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Pv=null;const Ro=function(t,e,n){let r=Pv||(Pv=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},UP=function(){Pv=null},Al=function(t,e,n,r){return n&&(AC(t,e,n,r,-1)||AC(t,e,n,r,1))},HP=/^(img|br|input|textarea|hr)$/i;function AC(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Xi(t))){let o=t.parentNode;if(!o||o.nodeType!=1||yh(t)||HP.test(t.nodeName)||t.contentEditable=="false")return!1;e=Tn(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Xi(t):0}else return!1}}function Xi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function WP(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Xi(t)}else if(t.parentNode&&!yh(t))e=Tn(t),t=t.parentNode;else return null}}function JP(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!yh(t))e=Tn(t)+1,t=t.parentNode;else return null}}function KP(t,e,n){for(let r=e==0,i=e==Xi(t);r||i;){if(t==n)return!0;let o=Tn(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==Xi(t)}}function yh(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Y1=function(t){return t.focusNode&&Al(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ja(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function ZP(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function GP(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const bo=typeof navigator<"u"?navigator:null,TC=typeof document<"u"?document:null,xa=bo&&bo.userAgent||"",zv=/Edge\/(\d+)/.exec(xa),lM=/MSIE \d/.exec(xa),jv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(xa),wr=!!(lM||jv||zv),ia=lM?document.documentMode:jv?+jv[1]:zv?+zv[1]:0,$i=!wr&&/gecko\/(\d+)/i.test(xa);$i&&+(/Firefox\/(\d+)/.exec(xa)||[0,0])[1];const qv=!wr&&/Chrome\/(\d+)/.exec(xa),Xn=!!qv,YP=qv?+qv[1]:0,sr=!wr&&!!bo&&/Apple Computer/.test(bo.vendor),nc=sr&&(/Mobile\/\w+/.test(xa)||!!bo&&bo.maxTouchPoints>2),ri=nc||(bo?/Mac/.test(bo.platform):!1),QP=bo?/Win/.test(bo.platform):!1,Si=/Android \d/.test(xa),bh=!!TC&&"webkitFontSmoothing"in TC.documentElement.style,XP=bh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ez(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Do(t,e){return typeof t=="number"?t:t[e]}function tz(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function MC(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;s=$d(s)){if(s.nodeType!=1)continue;let a=s,l=a==o.body,u=l?ez(o):tz(a),c=0,f=0;if(e.top<u.top+Do(r,"top")?f=-(u.top-e.top+Do(i,"top")):e.bottom>u.bottom-Do(r,"bottom")&&(f=e.bottom-e.top>u.bottom-u.top?e.top+Do(i,"top")-u.top:e.bottom-u.bottom+Do(i,"bottom")),e.left<u.left+Do(r,"left")?c=-(u.left-e.left+Do(i,"left")):e.right>u.right-Do(r,"right")&&(c=e.right-u.right+Do(i,"right")),c||f)if(l)o.defaultView.scrollBy(c,f);else{let d=a.scrollLeft,h=a.scrollTop;f&&(a.scrollTop+=f),c&&(a.scrollLeft+=c);let p=a.scrollLeft-d,m=a.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function nz(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(o,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:uM(t.dom)}}function uM(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=$d(r));return e}function rz({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;cM(n,r==0?0:r-e)}function cM(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Jl=null;function iz(t){if(t.setActive)return t.setActive();if(Jl)return t.focus(Jl);let e=uM(t);t.focus(Jl==null?{get preventScroll(){return Jl={preventScroll:!0},!0}}:void 0),Jl||(Jl=!1,cM(e,0))}function fM(t,e){let n,r=2e8,i,o=0,s=e.top,a=e.top,l,u;for(let c=t.firstChild,f=0;c;c=c.nextSibling,f++){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=Ro(c).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=c,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,c.nodeType==1&&m&&(o=f+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=c,u={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(o=f+1)}}return!n&&l&&(n=l,i=u,r=0),n&&n.nodeType==3?oz(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:fM(n,i)}function oz(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=_s(r,1);if(o.top!=o.bottom&&Tx(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function Tx(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function sz(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function az(t,e,n){let{node:r,offset:i}=fM(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function lz(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let a=t.docView.nearestDesc(o,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&(!s&&l.left>r.left||l.top>r.top?i=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),s=!0),!a.contentDOM&&i<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}o=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function dM(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(Tx(e,u))return dM(s,e,u)}}if((o=(o+1)%r)==i)break}return t}function uz(t,e){let n=t.dom.ownerDocument,r,i=0,o=GP(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let u=t.dom.getBoundingClientRect();if(!Tx(e,u)||(s=dM(t.dom,e,u),!s))return null}if(sr)for(let u=s;r&&u;u=$d(u))u.draggable&&(r=void 0);if(s=sz(s,e),r){if($i&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],f;c.nodeName=="IMG"&&(f=c.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let u;bh&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=lz(t,r,i,e))}a==null&&(a=az(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function OC(t){return t.top<t.bottom||t.left<t.right}function _s(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(OC(r))return r}return Array.prototype.find.call(n,OC)||t.getBoundingClientRect()}const cz=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function hM(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=bh||$i;if(r.nodeType==3)if(s&&(cz.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=_s(Ro(r,i,i),n);if($i&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=_s(Ro(r,i-1,i-1),-1);if(u.top==l.top){let c=_s(Ro(r,i,i+1),-1);if(c.top!=l.top)return af(c,c.left<u.left)}}return l}else{let l=i,u=i,c=n<0?1:-1;return n<0&&!i?(u++,c=-1):n>=0&&i==r.nodeValue.length?(l--,c=1):n<0?l--:u++,af(_s(Ro(r,l,u),c),c<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==Xi(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Wy(l.getBoundingClientRect(),!1)}if(o==null&&i<Xi(r)){let l=r.childNodes[i];if(l.nodeType==1)return Wy(l.getBoundingClientRect(),!0)}return Wy(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==Xi(r))){let l=r.childNodes[i-1],u=l.nodeType==3?Ro(l,Xi(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return af(_s(u,1),!1)}if(o==null&&i<Xi(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?Ro(l,0,s?0:1):l.nodeType==1?l:null:null;if(u)return af(_s(u,-1),!0)}return af(_s(r.nodeType==3?Ro(r):r,-n),n>=0)}function af(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Wy(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function pM(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function fz(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return pM(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let s=hM(t,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Ro(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let c=l[u];if(c.bottom>c.top+1&&(n=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}const dz=/[\u0590-\u08ac]/;function hz(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=t.domSelection();return!dz.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:s:pM(t,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:c,anchorOffset:f}=t.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),b=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&u==m;try{a.collapse(c,f),l&&(l!=c||u!=f)&&a.extend&&a.extend(l,u)}catch{}return d!=null&&(a.caretBidiLevel=d),b})}let DC=null,NC=null,$C=!1;function pz(t,e,n){return DC==e&&NC==n?$C:(DC=e,NC=n,$C=n=="up"||n=="down"?fz(t,e,n):hz(t,e,n))}const ci=0,IC=1,Ka=2,vo=3;class vh{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ci,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Tn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.size;if(a>e||s instanceof gM){i=e-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof mM&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Tn(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Tn(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,a=0;;a++){let l=this.children[a],u=s+l.size;if(i==-1&&e<=u){let c=s+l.border;if(e>=c&&n<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,c);e=s;for(let f=a;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=Tn(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(u>n||a==this.children.length-1)){n=u;for(let c=a+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=Tn(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let d=0,h=0;d<this.children.length;d++){let p=this.children[d],m=h+p.size;if(o>h&&s<m)return p.setSelection(e-h-p.border,n-h-p.border,r,i);h=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),u=r.getSelection(),c=!1;if(($i||sr)&&e==n){let{node:d,offset:h}=a;if(d.nodeType==3){if(c=!!(h&&d.nodeValue[h-1]==`
`),c&&h==d.nodeValue.length)for(let p=d,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:Tn(m)+1});break}let b=p.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let p=d.childNodes[h-1];c=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if($i&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let d=u.focusNode.childNodes[u.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||c&&sr)&&Al(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Al(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((u.extend||e==n)&&!c){u.collapse(a.node,a.offset);try{e!=n&&u.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let h=a;a=l,l=h}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+o.border,l=s-o.border;if(e>=a&&n<=l){this.dirty=e==r||n==s?Ka:IC,e==a&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=vo:o.markDirty(e-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Ka:vo}r=s}this.dirty=Ka}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Ka:IC;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class mM extends vh{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==ci&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class mz extends vh{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Tl extends vh{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=mh.renderSpec(document,n.type.spec.toDOM(n,r))),new Tl(e,n,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&vo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=vo&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ci){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ci}}slice(e,n,r){let i=Tl.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Hv(o,n,s,r)),e>0&&(o=Hv(o,0,e,r));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}}class oa extends vh{constructor(e,n,r,i,o,s,a,l,u){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,o,s){let a=o.nodeViews[n.type.name],l,u=a&&a(n,o,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=u&&u.dom,f=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=mh.renderSpec(document,n.type.spec.toDOM(n)));!f&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let d=c;return c=vM(c,r,n),u?l=new gz(e,n,r,i,c,f||null,d,u,o,s+1):n.isText?new Q1(e,n,r,i,c,d,o):new oa(e,n,r,i,c,f||null,d,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>oe.empty)}return e}matchesNode(e,n,r){return this.dirty==ci&&e.eq(this.node)&&Uv(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new bz(this,s&&s.node,e);kz(this.node,this.innerDeco,(u,c,f)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!f&&l.syncToMarks(c==this.node.childCount?ft.none:this.node.child(c).marks,r,e),l.placeWidget(u,e,i)},(u,c,f,d)=>{l.syncToMarks(u.marks,r,e);let h;l.findNodeMatch(u,c,f,d)||a&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(h=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(u,c,f,h,e)||l.updateNextNode(u,c,f,e,d,i)||l.addNode(u,c,f,e,i),i+=u.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Ka)&&(s&&this.protectLocalComposition(e,s),yM(this.contentDOM,this.children,e),nc&&xz(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof He)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,a=Ez(this.node.content,s,r-n,i-n);return a<0?null:{node:o,pos:a,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new mz(this,o,n,i);e.input.compositionNodes.push(s),this.children=Hv(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==vo||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ci}updateOuterDeco(e){if(Uv(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=bM(this.dom,this.nodeDOM,Vv(this.outerDeco,this.node,n),Vv(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function RC(t,e,n,r,i){vM(r,e,t);let o=new oa(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Q1 extends oa{constructor(e,n,r,i,o,s,a){super(e,n,r,i,o,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==vo||this.dirty!=ci&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ci||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ci,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new Q1(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=vo)}get domAtom(){return!1}isText(e){return this.node.text==e}}class gM extends vh{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ci&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class gz extends oa{constructor(e,n,r,i,o,s,a,l,u,c){super(e,n,r,i,o,s,a,u,c),this.spec=l}update(e,n,r,i){if(this.dirty==vo)return!1;if(this.spec.update){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function yM(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=FC(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof Tl){let l=r?r.previousSibling:t.lastChild;yM(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=FC(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Xf=function(t){t&&(this.nodeName=t)};Xf.prototype=Object.create(null);const Za=[new Xf];function Vv(t,e,n){if(t.length==0)return Za;let r=n?Za[0]:new Xf,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new Xf(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&i.length==1&&i.push(r=new Xf(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function bM(t,e,n,r){if(n==Za&&r==Za)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(o){let l;a&&a.nodeName==s.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Za[0]),i=l}yz(i,a||Za[0],s)}return i}function yz(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function vM(t,e,n){return bM(t,t,Za,Vv(e,n,t.nodeType!=1))}function Uv(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function FC(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class bz{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=vz(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=ci,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(e[o])&&!this.isLocked(u.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Tl.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==vo&&s.dom==s.contentDOM&&(s.dirty=Ka),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof oa){let u=this.preMatch.matched.get(l);if(u!=null&&u!=o)return!1;let c=l.dom,f,d=this.isLocked(c)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=vo&&Uv(n,l.outerDeco));if(!d&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(l,e,n,r,i,s)))return this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Ka,f.updateChildren(i,s+1),f.dirty=ci),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=oa.create(this.top,n,r,i,o,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,o){let s=oa.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new mM(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Tl;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Q1)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((sr||Xn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new gM(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function vz(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let u=n.children[r-1];if(u instanceof Tl)n=u,r=u.children.length;else{a=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function wz(t,e){return t.type.side-e.type.side}function kz(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,i,e.forChild(o,c),u),o+=c.nodeSize}return}let s=0,a=[],l=null;for(let u=0;;){let c,f;for(;s<i.length&&i[s].to==o;){let b=i[s++];b.widget&&(c?(f||(f=[c])).push(b):c=b)}if(c)if(f){f.sort(wz);for(let b=0;b<f.length;b++)n(f[b],u,!!l)}else n(c,u,!!l);let d,h;if(l)h=-1,d=l,l=null;else if(u<t.childCount)h=u,d=t.child(u++);else break;for(let b=0;b<a.length;b++)a[b].to<=o&&a.splice(b--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let p=o+d.nodeSize;if(d.isText){let b=p;s<i.length&&i[s].from<b&&(b=i[s].from);for(let y=0;y<a.length;y++)a[y].to<b&&(b=a[y].to);b<p&&(l=d.cut(b-o),d=d.cut(0,b-o),p=b,h=-1)}else for(;s<i.length&&i[s].to<p;)s++;let m=d.isInline&&!d.isLeaf?a.filter(b=>!b.inline):a.slice();r(d,m,e.forChild(o,d),h),o=p}}function xz(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Ez(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<t.childCount;){let u=t.child(i++);if(o+=u.nodeSize,!u.isText)break;l+=u.text}if(o>=n){if(o>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let u=a<r?l.lastIndexOf(e,r-a-1):-1;if(u>=0&&u+e.length+a>=n)return a+u;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Hv(t,e,n,r,i){let o=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],u=a,c=a+=l.size;u>=n||c<=e?o.push(l):(u<e&&o.push(l.slice(0,e-u,r)),i&&(o.push(i),i=void 0),c>n&&o.push(l.slice(n-u,l.size,r)))}return o}function Mx(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,u;if(Y1(n)){for(l=a;i&&!i.node;)i=i.parent;let c=i.node;if(i&&c.isAtom&&_e.isSelectable(c)&&i.parent&&!(c.isInline&&KP(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;u=new _e(s==f?a:r.resolve(f))}}else{let c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null;l=r.resolve(c)}if(!u){let c=e=="pointer"||t.state.selection.head<a.pos&&!o?1:-1;u=Ox(t,l,a,c)}return u}function wM(t){return t.editable?t.hasFocus():xM(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ho(t,e=!1){let n=t.state.selection;if(kM(t,n),!!wM(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Xn){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Al(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Cz(t);else{let{anchor:r,head:i}=n,o,s;LC&&!(n instanceof He)&&(n.$from.parent.inlineContent||(o=BC(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=BC(t,n.to))),t.docView.setSelection(r,i,t.root,e),LC&&(o&&PC(o),s&&PC(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Sz(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const LC=sr||Xn&&YP<63;function BC(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(sr&&i&&i.contentEditable=="false")return Jy(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Jy(i);if(o)return Jy(o)}}function Jy(t){return t.contentEditable="true",sr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function PC(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Sz(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!wM(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Cz(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,Tn(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&wr&&ia<=11&&(r.disabled=!0,r.disabled=!1)}function kM(t,e){if(e instanceof _e){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(zC(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else zC(t)}function zC(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Ox(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||He.between(e,n,r)}function jC(t){return t.editable&&!t.hasFocus()?!1:xM(t)}function xM(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function _z(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Al(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Wv(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&je.findFrom(o,e)}function Ms(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function qC(t,e,n){let r=t.state.selection;if(r instanceof He)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return Ms(t,new He(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Wv(t.state,e);return i&&i instanceof _e?Ms(t,i):!1}else if(!(ri&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?_e.isSelectable(o)?Ms(t,new _e(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):bh?Ms(t,new He(t.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof _e&&r.node.isInline)return Ms(t,new He(e>0?r.$to:r.$from));{let i=Wv(t.state,e);return i?Ms(t,i):!1}}}function rm(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ed(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Kl(t,e){return e<0?Az(t):Tz(t)}function Az(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for($i&&n.nodeType==1&&r<rm(n)&&ed(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(ed(a,-1))i=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(EM(n))break;{let a=n.previousSibling;for(;a&&ed(a,-1);)i=n.parentNode,o=Tn(a),a=a.previousSibling;if(a)n=a,r=rm(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Jv(t,n,r):i&&Jv(t,i,o)}function Tz(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=rm(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(ed(a,1))o=n,s=++r;else break}else{if(EM(n))break;{let a=n.nextSibling;for(;a&&ed(a,1);)o=a.parentNode,s=Tn(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=rm(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Jv(t,o,s)}function EM(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Mz(t,e){for(;t&&e==t.childNodes.length&&!yh(t);)e=Tn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function Oz(t,e){for(;t&&!e&&!yh(t);)e=Tn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Jv(t,e,n){if(e.nodeType!=3){let o,s;(s=Mz(e,n))?(e=s,n=0):(o=Oz(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(Y1(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Ho(t)},50)}function VC(t,e){let n=t.state.doc.resolve(e);if(!(Xn||QP)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function UC(t,e,n){let r=t.state.selection;if(r instanceof He&&!r.empty||n.indexOf("s")>-1||ri&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Wv(t.state,e);if(s&&s instanceof _e)return Ms(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,a=r instanceof fl?je.near(s,e):je.findFrom(s,e);return a?Ms(t,a):!1}return!1}function HC(t,e){if(!(t.state.selection instanceof He))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function WC(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Dz(t){if(!sr||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;WC(t,r,"true"),setTimeout(()=>WC(t,r,"false"),20)}return!1}function Nz(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function $z(t,e){let n=e.keyCode,r=Nz(e);if(n==8||ri&&n==72&&r=="c")return HC(t,-1)||Kl(t,-1);if(n==46&&!e.shiftKey||ri&&n==68&&r=="c")return HC(t,1)||Kl(t,1);if(n==13||n==27)return!0;if(n==37||ri&&n==66&&r=="c"){let i=n==37?VC(t,t.state.selection.from)=="ltr"?-1:1:-1;return qC(t,i,r)||Kl(t,i)}else if(n==39||ri&&n==70&&r=="c"){let i=n==39?VC(t,t.state.selection.from)=="ltr"?1:-1:1;return qC(t,i,r)||Kl(t,i)}else{if(n==38||ri&&n==80&&r=="c")return UC(t,-1,r)||Kl(t,-1);if(n==40||ri&&n==78&&r=="c")return Dz(t)||UC(t,1,r)||Kl(t,1);if(r==(ri?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function SM(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||mh.fromSchema(t.state.schema),a=OM(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let u=l.firstChild,c,f=0;for(;u&&u.nodeType==1&&(c=MM[u.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let p=a.createElement(c[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),f++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d,slice:e}}function CM(t,e,n,r,i){let o=i.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=e&&(r||o||!n);if(l){if(t.someProp("transformPastedText",d=>{e=d(e,o||r,t)}),o)return e?new he(oe.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):he.empty;let f=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(f)a=f;else{let d=i.marks(),{schema:h}=t.state,p=mh.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let b=s.appendChild(document.createElement("p"));m&&b.appendChild(p.serializeNode(h.text(m,d)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),s=Fz(n),bh&&Lz(s);let u=s&&s.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let d=s.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;s=d}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||xx.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!Iz.test(d.parentNode.nodeName)?{ignore:!0}:null}})),c)a=Bz(JC(a,+c[1],+c[2]),c[4]);else if(a=he.maxOpen(Rz(a.content,i),!0),a.openStart||a.openEnd){let f=0,d=0;for(let h=a.content.firstChild;f<a.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=a.content.lastChild;d<a.openEnd&&!h.type.spec.isolating;d++,h=h.lastChild);a=JC(a,f,d)}return t.someProp("transformPasted",f=>{a=f(a,t)}),a}const Iz=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Rz(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),u;if(!l)return s=null;if(u=s.length&&o.length&&AM(l,o,a,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=TM(s[s.length-1],o.length));let c=_M(a,l);s.push(c),i=i.matchType(c.type),o=l}}),s)return oe.from(s)}return t}function _M(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,oe.from(t));return t}function AM(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=AM(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(oe.from(_M(n,t,i+1))))}}function TM(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,TM(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(oe.empty,!0);return t.copy(n.append(r))}function Kv(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(o=0),i<r-1&&(a=Kv(a,e,n,r,i+1,o)),i>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(oe.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function JC(t,e,n){return e<t.openStart&&(t=new he(Kv(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new he(Kv(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const MM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let KC=null;function OM(){return KC||(KC=document.implementation.createHTMLDocument("title"))}function Fz(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=OM().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&MM[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=t,i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function Lz(t){let e=t.querySelectorAll(Xn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Bz(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=oe.from(l.create(r[a+1],i)),o++,s++}return new he(i,o,s)}const ar={},lr={},Pz={touchstart:!0,touchmove:!0};class zz{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function jz(t){for(let e in ar){let n=ar[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Vz(t,r)&&!Dx(t,r)&&(t.editable||!(r.type in lr))&&n(t,r)},Pz[e]?{passive:!0}:void 0)}sr&&t.dom.addEventListener("input",()=>null),Zv(t)}function Us(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function qz(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Zv(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Dx(t,r))})}function Dx(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Vz(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Uz(t,e){!Dx(t,e)&&ar[e.type]&&(t.editable||!(e.type in lr))&&ar[e.type](t,e)}lr.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!NM(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Si&&Xn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),nc&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,ja(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||$z(t,n)?n.preventDefault():Us(t,"key")};lr.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};lr.keypress=(t,e)=>{let n=e;if(NM(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||ri&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof He)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function X1(t){return{left:t.clientX,top:t.clientY}}function Hz(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Nx(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,a=>s>o.depth?a(t,n,o.nodeAfter,o.before(s),i,!0):a(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Bu(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Wz(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&_e.isSelectable(r)?(Bu(t,new _e(n)),!0):!1}function Jz(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof _e&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(_e.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Bu(t,_e.create(t.state.doc,i)),!0):!1}function Kz(t,e,n,r,i){return Nx(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?Jz(t,n):Wz(t,n))}function Zz(t,e,n,r){return Nx(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Gz(t,e,n,r){return Nx(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||Yz(t,n,r)}function Yz(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Bu(t,He.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)Bu(t,He.create(r,a+1,a+1+s.content.size));else if(_e.isSelectable(s))Bu(t,_e.create(r,a));else continue;return!0}}function $x(t){return im(t)}const DM=ri?"metaKey":"ctrlKey";ar.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=$x(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&Hz(n,t.input.lastClick)&&!n[DM]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(X1(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Qz(t,s,n,!!r)):(o=="doubleClick"?Zz:Gz)(t,s.pos,s.inside,n)?n.preventDefault():Us(t,"pointer"))};class Qz{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[DM],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let c=e.state.doc.resolve(n.pos);o=c.parent,s=c.depth?c.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:u}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof _e&&u.from<=s&&u.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&$i&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Us(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ho(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(X1(e))),this.updateAllowDefault(e),this.allowDefault||!n?Us(this.view,"pointer"):Kz(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||sr&&this.mightDrag&&!this.mightDrag.node.isAtom||Xn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Bu(this.view,je.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Us(this.view,"pointer")}move(e){this.updateAllowDefault(e),Us(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ar.touchstart=t=>{t.input.lastTouch=Date.now(),$x(t),Us(t,"pointer")};ar.touchmove=t=>{t.input.lastTouch=Date.now(),Us(t,"pointer")};ar.contextmenu=t=>$x(t);function NM(t,e){return t.composing?!0:sr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Xz=Si?5e3:-1;lr.compositionstart=lr.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),im(t,!0),t.markCursor=null;else if(im(t),$i&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){t.domSelection().collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}$M(t,Xz)};lr.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,$M(t,20))};function $M(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>im(t),e))}function IM(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=tj());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function ej(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=WP(e.focusNode,e.focusOffset),r=JP(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function tj(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function im(t,e=!1){if(!(Si&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),IM(t),e||t.docView&&t.docView.dirty){let n=Mx(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function nj(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Id=wr&&ia<15||nc&&XP<604;ar.copy=lr.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Id?null:n.clipboardData,s=r.content(),{dom:a,text:l}=SM(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):nj(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function rj(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function ij(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Rd(t,r.value,null,i,e):Rd(t,r.textContent,r.innerHTML,i,e)},50)}function Rd(t,e,n,r,i){let o=CM(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,o||he.empty)))return!0;if(!o)return!1;let s=rj(o),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function RM(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}lr.paste=(t,e)=>{let n=e;if(t.composing&&!Si)return;let r=Id?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Rd(t,RM(r),r.getData("text/html"),i,n)?n.preventDefault():ij(t,n)};class FM{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const LM=ri?"altKey":"ctrlKey";ar.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(X1(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof _e?i.to-1:i.to))){if(r&&r.mightDrag)s=_e.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(s=_e.create(t.state.doc,f.posBefore))}}let a=(s||t.state.selection).content(),{dom:l,text:u,slice:c}=SM(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(Id?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Id||n.dataTransfer.setData("text/plain",u),t.dragging=new FM(c,!n[LM],s)};ar.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};lr.dragover=lr.dragenter=(t,e)=>e.preventDefault();lr.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(X1(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t)}):s=CM(t,RM(n.dataTransfer),Id?null:n.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&!n[LM]);if(t.someProp("handleDrop",p=>p(t,n,s||he.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?GT(t.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let u=t.state.tr;if(a){let{node:p}=r;p?p.replace(u):u.deleteSelection()}let c=u.mapping.map(l),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=u.doc;if(f?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(d))return;let h=u.doc.resolve(c);if(f&&_e.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new _e(h));else{let p=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach((m,b,y,v)=>p=v),u.setSelection(Ox(t,h,u.doc.resolve(p)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};ar.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ho(t)},20))};ar.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};ar.beforeinput=(t,e)=>{if(Xn&&Si&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,ja(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in lr)ar[t]=lr[t];function Fd(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class om{constructor(e,n){this.toDOM=e,this.spec=n||dl,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new Br(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof om&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Fd(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class sa{constructor(e,n){this.attrs=e,this.spec=n||dl}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new Br(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof sa&&Fd(this.attrs,e.attrs)&&Fd(this.spec,e.spec)}static is(e){return e.type instanceof sa}destroy(){}}let oj=class BM{constructor(e,n){this.attrs=e,this.spec=n||dl}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Br(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof BM&&Fd(this.attrs,e.attrs)&&Fd(this.spec,e.spec)}destroy(){}};class Br{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Br(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Br(e,e,new om(n,r))}static inline(e,n,r,i){return new Br(e,n,new sa(r,i))}static node(e,n,r,i){return new Br(e,n,new oj(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof sa}get widget(){return this.type instanceof om}}const au=[],dl={};class Kt{constructor(e,n){this.local=e.length?e:au,this.children=n.length?n:au}static create(e,n){return n.length?sm(n,e,0,dl):Ln}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,i+a,o)}}map(e,n,r){return this==Ln||e.maps.length==0?this:this.mapInner(e,n,0,0,r||dl)}mapInner(e,n,r,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?sj(this.children,s||[],e,n,r,i,o):s?new Kt(s.sort(hl),au):Ln}add(e,n){return n.length?this==Ln?Kt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((a,l)=>{let u=l+r,c;if(c=zM(n,a,u)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,c,u+1):i.splice(o,0,l,l+a.nodeSize,sm(c,a,u+1,dl)),o+=3}});let s=PM(o?jM(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new Kt(s.length?this.local.concat(s).sort(hl):this.local,i||this.children)}remove(e){return e.length==0||this==Ln?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+n,l=r[o+1]+n;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>a&&f.to<l&&(e[c]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(s,a+1);u!=Ln?r[o+2]=u:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let a=0;a<i.length;a++)i[a].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Kt(i,r):Ln}forChild(e,n){if(this==Ln)return this;if(n.isLeaf)return Kt.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,s=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof sa){let u=Math.max(o,l.from)-o,c=Math.min(s,l.to)-o;u<c&&(i||(i=[])).push(l.copy(u,c))}}if(i){let a=new Kt(i.sort(hl),au);return r?new Ls([a,r]):a}return r||Ln}eq(e){if(this==e)return!0;if(!(e instanceof Kt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Ix(this.localsInner(e))}localsInner(e){if(this==Ln)return au;if(e.inlineContent||!this.local.some(sa.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof sa||n.push(this.local[r]);return n}}Kt.empty=new Kt([],[]);Kt.removeOverlap=Ix;const Ln=Kt.empty;class Ls{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,dl));return Ls.from(r)}forChild(e,n){if(n.isLeaf)return Kt.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=Ln&&(o instanceof Ls?r=r.concat(o.members):r.push(o))}return Ls.from(r)}eq(e){if(!(e instanceof Ls)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?Ix(r?n:n.sort(hl)):au}static from(e){switch(e.length){case 0:return Ln;case 1:return e[0];default:return new Ls(e.every(n=>n instanceof Kt)?e:e.reduce((n,r)=>n.concat(r instanceof Kt?r:r.members),[]))}}}function sj(t,e,n,r,i,o,s){let a=t.slice();for(let u=0,c=o;u<n.maps.length;u++){let f=0;n.maps[u].forEach((d,h,p,m)=>{let b=m-p-(h-d);for(let y=0;y<a.length;y+=3){let v=a[y+1];if(v<0||d>v+c-f)continue;let w=a[y]+c-f;h>=w?a[y+1]=d<=w?-2:-1:d>=c&&b&&(a[y]+=b,a[y+1]+=b)}f+=b}),c=n.maps[u].map(c,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let c=n.map(t[u]+o),f=c-i;if(f<0||f>=r.content.size){l=!0;continue}let d=n.map(t[u+1]+o,-1),h=d-i,{index:p,offset:m}=r.content.findIndex(f),b=r.maybeChild(p);if(b&&m==f&&m+b.nodeSize==h){let y=a[u+2].mapInner(n,b,c+1,t[u]+o+1,s);y!=Ln?(a[u]=f,a[u+1]=h,a[u+2]=y):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=aj(a,t,e,n,i,o,s),c=sm(u,r,0,s);e=c.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,d=0;f<c.children.length;f+=3){let h=c.children[f];for(;d<a.length&&a[d]<h;)d+=3;a.splice(d,0,c.children[f],c.children[f+1],c.children[f+2])}}return new Kt(e.sort(hl),a)}function PM(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Br(i.from+e,i.to+e,i.type))}return n}function aj(t,e,n,r,i,o,s){function a(l,u){for(let c=0;c<l.local.length;c++){let f=l.local[c].map(r,i,u);f?n.push(f):s.onRemove&&s.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+u+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+o+1);return n}function zM(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function jM(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function sm(t,e,n,r){let i=[],o=!1;e.forEach((a,l)=>{let u=zM(t,a,l+n);if(u){o=!0;let c=sm(u,a,n+l+1,r);c!=Ln&&i.push(l,l+a.nodeSize,c)}});let s=PM(o?jM(t):t,-n).sort(hl);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Kt(s,i):Ln}function hl(t,e){return t.from-e.from||t.to-e.to}function Ix(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),ZC(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),ZC(e,i,r.copy(o.from,r.to)));break}}}return e}function ZC(t,e,n){for(;e<t.length&&hl(n,t[e])>0;)e++;t.splice(e,0,n)}function Ky(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Ln&&e.push(r)}),t.cursorWrapper&&e.push(Kt.create(t.state.doc,[t.cursorWrapper.deco])),Ls.from(e)}const lj={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},uj=wr&&ia<=11;class cj{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class fj{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new cj,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);wr&&ia<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),uj&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,lj)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(jC(this.view)){if(this.suppressingSelectionUpdates)return Ho(this.view);if(wr&&ia<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Al(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=$d(o))n.add(o);for(let o=e.anchorNode;o;o=$d(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&jC(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,l=[];if(e.editable)for(let c=0;c<n.length;c++){let f=this.registerMutation(n[c],l);f&&(o=o<0?f.from:Math.min(f.from,o),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(a=!0))}if($i&&l.length){let c=l.filter(f=>f.nodeName=="BR");if(c.length==2){let[f,d]=c;f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let d of c){let h=d.parentNode;h&&h.nodeName=="LI"&&(!f||pj(e,f)!=h)&&d.remove()}}}let u=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Y1(r)&&(u=Mx(e))&&u.eq(je.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ho(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),dj(e)),this.handleDOMChange(o,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ho(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let f=e.addedNodes[c];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(wr&&ia<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:d}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d)}let s=i&&i.parentNode==e.target?Tn(i)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=o&&o.parentNode==e.target?Tn(o):e.target.childNodes.length,u=r.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let GC=new WeakMap,YC=!1;function dj(t){if(!GC.has(t)&&(GC.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=$i,YC)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),YC=!0}}function QC(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return Al(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function hj(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return QC(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?QC(t,n):null}function pj(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function mj(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),u,c=l.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:l.anchorOffset}],Y1(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Xn&&t.input.lastKeyCode===8)for(let b=o;b>i;b--){let y=r.childNodes[b-1],v=y.pmViewDesc;if(y.nodeName=="BR"&&!v){o=b;break}if(!v||v.size)break}let f=t.state.doc,d=t.someProp("domParser")||xx.fromSchema(t.state.schema),h=f.resolve(s),p=null,m=d.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:o,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:gj,context:h});if(u&&u[0].pos!=null){let b=u[0].pos,y=u[1]&&u[1].pos;y==null&&(y=b),p={anchor:b+s,head:y+s}}return{doc:m,sel:p,from:s,to:a}}function gj(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(sr&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||sr&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const yj=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function bj(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let O=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,N=Mx(t,O);if(N&&!t.state.selection.eq(N)){if(Xn&&Si&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",R=>R(t,ja(13,"Enter"))))return;let C=t.state.tr.setSelection(N);O=="pointer"?C.setMeta("pointer",!0):O=="key"&&C.scrollIntoView(),o&&C.setMeta("composition",o),t.dispatch(C)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,u=mj(t,e,n),c=t.state.doc,f=c.slice(u.from,u.to),d,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,h="end"):(d=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let p=kj(f.content,u.doc.content,u.from,d,h);if((nc&&t.input.lastIOSEnter>Date.now()-225||Si)&&i.some(O=>O.nodeType==1&&!yj.test(O.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",O=>O(t,ja(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof He&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let O=XC(t,t.state.doc,u.sel);if(O&&!O.eq(t.state.selection)){let N=t.state.tr.setSelection(O);o&&N.setMeta("composition",o),t.dispatch(N)}}return}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof He&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),wr&&ia<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>u.from&&u.doc.textBetween(p.start-u.from-1,p.start-u.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=u.doc.resolveNoCache(p.start-u.from),b=u.doc.resolveNoCache(p.endB-u.from),y=c.resolve(p.start),v=m.sameParent(b)&&m.parent.inlineContent&&y.end()>=p.endA,w;if((nc&&t.input.lastIOSEnter>Date.now()-225&&(!v||i.some(O=>O.nodeName=="DIV"||O.nodeName=="P"))||!v&&m.pos<u.doc.content.size&&!m.sameParent(b)&&(w=je.findFrom(u.doc.resolve(m.pos+1),1,!0))&&w.head==b.pos)&&t.someProp("handleKeyDown",O=>O(t,ja(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&wj(c,p.start,p.endA,m,b)&&t.someProp("handleKeyDown",O=>O(t,ja(8,"Backspace")))){Si&&Xn&&t.domObserver.suppressSelectionUpdates();return}Xn&&Si&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),Si&&!v&&m.start()!=b.start()&&b.parentOffset==0&&m.depth==b.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==p.endA&&(p.endB-=2,b=u.doc.resolveNoCache(p.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(O){return O(t,ja(13,"Enter"))})},20));let g=p.start,x=p.endA,k,E,D;if(v){if(m.pos==b.pos)wr&&ia<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ho(t),20)),k=t.state.tr.delete(g,x),E=c.resolve(p.start).marksAcross(c.resolve(p.endA));else if(p.endA==p.endB&&(D=vj(m.parent.content.cut(m.parentOffset,b.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start()))))k=t.state.tr,D.type=="add"?k.addMark(g,x,D.mark):k.removeMark(g,x,D.mark);else if(m.parent.child(m.index()).isText&&m.index()==b.index()-(b.textOffset?0:1)){let O=m.parent.textBetween(m.parentOffset,b.parentOffset);if(t.someProp("handleTextInput",N=>N(t,g,x,O)))return;k=t.state.tr.insertText(O,g,x)}}if(k||(k=t.state.tr.replace(g,x,u.doc.slice(p.start-u.from,p.endB-u.from))),u.sel){let O=XC(t,k.doc,u.sel);O&&!(Xn&&Si&&t.composing&&O.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(O.head==g||O.head==k.mapping.map(x)-1)||wr&&O.empty&&O.head==g)&&k.setSelection(O)}E&&k.ensureMarks(E),o&&k.setMeta("composition",o),t.dispatch(k.scrollIntoView())}function XC(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Ox(t,e.resolve(n.anchor),e.resolve(n.head))}function vj(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,a,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)o=n[c].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",l=c=>c.mark(a.addToSet(c.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(l(e.child(c)));if(oe.from(u).eq(t))return{mark:a,type:s}}function wj(t,e,n,r,i){if(n-e<=i.pos-r.pos||Zy(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&n==e+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(Zy(o,!0,!0));return!s.parent.isTextblock||s.pos>n||Zy(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Zy(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function kj(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,o-Math.min(s,a));r-=s+l-o}if(s<o&&t.size<e.size){let l=r<=o&&r>=s?o-r:0;o-=l,o&&o<e.size&&e6(e.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-s),s=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<t.size&&e6(t.textBetween(o-1,o+1))&&(o+=l?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function e6(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class xj{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new zz,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(o6),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=r6(this),n6(this),this.nodeViews=i6(this),this.docView=RC(this.state.doc,t6(this),Ky(this),this.dom,this),this.domObserver=new fj(this,(r,i,o,s)=>bj(this,r,i,o,s)),this.domObserver.start(),jz(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Zv(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(o6),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(IM(this),s=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=i6(this);Sj(h,this.nodeViews)&&(this.nodeViews=h,o=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Zv(this),this.editable=r6(this),n6(this);let l=Ky(this),u=t6(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,u,l);(f||!e.selection.eq(i.selection))&&(s=!0);let d=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&nz(this);if(s){this.domObserver.stop();let h=f&&(wr||Xn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Ej(i.selection,e.selection);if(f){let p=Xn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=ej(this)),(o||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=RC(e.doc,u,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&_z(this))?Ho(this,h):(kM(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&rz(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof _e){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&MC(this,n.getBoundingClientRect(),e)}else MC(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new FM(e.slice,e.move,i<0?void 0:_e.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(i=n?n(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(wr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&iz(this.dom),Ho(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return uz(this,e)}coordsAtPos(e,n=1){return hM(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return pz(this,n||this.state,e)}pasteHTML(e,n){return Rd(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Rd(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(qz(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ky(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,UP())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Uz(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return sr&&this.root.nodeType===11&&ZP(this.dom.ownerDocument)==this.dom&&hj(this,e)||e}domSelection(){return this.root.getSelection()}}function t6(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Br.node(0,t.state.doc.content.size,e)]}function n6(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Br.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function r6(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Ej(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function i6(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Sj(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function o6(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var da={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},am={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Cj=typeof navigator<"u"&&/Mac/.test(navigator.platform),_j=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Mn=0;Mn<10;Mn++)da[48+Mn]=da[96+Mn]=String(Mn);for(var Mn=1;Mn<=24;Mn++)da[Mn+111]="F"+Mn;for(var Mn=65;Mn<=90;Mn++)da[Mn]=String.fromCharCode(Mn+32),am[Mn]=String.fromCharCode(Mn);for(var Gy in da)am.hasOwnProperty(Gy)||(am[Gy]=da[Gy]);function Aj(t){var e=Cj&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||_j&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?am:da)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Tj=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Mj(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))Tj?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function Oj(t){let e=Object.create(null);for(let n in t)e[Mj(n)]=t[n];return e}function Yy(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Dj(t){return new Kr({props:{handleKeyDown:qM(t)}})}function qM(t){let e=Oj(t);return function(n,r){let i=Aj(r),o,s=e[Yy(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Yy(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=da[r.keyCode])&&o!=i){let a=e[Yy(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const Nj=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function VM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const $j=(t,e,n)=>{let r=VM(t,n);if(!r)return!1;let i=Rx(r);if(!i){let s=r.blockRange(),a=s&&Nc(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&JM(t,i,e))return!0;if(r.parent.content.size==0&&(rc(o,"end")||_e.isSelectable(o))){let s=G1(t.doc,r.before(),r.after(),he.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(rc(o,"end")?je.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):_e.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},Ij=(t,e,n)=>{let r=VM(t,n);if(!r)return!1;let i=Rx(r);return i?UM(t,i,e):!1},Rj=(t,e,n)=>{let r=HM(t,n);if(!r)return!1;let i=Fx(r);return i?UM(t,i,e):!1};function UM(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let u=G1(t.doc,o,l,he.empty);if(!u||u.from!=o||u instanceof Ni&&u.slice.size>=l-o)return!1;if(n){let c=t.tr.step(u);c.setSelection(He.create(c.doc,o)),n(c.scrollIntoView())}return!0}function rc(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Fj=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Rx(r)}let s=o&&o.nodeBefore;return!s||!_e.isSelectable(s)?!1:(e&&e(t.tr.setSelection(_e.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Rx(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function HM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Lj=(t,e,n)=>{let r=HM(t,n);if(!r)return!1;let i=Fx(r);if(!i)return!1;let o=i.nodeAfter;if(JM(t,i,e))return!0;if(r.parent.content.size==0&&(rc(o,"start")||_e.isSelectable(o))){let s=G1(t.doc,r.before(),r.after(),he.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(rc(o,"start")?je.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):_e.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},Bj=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Fx(r)}let s=o&&o.nodeAfter;return!s||!_e.isSelectable(s)?!1:(e&&e(t.tr.setSelection(_e.create(t.doc,o.pos)).scrollIntoView()),!0)};function Fx(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Pj=(t,e)=>{let n=t.selection,r=n instanceof _e,i;if(r){if(n.node.isTextblock||!ka(t.doc,n.from))return!1;i=n.from}else if(i=Z1(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(_e.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},zj=(t,e)=>{let n=t.selection,r;if(n instanceof _e){if(n.node.isTextblock||!ka(t.doc,n.to))return!1;r=n.to}else if(r=Z1(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},jj=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&Nc(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},qj=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function WM(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Vj=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=WM(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(je.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Uj=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof fl||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=WM(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(He.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},Hj=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Lu(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Nc(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},Wj=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(_e.create(t.doc,i))),!0)};function Jj(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||ka(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function JM(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(Jj(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(n){let f=e.pos+i.nodeSize,d=oe.empty;for(let m=o.length-1;m>=0;m--)d=oe.from(o[m].create(null,d));d=oe.from(r.copy(d));let h=t.tr.step(new _r(e.pos-1,f,e.pos,f,new he(d,1,0),o.length,!0)),p=f+2*o.length;ka(h.doc,p)&&h.join(p),n(h.scrollIntoView())}return!0}let l=je.findFrom(e,1),u=l&&l.$from.blockRange(l.$to),c=u&&Nc(u);if(c!=null&&c>=e.depth)return n&&n(t.tr.lift(u,c).scrollIntoView()),!0;if(a&&rc(i,"start",!0)&&rc(r,"end")){let f=r,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(f.canReplace(f.childCount,f.childCount,h.content)){if(n){let m=oe.empty;for(let y=d.length-1;y>=0;y--)m=oe.from(d[y].copy(m));let b=t.tr.step(new _r(e.pos-d.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new he(m,d.length,0),0,!0));n(b.scrollIntoView())}return!0}}return!1}function KM(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(He.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const Kj=KM(-1),Zj=KM(1);function Gj(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&Ax(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function s6(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(s,a,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let c=n.doc.resolve(u),f=c.index();i=c.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];o.setBlockType(a,l,t,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Yj(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(t)&&s.startIndex==0){if(i.index(s.depth-1)==0)return!1;let c=n.doc.resolve(s.start-2);l=new em(c,c,s.depth),s.endIndex<s.parent.childCount&&(s=new em(i,n.doc.resolve(o.end(s.depth)),s.depth)),a=!0}let u=Ax(l,t,e,s);return u?(r&&r(Qj(n.tr,s,u,a,t).scrollIntoView()),!0):!1}}function Qj(t,e,n,r,i){let o=oe.empty;for(let c=n.length-1;c>=0;c--)o=oe.from(n[c].type.create(n[c].attrs,o));t.step(new _r(e.start-(r?2:0),e.end,e.start,e.end,new he(o,0,0),n.length,!0));let s=0;for(let c=0;c<n.length;c++)n[c].type==i&&(s=c+1);let a=n.length-s,l=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,f=e.endIndex,d=!0;c<f;c++,d=!1)!d&&Lu(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=u.child(c).nodeSize;return t}function Xj(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?eq(e,n,t,o):tq(e,n,o):!0:!1}}function eq(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new _r(o-1,s,o,s,new he(oe.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new em(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=Nc(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(o,-1)-1;return ka(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function tq(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(a?0:1),c+1,s.content.append(l?oe.empty:oe.from(i))))return!1;let f=o.pos,d=f+s.nodeSize;return r.step(new _r(f-(a?1:0),d+(l?1:0),f+1,d-1,new he((a?oe.empty:oe.from(i.copy(oe.empty))).append(l?oe.empty:oe.from(i.copy(oe.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function nq(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let u=l.lastChild&&l.lastChild.type==a.type,c=oe.from(u?t.create():null),f=new he(oe.from(t.create(null,oe.from(a.type.create(null,c)))),u?3:1,0),d=o.start,h=o.end;n(e.tr.step(new _r(d-(u?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}function eg(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}let tg=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>{const f=l(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a=[],l=!!e,u=e||o.tr,c=()=>(!l&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),a.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...m)=>{const b=this.buildProps(u,n),y=h(...m)(b);return a.push(y),f}])),run:c};return f}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...c)=>u(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a={tr:e,editor:i,view:s,state:eg({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,u])=>[l,(...c)=>u(...c)(a)]))}};return a}};class rq{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function ye(t,e,n){return t.config[e]===void 0&&t.parent?ye(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?ye(t.parent,e,n):null}):t.config[e]}function ng(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function ZM(t){const e=[],{nodeExtensions:n,markExtensions:r}=ng(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:i},l=ye(s,"addGlobalAttributes",a);if(!l)return;l().forEach(c=>{c.types.forEach(f=>{Object.entries(c.attributes).forEach(([d,h])=>{e.push({type:f,name:d,attribute:{...o,...h}})})})})}),i.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=ye(s,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([c,f])=>{const d={...o,...f};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:s.name,name:c,attribute:d})})}),e}function yn(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function nn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const a=o?o.split(" "):[],l=r[i]?r[i].split(" "):[],u=a.filter(c=>!l.includes(c));r[i]=[...l,...u].join(" ")}else i==="style"?r[i]=[r[i],o].join("; "):r[i]=o}),r},{})}function Gv(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>nn(n,r),{})}function GM(t){return typeof t=="function"}function Ue(t,e=void 0,...n){return GM(t)?e?t.bind(e)(...n):t(...n):t}function iq(t={}){return Object.keys(t).length===0&&t.constructor===Object}function oq(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function a6(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):oq(n.getAttribute(s.name));return a==null?o:{...o,[s.name]:a}},{});return{...r,...i}}}}function l6(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&iq(n)?!1:n!=null))}function sq(t,e){var n;const r=ZM(t),{nodeExtensions:i,markExtensions:o}=ng(t),s=(n=i.find(u=>ye(u,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(u=>{const c=r.filter(y=>y.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},d=t.reduce((y,v)=>{const w=ye(v,"extendNodeSchema",f);return{...y,...w?w(u):{}}},{}),h=l6({...d,content:Ue(ye(u,"content",f)),marks:Ue(ye(u,"marks",f)),group:Ue(ye(u,"group",f)),inline:Ue(ye(u,"inline",f)),atom:Ue(ye(u,"atom",f)),selectable:Ue(ye(u,"selectable",f)),draggable:Ue(ye(u,"draggable",f)),code:Ue(ye(u,"code",f)),whitespace:Ue(ye(u,"whitespace",f)),defining:Ue(ye(u,"defining",f)),isolating:Ue(ye(u,"isolating",f)),attrs:Object.fromEntries(c.map(y=>{var v;return[y.name,{default:(v=y==null?void 0:y.attribute)===null||v===void 0?void 0:v.default}]}))}),p=Ue(ye(u,"parseHTML",f));p&&(h.parseDOM=p.map(y=>a6(y,c)));const m=ye(u,"renderHTML",f);m&&(h.toDOM=y=>m({node:y,HTMLAttributes:Gv(y,c)}));const b=ye(u,"renderText",f);return b&&(h.toText=b),[u.name,h]})),l=Object.fromEntries(o.map(u=>{const c=r.filter(b=>b.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},d=t.reduce((b,y)=>{const v=ye(y,"extendMarkSchema",f);return{...b,...v?v(u):{}}},{}),h=l6({...d,inclusive:Ue(ye(u,"inclusive",f)),excludes:Ue(ye(u,"excludes",f)),group:Ue(ye(u,"group",f)),spanning:Ue(ye(u,"spanning",f)),code:Ue(ye(u,"code",f)),attrs:Object.fromEntries(c.map(b=>{var y;return[b.name,{default:(y=b==null?void 0:b.attribute)===null||y===void 0?void 0:y.default}]}))}),p=Ue(ye(u,"parseHTML",f));p&&(h.parseDOM=p.map(b=>a6(b,c)));const m=ye(u,"renderHTML",f);return m&&(h.toDOM=b=>m({mark:b,HTMLAttributes:Gv(b,c)})),[u.name,h]}));return new BT({topNode:s,nodes:a,marks:l})}function Qy(t,e){return e.nodes[t]||e.marks[t]||null}function u6(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const aq=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,a)=>{var l,u;const c=((u=(l=i.type.spec).toText)===null||u===void 0?void 0:u.call(l,{node:i,pos:o,parent:s,index:a}))||i.textContent||"%leaf%";n+=c.slice(0,Math.max(0,r-o))}),n};function Lx(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class rg{constructor(e){this.find=e.find,this.handler=e.handler}}const lq=(t,e)=>{if(Lx(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function up(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let c=!1;const f=aq(u)+o;return s.forEach(d=>{if(c)return;const h=lq(f,d.find);if(!h)return;const p=l.state.tr,m=eg({state:l.state,transaction:p}),b={from:r-(h[0].length-o.length),to:i},{commands:y,chain:v,can:w}=new tg({editor:n,state:m});d.handler({state:m,range:b,match:h,commands:y,chain:v,can:w})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:o}),l.dispatch(p),c=!0)}),c}function uq(t){const{editor:e,rules:n}=t,r=new Kr({state:{init(){return null},apply(i,o){const s=i.getMeta(r);if(s)return s;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{const{from:u,text:c}=a,f=u+c.length;up({editor:e,from:u,to:f,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,a){return up({editor:e,from:o,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&up({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?up({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function cq(t){return typeof t=="number"}let fq=class{constructor(e){this.find=e.find,this.handler=e.handler}};const dq=(t,e,n)=>{if(Lx(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function hq(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:a}=t,{commands:l,chain:u,can:c}=new tg({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,i,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const m=Math.max(r,p),b=Math.min(i,p+h.content.size),y=h.textBetween(m-p,b-p,void 0,"");dq(y,o.find,s).forEach(w=>{if(w.index===void 0)return;const g=m+w.index+1,x=g+w[0].length,k={from:n.tr.mapping.map(g),to:n.tr.mapping.map(x)},E=o.handler({state:n,range:k,match:w,commands:l,chain:u,can:c,pasteEvent:s,dropEvent:a});f.push(E)})}),f.every(h=>h!==null)}const pq=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function mq(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;const l=({state:c,from:f,to:d,rule:h,pasteEvt:p})=>{const m=c.tr,b=eg({state:c,transaction:m});if(!(!hq({editor:e,state:b,from:Math.max(f-1,0),to:d.b-1,rule:h,pasteEvent:p,dropEvent:a})||!m.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m};return n.map(c=>new Kr({view(f){const d=h=>{var p;r=!((p=f.dom.parentElement)===null||p===void 0)&&p.contains(h.target)?f.dom.parentElement:null};return window.addEventListener("dragstart",d),{destroy(){window.removeEventListener("dragstart",d)}}},props:{handleDOMEvents:{drop:(f,d)=>(o=r===f.dom.parentElement,a=d,!1),paste:(f,d)=>{var h;const p=(h=d.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return s=d,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(f,d,h)=>{const p=f[0],m=p.getMeta("uiEvent")==="paste"&&!i,b=p.getMeta("uiEvent")==="drop"&&!o,y=p.getMeta("applyPasteRules"),v=!!y;if(!m&&!b&&!v)return;if(v){const{from:x,text:k}=y,E=x+k.length,D=pq(k);return l({rule:c,state:h,from:x,to:{b:E},pasteEvt:D})}const w=d.doc.content.findDiffStart(h.doc.content),g=d.doc.content.findDiffEnd(h.doc.content);if(!(!cq(w)||!g||w===g.b))return l({rule:c,state:h,from:w,to:g,pasteEvt:s})}}))}function gq(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class Au{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Au.resolve(e),this.schema=sq(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Au.sort(Au.flatten(e)),r=gq(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=ye(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=ye(r,"priority")||100,s=ye(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Qy(n.name,this.schema)},i=ye(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Au.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:e,type:Qy(s.name,this.schema)},l=[],u=ye(s,"addKeyboardShortcuts",a);let c={};if(s.type==="mark"&&ye(s,"exitable",a)&&(c.ArrowRight=()=>Fl.handleExit({editor:e,mark:s})),u){const m=Object.fromEntries(Object.entries(u()).map(([b,y])=>[b,()=>y({editor:e})]));c={...c,...m}}const f=Dj(c);l.push(f);const d=ye(s,"addInputRules",a);u6(s,e.options.enableInputRules)&&d&&r.push(...d());const h=ye(s,"addPasteRules",a);u6(s,e.options.enablePasteRules)&&h&&i.push(...h());const p=ye(s,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[uq({editor:e,rules:r}),...mq({editor:e,rules:i}),...o]}get attributes(){return ZM(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=ng(this.extensions);return Object.fromEntries(n.filter(r=>!!ye(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:yn(r.name,this.schema)},s=ye(r,"addNodeView",o);if(!s)return[];const a=(l,u,c,f)=>{const d=Gv(l,i);return s()({editor:e,node:l,getPos:c,decorations:f,HTMLAttributes:d,extension:r})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Qy(e.name,this.schema)};e.type==="mark"&&(!((n=Ue(ye(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=ye(e,"onBeforeCreate",r),o=ye(e,"onCreate",r),s=ye(e,"onUpdate",r),a=ye(e,"onSelectionUpdate",r),l=ye(e,"onTransaction",r),u=ye(e,"onFocus",r),c=ye(e,"onBlur",r),f=ye(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),f&&this.editor.on("destroy",f)})}}function yq(t){return Object.prototype.toString.call(t).slice(8,-1)}function cp(t){return yq(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function ig(t,e){const n={...t};return cp(t)&&cp(e)&&Object.keys(e).forEach(r=>{cp(e[r])&&cp(t[r])?n[r]=ig(t[r],e[r]):n[r]=e[r]}),n}let Eo=class Yv{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ue(ye(this,"addOptions",{name:this.name}))),this.storage=Ue(ye(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Yv(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>ig(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Yv({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ue(ye(n,"addOptions",{name:n.name})),n.storage=Ue(ye(n,"addStorage",{name:n.name,options:n.options})),n}};function YM(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let a="";return t.nodesBetween(r,i,(l,u,c,f)=>{var d;l.isBlock&&u>r&&(a+=o);const h=s==null?void 0:s[l.type.name];if(h)return c&&(a+=h({node:l,pos:u,parent:c,index:f,range:e})),!1;l.isText&&(a+=(d=l==null?void 0:l.text)===null||d===void 0?void 0:d.slice(Math.max(r,u)-u,i-u))}),a}function QM(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const bq=Eo.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Kr({key:new xo("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(c=>c.$from.pos)),a=Math.max(...o.map(c=>c.$to.pos)),l=QM(n);return YM(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),vq=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),wq=(t=!1)=>({commands:e})=>e.setContent("",t),kq=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:c}=e,f=u.resolve(c.map(l)),d=u.resolve(c.map(l+a.nodeSize)),h=f.blockRange(d);if(!h)return;const p=Nc(h);if(a.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},xq=t=>e=>t(e),Eq=()=>({state:t,dispatch:e})=>Uj(t,e),Sq=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new He(r.doc.resolve(s-1))),!0},Cq=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const a=i.before(o),l=i.after(o);t.delete(a,l).scrollIntoView()}return!0}return!1},_q=t=>({tr:e,state:n,dispatch:r})=>{const i=yn(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const l=o.before(s),u=o.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},Aq=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},Tq=()=>({state:t,dispatch:e})=>Nj(t,e),Mq=()=>({commands:t})=>t.keyboardShortcut("Enter"),Oq=()=>({state:t,dispatch:e})=>Vj(t,e);function lm(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Lx(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Qv(t,e,n={}){return t.find(r=>r.type===e&&lm(r.attrs,n))}function Dq(t,e,n={}){return!!Qv(t,e,n)}function Bx(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=Qv([...r.node.marks],e,n);if(!i)return;let o=r.index,s=t.start()+r.offset,a=o+1,l=s+r.node.nodeSize;for(Qv([...r.node.marks],e,n);o>0&&i.isInSet(t.parent.child(o-1).marks);)o-=1,s-=t.parent.child(o).nodeSize;for(;a<t.parent.childCount&&Dq([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function Ea(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const Nq=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Ea(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:u,to:c}=a;if(i){const f=Bx(l,o,e);if(f&&f.from<=u&&f.to>=c){const d=He.create(s,f.from,f.to);n.setSelection(d)}}return!0},$q=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function XM(t){return t instanceof He}function Ga(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function eO(t,e=null){if(!e)return null;const n=je.atStart(t),r=je.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?He.create(t,Ga(0,i,o),Ga(t.content.size,i,o)):He.create(t,Ga(e,i,o),Ga(e,i,o))}function og(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Iq=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{og()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!XM(n.state.selection))return s(),!0;const a=eO(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},Rq=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),Fq=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),tO=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&tO(r)}return t};function c6(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return tO(n)}function um(t,e,n){n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{return Array.isArray(t)&&t.length>0?oe.fromArray(t.map(s=>e.nodeFromJSON(s))):e.nodeFromJSON(t)}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),um("",e,n)}if(i){let o=e,s=!1,a="";n.errorOnInvalidContent&&(o=new BT({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})}));const l=xx.fromSchema(o),u=n.slice?l.parseSlice(c6(t),n.parseOptions).content:l.parse(c6(t),n.parseOptions);if(n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)});return u}return um("",e,n)}function Lq(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ni||i instanceof _r))return;const o=t.mapping.maps[r];let s=0;o.forEach((a,l,u,c)=>{s===0&&(s=c)}),t.setSelection(je.near(t.doc.resolve(s),n))}const Bq=t=>!("type"in t),Pq=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=um(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch{return!1}let{from:l,to:u}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,f=!0;if((Bq(a)?a:[a]).forEach(p=>{p.check(),c=c?p.isText&&p.marks.length===0:!1,f=f?p.isBlock:!1}),l===u&&f){const{parent:p}=r.doc.resolve(l);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(l-=1,u+=1)}let h;c?(Array.isArray(e)?h=e.map(p=>p.text||"").join(""):typeof e=="object"&&e&&e.text?h=e.text:h=e,r.insertText(h,l,u)):(h=a,r.replaceWith(l,u,h)),n.updateSelection&&Lq(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:h}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:h})}return!0},zq=()=>({state:t,dispatch:e})=>Pj(t,e),jq=()=>({state:t,dispatch:e})=>zj(t,e),qq=()=>({state:t,dispatch:e})=>$j(t,e),Vq=()=>({state:t,dispatch:e})=>Lj(t,e),Uq=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Z1(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Hq=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Z1(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Wq=()=>({state:t,dispatch:e})=>Ij(t,e),Jq=()=>({state:t,dispatch:e})=>Rj(t,e);function nO(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Kq(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))og()||nO()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const Zq=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=Kq(t).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,a))});return l==null||l.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function Ld(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?yn(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(f,d)=>{if(f.isText)return;const h=Math.max(r,d),p=Math.min(i,d+f.nodeSize);a.push({node:f,from:h,to:p})});const l=i-r,u=a.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>lm(f.node.attrs,n,{strict:!1}));return o?!!u.length:u.reduce((f,d)=>f+d.to-d.from,0)>=l}const Gq=(t,e={})=>({state:n,dispatch:r})=>{const i=yn(t,n.schema);return Ld(n,i,e)?jj(n,r):!1},Yq=()=>({state:t,dispatch:e})=>Hj(t,e),Qq=t=>({state:e,dispatch:n})=>{const r=yn(t,e.schema);return Xj(r)(e,n)},Xq=()=>({state:t,dispatch:e})=>qj(t,e);function sg(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function f6(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const eV=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=sg(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=yn(t,r.schema)),a==="mark"&&(s=Ea(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,c)=>{o&&o===u.type&&n.setNodeMarkup(c,void 0,f6(u.attrs,e)),s&&u.marks.length&&u.marks.forEach(f=>{s===f.type&&n.addMark(c,c+u.nodeSize,s.create(f6(f.attrs,e)))})})}),!0):!1},tV=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),nV=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),rV=()=>({state:t,dispatch:e})=>Fj(t,e),iV=()=>({state:t,dispatch:e})=>Bj(t,e),oV=()=>({state:t,dispatch:e})=>Wj(t,e),sV=()=>({state:t,dispatch:e})=>Zj(t,e),aV=()=>({state:t,dispatch:e})=>Kj(t,e);function Xv(t,e,n={},r={}){return um(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const lV=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:a})=>{var l,u;const{doc:c}=o;if(n.preserveWhitespace!=="full"){const f=Xv(t,i.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return s&&o.replaceWith(0,c.content.size,f).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:c.content.size},t,{parseOptions:n,errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:i.options.enableContentCheck})};function ag(t,e){const n=Ea(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function uV(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function cV(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Px(t){return e=>cV(e.$from,t)}function fV(t,e){const n=mh.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function dV(t,e){const n={from:0,to:t.content.size};return YM(t,n,e)}function hV(t,e){const n=yn(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,a=>{o.push(a)});const s=o.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function pV(t,e){const n=sg(typeof e=="string"?e:e.name,t.schema);return n==="node"?hV(t,e):n==="mark"?ag(t,e):{}}function rO(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t-1),s=Bx(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function c0(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function ew(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Ea(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>lm(f.attrs,n,{strict:!1}));let s=0;const a=[];if(i.forEach(({$from:f,$to:d})=>{const h=f.pos,p=d.pos;t.doc.nodesBetween(h,p,(m,b)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,b),v=Math.min(p,b+m.nodeSize),w=v-y;s+=w,a.push(...m.marks.map(g=>({mark:g,from:y,to:v})))})}),s===0)return!1;const l=a.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>lm(f.mark.attrs,n,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),u=a.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,d)=>f+d.to-d.from,0);return(l>0?l+u:l)>=s}function mV(t,e,n={}){if(!e)return Ld(t,null,n)||ew(t,null,n);const r=sg(e,t.schema);return r==="node"?Ld(t,e,n):r==="mark"?ew(t,e,n):!1}function d6(t,e){const{nodeExtensions:n}=ng(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Ue(ye(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function gV(t){const e=t.type.createAndFill();return e?t.eq(e):!1}function yV(t){return t instanceof _e}function bV(t,e,n){var r;const{selection:i}=e;let o=null;if(XM(i)&&(o=i.$cursor),o){const a=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:a,$to:l})=>{let u=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(c,f,d)=>{if(u)return!1;if(c.isInline){const h=!d||d.type.allowsMarkType(n),p=!!n.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(n));u=h&&p}return!u}),u})}const vV=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,l=Ea(t,r.schema);if(i)if(s){const u=ag(r,l);n.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const c=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(c,f,(d,h)=>{const p=Math.max(h,c),m=Math.min(h+d.nodeSize,f);d.marks.find(y=>y.type===l)?d.marks.forEach(y=>{l===y.type&&n.addMark(p,m,l.create({...y.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return bV(r,n,l)},wV=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),kV=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=yn(t,n.schema);return o.isTextblock?i().command(({commands:s})=>s6(o,e)(n)?!0:s.clearNodes()).command(({state:s})=>s6(o,e)(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},xV=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Ga(t,0,r.content.size),o=_e.create(r,i);e.setSelection(o)}return!0},EV=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=He.atStart(r).from,a=He.atEnd(r).to,l=Ga(i,s,a),u=Ga(o,s,a),c=He.create(r,l,u);e.setSelection(c)}return!0},SV=t=>({state:e,dispatch:n})=>{const r=yn(t,e.schema);return nq(r)(e,n)};function h6(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const CV=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:a,$to:l}=o,u=i.extensionManager.attributes,c=c0(u,a.node().type.name,a.node().attrs);if(o instanceof _e&&o.node.isBlock)return!a.parentOffset||!Lu(s,a.pos)?!1:(r&&(t&&h6(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const f=l.parentOffset===l.parent.content.size;o instanceof He&&e.deleteSelection();const d=a.depth===0?void 0:uV(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=f&&d?[{type:d,attrs:c}]:void 0,p=Lu(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&Lu(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,h=d?[{type:d,attrs:c}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),d&&!f&&!a.parentOffset&&a.parent.type!==d)){const m=e.mapping.map(a.before()),b=e.doc.resolve(m);a.node(-1).canReplaceWith(b.index(),b.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}t&&h6(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},_V=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var o;const s=yn(t,n.schema),{$from:a,$to:l}=n.selection,u=n.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(l))return!1;const c=a.node(-1);if(c.type!==s)return!1;const f=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==s||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let b=oe.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let E=a.depth-y;E>=a.depth-3;E-=1)b=oe.from(a.node(E).copy(b));const v=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,w=c0(f,a.node().type.name,a.node().attrs),g=((o=s.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(w))||void 0;b=b.append(oe.from(s.createAndFill(null,g)||void 0));const x=a.before(a.depth-(y-1));e.replace(x,a.after(-v),new he(b,4-y,0));let k=-1;e.doc.nodesBetween(x,e.doc.content.size,(E,D)=>{if(k>-1)return!1;E.isTextblock&&E.content.size===0&&(k=D+1)}),k>-1&&e.setSelection(He.near(e.doc.resolve(k))),e.scrollIntoView()}return!0}const d=l.pos===a.end()?c.contentMatchAt(0).defaultType:null,h=c0(f,c.type.name,c.attrs),p=c0(f,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=d?[{type:s,attrs:h},{type:d,attrs:p}]:[{type:s,attrs:h}];if(!Lu(e.doc,a.pos,2))return!1;if(r){const{selection:b,storedMarks:y}=n,{splittableMarks:v}=i.extensionManager,w=y||b.$to.parentOffset&&b.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!w||!r)return!0;const g=w.filter(x=>v.includes(x.type.name));e.ensureMarks(g)}return!0},Xy=(t,e)=>{const n=Px(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&ka(t.doc,n.pos)&&t.join(n.pos),!0},eb=(t,e)=>{const n=Px(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&ka(t.doc,r)&&t.join(r),!0},AV=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:u,can:c})=>{const{extensions:f,splittableMarks:d}=i.extensionManager,h=yn(t,s.schema),p=yn(e,s.schema),{selection:m,storedMarks:b}=s,{$from:y,$to:v}=m,w=y.blockRange(v),g=b||m.$to.parentOffset&&m.$from.marks();if(!w)return!1;const x=Px(k=>d6(k.type.name,f))(m);if(w.depth>=1&&x&&w.depth-x.depth<=1){if(x.node.type===h)return u.liftListItem(p);if(d6(x.node.type.name,f)&&h.validContent(x.node.content)&&a)return l().command(()=>(o.setNodeMarkup(x.pos,h),!0)).command(()=>Xy(o,h)).command(()=>eb(o,h)).run()}return!n||!g||!a?l().command(()=>c().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>Xy(o,h)).command(()=>eb(o,h)).run():l().command(()=>{const k=c().wrapInList(h,r),E=g.filter(D=>d.includes(D.type.name));return o.ensureMarks(E),k?!0:u.clearNodes()}).wrapInList(h,r).command(()=>Xy(o,h)).command(()=>eb(o,h)).run()},TV=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Ea(t,r.schema);return ew(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},MV=(t,e,n={})=>({state:r,commands:i})=>{const o=yn(t,r.schema),s=yn(e,r.schema);return Ld(r,o,n)?i.setNode(s):i.setNode(o,n)},OV=(t,e={})=>({state:n,commands:r})=>{const i=yn(t,n.schema);return Ld(n,i,e)?r.lift(i):r.wrapIn(i,e)},DV=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,l))}else s.delete(o.from,o.to)}return!0}}return!1},NV=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},$V=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=Ea(t,r.schema),{$from:u,empty:c,ranges:f}=a;if(!i)return!0;if(c&&s){let{from:d,to:h}=a;const p=(o=u.marks().find(b=>b.type===l))===null||o===void 0?void 0:o.attrs,m=Bx(u,l,p);m&&(d=m.from,h=m.to),n.removeMark(d,h,l)}else f.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,l)});return n.removeStoredMark(l),!0},IV=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=sg(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=yn(t,r.schema)),a==="mark"&&(s=Ea(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const u=l.$from.pos,c=l.$to.pos;r.doc.nodesBetween(u,c,(f,d)=>{o&&o===f.type&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),s&&f.marks.length&&f.marks.forEach(h=>{if(s===h.type){const p=Math.max(d,u),m=Math.min(d+f.nodeSize,c);n.addMark(p,m,s.create({...h.attrs,...e}))}})})}),!0):!1},RV=(t,e={})=>({state:n,dispatch:r})=>{const i=yn(t,n.schema);return Gj(i,e)(n,r)},FV=(t,e={})=>({state:n,dispatch:r})=>{const i=yn(t,n.schema);return Yj(i,e)(n,r)};var LV=Object.freeze({__proto__:null,blur:vq,clearContent:wq,clearNodes:kq,command:xq,createParagraphNear:Eq,cut:Sq,deleteCurrentNode:Cq,deleteNode:_q,deleteRange:Aq,deleteSelection:Tq,enter:Mq,exitCode:Oq,extendMarkRange:Nq,first:$q,focus:Iq,forEach:Rq,insertContent:Fq,insertContentAt:Pq,joinBackward:qq,joinDown:jq,joinForward:Vq,joinItemBackward:Uq,joinItemForward:Hq,joinTextblockBackward:Wq,joinTextblockForward:Jq,joinUp:zq,keyboardShortcut:Zq,lift:Gq,liftEmptyBlock:Yq,liftListItem:Qq,newlineInCode:Xq,resetAttributes:eV,scrollIntoView:tV,selectAll:nV,selectNodeBackward:rV,selectNodeForward:iV,selectParentNode:oV,selectTextblockEnd:sV,selectTextblockStart:aV,setContent:lV,setMark:vV,setMeta:wV,setNode:kV,setNodeSelection:xV,setTextSelection:EV,sinkListItem:SV,splitBlock:CV,splitListItem:_V,toggleList:AV,toggleMark:TV,toggleNode:MV,toggleWrap:OV,undoInputRule:DV,unsetAllMarks:NV,unsetMark:$V,updateAttributes:IV,wrapIn:RV,wrapInList:FV});const BV=Eo.create({name:"commands",addCommands(){return{...LV}}}),PV=Eo.create({name:"editable",addProseMirrorPlugins(){return[new Kr({key:new xo("editable"),props:{editable:()=>this.editor.options.editable}})]}}),zV=Eo.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Kr({key:new xo("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),jV=Eo.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:c,$anchor:f}=l,{pos:d,parent:h}=f,p=f.parent.isTextblock&&d>0?a.doc.resolve(d-1):f,m=p.parent.type.spec.isolating,b=f.pos-f.parentOffset,y=m&&p.parent.childCount===1?b===f.pos:je.atStart(u).from===d;return!c||!h.type.isTextblock||h.textContent.length||!y||y&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return og()||nO()?o:i},addProseMirrorPlugins(){return[new Kr({key:new xo("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:o,to:s}=e.selection,a=je.atStart(e.doc).from,l=je.atEnd(e.doc).to;if(i||!(o===a&&s===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const f=n.tr,d=eg({state:n,transaction:f}),{commands:h}=new tg({editor:this.editor,state:d});if(h.clearNodes(),!!f.steps.length)return f}})]}}),qV=Eo.create({name:"tabindex",addProseMirrorPlugins(){return[new Kr({key:new xo("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class qa{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new qa(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new qa(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new qa(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=this.pos+r+1,s=this.resolvedPos.doc.resolve(o);if(!i&&s.depth<=this.depth)return;const a=new qa(s,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new qa(s,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let a=0;a<s.length;a+=1){const l=s[a];if(o[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(l=>n[l]===s.node.attrs[l])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const n=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(n.from).run()}}const VV=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function UV(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let iO=class extends rq{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n}},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=UV(VV,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=GM(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[PV,bq.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),BV,zV,jV,qV]:[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Au(i,this)}createCommandManager(){this.commandManager=new tg({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e;try{e=Xv(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.options.extensions=this.options.extensions.filter(s=>s.name!=="collaboration"),this.createExtensionManager()}}),e=Xv(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const n=eO(e,this.options.autofocus);this.view=new xj(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:_u.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return pV(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return mV(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return fV(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return dV(this.state.doc,{blockSeparator:n,textSerializers:{...QM(this.schema),...r}})}get isEmpty(){return gV(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new qa(n,this)}get $doc(){return this.$pos(0)}};function ic(t){return new rg({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ue(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),u=n.from+a.indexOf(s),c=u+s.length;if(rO(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===t.type&&m!==h.mark.type)).filter(h=>h.to>u).length)return null;c<n.to&&o.delete(c,n.to),u>n.from&&o.delete(n.from+l,u);const d=n.from+l+s.length;o.addMark(n.from+l,d,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function HV(t){return new rg({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ue(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let c=s+u;c>a?c=a:a=c+r[1].length;const f=r[0][r[0].length-1];o.insertText(f,s+r[0].length-1),o.replaceWith(c,a,l)}else if(r[0]){const u=t.type.isInline?s:s-1;o.insert(u,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(a))}o.scrollIntoView()}})}function tw(t){return new rg({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=Ue(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function Bd(t){return new rg({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=Ue(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),l=s.doc.resolve(n.from).blockRange(),u=l&&Ax(l,t.type,o);if(!u)return null;if(s.wrap(l,u),t.keepMarks&&t.editor){const{selection:f,storedMarks:d}=e,{splittableMarks:h}=t.editor.extensionManager,p=d||f.$to.parentOffset&&f.$from.marks();if(p){const m=p.filter(b=>h.includes(b.type.name));s.ensureMarks(m)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,o).run()}const c=s.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&ka(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&s.join(n.from-1)}})}let Fl=class nw{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ue(ye(this,"addOptions",{name:this.name}))),this.storage=Ue(ye(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new nw(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>ig(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new nw(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ue(ye(n,"addOptions",{name:n.name})),n.storage=Ue(ye(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const l=s.find(u=>(u==null?void 0:u.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}},Zr=class rw{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ue(ye(this,"addOptions",{name:this.name}))),this.storage=Ue(ye(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new rw(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>ig(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new rw(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ue(ye(n,"addOptions",{name:n.name})),n.storage=Ue(ye(n,"addStorage",{name:n.name,options:n.options})),n}};function WV(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}class JV{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,i,o,s,a,l;const{view:u}=this.editor,c=e.target,f=c.nodeType===3?(n=c.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(c)||!f)return;let d=0,h=0;if(this.dom!==f){const b=this.dom.getBoundingClientRect(),y=f.getBoundingClientRect(),v=(i=e.offsetX)!==null&&i!==void 0?i:(o=e.nativeEvent)===null||o===void 0?void 0:o.offsetX,w=(s=e.offsetY)!==null&&s!==void 0?s:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetY;d=y.x-b.x+v,h=y.y-b.y+w}(l=e.dataTransfer)===null||l===void 0||l.setDragImage(this.dom,d,h);const p=_e.create(u.state.doc,this.getPos()),m=u.state.tr.setSelection(p);u.dispatch(m)}stopEvent(e){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const o=e.type.startsWith("drag"),s=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!s&&!o)return!0;const{isEditable:l}=this.editor,{isDragging:u}=this,c=!!this.node.type.spec.draggable,f=_e.isSelectable(this.node),d=e.type==="copy",h=e.type==="paste",p=e.type==="cut",m=e.type==="mousedown";if(!c&&f&&o&&e.preventDefault(),c&&o&&!u)return e.preventDefault(),!1;if(c&&l&&!u&&m){const b=r.closest("[data-drag-handle]");b&&(this.dom===b||this.dom.contains(b))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(u||s||d||h||p||m&&f)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(og()||WV())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0})}deleteNode(){const e=this.getPos(),n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}}function oc(t){return new fq({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=Ue(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let u=n.to;if(a){const c=l.search(/\S/),f=n.from+l.indexOf(a),d=f+a.length;if(rO(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(b=>b===t.type&&b!==p.mark.type)).filter(p=>p.to>f).length)return null;d<n.to&&s.delete(d,n.to),f>n.from&&s.delete(n.from+c,f),u=n.from+c+a.length,s.addMark(n.from+c,u,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function KV(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var kr="top",pi="bottom",mi="right",xr="left",zx="auto",wh=[kr,pi,mi,xr],sc="start",Pd="end",ZV="clippingParents",oO="viewport",lf="popper",GV="reference",p6=wh.reduce(function(t,e){return t.concat([e+"-"+sc,e+"-"+Pd])},[]),sO=[].concat(wh,[zx]).reduce(function(t,e){return t.concat([e,e+"-"+sc,e+"-"+Pd])},[]),YV="beforeRead",QV="read",XV="afterRead",eU="beforeMain",tU="main",nU="afterMain",rU="beforeWrite",iU="write",oU="afterWrite",sU=[YV,QV,XV,eU,tU,nU,rU,iU,oU];function wo(t){return t?(t.nodeName||"").toLowerCase():null}function Vr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ml(t){var e=Vr(t).Element;return t instanceof e||t instanceof Element}function fi(t){var e=Vr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function jx(t){if(typeof ShadowRoot>"u")return!1;var e=Vr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function aU(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!fi(o)||!wo(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function lU(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=s.reduce(function(l,u){return l[u]="",l},{});!fi(i)||!wo(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const aO={name:"applyStyles",enabled:!0,phase:"write",fn:aU,effect:lU,requires:["computeStyles"]};function go(t){return t.split("-")[0]}var pl=Math.max,cm=Math.min,ac=Math.round;function iw(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function lO(){return!/^((?!chrome|android).)*safari/i.test(iw())}function lc(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&fi(t)&&(i=t.offsetWidth>0&&ac(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&ac(r.height)/t.offsetHeight||1);var s=Ml(t)?Vr(t):window,a=s.visualViewport,l=!lO()&&n,u=(r.left+(l&&a?a.offsetLeft:0))/i,c=(r.top+(l&&a?a.offsetTop:0))/o,f=r.width/i,d=r.height/o;return{width:f,height:d,top:c,right:u+f,bottom:c+d,left:u,x:u,y:c}}function qx(t){var e=lc(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function uO(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&jx(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Yo(t){return Vr(t).getComputedStyle(t)}function uU(t){return["table","td","th"].indexOf(wo(t))>=0}function Sa(t){return((Ml(t)?t.ownerDocument:t.document)||window.document).documentElement}function lg(t){return wo(t)==="html"?t:t.assignedSlot||t.parentNode||(jx(t)?t.host:null)||Sa(t)}function m6(t){return!fi(t)||Yo(t).position==="fixed"?null:t.offsetParent}function cU(t){var e=/firefox/i.test(iw()),n=/Trident/i.test(iw());if(n&&fi(t)){var r=Yo(t);if(r.position==="fixed")return null}var i=lg(t);for(jx(i)&&(i=i.host);fi(i)&&["html","body"].indexOf(wo(i))<0;){var o=Yo(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function kh(t){for(var e=Vr(t),n=m6(t);n&&uU(n)&&Yo(n).position==="static";)n=m6(n);return n&&(wo(n)==="html"||wo(n)==="body"&&Yo(n).position==="static")?e:n||cU(t)||e}function Vx(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function td(t,e,n){return pl(t,cm(e,n))}function fU(t,e,n){var r=td(t,e,n);return r>n?n:r}function cO(){return{top:0,right:0,bottom:0,left:0}}function fO(t){return Object.assign({},cO(),t)}function dO(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var dU=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,fO(typeof e!="number"?e:dO(e,wh))};function hU(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=go(n.placement),l=Vx(a),u=[xr,mi].indexOf(a)>=0,c=u?"height":"width";if(!(!o||!s)){var f=dU(i.padding,n),d=qx(o),h=l==="y"?kr:xr,p=l==="y"?pi:mi,m=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],b=s[l]-n.rects.reference[l],y=kh(o),v=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,w=m/2-b/2,g=f[h],x=v-d[c]-f[p],k=v/2-d[c]/2+w,E=td(g,k,x),D=l;n.modifiersData[r]=(e={},e[D]=E,e.centerOffset=E-k,e)}}function pU(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||uO(e.elements.popper,i)&&(e.elements.arrow=i))}const mU={name:"arrow",enabled:!0,phase:"main",fn:hU,effect:pU,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function uc(t){return t.split("-")[1]}var gU={top:"auto",right:"auto",bottom:"auto",left:"auto"};function yU(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:ac(n*i)/i||0,y:ac(r*i)/i||0}}function g6(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,f=t.isFixed,d=s.x,h=d===void 0?0:d,p=s.y,m=p===void 0?0:p,b=typeof c=="function"?c({x:h,y:m}):{x:h,y:m};h=b.x,m=b.y;var y=s.hasOwnProperty("x"),v=s.hasOwnProperty("y"),w=xr,g=kr,x=window;if(u){var k=kh(n),E="clientHeight",D="clientWidth";if(k===Vr(n)&&(k=Sa(n),Yo(k).position!=="static"&&a==="absolute"&&(E="scrollHeight",D="scrollWidth")),k=k,i===kr||(i===xr||i===mi)&&o===Pd){g=pi;var O=f&&k===x&&x.visualViewport?x.visualViewport.height:k[E];m-=O-r.height,m*=l?1:-1}if(i===xr||(i===kr||i===pi)&&o===Pd){w=mi;var N=f&&k===x&&x.visualViewport?x.visualViewport.width:k[D];h-=N-r.width,h*=l?1:-1}}var C=Object.assign({position:a},u&&gU),R=c===!0?yU({x:h,y:m},Vr(n)):{x:h,y:m};if(h=R.x,m=R.y,l){var T;return Object.assign({},C,(T={},T[g]=v?"0":"",T[w]=y?"0":"",T.transform=(x.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",T))}return Object.assign({},C,(e={},e[g]=v?m+"px":"",e[w]=y?h+"px":"",e.transform="",e))}function bU(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:go(e.placement),variation:uc(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,g6(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,g6(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const vU={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:bU,data:{}};var fp={passive:!0};function wU(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=Vr(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",n.update,fp)}),a&&l.addEventListener("resize",n.update,fp),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",n.update,fp)}),a&&l.removeEventListener("resize",n.update,fp)}}const kU={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:wU,data:{}};var xU={left:"right",right:"left",bottom:"top",top:"bottom"};function f0(t){return t.replace(/left|right|bottom|top/g,function(e){return xU[e]})}var EU={start:"end",end:"start"};function y6(t){return t.replace(/start|end/g,function(e){return EU[e]})}function Ux(t){var e=Vr(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Hx(t){return lc(Sa(t)).left+Ux(t).scrollLeft}function SU(t,e){var n=Vr(t),r=Sa(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var u=lO();(u||!u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+Hx(t),y:l}}function CU(t){var e,n=Sa(t),r=Ux(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=pl(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=pl(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Hx(t),l=-r.scrollTop;return Yo(i||n).direction==="rtl"&&(a+=pl(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function Wx(t){var e=Yo(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function hO(t){return["html","body","#document"].indexOf(wo(t))>=0?t.ownerDocument.body:fi(t)&&Wx(t)?t:hO(lg(t))}function nd(t,e){var n;e===void 0&&(e=[]);var r=hO(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=Vr(r),s=i?[o].concat(o.visualViewport||[],Wx(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(nd(lg(s)))}function ow(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function _U(t,e){var n=lc(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function b6(t,e,n){return e===oO?ow(SU(t,n)):Ml(e)?_U(e,n):ow(CU(Sa(t)))}function AU(t){var e=nd(lg(t)),n=["absolute","fixed"].indexOf(Yo(t).position)>=0,r=n&&fi(t)?kh(t):t;return Ml(r)?e.filter(function(i){return Ml(i)&&uO(i,r)&&wo(i)!=="body"}):[]}function TU(t,e,n,r){var i=e==="clippingParents"?AU(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce(function(l,u){var c=b6(t,u,r);return l.top=pl(c.top,l.top),l.right=cm(c.right,l.right),l.bottom=cm(c.bottom,l.bottom),l.left=pl(c.left,l.left),l},b6(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function pO(t){var e=t.reference,n=t.element,r=t.placement,i=r?go(r):null,o=r?uc(r):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case kr:l={x:s,y:e.y-n.height};break;case pi:l={x:s,y:e.y+e.height};break;case mi:l={x:e.x+e.width,y:a};break;case xr:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var u=i?Vx(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(o){case sc:l[u]=l[u]-(e[c]/2-n[c]/2);break;case Pd:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function zd(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,s=o===void 0?t.strategy:o,a=n.boundary,l=a===void 0?ZV:a,u=n.rootBoundary,c=u===void 0?oO:u,f=n.elementContext,d=f===void 0?lf:f,h=n.altBoundary,p=h===void 0?!1:h,m=n.padding,b=m===void 0?0:m,y=fO(typeof b!="number"?b:dO(b,wh)),v=d===lf?GV:lf,w=t.rects.popper,g=t.elements[p?v:d],x=TU(Ml(g)?g:g.contextElement||Sa(t.elements.popper),l,c,s),k=lc(t.elements.reference),E=pO({reference:k,element:w,strategy:"absolute",placement:i}),D=ow(Object.assign({},w,E)),O=d===lf?D:k,N={top:x.top-O.top+y.top,bottom:O.bottom-x.bottom+y.bottom,left:x.left-O.left+y.left,right:O.right-x.right+y.right},C=t.modifiersData.offset;if(d===lf&&C){var R=C[i];Object.keys(N).forEach(function(T){var q=[mi,pi].indexOf(T)>=0?1:-1,A=[kr,pi].indexOf(T)>=0?"y":"x";N[T]+=R[A]*q})}return N}function MU(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?sO:l,c=uc(r),f=c?a?p6:p6.filter(function(p){return uc(p)===c}):wh,d=f.filter(function(p){return u.indexOf(p)>=0});d.length===0&&(d=f);var h=d.reduce(function(p,m){return p[m]=zd(t,{placement:m,boundary:i,rootBoundary:o,padding:s})[go(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function OU(t){if(go(t)===zx)return[];var e=f0(t);return[y6(t),e,y6(e)]}function DU(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,u=n.padding,c=n.boundary,f=n.rootBoundary,d=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,m=n.allowedAutoPlacements,b=e.options.placement,y=go(b),v=y===b,w=l||(v||!p?[f0(b)]:OU(b)),g=[b].concat(w).reduce(function(fe,ke){return fe.concat(go(ke)===zx?MU(e,{placement:ke,boundary:c,rootBoundary:f,padding:u,flipVariations:p,allowedAutoPlacements:m}):ke)},[]),x=e.rects.reference,k=e.rects.popper,E=new Map,D=!0,O=g[0],N=0;N<g.length;N++){var C=g[N],R=go(C),T=uc(C)===sc,q=[kr,pi].indexOf(R)>=0,A=q?"width":"height",S=zd(e,{placement:C,boundary:c,rootBoundary:f,altBoundary:d,padding:u}),P=q?T?mi:xr:T?pi:kr;x[A]>k[A]&&(P=f0(P));var B=f0(P),j=[];if(o&&j.push(S[R]<=0),a&&j.push(S[P]<=0,S[B]<=0),j.every(function(fe){return fe})){O=C,D=!1;break}E.set(C,j)}if(D)for(var z=p?3:1,J=function(ke){var ve=g.find(function(xe){var Se=E.get(xe);if(Se)return Se.slice(0,ke).every(function(Oe){return Oe})});if(ve)return O=ve,"break"},K=z;K>0;K--){var ae=J(K);if(ae==="break")break}e.placement!==O&&(e.modifiersData[r]._skip=!0,e.placement=O,e.reset=!0)}}const NU={name:"flip",enabled:!0,phase:"main",fn:DU,requiresIfExists:["offset"],data:{_skip:!1}};function v6(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function w6(t){return[kr,mi,pi,xr].some(function(e){return t[e]>=0})}function $U(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=zd(e,{elementContext:"reference"}),a=zd(e,{altBoundary:!0}),l=v6(s,r),u=v6(a,i,o),c=w6(l),f=w6(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}const IU={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:$U};function RU(t,e,n){var r=go(t),i=[xr,kr].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[xr,mi].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function FU(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,s=sO.reduce(function(c,f){return c[f]=RU(f,e.rects,o),c},{}),a=s[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=s}const LU={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:FU};function BU(t){var e=t.state,n=t.name;e.modifiersData[n]=pO({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const PU={name:"popperOffsets",enabled:!0,phase:"read",fn:BU,data:{}};function zU(t){return t==="x"?"y":"x"}function jU(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,f=n.padding,d=n.tether,h=d===void 0?!0:d,p=n.tetherOffset,m=p===void 0?0:p,b=zd(e,{boundary:l,rootBoundary:u,padding:f,altBoundary:c}),y=go(e.placement),v=uc(e.placement),w=!v,g=Vx(y),x=zU(g),k=e.modifiersData.popperOffsets,E=e.rects.reference,D=e.rects.popper,O=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,N=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),C=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,R={x:0,y:0};if(k){if(o){var T,q=g==="y"?kr:xr,A=g==="y"?pi:mi,S=g==="y"?"height":"width",P=k[g],B=P+b[q],j=P-b[A],z=h?-D[S]/2:0,J=v===sc?E[S]:D[S],K=v===sc?-D[S]:-E[S],ae=e.elements.arrow,fe=h&&ae?qx(ae):{width:0,height:0},ke=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:cO(),ve=ke[q],xe=ke[A],Se=td(0,E[S],fe[S]),Oe=w?E[S]/2-z-Se-ve-N.mainAxis:J-Se-ve-N.mainAxis,Fe=w?-E[S]/2+z+Se+xe+N.mainAxis:K+Se+xe+N.mainAxis,mt=e.elements.arrow&&kh(e.elements.arrow),Ce=mt?g==="y"?mt.clientTop||0:mt.clientLeft||0:0,pe=(T=C==null?void 0:C[g])!=null?T:0,De=P+Oe-pe-Ce,Le=P+Fe-pe,Ze=td(h?cm(B,De):B,P,h?pl(j,Le):j);k[g]=Ze,R[g]=Ze-P}if(a){var Qt,rt=g==="x"?kr:xr,it=g==="x"?pi:mi,bt=k[x],Ft=x==="y"?"height":"width",Lt=bt+b[rt],at=bt-b[it],gt=[kr,xr].indexOf(y)!==-1,Y=(Qt=C==null?void 0:C[x])!=null?Qt:0,U=gt?Lt:bt-E[Ft]-D[Ft]-Y+N.altAxis,W=gt?bt+E[Ft]+D[Ft]-Y-N.altAxis:at,X=h&&gt?fU(U,bt,W):td(h?U:Lt,bt,h?W:at);k[x]=X,R[x]=X-bt}e.modifiersData[r]=R}}const qU={name:"preventOverflow",enabled:!0,phase:"main",fn:jU,requiresIfExists:["offset"]};function VU(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function UU(t){return t===Vr(t)||!fi(t)?Ux(t):VU(t)}function HU(t){var e=t.getBoundingClientRect(),n=ac(e.width)/t.offsetWidth||1,r=ac(e.height)/t.offsetHeight||1;return n!==1||r!==1}function WU(t,e,n){n===void 0&&(n=!1);var r=fi(e),i=fi(e)&&HU(e),o=Sa(e),s=lc(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((wo(e)!=="body"||Wx(o))&&(a=UU(e)),fi(e)?(l=lc(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=Hx(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function JU(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function KU(t){var e=JU(t);return sU.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function ZU(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function GU(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var k6={placement:"bottom",modifiers:[],strategy:"absolute"};function x6(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function YU(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?k6:i;return function(a,l,u){u===void 0&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},k6,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],d=!1,h={state:c,setOptions:function(y){var v=typeof y=="function"?y(c.options):y;m(),c.options=Object.assign({},o,c.options,v),c.scrollParents={reference:Ml(a)?nd(a):a.contextElement?nd(a.contextElement):[],popper:nd(l)};var w=KU(GU([].concat(r,c.options.modifiers)));return c.orderedModifiers=w.filter(function(g){return g.enabled}),p(),h.update()},forceUpdate:function(){if(!d){var y=c.elements,v=y.reference,w=y.popper;if(x6(v,w)){c.rects={reference:WU(v,kh(w),c.options.strategy==="fixed"),popper:qx(w)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(N){return c.modifiersData[N.name]=Object.assign({},N.data)});for(var g=0;g<c.orderedModifiers.length;g++){if(c.reset===!0){c.reset=!1,g=-1;continue}var x=c.orderedModifiers[g],k=x.fn,E=x.options,D=E===void 0?{}:E,O=x.name;typeof k=="function"&&(c=k({state:c,options:D,name:O,instance:h})||c)}}}},update:ZU(function(){return new Promise(function(b){h.forceUpdate(),b(c)})}),destroy:function(){m(),d=!0}};if(!x6(a,l))return h;h.setOptions(u).then(function(b){!d&&u.onFirstUpdate&&u.onFirstUpdate(b)});function p(){c.orderedModifiers.forEach(function(b){var y=b.name,v=b.options,w=v===void 0?{}:v,g=b.effect;if(typeof g=="function"){var x=g({state:c,name:y,instance:h,options:w}),k=function(){};f.push(x||k)}})}function m(){f.forEach(function(b){return b()}),f=[]}return h}}var QU=[kU,PU,vU,aO,LU,NU,qU,mU,IU],XU=YU({defaultModifiers:QU}),eH="tippy-box",mO="tippy-content",tH="tippy-backdrop",gO="tippy-arrow",yO="tippy-svg-arrow",Ba={passive:!0,capture:!0},bO=function(){return document.body};function tb(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function Jx(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function vO(t,e){return typeof t=="function"?t.apply(void 0,e):t}function E6(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function nH(t){return t.split(/\s+/).filter(Boolean)}function lu(t){return[].concat(t)}function S6(t,e){t.indexOf(e)===-1&&t.push(e)}function rH(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function iH(t){return t.split("-")[0]}function fm(t){return[].slice.call(t)}function C6(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function rd(){return document.createElement("div")}function ug(t){return["Element","Fragment"].some(function(e){return Jx(t,e)})}function oH(t){return Jx(t,"NodeList")}function sH(t){return Jx(t,"MouseEvent")}function aH(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function lH(t){return ug(t)?[t]:oH(t)?fm(t):Array.isArray(t)?t:fm(document.querySelectorAll(t))}function nb(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function _6(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function uH(t){var e,n=lu(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function cH(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var o=i.popperRect,s=i.popperState,a=i.props,l=a.interactiveBorder,u=iH(s.placement),c=s.modifiersData.offset;if(!c)return!0;var f=u==="bottom"?c.top.y:0,d=u==="top"?c.bottom.y:0,h=u==="right"?c.left.x:0,p=u==="left"?c.right.x:0,m=o.top-r+f>l,b=r-o.bottom-d>l,y=o.left-n+h>l,v=n-o.right-p>l;return m||b||y||v})}function rb(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function A6(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Gi={isTouch:!1},T6=0;function fH(){Gi.isTouch||(Gi.isTouch=!0,window.performance&&document.addEventListener("mousemove",wO))}function wO(){var t=performance.now();t-T6<20&&(Gi.isTouch=!1,document.removeEventListener("mousemove",wO)),T6=t}function dH(){var t=document.activeElement;if(aH(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function hH(){document.addEventListener("touchstart",fH,Ba),window.addEventListener("blur",dH)}var pH=typeof window<"u"&&typeof document<"u",mH=pH?!!window.msCrypto:!1,gH={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},yH={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Ai=Object.assign({appendTo:bO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},gH,yH),bH=Object.keys(Ai),vH=function(e){var n=Object.keys(e);n.forEach(function(r){Ai[r]=e[r]})};function kO(t){var e=t.plugins||[],n=e.reduce(function(r,i){var o=i.name,s=i.defaultValue;if(o){var a;r[o]=t[o]!==void 0?t[o]:(a=Ai[o])!=null?a:s}return r},{});return Object.assign({},t,n)}function wH(t,e){var n=e?Object.keys(kO(Object.assign({},Ai,{plugins:e}))):bH,r=n.reduce(function(i,o){var s=(t.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch{i[o]=s}return i},{});return r}function M6(t,e){var n=Object.assign({},e,{content:vO(e.content,[t])},e.ignoreAttributes?{}:wH(t,e.plugins));return n.aria=Object.assign({},Ai.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var kH=function(){return"innerHTML"};function sw(t,e){t[kH()]=e}function O6(t){var e=rd();return t===!0?e.className=gO:(e.className=yO,ug(t)?e.appendChild(t):sw(e,t)),e}function D6(t,e){ug(e.content)?(sw(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?sw(t,e.content):t.textContent=e.content)}function aw(t){var e=t.firstElementChild,n=fm(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(mO)}),arrow:n.find(function(r){return r.classList.contains(gO)||r.classList.contains(yO)}),backdrop:n.find(function(r){return r.classList.contains(tH)})}}function xO(t){var e=rd(),n=rd();n.className=eH,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=rd();r.className=mO,r.setAttribute("data-state","hidden"),D6(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(o,s){var a=aw(e),l=a.box,u=a.content,c=a.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&D6(u,t.props),s.arrow?c?o.arrow!==s.arrow&&(l.removeChild(c),l.appendChild(O6(s.arrow))):l.appendChild(O6(s.arrow)):c&&l.removeChild(c)}return{popper:e,onUpdate:i}}xO.$$tippy=!0;var xH=1,dp=[],ib=[];function EH(t,e){var n=M6(t,Object.assign({},Ai,kO(C6(e)))),r,i,o,s=!1,a=!1,l=!1,u=!1,c,f,d,h=[],p=E6(De,n.interactiveDebounce),m,b=xH++,y=null,v=rH(n.plugins),w={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},g={id:b,reference:t,popper:rd(),popperInstance:y,props:n,state:w,plugins:v,clearDelayTimeouts:U,setProps:W,setContent:X,show:se,hide:ge,hideWithInteractivity:Pe,enable:gt,disable:Y,unmount:Be,destroy:nt};if(!n.render)return g;var x=n.render(g),k=x.popper,E=x.onUpdate;k.setAttribute("data-tippy-root",""),k.id="tippy-"+g.id,g.popper=k,t._tippy=g,k._tippy=g;var D=v.map(function(Z){return Z.fn(g)}),O=t.hasAttribute("aria-expanded");return mt(),z(),P(),B("onCreate",[g]),n.showOnCreate&&Lt(),k.addEventListener("mouseenter",function(){g.props.interactive&&g.state.isVisible&&g.clearDelayTimeouts()}),k.addEventListener("mouseleave",function(){g.props.interactive&&g.props.trigger.indexOf("mouseenter")>=0&&q().addEventListener("mousemove",p)}),g;function N(){var Z=g.props.touch;return Array.isArray(Z)?Z:[Z,0]}function C(){return N()[0]==="hold"}function R(){var Z;return!!((Z=g.props.render)!=null&&Z.$$tippy)}function T(){return m||t}function q(){var Z=T().parentNode;return Z?uH(Z):document}function A(){return aw(k)}function S(Z){return g.state.isMounted&&!g.state.isVisible||Gi.isTouch||c&&c.type==="focus"?0:tb(g.props.delay,Z?0:1,Ai.delay)}function P(Z){Z===void 0&&(Z=!1),k.style.pointerEvents=g.props.interactive&&!Z?"":"none",k.style.zIndex=""+g.props.zIndex}function B(Z,re,me){if(me===void 0&&(me=!0),D.forEach(function(Ae){Ae[Z]&&Ae[Z].apply(Ae,re)}),me){var Ee;(Ee=g.props)[Z].apply(Ee,re)}}function j(){var Z=g.props.aria;if(Z.content){var re="aria-"+Z.content,me=k.id,Ee=lu(g.props.triggerTarget||t);Ee.forEach(function(Ae){var ot=Ae.getAttribute(re);if(g.state.isVisible)Ae.setAttribute(re,ot?ot+" "+me:me);else{var _t=ot&&ot.replace(me,"").trim();_t?Ae.setAttribute(re,_t):Ae.removeAttribute(re)}})}}function z(){if(!(O||!g.props.aria.expanded)){var Z=lu(g.props.triggerTarget||t);Z.forEach(function(re){g.props.interactive?re.setAttribute("aria-expanded",g.state.isVisible&&re===T()?"true":"false"):re.removeAttribute("aria-expanded")})}}function J(){q().removeEventListener("mousemove",p),dp=dp.filter(function(Z){return Z!==p})}function K(Z){if(!(Gi.isTouch&&(l||Z.type==="mousedown"))){var re=Z.composedPath&&Z.composedPath()[0]||Z.target;if(!(g.props.interactive&&A6(k,re))){if(lu(g.props.triggerTarget||t).some(function(me){return A6(me,re)})){if(Gi.isTouch||g.state.isVisible&&g.props.trigger.indexOf("click")>=0)return}else B("onClickOutside",[g,Z]);g.props.hideOnClick===!0&&(g.clearDelayTimeouts(),g.hide(),a=!0,setTimeout(function(){a=!1}),g.state.isMounted||ve())}}}function ae(){l=!0}function fe(){l=!1}function ke(){var Z=q();Z.addEventListener("mousedown",K,!0),Z.addEventListener("touchend",K,Ba),Z.addEventListener("touchstart",fe,Ba),Z.addEventListener("touchmove",ae,Ba)}function ve(){var Z=q();Z.removeEventListener("mousedown",K,!0),Z.removeEventListener("touchend",K,Ba),Z.removeEventListener("touchstart",fe,Ba),Z.removeEventListener("touchmove",ae,Ba)}function xe(Z,re){Oe(Z,function(){!g.state.isVisible&&k.parentNode&&k.parentNode.contains(k)&&re()})}function Se(Z,re){Oe(Z,re)}function Oe(Z,re){var me=A().box;function Ee(Ae){Ae.target===me&&(rb(me,"remove",Ee),re())}if(Z===0)return re();rb(me,"remove",f),rb(me,"add",Ee),f=Ee}function Fe(Z,re,me){me===void 0&&(me=!1);var Ee=lu(g.props.triggerTarget||t);Ee.forEach(function(Ae){Ae.addEventListener(Z,re,me),h.push({node:Ae,eventType:Z,handler:re,options:me})})}function mt(){C()&&(Fe("touchstart",pe,{passive:!0}),Fe("touchend",Le,{passive:!0})),nH(g.props.trigger).forEach(function(Z){if(Z!=="manual")switch(Fe(Z,pe),Z){case"mouseenter":Fe("mouseleave",Le);break;case"focus":Fe(mH?"focusout":"blur",Ze);break;case"focusin":Fe("focusout",Ze);break}})}function Ce(){h.forEach(function(Z){var re=Z.node,me=Z.eventType,Ee=Z.handler,Ae=Z.options;re.removeEventListener(me,Ee,Ae)}),h=[]}function pe(Z){var re,me=!1;if(!(!g.state.isEnabled||Qt(Z)||a)){var Ee=((re=c)==null?void 0:re.type)==="focus";c=Z,m=Z.currentTarget,z(),!g.state.isVisible&&sH(Z)&&dp.forEach(function(Ae){return Ae(Z)}),Z.type==="click"&&(g.props.trigger.indexOf("mouseenter")<0||s)&&g.props.hideOnClick!==!1&&g.state.isVisible?me=!0:Lt(Z),Z.type==="click"&&(s=!me),me&&!Ee&&at(Z)}}function De(Z){var re=Z.target,me=T().contains(re)||k.contains(re);if(!(Z.type==="mousemove"&&me)){var Ee=Ft().concat(k).map(function(Ae){var ot,_t=Ae._tippy,Xt=(ot=_t.popperInstance)==null?void 0:ot.state;return Xt?{popperRect:Ae.getBoundingClientRect(),popperState:Xt,props:n}:null}).filter(Boolean);cH(Ee,Z)&&(J(),at(Z))}}function Le(Z){var re=Qt(Z)||g.props.trigger.indexOf("click")>=0&&s;if(!re){if(g.props.interactive){g.hideWithInteractivity(Z);return}at(Z)}}function Ze(Z){g.props.trigger.indexOf("focusin")<0&&Z.target!==T()||g.props.interactive&&Z.relatedTarget&&k.contains(Z.relatedTarget)||at(Z)}function Qt(Z){return Gi.isTouch?C()!==Z.type.indexOf("touch")>=0:!1}function rt(){it();var Z=g.props,re=Z.popperOptions,me=Z.placement,Ee=Z.offset,Ae=Z.getReferenceClientRect,ot=Z.moveTransition,_t=R()?aw(k).arrow:null,Xt=Ae?{getBoundingClientRect:Ae,contextElement:Ae.contextElement||T()}:t,Nt={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Wt){var vn=Wt.state;if(R()){var Dr=A(),wn=Dr.box;["placement","reference-hidden","escaped"].forEach(function($n){$n==="placement"?wn.setAttribute("data-placement",vn.placement):vn.attributes.popper["data-popper-"+$n]?wn.setAttribute("data-"+$n,""):wn.removeAttribute("data-"+$n)}),vn.attributes.popper={}}}},Ie=[{name:"offset",options:{offset:Ee}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ot}},Nt];R()&&_t&&Ie.push({name:"arrow",options:{element:_t,padding:3}}),Ie.push.apply(Ie,(re==null?void 0:re.modifiers)||[]),g.popperInstance=XU(Xt,k,Object.assign({},re,{placement:me,onFirstUpdate:d,modifiers:Ie}))}function it(){g.popperInstance&&(g.popperInstance.destroy(),g.popperInstance=null)}function bt(){var Z=g.props.appendTo,re,me=T();g.props.interactive&&Z===bO||Z==="parent"?re=me.parentNode:re=vO(Z,[me]),re.contains(k)||re.appendChild(k),g.state.isMounted=!0,rt()}function Ft(){return fm(k.querySelectorAll("[data-tippy-root]"))}function Lt(Z){g.clearDelayTimeouts(),Z&&B("onTrigger",[g,Z]),ke();var re=S(!0),me=N(),Ee=me[0],Ae=me[1];Gi.isTouch&&Ee==="hold"&&Ae&&(re=Ae),re?r=setTimeout(function(){g.show()},re):g.show()}function at(Z){if(g.clearDelayTimeouts(),B("onUntrigger",[g,Z]),!g.state.isVisible){ve();return}if(!(g.props.trigger.indexOf("mouseenter")>=0&&g.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Z.type)>=0&&s)){var re=S(!1);re?i=setTimeout(function(){g.state.isVisible&&g.hide()},re):o=requestAnimationFrame(function(){g.hide()})}}function gt(){g.state.isEnabled=!0}function Y(){g.hide(),g.state.isEnabled=!1}function U(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function W(Z){if(!g.state.isDestroyed){B("onBeforeUpdate",[g,Z]),Ce();var re=g.props,me=M6(t,Object.assign({},re,C6(Z),{ignoreAttributes:!0}));g.props=me,mt(),re.interactiveDebounce!==me.interactiveDebounce&&(J(),p=E6(De,me.interactiveDebounce)),re.triggerTarget&&!me.triggerTarget?lu(re.triggerTarget).forEach(function(Ee){Ee.removeAttribute("aria-expanded")}):me.triggerTarget&&t.removeAttribute("aria-expanded"),z(),P(),E&&E(re,me),g.popperInstance&&(rt(),Ft().forEach(function(Ee){requestAnimationFrame(Ee._tippy.popperInstance.forceUpdate)})),B("onAfterUpdate",[g,Z])}}function X(Z){g.setProps({content:Z})}function se(){var Z=g.state.isVisible,re=g.state.isDestroyed,me=!g.state.isEnabled,Ee=Gi.isTouch&&!g.props.touch,Ae=tb(g.props.duration,0,Ai.duration);if(!(Z||re||me||Ee)&&!T().hasAttribute("disabled")&&(B("onShow",[g],!1),g.props.onShow(g)!==!1)){if(g.state.isVisible=!0,R()&&(k.style.visibility="visible"),P(),ke(),g.state.isMounted||(k.style.transition="none"),R()){var ot=A(),_t=ot.box,Xt=ot.content;nb([_t,Xt],0)}d=function(){var Ie;if(!(!g.state.isVisible||u)){if(u=!0,k.offsetHeight,k.style.transition=g.props.moveTransition,R()&&g.props.animation){var Bt=A(),Wt=Bt.box,vn=Bt.content;nb([Wt,vn],Ae),_6([Wt,vn],"visible")}j(),z(),S6(ib,g),(Ie=g.popperInstance)==null||Ie.forceUpdate(),B("onMount",[g]),g.props.animation&&R()&&Se(Ae,function(){g.state.isShown=!0,B("onShown",[g])})}},bt()}}function ge(){var Z=!g.state.isVisible,re=g.state.isDestroyed,me=!g.state.isEnabled,Ee=tb(g.props.duration,1,Ai.duration);if(!(Z||re||me)&&(B("onHide",[g],!1),g.props.onHide(g)!==!1)){if(g.state.isVisible=!1,g.state.isShown=!1,u=!1,s=!1,R()&&(k.style.visibility="hidden"),J(),ve(),P(!0),R()){var Ae=A(),ot=Ae.box,_t=Ae.content;g.props.animation&&(nb([ot,_t],Ee),_6([ot,_t],"hidden"))}j(),z(),g.props.animation?R()&&xe(Ee,g.unmount):g.unmount()}}function Pe(Z){q().addEventListener("mousemove",p),S6(dp,p),p(Z)}function Be(){g.state.isVisible&&g.hide(),g.state.isMounted&&(it(),Ft().forEach(function(Z){Z._tippy.unmount()}),k.parentNode&&k.parentNode.removeChild(k),ib=ib.filter(function(Z){return Z!==g}),g.state.isMounted=!1,B("onHidden",[g]))}function nt(){g.state.isDestroyed||(g.clearDelayTimeouts(),g.unmount(),Ce(),delete t._tippy,g.state.isDestroyed=!0,B("onDestroy",[g]))}}function $c(t,e){e===void 0&&(e={});var n=Ai.plugins.concat(e.plugins||[]);hH();var r=Object.assign({},e,{plugins:n}),i=lH(t),o=i.reduce(function(s,a){var l=a&&EH(a,r);return l&&s.push(l),s},[]);return ug(t)?o[0]:o}$c.defaultProps=Ai;$c.setDefaultProps=vH;$c.currentInput=Gi;Object.assign({},aO,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});$c.setDefaultProps({render:xO});const SH=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},CH=({renderers:t})=>tt.createElement(tt.Fragment,null,Object.entries(t).map(([e,n])=>qB.createPortal(n.reactElement,n.element,e)));class _H extends tt.Component{constructor(e){super(e),this.editorContentRef=tt.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:e}=this.props;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?K1.flushSync(e):e()}setRenderer(e,n){this.maybeFlushSync(()=>{this.setState(({renderers:r})=>({renderers:{...r,[e]:n}}))})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(({renderers:n})=>{const r={...n};return delete r[e],{renderers:r}})})}componentWillUnmount(){const{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return tt.createElement(tt.Fragment,null,tt.createElement("div",{ref:SH(n,this.editorContentRef),...r}),tt.createElement(CH,{renderers:this.state.renderers}))}}const AH=ee.forwardRef((t,e)=>{const n=tt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return tt.createElement(_H,{key:n,innerRef:e,...t})}),TH=tt.memo(AH);class hp extends iO{constructor(){super(...arguments),this.contentComponent=null}}var EO={exports:{}},ob={},sb={exports:{}},ab={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N6;function MH(){if(N6)return ab;N6=1;var t=tt;function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function a(f,d){var h=d(),p=r({inst:{value:h,getSnapshot:d}}),m=p[0].inst,b=p[1];return o(function(){m.value=h,m.getSnapshot=d,l(m)&&b({inst:m})},[f,h,d]),i(function(){return l(m)&&b({inst:m}),f(function(){l(m)&&b({inst:m})})},[f]),s(h),h}function l(f){var d=f.getSnapshot;f=f.value;try{var h=d();return!n(f,h)}catch{return!0}}function u(f,d){return d()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return ab.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:c,ab}var $6;function OH(){return $6||($6=1,sb.exports=MH()),sb.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I6;function DH(){if(I6)return ob;I6=1;var t=tt,e=OH();function n(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,a=t.useMemo,l=t.useDebugValue;return ob.useSyncExternalStoreWithSelector=function(u,c,f,d,h){var p=o(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=a(function(){function y(k){if(!v){if(v=!0,w=k,k=d(k),h!==void 0&&m.hasValue){var E=m.value;if(h(E,k))return g=E}return g=k}if(E=g,r(w,k))return E;var D=d(k);return h!==void 0&&h(E,D)?E:(w=k,g=D)}var v=!1,w,g,x=f===void 0?null:f;return[function(){return y(c())},x===null?void 0:function(){return y(x())}]},[c,f,d,h]);var b=i(u,p[0],p[1]);return s(function(){m.hasValue=!0,m.value=b},[b]),l(b),b},ob}EO.exports=DH();var NH=EO.exports;function $H(t){let e=0,n=0,r={editor:t,transactionNumber:0},i=t;const o=new Set;return{getSnapshot(){return e===n||(n=e,r={editor:i,transactionNumber:e}),r},getServerSnapshot(){return{editor:null,transactionNumber:0}},subscribe(a){return o.add(a),()=>{o.delete(a)}},watch(a){if(i=a,i){const l=()=>{e+=1,o.forEach(c=>c())},u=i;return u.on("transaction",l),()=>{u.off("transaction",l)}}}}}function IH(t){const[e]=ee.useState(()=>$H(t.editor)),n=NH.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getServerSnapshot,t.selector,t.equalityFn);return ee.useEffect(()=>e.watch(t.editor),[t.editor]),ee.useDebugValue(n),n}const RH=!1,lw=typeof window>"u",FH=lw||!!(typeof window<"u"&&window.next);function LH(t={},e=[]){const n=ee.useRef(!1),[r,i]=ee.useState(()=>{if(t.immediatelyRender===void 0)return lw||FH?null:new hp(t);if(t.immediatelyRender&&lw&&RH)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return t.immediatelyRender?new hp(t):null});ee.useDebugValue(r),ee.useEffect(()=>{let E=r;E?Array.isArray(e)&&e.length?(E=new hp(t),i(E)):E.setOptions(t):(E=new hp(t),i(E))},e);const{onBeforeCreate:o,onBlur:s,onCreate:a,onDestroy:l,onFocus:u,onSelectionUpdate:c,onTransaction:f,onUpdate:d,onContentError:h}=t,p=ee.useRef(o),m=ee.useRef(s),b=ee.useRef(a),y=ee.useRef(l),v=ee.useRef(u),w=ee.useRef(c),g=ee.useRef(f),x=ee.useRef(d),k=ee.useRef(h);return ee.useEffect(()=>{r&&(o&&(r.off("beforeCreate",p.current),r.on("beforeCreate",o),p.current=o),s&&(r.off("blur",m.current),r.on("blur",s),m.current=s),a&&(r.off("create",b.current),r.on("create",a),b.current=a),l&&(r.off("destroy",y.current),r.on("destroy",l),y.current=l),u&&(r.off("focus",v.current),r.on("focus",u),v.current=u),c&&(r.off("selectionUpdate",w.current),r.on("selectionUpdate",c),w.current=c),f&&(r.off("transaction",g.current),r.on("transaction",f),g.current=f),d&&(r.off("update",x.current),r.on("update",d),x.current=d),h&&(r.off("contentError",k.current),r.on("contentError",h),k.current=h))},[o,s,a,l,u,c,f,d,h,r]),ee.useEffect(()=>(n.current=!0,()=>{n.current=!1,r&&setTimeout(()=>{!n.current&&!r.isDestroyed&&r.destroy()})}),[]),IH({editor:r,selector:({transactionNumber:E})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&E===0?0:E+1}),r}const BH=ee.createContext({editor:null});BH.Consumer;const SO=ee.createContext({onDragStart:void 0}),PH=()=>ee.useContext(SO),Ca=tt.forwardRef((t,e)=>{const{onDragStart:n}=PH(),r=t.as||"div";return tt.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function zH(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function jH(t){var e;return typeof t=="object"&&((e=t.$$typeof)===null||e===void 0?void 0:e.toString())==="Symbol(react.forward_ref)"}class CO{constructor(e,{editor:n,props:r={},as:i="div",className:o="",attrs:s}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=n,this.props=r,this.element=document.createElement(i),this.element.classList.add("react-renderer"),o&&this.element.classList.add(...o.split(" ")),s&&Object.keys(s).forEach(a=>{this.element.setAttribute(a,s[a])}),this.render()}render(){var e,n;const r=this.component,i=this.props;(zH(r)||jH(r))&&(i.ref=o=>{this.ref=o}),this.reactElement=tt.createElement(r,{...i}),(n=(e=this.editor)===null||e===void 0?void 0:e.contentComponent)===null||n===void 0||n.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e,n;(n=(e=this.editor)===null||e===void 0?void 0:e.contentComponent)===null||n===void 0||n.removeRenderer(this.id)}}class qH extends JV{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(o={})=>this.updateAttributes(o),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const o=s=>s.charAt(0).toUpperCase()+s.substring(1);this.component.displayName=o(this.extension.name)}const n=o=>{const s=this.component,a=this.onDragStart.bind(this),l=u=>{u&&this.contentDOMElement&&u.firstChild!==this.contentDOMElement&&u.appendChild(this.contentDOMElement)};return tt.createElement(tt.Fragment,null,tt.createElement(SO.Provider,{value:{onDragStart:a,nodeViewContentRef:l}},tt.createElement(s,{...o})))};n.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit");let r=this.node.isInline?"span":"div";this.options.as&&(r=this.options.as);const{className:i=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.renderer=new CO(n,{editor:this.editor,props:e,as:r,className:`node-${this.node.type.name} ${i}`.trim(),attrs:this.options.attrs})}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:n}=this.editor.state.selection;if(e<=this.getPos()&&n>=this.getPos()+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,n){const r=i=>{this.renderer.updateProps(i)};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const i=this.node,o=this.decorations;return this.node=e,this.decorations=n,this.options.update({oldNode:i,oldDecorations:o,newNode:e,newDecorations:n,updateProps:()=>r({node:e,decorations:n})})}return e===this.node&&this.decorations===n||(this.node=e,this.decorations=n,r({node:e,decorations:n})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}}function hs(t,e){return n=>n.editor.contentComponent?new qH(t,n,e):{}}const VH=/^\s*>\s$/,UH=Zr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",nn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Bd({find:VH,type:this.type})]}}),HH=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,WH=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,JH=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,KH=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,ZH=Fl.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",nn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ic({find:HH,type:this.type}),ic({find:JH,type:this.type})]},addPasteRules(){return[oc({find:WH,type:this.type}),oc({find:KH,type:this.type})]}}),GH=Zr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",nn(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),R6=Fl.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",nn(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=ag(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),F6=/^\s*([-+*])\s$/,YH=Zr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",nn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(GH.name,this.editor.getAttributes(R6.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Bd({find:F6,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Bd({find:F6,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(R6.name),editor:this.editor})),[t]}}),QH=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,XH=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,eW=Fl.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",nn(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ic({find:QH,type:this.type})]},addPasteRules(){return[oc({find:XH,type:this.type})]}}),tW=/^```([a-z]+)?[\s\n]$/,nW=/^~~~([a-z]+)?[\s\n]$/,rW=Zr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",nn(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0||r.nodeAt(a)?!1:t.commands.exitCode()}}},addInputRules(){return[tw({find:tW,type:this.type,getAttributes:t=>({language:t[1]})}),tw({find:nW,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Kr({key:new xo("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(He.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),iW=Zr.create({name:"doc",topNode:!0,content:"block+"});function oW(t={}){return new Kr({view(e){return new sW(e,t)}})}class sW{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let u=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(u){let c=u.getBoundingClientRect(),f=a?c.bottom:c.top;a&&l&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:c.left,right:c.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let a=i.getBoundingClientRect();o=a.left-i.scrollLeft,s=a.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=GT(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const aW=Eo.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[oW(this.options)]}});class Rt extends je{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Rt.valid(r)?new Rt(r):je.near(r)}content(){return he.empty}eq(e){return e instanceof Rt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Rt(e.resolve(n.pos))}getBookmark(){return new Kx(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!lW(e)||!uW(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Rt.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){o=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let l=e.doc.resolve(i);if(Rt.valid(l))return l}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!_e.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let a=e.doc.resolve(i);if(Rt.valid(a))return a}return null}}}Rt.prototype.visible=!1;Rt.findFrom=Rt.findGapCursorFrom;je.jsonID("gapcursor",Rt);class Kx{constructor(e){this.pos=e}map(e){return new Kx(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Rt.valid(n)?new Rt(n):je.near(n)}}function lW(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function uW(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function cW(){return new Kr({props:{decorations:pW,createSelectionBetween(t,e,n){return e.pos==n.pos&&Rt.valid(n)?new Rt(n):null},handleClick:dW,handleKeyDown:fW,handleDOMEvents:{beforeinput:hW}}})}const fW=qM({ArrowLeft:pp("horiz",-1),ArrowRight:pp("horiz",1),ArrowUp:pp("vert",-1),ArrowDown:pp("vert",1)});function pp(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof He){if(!o.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let u=Rt.findGapCursorFrom(a,e,l);return u?(i&&i(r.tr.setSelection(new Rt(u))),!0):!1}}function dW(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Rt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&_e.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Rt(r))),!0)}function hW(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Rt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=oe.empty;for(let s=r.length-1;s>=0;s--)i=oe.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new he(i,0,0));return o.setSelection(He.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function pW(t){if(!(t.selection instanceof Rt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Kt.create(t.doc,[Br.widget(t.selection.head,e,{key:"gapcursor"})])}const mW=Eo.create({name:"gapCursor",addProseMirrorPlugins(){return[cW()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ue(ye(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),gW=Zr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",nn(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&l&&s){const f=l.filter(d=>a.includes(d.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),yW=Zr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,nn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>tw({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var dm=200,mn=function(){};mn.prototype.append=function(e){return e.length?(e=mn.from(e),!this.length&&e||e.length<dm&&this.leafAppend(e)||this.length<dm&&e.leafPrepend(this)||this.appendInner(e)):this};mn.prototype.prepend=function(e){return e.length?mn.from(e).append(this):this};mn.prototype.appendInner=function(e){return new bW(this,e)};mn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?mn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};mn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};mn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};mn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};mn.from=function(e){return e instanceof mn?e:e&&e.length?new _O(e):mn.empty};var _O=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=dm)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=dm)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(mn);mn.empty=new _O([]);var bW=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(mn);const vW=500;class Ci{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,a,l,u=[],c=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(r,d+1),o=i.maps.length),o--,c.push(f);return}if(i){c.push(new ps(f.map));let h=f.step.map(i.slice(o)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],u.push(new ps(p,void 0,void 0,u.length+c.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(f.step);if(f.selection)return a=i?f.selection.map(i.slice(o)):f.selection,l=new Ci(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let c=0;c<e.steps.length;c++){let f=e.steps[c].invert(e.docs[c]),d=new ps(e.mapping.maps[c],f,n),h;(h=l&&l.merge(d))&&(d=h,c?o.pop():a=a.slice(0,a.length-1)),o.push(d),n&&(s++,n=void 0),i||(l=d)}let u=s-r.depth;return u>kW&&(a=wW(a,u),s-=u),new Ci(a.append(o),s)}remapping(e,n){let r=new JT;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new Ci(this.items.append(e.map(n=>new ps(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=n;this.items.forEach(d=>{let h=o.getMirror(--l);if(h==null)return;s=Math.min(s,h);let p=o.maps[h];if(d.step){let m=e.steps[h].invert(e.docs[h]),b=d.selection&&d.selection.map(o.slice(l+1,h));b&&a++,r.push(new ps(p,m,b))}else r.push(new ps(p))},i);let u=[];for(let d=n;d<s;d++)u.push(new ps(o.maps[d]));let c=this.items.slice(0,i).append(u).append(r),f=new Ci(c,a);return f.emptyItemCount()>vW&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(n.slice(r)),u=l&&l.getMap();if(r--,u&&n.appendMap(u,r),l){let c=s.selection&&s.selection.map(n.slice(r));c&&o++;let f=new ps(u.invert(),l,c),d,h=i.length-1;(d=i.length&&i[h].merge(f))?i[h]=d:i.push(f)}}else s.map&&r--},this.items.length,0),new Ci(mn.from(i.reverse()),o)}}Ci.empty=new Ci(mn.empty,0);function wW(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}let ps=class AO{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new AO(n.getMap().invert(),n,this.selection)}}};class Os{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const kW=20;function xW(t,e,n,r){let i=n.getMeta(ml),o;if(i)return i.historyState;n.getMeta(CW)&&(t=new Os(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(ml))return s.getMeta(ml).redo?new Os(t.done.addTransform(n,void 0,r,d0(e)),t.undone,L6(n.mapping.maps),t.prevTime,t.prevComposition):new Os(t.done,t.undone.addTransform(n,void 0,r,d0(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!EW(n,t.prevRanges)),u=s?lb(t.prevRanges,n.mapping):L6(n.mapping.maps);return new Os(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,d0(e)),Ci.empty,u,n.time,a??t.prevComposition)}else return(o=n.getMeta("rebased"))?new Os(t.done.rebased(n,o),t.undone.rebased(n,o),lb(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Os(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),lb(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function EW(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function L6(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function lb(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function SW(t,e,n){let r=d0(e),i=ml.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),l=new Os(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(ml,{redo:n,historyState:l})}let ub=!1,B6=null;function d0(t){let e=t.plugins;if(B6!=e){ub=!1,B6=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){ub=!0;break}}return ub}const ml=new xo("history"),CW=new xo("closeHistory");function _W(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Kr({key:ml,state:{init(){return new Os(Ci.empty,Ci.empty,null,0,-1)},apply(e,n,r){return xW(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?MO:r=="historyRedo"?OO:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function TO(t,e){return(n,r)=>{let i=ml.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=SW(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const MO=TO(!1,!0),OO=TO(!0,!0),AW=Eo.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>MO(t,e),redo:()=>({state:t,dispatch:e})=>OO(t,e)}},addProseMirrorPlugins(){return[_W(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),TW=Zr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",nn(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):yV(n)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:a})=>{var l;if(a){const{$to:u}=s.selection,c=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(He.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(_e.create(s.doc,u.pos)):s.setSelection(He.create(s.doc,u.pos));else{const f=(l=u.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();f&&(s.insert(c,f),s.setSelection(He.create(s.doc,c+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[HV({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),MW=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,OW=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,DW=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,NW=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,$W=Fl.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",nn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ic({find:MW,type:this.type}),ic({find:DW,type:this.type})]},addPasteRules(){return[oc({find:OW,type:this.type}),oc({find:NW,type:this.type})]}}),IW=Zr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",nn(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),RW=Zr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",nn(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),P6=Fl.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",nn(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=ag(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),z6=/^(\d+)\.\s$/,FW=Zr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",nn(this.options.HTMLAttributes,n),0]:["ol",nn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(RW.name,this.editor.getAttributes(P6.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Bd({find:z6,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Bd({find:z6,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(P6.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),DO=Zr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",nn(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),LW=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,BW=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,PW=Fl.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",nn(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ic({find:LW,type:this.type})]},addPasteRules(){return[oc({find:BW,type:this.type})]}}),zW=Zr.create({name:"text",group:"inline"}),uw=Eo.create({name:"starterKit",addExtensions(){var t,e,n,r,i,o,s,a,l,u,c,f,d,h,p,m,b,y;const v=[];return this.options.bold!==!1&&v.push(ZH.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&v.push(UH.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&v.push(YH.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&v.push(eW.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&v.push(rW.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&v.push(iW.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&v.push(aW.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&v.push(mW.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&v.push(gW.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&v.push(yW.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&v.push(AW.configure((c=this.options)===null||c===void 0?void 0:c.history)),this.options.horizontalRule!==!1&&v.push(TW.configure((f=this.options)===null||f===void 0?void 0:f.horizontalRule)),this.options.italic!==!1&&v.push($W.configure((d=this.options)===null||d===void 0?void 0:d.italic)),this.options.listItem!==!1&&v.push(IW.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&v.push(FW.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&v.push(DO.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&v.push(PW.configure((b=this.options)===null||b===void 0?void 0:b.strike)),this.options.text!==!1&&v.push(zW.configure((y=this.options)===null||y===void 0?void 0:y.text)),v}});function jW(t){var e;const{char:n,allowSpaces:r,allowedPrefixes:i,startOfLine:o,$position:s}=t,a=KV(n),l=new RegExp(`\\s${a}$`),u=o?"^":"",c=r?new RegExp(`${u}${a}.*?(?=\\s${a}|$)`,"gm"):new RegExp(`${u}(?:^)?${a}[^\\s${a}]*`,"gm"),f=((e=s.nodeBefore)===null||e===void 0?void 0:e.isText)&&s.nodeBefore.text;if(!f)return null;const d=s.pos-f.length,h=Array.from(f.matchAll(c)).pop();if(!h||h.input===void 0||h.index===void 0)return null;const p=h.input.slice(Math.max(0,h.index-1),h.index),m=new RegExp(`^[${i==null?void 0:i.join("")}\0]?$`).test(p);if(i!==null&&!m)return null;const b=d+h.index;let y=b+h[0].length;return r&&l.test(f.slice(y-1,y+1))&&(h[0]+=" ",y+=1),b<s.pos&&y>=s.pos?{range:{from:b,to:y},query:h[0].slice(n.length),text:h[0]}:null}const qW=new xo("suggestion");function VW({pluginKey:t=qW,editor:e,char:n="@",allowSpaces:r=!1,allowedPrefixes:i=[" "],startOfLine:o=!1,decorationTag:s="span",decorationClass:a="suggestion",command:l=()=>null,items:u=()=>[],render:c=()=>({}),allow:f=()=>!0,findSuggestionMatch:d=jW}){let h;const p=c==null?void 0:c(),m=new Kr({key:t,view(){return{update:async(b,y)=>{var v,w,g,x,k,E,D;const O=(v=this.key)===null||v===void 0?void 0:v.getState(y),N=(w=this.key)===null||w===void 0?void 0:w.getState(b.state),C=O.active&&N.active&&O.range.from!==N.range.from,R=!O.active&&N.active,T=O.active&&!N.active,q=!R&&!T&&O.query!==N.query,A=R,S=q||C,P=T;if(!A&&!S&&!P)return;const B=P&&!A?O:N,j=b.dom.querySelector(`[data-decoration-id="${B.decorationId}"]`);h={editor:e,range:B.range,query:B.query,text:B.text,items:[],command:z=>l({editor:e,range:B.range,props:z}),decorationNode:j,clientRect:j?()=>{var z;const{decorationId:J}=(z=this.key)===null||z===void 0?void 0:z.getState(e.state),K=b.dom.querySelector(`[data-decoration-id="${J}"]`);return(K==null?void 0:K.getBoundingClientRect())||null}:null},A&&((g=p==null?void 0:p.onBeforeStart)===null||g===void 0||g.call(p,h)),S&&((x=p==null?void 0:p.onBeforeUpdate)===null||x===void 0||x.call(p,h)),(S||A)&&(h.items=await u({editor:e,query:B.query})),P&&((k=p==null?void 0:p.onExit)===null||k===void 0||k.call(p,h)),S&&((E=p==null?void 0:p.onUpdate)===null||E===void 0||E.call(p,h)),A&&((D=p==null?void 0:p.onStart)===null||D===void 0||D.call(p,h))},destroy:()=>{var b;h&&((b=p==null?void 0:p.onExit)===null||b===void 0||b.call(p,h))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(b,y,v,w){const{isEditable:g}=e,{composing:x}=e.view,{selection:k}=b,{empty:E,from:D}=k,O={...y};if(O.composing=x,g&&(E||e.view.composing)){(D<y.range.from||D>y.range.to)&&!x&&!y.composing&&(O.active=!1);const N=d({char:n,allowSpaces:r,allowedPrefixes:i,startOfLine:o,$position:k.$from}),C=`id_${Math.floor(Math.random()*4294967295)}`;N&&f({editor:e,state:w,range:N.range,isActive:y.active})?(O.active=!0,O.decorationId=y.decorationId?y.decorationId:C,O.range=N.range,O.query=N.query,O.text=N.text):O.active=!1}else O.active=!1;return O.active||(O.decorationId=null,O.range={from:0,to:0},O.query=null,O.text=null),O}},props:{handleKeyDown(b,y){var v;const{active:w,range:g}=m.getState(b.state);return w&&((v=p==null?void 0:p.onKeyDown)===null||v===void 0?void 0:v.call(p,{view:b,event:y,range:g}))||!1},decorations(b){const{active:y,range:v,decorationId:w}=m.getState(b);return y?Kt.create(b.doc,[Br.inline(v.from,v.to,{nodeName:s,class:a,"data-decoration-id":w})]):null}}});return m}const UW="modulepreload",HW=function(t){return"/"+t},j6={},WW=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.all(n.map(a=>{if(a=HW(a),a in j6)return;j6[a]=!0;const l=a.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":UW,l||(c.as="script",c.crossOrigin=""),c.href=a,s&&c.setAttribute("nonce",s),document.head.appendChild(c),l)return new Promise((f,d)=>{c.addEventListener("load",f),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};var JW=Object.defineProperty,KW=(t,e,n)=>e in t?JW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,id=(t,e,n)=>KW(t,typeof e!="symbol"?e+"":e,n);function Sn(t){this.content=t}Sn.prototype={constructor:Sn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Sn(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Sn(n)},addToStart:function(t,e){return new Sn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Sn(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Sn(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Sn.from(t),t.size?new Sn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Sn.from(t),t.size?new Sn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Sn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Sn.from=function(t){if(t instanceof Sn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Sn(e)};function NO(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=NO(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function $O(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let u=0,c=Math.min(s.text.length,a.text.length);for(;u<c&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let u=$O(s.content,a.content,n-1,r-1);if(u)return u}n-=l,r-=l}}let ce=class Gn{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,a=0;a<n;s++){let l=this.content[s],u=a+l.nodeSize;if(u>e&&r(l,i+a,o||null,s)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,e-c),Math.min(l.content.size,n-c),r,i+c)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(a,l)=>{let u=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&r&&(s?s=!1:o+=r),o+=u},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new Gn(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=l}return new Gn(r,i)}cutByIndex(e,n){return e==n?Gn.empty:e==0&&n==this.content.length?this:new Gn(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Gn(i,o)}addToStart(e){return new Gn([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Gn(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return NO(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return $O(this,e,n,r)}findIndex(e,n=-1){if(e==0)return mp(0,e);if(e==this.size)return mp(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?mp(r+1,s):mp(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Gn.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Gn(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Gn.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new Gn(n||e,r)}static from(e){if(!e)return Gn.empty;if(e instanceof Gn)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Gn([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};ce.empty=new ce([],0);const cb={index:0,offset:0};function mp(t,e){return cb.index=t,cb.offset=e,cb}function hm(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!hm(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!hm(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let dt=class cw{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&hm(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return cw.none;if(e instanceof cw)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};dt.none=[];let pm=class extends Error{},we=class uu{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=RO(this.content,e+this.openStart,n);return r&&new uu(r,this.openStart,this.openEnd)}removeBetween(e,n){return new uu(IO(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return uu.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new uu(ce.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new uu(e,r,i)}};we.empty=new we(ce.empty,0,0);function IO(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(IO(o.content,e-i-1,n-i-1)))}function RO(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=RO(s.content,e-o-1,n);return a&&t.replaceChild(i,s.copy(a))}function ZW(t,e,n){if(n.openStart>t.depth)throw new pm("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new pm("Inconsistent open depths");return FO(t,e,n,0)}function FO(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=FO(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return yl(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=GW(n,t);return yl(o,BO(t,s,a,e,r))}else return yl(o,mm(t,e,r))}function LO(t,e){if(!e.type.compatibleContent(t.type))throw new pm("Cannot join "+e.type.name+" onto "+t.type.name)}function fw(t,e,n){let r=t.node(n);return LO(r,e.node(n)),r}function gl(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function od(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(gl(t.nodeAfter,r),o++));for(let a=o;a<s;a++)gl(i.child(a),r);e&&e.depth==n&&e.textOffset&&gl(e.nodeBefore,r)}function yl(t,e){return t.type.checkContent(e),t.copy(e)}function BO(t,e,n,r,i){let o=t.depth>i&&fw(t,e,i+1),s=r.depth>i&&fw(n,r,i+1),a=[];return od(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(LO(o,s),gl(yl(o,BO(t,e,n,r,i+1)),a)):(o&&gl(yl(o,mm(t,e,i+1)),a),od(e,n,i,a),s&&gl(yl(s,mm(n,r,i+1)),a)),od(r,null,i,a),new ce(a)}function mm(t,e,n){let r=[];if(od(null,t,n,r),t.depth>n){let i=fw(t,e,n+1);gl(yl(i,mm(t,e,n+1)),r)}return od(e,null,n,r),new ce(r)}function GW(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(ce.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}let q6=class dw{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return dt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new gm(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),u=o-l;if(r.push(s,a,i+l),!u||(s=s.child(a),s.isText))break;o=u-1,i+=l+1}return new dw(n,r,o)}static resolveCached(e,n){let r=V6.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else V6.set(e,r=new YW);let i=r.elts[r.i]=dw.resolve(e,n);return r.i=(r.i+1)%QW,i}},YW=class{constructor(){this.elts=[],this.i=0}};const QW=12,V6=new WeakMap;let gm=class{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}};const XW=Object.create(null);let Pu=class hw{constructor(e,n,r,i=dt.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||ce.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&hm(this.attrs,n||e.defaultAttrs||XW)&&dt.sameSet(this.marks,r||dt.none)}copy(e=null){return e==this.content?this:new hw(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new hw(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return we.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),a=i.start(s),u=i.node(s).content.cut(i.pos-a,o.pos-a);return new we(u,i.depth-s,o.depth-s)}replace(e,n,r){return ZW(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return q6.resolveCached(this,e)}resolveNoCache(e){return q6.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),PO(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=ce.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=dt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!dt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=ce.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Pu.prototype.text=void 0;let eJ=class pw extends Pu{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):PO(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new pw(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new pw(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function PO(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}let jd=class zO{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new tJ(e,n);if(r.next==null)return zO.empty;let i=jO(r);r.next&&r.err("Unexpected trailing text");let o=lJ(aJ(i));return uJ(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return ce.from(a.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:f}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=o(f,a.concat(c));if(d)return d}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}};jd.empty=new jd(!0);let tJ=class{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function jO(t){let e=[];do e.push(nJ(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function nJ(t){let e=[];do e.push(rJ(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function rJ(t){let e=sJ(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=iJ(t,e);else break;return e}function U6(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function iJ(t,e){let n=U6(t),r=n;return t.eat(",")&&(t.next!="}"?r=U6(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function oJ(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function sJ(t){if(t.eat("(")){let e=jO(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=oJ(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function aJ(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let u={term:l,to:a};return e[s].push(u),u}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,u)=>l.concat(o(u,a)),[]);if(s.type=="seq")for(let l=0;;l++){let u=o(s.exprs[l],a);if(l==s.exprs.length-1)return u;i(u,a=n())}else if(s.type=="star"){let l=n();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let u=0;u<s.min;u++){let c=n();i(o(s.expr,l),c),l=c}if(s.max==-1)i(o(s.expr,l),l);else for(let u=s.min;u<s.max;u++){let c=n();r(l,c),i(o(s.expr,l),c),l=c}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function qO(t,e){return e-t}function H6(t,e){let n=[];return r(e),n.sort(qO);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&n.indexOf(l)==-1&&r(l)}}}function lJ(t){let e=Object.create(null);return n(H6(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let c=0;c<i.length;c++)i[c][0]==a&&(u=i[c][1]);H6(t,l).forEach(c=>{u||i.push([a,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new jd(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(qO);o.next.push({type:i[s][0],next:e[a.join(",")]||n(a)})}return o}}function uJ(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function VO(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function UO(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function HO(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function WO(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new fJ(t[n]);return e}let W6=class JO{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=WO(r.attrs),this.defaultAttrs=VO(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==jd.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:UO(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Pu(this,this.computeAttrs(e),ce.from(n),dt.setFrom(r))}createChecked(e=null,n,r){return n=ce.from(n),this.checkContent(n),new Pu(this,this.computeAttrs(e),n,dt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=ce.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(ce.empty,!0);return o?new Pu(this,e,n.append(o),dt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){HO(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:dt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new JO(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function cJ(t){let e=t.split("|");return n=>{let r=n===null?"null":typeof n;if(e.indexOf(r)<0)throw new RangeError(`Expected value of type ${e}, got ${r}`)}}let fJ=class{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default,this.validate=typeof e.validate=="string"?cJ(e.validate):e.validate}get isRequired(){return!this.hasDefault}},KO=class ZO{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=WO(i.attrs),this.excluded=null;let o=VO(this.attrs);this.instance=o?new dt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new dt(this,UO(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new ZO(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){HO(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}},GO=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Sn.from(e.nodes),n.marks=Sn.from(e.marks||{}),this.nodes=W6.compile(this.spec.nodes,this),this.marks=KO.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=jd.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?J6(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:J6(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof W6){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new eJ(r,r.defaultAttrs,e,dt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Pu.fromJSON(this,e)}markFromJSON(e){return dt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}};function J6(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function dJ(t){return t.tag!=null}function hJ(t){return t.style!=null}let pJ=class mw{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(dJ(i))this.tags.push(i);else if(hJ(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new Z6(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Z6(this,n,!0);return r.addAll(e,n.from,n.to),we.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(yJ(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=G6(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=G6(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new mw(e,mw.schemaRules(e)))}};const YO={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},mJ={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},QO={ol:!0,ul:!0},ym=1,bm=2,sd=4;function K6(t,e,n){return e!=null?(e?ym:0)|(e==="full"?bm:0):t&&t.whitespace=="pre"?ym|bm:n&~sd}let gp=class{constructor(e,n,r,i,o,s,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=a,this.content=[],this.activeMarks=dt.none,this.stashMarks=[],this.match=s||(a&sd?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ce.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ym)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=ce.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(ce.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):bJ(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!YO.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},Z6=class{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,o,s=K6(null,n.preserveWhitespace,0)|(r?sd:0);i?o=new gp(i.type,i.attrs,dt.none,dt.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new gp(null,null,dt.none,dt.none,!0,null,s):o=new gp(e.schema.topNodeType,null,dt.none,dt.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.style;if(!r||!r.length)return n();let i=this.readStyles(e.style);if(!i)return;let[o,s]=i,a=this.top;for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l]);n();for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&bm||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&ym)r.options&bm?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;QO.hasOwnProperty(r)&&this.parser.normalizeLists&&gJ(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(o?o.ignore:mJ.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let s,a=this.top,l=this.needsBlock;if(YO.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),s=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}o&&o.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),s&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,o,o.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=dt.none,r=dt.none;if(e.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=e.getPropertyValue(o);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(o,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(u=>{l.clearMark(u)&&(r=u.addToSet(r))}):n=this.parser.schema.marks[l.mark].create(l.attrs).addToSet(n),l.consuming===!1)a=l;else break}}return[n,r]}addElementByRule(e,n,r){let i,o,s;n.node?(o=this.parser.schema.nodes[n.node],o.isLeaf?this.insertNode(o.create(n.attrs))||this.leafFallback(e):i=this.enter(o,n.attrs||null,n.preserveWhitespace)):(s=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(s));let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,s&&this.removePendingMark(s,a)}addAll(e,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=r==null?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let o=this.nodes[i],s=o.findWrapping(e);if(s&&(!n||n.length>s.length)&&(n=s,r=o,!s.length)||o.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let s=K6(e,i,o.options);o.options&sd&&o.content.length==0&&(s|=sd),this.nodes.push(new gp(e,n,o.activeMarks,o.pendingMarks,r,null,s)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let u=n[a];if(u==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!c||c.name!=u&&c.groups.indexOf(u)==-1)return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=vJ(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let s=i.popFromStashMark(e);s&&i.type&&i.type.allowsMarkType(s.type)&&(i.activeMarks=s.addToSet(i.activeMarks))}if(i==n)break}}};function gJ(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&QO.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function yJ(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function G6(t){let e={};for(let n in t)e[n]=t[n];return e}function bJ(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:c}=a.edge(l);if(u==e||o.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}function vJ(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}const XO=65535,eD=Math.pow(2,16);function wJ(t,e){return t+e*eD}function Y6(t){return t&XO}function kJ(t){return(t-(t&XO))/eD}const tD=1,nD=2,h0=4,rD=8;let gw=class{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&rD)>0}get deletedBefore(){return(this.delInfo&(tD|h0))>0}get deletedAfter(){return(this.delInfo&(nD|h0))>0}get deletedAcross(){return(this.delInfo&h0)>0}},Ol=class cu{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&cu.empty)return cu.empty}recover(e){let n=0,r=Y6(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+kJ(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[a+o],c=this.ranges[a+s],f=l+u;if(e<=f){let d=u?e==l?-1:e==f?1:n:n,h=l+i+(d<0?0:c);if(r)return h;let p=e==(n<0?l:f)?null:wJ(a/3,e-l),m=e==l?nD:e==f?tD:h0;return(n<0?e!=l:e!=f)&&(m|=rD),new gw(h,m,p)}i+=c-u}return r?e+i:new gw(e+i,0,null)}touches(e,n){let r=0,i=Y6(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let u=this.ranges[a+o],c=l+u;if(e<=c&&a==i*3)return!0;r+=this.ranges[a+s]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),u=this.ranges[i+n],c=this.ranges[i+r];e(a,a+u,l,l+c),o+=c-u}}invert(){return new cu(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?cu.empty:new cu(e<0?[0,-e,0]:[0,0,e])}};Ol.empty=new Ol([]);class ad{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new ad(this.maps,this.mirror,e,n)}copy(){return new ad(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new ad;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new gw(e,i,null)}}const fb=Object.create(null);let Jn=class{getMap(){return Ol.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=fb[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in fb)throw new RangeError("Duplicate use of step JSON ID "+e);return fb[e]=n,n.prototype.jsonID=e,n}},er=class Of{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Of(e,null)}static fail(e){return new Of(null,e)}static fromReplace(e,n,r,i){try{return Of.ok(e.replace(n,r,i))}catch(o){if(o instanceof pm)return Of.fail(o.message);throw o}}};function Zx(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(Zx(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return ce.fromArray(r)}let Gx=class Df extends Jn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new we(Zx(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return er.fromReplace(e,this.from,this.to,o)}invert(){return new xh(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Df(n.pos,r.pos,this.mark)}merge(e){return e instanceof Df&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Df(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Df(n.from,n.to,e.markFromJSON(n.mark))}};Jn.jsonID("addMark",Gx);let xh=class Nf extends Jn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new we(Zx(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return er.fromReplace(e,this.from,this.to,r)}invert(){return new Gx(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Nf(n.pos,r.pos,this.mark)}merge(e){return e instanceof Nf&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Nf(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Nf(n.from,n.to,e.markFromJSON(n.mark))}};Jn.jsonID("removeMark",xh);let Yx=class $f extends Jn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return er.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return er.fromReplace(e,this.pos,this.pos+1,new we(ce.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new $f(this.pos,n.marks[i]);return new $f(this.pos,this.mark)}}return new Qx(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new $f(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new $f(n.pos,e.markFromJSON(n.mark))}};Jn.jsonID("addNodeMark",Yx);let Qx=class yw extends Jn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return er.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return er.fromReplace(e,this.pos,this.pos+1,new we(ce.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Yx(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new yw(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new yw(n.pos,e.markFromJSON(n.mark))}};Jn.jsonID("removeNodeMark",Qx);let Ii=class Pa extends Jn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&bw(e,this.from,this.to)?er.fail("Structure replace would overwrite content"):er.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ol([this.from,this.to-this.from,this.slice.size])}invert(e){return new Pa(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Pa(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Pa)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?we.empty:new we(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Pa(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?we.empty:new we(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Pa(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Pa(n.from,n.to,we.fromJSON(e,n.slice),!!n.structure)}};Jn.jsonID("replace",Ii);let Ar=class p0 extends Jn{constructor(e,n,r,i,o,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(bw(e,this.from,this.gapFrom)||bw(e,this.gapTo,this.to)))return er.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return er.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?er.fromReplace(e,this.from,this.to,r):er.fail("Content does not fit in gap")}getMap(){return new Ol([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new p0(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new p0(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new p0(n.from,n.to,n.gapFrom,n.gapTo,we.fromJSON(e,n.slice),n.insert,!!n.structure)}};Jn.jsonID("replaceAround",Ar);function bw(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function xJ(t,e,n,r){let i=[],o=[],s,a;t.doc.nodesBetween(e,n,(l,u,c)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let d=Math.max(u,e),h=Math.min(u+l.nodeSize,n),p=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(p)||(s&&s.to==d&&s.mark.eq(f[m])?s.to=h:i.push(s=new xh(d,h,f[m])));a&&a.to==d?a.to=h:o.push(a=new Gx(d,h,r))}}),i.forEach(l=>t.step(l)),o.forEach(l=>t.step(l))}function EJ(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(r instanceof KO){let u=s.marks,c;for(;c=r.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let u=Math.min(a+s.nodeSize,n);for(let c=0;c<l.length;c++){let f=l[c],d;for(let h=0;h<i.length;h++){let p=i[h];p.step==o-1&&f.eq(i[h].style)&&(d=p)}d?(d.to=u,d.step=o):i.push({style:f,from:Math.max(a,e),to:u,step:o})}}}),i.forEach(s=>t.step(new xh(s.from,s.to,s.style)))}function iD(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<o.childCount;l++){let u=o.child(l),c=a+u.nodeSize,f=r.matchType(u.type);if(!f)s.push(new Ii(a,c,we.empty));else{r=f;for(let d=0;d<u.marks.length;d++)n.allowsMarkType(u.marks[d].type)||t.step(new xh(a,c,u.marks[d]));if(i&&u.isText&&n.whitespace!="pre"){let d,h=/\r?\n|\r/g,p;for(;d=h.exec(u.text);)p||(p=new we(ce.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),s.push(new Ii(a+d.index,a+d.index+d[0].length,p))}}a=c}if(!r.validEnd){let l=r.fillBefore(ce.empty,!0);t.replace(a,a,new we(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function SJ(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ic(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!SJ(i,o,s))break}return null}function CJ(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),a=i.after(o+1),l=s,u=a,c=ce.empty,f=0;for(let p=o,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,c=ce.from(r.node(p).copy(c)),f++):l--;let d=ce.empty,h=0;for(let p=o,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=ce.from(i.node(p).copy(d)),h++):u++;t.step(new Ar(l,u,s,a,new we(c.append(d),f,h),c.size-f,!0))}function oD(t,e,n=null,r=t){let i=_J(t,e),o=i&&AJ(r,e);return o?i.map(Q6).concat({type:e,attrs:n}).concat(o.map(Q6)):null}function Q6(t){return{type:t,attrs:null}}function _J(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function AJ(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:s}function TJ(t,e,n){let r=ce.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ce.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new Ar(i,o,i,o,new we(r,0,0),n.length,!0))}function MJ(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{if(s.isTextblock&&!s.hasMarkup(r,i)&&NJ(t.doc,t.mapping.slice(o).map(a),r)){let l=null;if(r.schema.linebreakReplacement){let d=r.whitespace=="pre",h=!!r.contentMatch.matchType(r.schema.linebreakReplacement);d&&!h?l=!1:!d&&h&&(l=!0)}l===!1&&DJ(t,s,a,o),iD(t,t.mapping.slice(o).map(a,1),r,void 0,l===null);let u=t.mapping.slice(o),c=u.map(a,1),f=u.map(a+s.nodeSize,1);return t.step(new Ar(c,f,c+1,f-1,new we(ce.from(r.create(i,null,s.marks)),0,0),1,!0)),l===!0&&OJ(t,s,a,o),!1}})}function OJ(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function DJ(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function NJ(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function $J(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ar(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new we(ce.from(s),0,0),1,!0))}function zu(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>o;u--,c--){let f=i.node(u),d=i.index(u);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),p=r&&r[c+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[c]||f;if(!f.canReplace(d+1,f.childCount)||!m.type.validContent(h))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function IJ(t,e,n=1,r){let i=t.doc.resolve(e),o=ce.empty,s=ce.empty;for(let a=i.depth,l=i.depth-n,u=n-1;a>l;a--,u--){o=ce.from(i.node(a).copy(o));let c=r&&r[u];s=ce.from(c?c.type.create(c.attrs,s):i.node(a).copy(s))}t.step(new Ii(e,e,new we(o.append(s),n,n),!0))}function Ll(t,e){let n=t.resolve(e),r=n.index();return sD(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function sD(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function cg(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&sD(o,s)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function RJ(t,e,n){let r=new Ii(e-n,e+n,we.empty,!0);t.step(r)}function FJ(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function fg(t,e,n=e,r=we.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return aD(i,o,r)?new Ii(e,n,r):new LJ(i,o,r).fit()}function aD(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}let LJ=class{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ce.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=ce.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new we(o,s,a);return e>-1?new Ar(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ii(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=db(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],c,f=null;if(n==1&&(s?u.matchType(s.type)||(f=u.fillBefore(ce.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:f};if(n==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=db(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new we(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=db(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new we(If(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new we(If(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));f=f.matchFragment(i)}let h=a.size+e-(s.content.size-s.openEnd);for(;u<a.childCount;){let m=a.child(u),b=f.matchType(m.type);if(!b)break;u++,(u>1||l==0||m.content.size)&&(f=b,c.push(lD(m.mark(d.allowedMarks(m.marks)),u==1?l:0,u==a.childCount?h:-1)))}let p=u==a.childCount;p||(h=-1),this.placed=Rf(this.placed,n,ce.from(c)),this.frontier[n].match=f,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,b=a;m<h;m++){let y=b.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),b=y.content}this.unplaced=p?e==0?we.empty:new we(If(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new we(If(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!hb(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=hb(e,n,i,r,o);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],c=hb(e,a,u,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Rf(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Rf(this.placed,this.depth,ce.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ce.empty,!0);n.childCount&&(this.placed=Rf(this.placed,this.frontier.length,n))}};function If(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(If(t.firstChild.content,e-1,n)))}function Rf(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Rf(t.lastChild.content,e-1,n)))}function db(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function lD(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,lD(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(ce.empty,!0)))),t.copy(r)}function hb(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!BJ(n,o.content,s)?a:null}function BJ(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function PJ(t){return t.spec.defining||t.spec.definingForContent}function zJ(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(aD(i,o,r))return t.step(new Ii(e,n,r));let s=cD(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let d=i.depth,h=i.pos-1;d>0;d--,h--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(d)>-1?a=d:i.before(d)==h&&s.splice(1,0,-d)}let l=s.indexOf(a),u=[],c=r.openStart;for(let d=r.content,h=0;;h++){let p=d.firstChild;if(u.push(p),h==r.openStart)break;d=p.content}for(let d=c-1;d>=0;d--){let h=u[d],p=PJ(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(a)-1)))c=d;else if(p||!h.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let h=(d+c+1)%(r.openStart+1),p=u[h];if(p)for(let m=0;m<s.length;m++){let b=s[(m+l)%s.length],y=!0;b<0&&(y=!1,b=-b);let v=i.node(b-1),w=i.index(b-1);if(v.canReplaceWith(w,w,p.type,p.marks))return t.replace(i.before(b),y?o.after(b):n,new we(uD(r.content,0,r.openStart,h),h,r.openEnd))}}let f=t.steps.length;for(let d=s.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>f));d--){let h=s[d];h<0||(e=i.before(h),n=o.after(h))}}function uD(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(uD(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(ce.empty,!0))}return t}function jJ(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=FJ(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new we(ce.from(r),0,0))}function qJ(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=cD(r,i);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return t.delete(r.before(s),n);t.delete(e,n)}function cD(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}let fD=class m0 extends Jn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return er.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return er.fromReplace(e,this.pos,this.pos+1,new we(ce.from(i),0,n.isLeaf?0:1))}getMap(){return Ol.empty}invert(e){return new m0(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new m0(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new m0(n.pos,n.attr,n.value)}};Jn.jsonID("attr",fD);let dD=class vw extends Jn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return er.ok(r)}getMap(){return Ol.empty}invert(e){return new vw(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new vw(n.attr,n.value)}};Jn.jsonID("docAttr",dD);let cc=class extends Error{};cc=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};cc.prototype=Object.create(Error.prototype);cc.prototype.constructor=cc;cc.prototype.name="TransformError";class VJ{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ad}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new cc(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=we.empty){let i=fg(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new we(ce.from(r),0,0))}delete(e,n){return this.replace(e,n,we.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return zJ(this,e,n,r),this}replaceRangeWith(e,n,r){return jJ(this,e,n,r),this}deleteRange(e,n){return qJ(this,e,n),this}lift(e,n){return CJ(this,e,n),this}join(e,n=1){return RJ(this,e,n),this}wrap(e,n){return TJ(this,e,n),this}setBlockType(e,n=e,r,i=null){return MJ(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return $J(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new fD(e,n,r)),this}setDocAttribute(e,n){return this.step(new dD(e,n)),this}addNodeMark(e,n){return this.step(new Yx(e,n)),this}removeNodeMark(e,n){if(!(n instanceof dt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Qx(e,n)),this}split(e,n=1,r){return IJ(this,e,n,r),this}addMark(e,n,r){return xJ(this,e,n,r),this}removeMark(e,n,r){return EJ(this,e,n,r),this}clearIncompatible(e,n,r){return iD(this,e,n,r),this}}const pb=Object.create(null);let ht=class{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new UJ(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=we.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:u}=s[a],c=e.mapping.slice(o);e.replaceRange(c.map(l.pos),c.map(u.pos),a?we.empty:n),a==0&&t4(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=e.mapping.slice(r),u=l.map(s.pos),c=l.map(a.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),t4(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new gn(e):fu(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?fu(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):fu(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new ju(e.node(0))}static atStart(e){return fu(e,e,0,0,1)||new ju(e)}static atEnd(e){return fu(e,e,e.content.size,e.childCount,-1)||new ju(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=pb[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in pb)throw new RangeError("Duplicate use of selection JSON ID "+e);return pb[e]=n,n.prototype.jsonID=e,n}getBookmark(){return gn.between(this.$anchor,this.$head).getBookmark()}};ht.prototype.visible=!0;let UJ=class{constructor(e,n){this.$from=e,this.$to=n}},X6=!1;function e4(t){!X6&&!t.parent.inlineContent&&(X6=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}let gn=class Ff extends ht{constructor(e,n=e){e4(e),e4(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ht.near(r);let i=e.resolve(n.map(this.anchor));return new Ff(i.parent.inlineContent?i:r,r)}replace(e,n=we.empty){if(super.replace(e,n),n==we.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ff&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new hD(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ff(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=ht.findFrom(n,r,!0)||ht.findFrom(n,-r,!0);if(o)n=o.$head;else return ht.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(ht.findFrom(e,-r,!0)||ht.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Ff(e,n)}};ht.jsonID("text",gn);let hD=class pD{constructor(e,n){this.anchor=e,this.head=n}map(e){return new pD(e.map(this.anchor),e.map(this.head))}resolve(e){return gn.between(e.resolve(this.anchor),e.resolve(this.head))}},Yt=class Lf extends ht{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?ht.near(o):new Lf(o)}content(){return new we(ce.from(this.node),0,0)}eq(e){return e instanceof Lf&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new HJ(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Lf(e.resolve(n.anchor))}static create(e,n){return new Lf(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};Yt.prototype.visible=!1;ht.jsonID("node",Yt);let HJ=class mD{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new hD(r,r):new mD(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Yt.isSelectable(r)?new Yt(n):ht.near(n)}},ju=class g0 extends ht{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=we.empty){if(n==we.empty){e.delete(0,e.doc.content.size);let r=ht.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new g0(e)}map(e){return new g0(e)}eq(e){return e instanceof g0}getBookmark(){return WJ}};ht.jsonID("all",ju);const WJ={map(){return this},resolve(t){return new ju(t)}};function fu(t,e,n,r,i,o=!1){if(e.inlineContent)return gn.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&Yt.isSelectable(a))return Yt.create(t,n-(i<0?a.nodeSize:0))}else{let l=fu(t,a,n+i,i<0?a.childCount:0,i,o);if(l)return l}n+=a.nodeSize*i}return null}function t4(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ii||i instanceof Ar))return;let o=t.mapping.maps[r],s;o.forEach((a,l,u,c)=>{s==null&&(s=c)}),t.setSelection(ht.near(t.doc.resolve(s),n))}function n4(t,e){return!e||!t?t:t.bind(e)}let yp=class{constructor(e,n,r){this.name=e,this.init=n4(n.init,r),this.apply=n4(n.apply,r)}};new yp("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new yp("selection",{init(t,e){return t.selection||ht.atStart(e.doc)},apply(t){return t.selection}}),new yp("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new yp("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}});function gD(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=gD(i,e,{})),n[r]=i}return n}let ns=class{constructor(e){this.spec=e,this.props={},e.props&&gD(e.props,this,this.props),this.key=e.key?e.key.key:yD("plugin")}getState(e){return e[this.key]}};const mb=Object.create(null);function yD(t){return t in mb?t+"$"+ ++mb[t]:(mb[t]=0,t+"$")}let rs=class{constructor(e="key"){this.key=yD(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};const JJ=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function bD(t,e){let{$cursor:n}=t.selection;return!n||n.parentOffset>0?null:n}const KJ=(t,e,n)=>{let r=bD(t);if(!r)return!1;let i=Xx(r);if(!i){let s=r.blockRange(),a=s&&Ic(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&xD(t,i,e))return!0;if(r.parent.content.size==0&&(fc(o,"end")||Yt.isSelectable(o))){let s=fg(t.doc,r.before(),r.after(),we.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(fc(o,"end")?ht.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):Yt.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},ZJ=(t,e,n)=>{let r=bD(t);if(!r)return!1;let i=Xx(r);return i?vD(t,i,e):!1},GJ=(t,e,n)=>{let r=wD(t);if(!r)return!1;let i=e3(r);return i?vD(t,i,e):!1};function vD(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let u=fg(t.doc,o,l,we.empty);if(!u||u.from!=o||u instanceof Ii&&u.slice.size>=l-o)return!1;if(n){let c=t.tr.step(u);c.setSelection(gn.create(c.doc,o)),n(c.scrollIntoView())}return!0}function fc(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const YJ=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(r.parentOffset>0)return!1;o=Xx(r)}let s=o&&o.nodeBefore;return!s||!Yt.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Yt.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Xx(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function wD(t,e){let{$cursor:n}=t.selection;return!n||n.parentOffset<n.parent.content.size?null:n}const QJ=(t,e,n)=>{let r=wD(t);if(!r)return!1;let i=e3(r);if(!i)return!1;let o=i.nodeAfter;if(xD(t,i,e))return!0;if(r.parent.content.size==0&&(fc(o,"start")||Yt.isSelectable(o))){let s=fg(t.doc,r.before(),r.after(),we.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(fc(o,"start")?ht.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Yt.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},XJ=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(r.parentOffset<r.parent.content.size)return!1;o=e3(r)}let s=o&&o.nodeAfter;return!s||!Yt.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Yt.create(t.doc,o.pos)).scrollIntoView()),!0)};function e3(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const eK=(t,e)=>{let n=t.selection,r=n instanceof Yt,i;if(r){if(n.node.isTextblock||!Ll(t.doc,n.from))return!1;i=n.from}else if(i=cg(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(Yt.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},tK=(t,e)=>{let n=t.selection,r;if(n instanceof Yt){if(n.node.isTextblock||!Ll(t.doc,n.to))return!1;r=n.to}else if(r=cg(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},nK=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&Ic(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},rK=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function kD(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const iK=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=kD(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(ht.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},oK=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof ju||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=kD(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(gn.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},sK=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(zu(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Ic(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},aK=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(Yt.create(t.doc,i))),!0)};function lK(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Ll(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function xD(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(lK(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(n){let f=e.pos+i.nodeSize,d=ce.empty;for(let m=o.length-1;m>=0;m--)d=ce.from(o[m].create(null,d));d=ce.from(r.copy(d));let h=t.tr.step(new Ar(e.pos-1,f,e.pos,f,new we(d,1,0),o.length,!0)),p=f+2*o.length;Ll(h.doc,p)&&h.join(p),n(h.scrollIntoView())}return!0}let l=ht.findFrom(e,1),u=l&&l.$from.blockRange(l.$to),c=u&&Ic(u);if(c!=null&&c>=e.depth)return n&&n(t.tr.lift(u,c).scrollIntoView()),!0;if(a&&fc(i,"start",!0)&&fc(r,"end")){let f=r,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(f.canReplace(f.childCount,f.childCount,h.content)){if(n){let m=ce.empty;for(let y=d.length-1;y>=0;y--)m=ce.from(d[y].copy(m));let b=t.tr.step(new Ar(e.pos-d.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new we(m,d.length,0),0,!0));n(b.scrollIntoView())}return!0}}return!1}function ED(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(gn.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const uK=ED(-1),cK=ED(1);function fK(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&oD(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function r4(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(s,a,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let c=n.doc.resolve(u),f=c.index();i=c.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];o.setBlockType(a,l,t,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function dK(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(t)&&s.startIndex==0){if(i.index(s.depth-1)==0)return!1;let c=n.doc.resolve(s.start-2);l=new gm(c,c,s.depth),s.endIndex<s.parent.childCount&&(s=new gm(i,n.doc.resolve(o.end(s.depth)),s.depth)),a=!0}let u=oD(l,t,e,s);return u?(r&&r(hK(n.tr,s,u,a,t).scrollIntoView()),!0):!1}}function hK(t,e,n,r,i){let o=ce.empty;for(let c=n.length-1;c>=0;c--)o=ce.from(n[c].type.create(n[c].attrs,o));t.step(new Ar(e.start-(r?2:0),e.end,e.start,e.end,new we(o,0,0),n.length,!0));let s=0;for(let c=0;c<n.length;c++)n[c].type==i&&(s=c+1);let a=n.length-s,l=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,f=e.endIndex,d=!0;c<f;c++,d=!1)!d&&zu(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=u.child(c).nodeSize;return t}function pK(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?mK(e,n,t,o):gK(e,n,o):!0:!1}}function mK(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Ar(o-1,s,o,s,new we(ce.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new gm(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=Ic(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(o,-1)-1;return Ll(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function gK(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(a?0:1),c+1,s.content.append(l?ce.empty:ce.from(i))))return!1;let f=o.pos,d=f+s.nodeSize;return r.step(new Ar(f-(a?1:0),d+(l?1:0),f+1,d-1,new we((a?ce.empty:ce.from(i.copy(ce.empty))).append(l?ce.empty:ce.from(i.copy(ce.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function yK(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let u=l.lastChild&&l.lastChild.type==a.type,c=ce.from(u?t.create():null),f=new we(ce.from(t.create(null,ce.from(a.type.create(null,c)))),u?3:1,0),d=o.start,h=o.end;n(e.tr.step(new Ar(d-(u?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}function SD(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}let bK=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>{const f=l(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a=[],l=!!e,u=e||o.tr,c=()=>(!l&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),a.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...m)=>{const b=this.buildProps(u,n),y=h(...m)(b);return a.push(y),f}])),run:c};return f}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...c)=>u(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a={tr:e,editor:i,view:s,state:SD({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,u])=>[l,(...c)=>u(...c)(a)]))}};return a}};function tr(t,e,n){return t.config[e]===void 0&&t.parent?tr(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?tr(t.parent,e,n):null}):t.config[e]}function vK(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Nn(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function vm(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const a=o?o.split(" "):[],l=r[i]?r[i].split(" "):[],u=a.filter(c=>!l.includes(c));r[i]=[...l,...u].join(" ")}else i==="style"?r[i]=[r[i],o].join("; "):r[i]=o}),r},{})}function wK(t){return typeof t=="function"}function nr(t,e=void 0,...n){return wK(t)?e?t.bind(e)(...n):t(...n):t}function kK(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class CD{constructor(e){this.find=e.find,this.handler=e.handler}}function xK(t){return Object.prototype.toString.call(t).slice(8,-1)}function bp(t){return xK(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function dg(t,e){const n={...t};return bp(t)&&bp(e)&&Object.keys(e).forEach(r=>{bp(e[r])&&bp(t[r])?n[r]=dg(t[r],e[r]):n[r]=e[r]}),n}let is=class ww{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=nr(tr(this,"addOptions",{name:this.name}))),this.storage=nr(tr(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ww(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>dg(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new ww({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=nr(tr(n,"addOptions",{name:n.name})),n.storage=nr(tr(n,"addStorage",{name:n.name,options:n.options})),n}};function EK(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let a="";return t.nodesBetween(r,i,(l,u,c,f)=>{var d;l.isBlock&&u>r&&(a+=o);const h=s==null?void 0:s[l.type.name];if(h)return c&&(a+=h({node:l,pos:u,parent:c,index:f,range:e})),!1;l.isText&&(a+=(d=l==null?void 0:l.text)===null||d===void 0?void 0:d.slice(Math.max(r,u)-u,i-u))}),a}function SK(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}is.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ns({key:new rs("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(c=>c.$from.pos)),a=Math.max(...o.map(c=>c.$to.pos)),l=SK(n);return EK(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});const CK=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),_K=(t=!1)=>({commands:e})=>e.setContent("",t),AK=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:c}=e,f=u.resolve(c.map(l)),d=u.resolve(c.map(l+a.nodeSize)),h=f.blockRange(d);if(!h)return;const p=Ic(h);if(a.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},TK=t=>e=>t(e),MK=()=>({state:t,dispatch:e})=>oK(t,e),OK=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new gn(r.doc.resolve(s-1))),!0},DK=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const a=i.before(o),l=i.after(o);t.delete(a,l).scrollIntoView()}return!0}return!1},NK=t=>({tr:e,state:n,dispatch:r})=>{const i=Nn(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const l=o.before(s),u=o.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},$K=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},IK=()=>({state:t,dispatch:e})=>JJ(t,e),RK=()=>({commands:t})=>t.keyboardShortcut("Enter"),FK=()=>({state:t,dispatch:e})=>iK(t,e);function wm(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:kK(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function kw(t,e,n={}){return t.find(r=>r.type===e&&wm(r.attrs,n))}function LK(t,e,n={}){return!!kw(t,e,n)}function t3(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=kw([...r.node.marks],e,n);if(!i)return;let o=r.index,s=t.start()+r.offset,a=o+1,l=s+r.node.nodeSize;for(kw([...r.node.marks],e,n);o>0&&i.isInSet(t.parent.child(o-1).marks);)o-=1,s-=t.parent.child(o).nodeSize;for(;a<t.parent.childCount&&LK([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function _a(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const BK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=_a(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:u,to:c}=a;if(i){const f=t3(l,o,e);if(f&&f.from<=u&&f.to>=c){const d=gn.create(s,f.from,f.to);n.setSelection(d)}}return!0},PK=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function _D(t){return t instanceof gn}function Ya(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function zK(t,e=null){if(!e)return null;const n=ht.atStart(t),r=ht.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?gn.create(t,Ya(0,i,o),Ya(t.content.size,i,o)):gn.create(t,Ya(e,i,o),Ya(e,i,o))}function n3(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const jK=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{n3()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!_D(n.state.selection))return s(),!0;const a=zK(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},qK=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),VK=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),AD=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&AD(r)}return t};function i4(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return AD(n)}function km(t,e,n){n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{return Array.isArray(t)&&t.length>0?ce.fromArray(t.map(s=>e.nodeFromJSON(s))):e.nodeFromJSON(t)}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),km("",e,n)}if(i){let o=e,s=!1,a="";n.errorOnInvalidContent&&(o=new GO({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})}));const l=pJ.fromSchema(o),u=n.slice?l.parseSlice(i4(t),n.parseOptions).content:l.parse(i4(t),n.parseOptions);if(n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)});return u}return km("",e,n)}function UK(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ii||i instanceof Ar))return;const o=t.mapping.maps[r];let s=0;o.forEach((a,l,u,c)=>{s===0&&(s=c)}),t.setSelection(ht.near(t.doc.resolve(s),n))}const HK=t=>!("type"in t),WK=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=km(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch{return!1}let{from:l,to:u}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,f=!0;if((HK(a)?a:[a]).forEach(p=>{p.check(),c=c?p.isText&&p.marks.length===0:!1,f=f?p.isBlock:!1}),l===u&&f){const{parent:p}=r.doc.resolve(l);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(l-=1,u+=1)}let h;c?(Array.isArray(e)?h=e.map(p=>p.text||"").join(""):typeof e=="object"&&e&&e.text?h=e.text:h=e,r.insertText(h,l,u)):(h=a,r.replaceWith(l,u,h)),n.updateSelection&&UK(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:h}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:h})}return!0},JK=()=>({state:t,dispatch:e})=>eK(t,e),KK=()=>({state:t,dispatch:e})=>tK(t,e),ZK=()=>({state:t,dispatch:e})=>KJ(t,e),GK=()=>({state:t,dispatch:e})=>QJ(t,e),YK=()=>({state:t,dispatch:e,tr:n})=>{try{const r=cg(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},QK=()=>({state:t,dispatch:e,tr:n})=>{try{const r=cg(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},XK=()=>({state:t,dispatch:e})=>ZJ(t,e),eZ=()=>({state:t,dispatch:e})=>GJ(t,e);function TD(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function tZ(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))n3()||TD()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const nZ=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=tZ(t).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,a))});return l==null||l.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function r3(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?Nn(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(f,d)=>{if(f.isText)return;const h=Math.max(r,d),p=Math.min(i,d+f.nodeSize);a.push({node:f,from:h,to:p})});const l=i-r,u=a.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>wm(f.node.attrs,n,{strict:!1}));return o?!!u.length:u.reduce((f,d)=>f+d.to-d.from,0)>=l}const rZ=(t,e={})=>({state:n,dispatch:r})=>{const i=Nn(t,n.schema);return r3(n,i,e)?nK(n,r):!1},iZ=()=>({state:t,dispatch:e})=>sK(t,e),oZ=t=>({state:e,dispatch:n})=>{const r=Nn(t,e.schema);return pK(r)(e,n)},sZ=()=>({state:t,dispatch:e})=>rK(t,e);function i3(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function o4(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const aZ=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=i3(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Nn(t,r.schema)),a==="mark"&&(s=_a(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,c)=>{o&&o===u.type&&n.setNodeMarkup(c,void 0,o4(u.attrs,e)),s&&u.marks.length&&u.marks.forEach(f=>{s===f.type&&n.addMark(c,c+u.nodeSize,s.create(o4(f.attrs,e)))})})}),!0):!1},lZ=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),uZ=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),cZ=()=>({state:t,dispatch:e})=>YJ(t,e),fZ=()=>({state:t,dispatch:e})=>XJ(t,e),dZ=()=>({state:t,dispatch:e})=>aK(t,e),hZ=()=>({state:t,dispatch:e})=>cK(t,e),pZ=()=>({state:t,dispatch:e})=>uK(t,e);function mZ(t,e,n={},r={}){return km(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const gZ=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:a})=>{var l,u;const{doc:c}=o;if(n.preserveWhitespace!=="full"){const f=mZ(t,i.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return s&&o.replaceWith(0,c.content.size,f).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:c.content.size},t,{parseOptions:n,errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:i.options.enableContentCheck})};function MD(t,e){const n=_a(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function yZ(t,e){const n=new VJ(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function bZ(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function vZ(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function wZ(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function o3(t){return e=>wZ(e.$from,t)}function kZ(t,e){const n=Nn(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,a=>{o.push(a)});const s=o.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function xZ(t,e){const n=i3(typeof e=="string"?e:e.name,t.schema);return n==="node"?kZ(t,e):n==="mark"?MD(t,e):{}}function EZ(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function SZ(t){const e=EZ(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,s)=>s!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function CZ(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const s=[];if(i.ranges.length)i.forEach((a,l)=>{s.push({from:a,to:l})});else{const{from:a,to:l}=n[o];if(a===void 0||l===void 0)return;s.push({from:a,to:l})}s.forEach(({from:a,to:l})=>{const u=e.slice(o).map(a,-1),c=e.slice(o).map(l),f=e.invert().map(u,-1),d=e.invert().map(c);r.push({oldRange:{from:f,to:d},newRange:{from:u,to:c}})})}),SZ(r)}function OD(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t-1),s=t3(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function y0(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function _Z(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?_a(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>wm(f.attrs,n,{strict:!1}));let s=0;const a=[];if(i.forEach(({$from:f,$to:d})=>{const h=f.pos,p=d.pos;t.doc.nodesBetween(h,p,(m,b)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,b),v=Math.min(p,b+m.nodeSize),w=v-y;s+=w,a.push(...m.marks.map(g=>({mark:g,from:y,to:v})))})}),s===0)return!1;const l=a.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>wm(f.mark.attrs,n,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),u=a.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,d)=>f+d.to-d.from,0);return(l>0?l+u:l)>=s}function s4(t,e){const{nodeExtensions:n}=vK(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=nr(tr(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function AZ(t,e,n){var r;const{selection:i}=e;let o=null;if(_D(i)&&(o=i.$cursor),o){const a=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:a,$to:l})=>{let u=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(c,f,d)=>{if(u)return!1;if(c.isInline){const h=!d||d.type.allowsMarkType(n),p=!!n.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(n));u=h&&p}return!u}),u})}const TZ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,l=_a(t,r.schema);if(i)if(s){const u=MD(r,l);n.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const c=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(c,f,(d,h)=>{const p=Math.max(h,c),m=Math.min(h+d.nodeSize,f);d.marks.find(y=>y.type===l)?d.marks.forEach(y=>{l===y.type&&n.addMark(p,m,l.create({...y.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return AZ(r,n,l)},MZ=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),OZ=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Nn(t,n.schema);return o.isTextblock?i().command(({commands:s})=>r4(o,e)(n)?!0:s.clearNodes()).command(({state:s})=>r4(o,e)(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},DZ=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Ya(t,0,r.content.size),o=Yt.create(r,i);e.setSelection(o)}return!0},NZ=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=gn.atStart(r).from,a=gn.atEnd(r).to,l=Ya(i,s,a),u=Ya(o,s,a),c=gn.create(r,l,u);e.setSelection(c)}return!0},$Z=t=>({state:e,dispatch:n})=>{const r=Nn(t,e.schema);return yK(r)(e,n)};function a4(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const IZ=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:a,$to:l}=o,u=i.extensionManager.attributes,c=y0(u,a.node().type.name,a.node().attrs);if(o instanceof Yt&&o.node.isBlock)return!a.parentOffset||!zu(s,a.pos)?!1:(r&&(t&&a4(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const f=l.parentOffset===l.parent.content.size;o instanceof gn&&e.deleteSelection();const d=a.depth===0?void 0:bZ(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=f&&d?[{type:d,attrs:c}]:void 0,p=zu(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&zu(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,h=d?[{type:d,attrs:c}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),d&&!f&&!a.parentOffset&&a.parent.type!==d)){const m=e.mapping.map(a.before()),b=e.doc.resolve(m);a.node(-1).canReplaceWith(b.index(),b.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}t&&a4(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},RZ=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var o;const s=Nn(t,n.schema),{$from:a,$to:l}=n.selection,u=n.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(l))return!1;const c=a.node(-1);if(c.type!==s)return!1;const f=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==s||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let b=ce.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let E=a.depth-y;E>=a.depth-3;E-=1)b=ce.from(a.node(E).copy(b));const v=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,w=y0(f,a.node().type.name,a.node().attrs),g=((o=s.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(w))||void 0;b=b.append(ce.from(s.createAndFill(null,g)||void 0));const x=a.before(a.depth-(y-1));e.replace(x,a.after(-v),new we(b,4-y,0));let k=-1;e.doc.nodesBetween(x,e.doc.content.size,(E,D)=>{if(k>-1)return!1;E.isTextblock&&E.content.size===0&&(k=D+1)}),k>-1&&e.setSelection(gn.near(e.doc.resolve(k))),e.scrollIntoView()}return!0}const d=l.pos===a.end()?c.contentMatchAt(0).defaultType:null,h=y0(f,c.type.name,c.attrs),p=y0(f,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=d?[{type:s,attrs:h},{type:d,attrs:p}]:[{type:s,attrs:h}];if(!zu(e.doc,a.pos,2))return!1;if(r){const{selection:b,storedMarks:y}=n,{splittableMarks:v}=i.extensionManager,w=y||b.$to.parentOffset&&b.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!w||!r)return!0;const g=w.filter(x=>v.includes(x.type.name));e.ensureMarks(g)}return!0},gb=(t,e)=>{const n=o3(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Ll(t.doc,n.pos)&&t.join(n.pos),!0},yb=(t,e)=>{const n=o3(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Ll(t.doc,r)&&t.join(r),!0},FZ=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:u,can:c})=>{const{extensions:f,splittableMarks:d}=i.extensionManager,h=Nn(t,s.schema),p=Nn(e,s.schema),{selection:m,storedMarks:b}=s,{$from:y,$to:v}=m,w=y.blockRange(v),g=b||m.$to.parentOffset&&m.$from.marks();if(!w)return!1;const x=o3(k=>s4(k.type.name,f))(m);if(w.depth>=1&&x&&w.depth-x.depth<=1){if(x.node.type===h)return u.liftListItem(p);if(s4(x.node.type.name,f)&&h.validContent(x.node.content)&&a)return l().command(()=>(o.setNodeMarkup(x.pos,h),!0)).command(()=>gb(o,h)).command(()=>yb(o,h)).run()}return!n||!g||!a?l().command(()=>c().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>gb(o,h)).command(()=>yb(o,h)).run():l().command(()=>{const k=c().wrapInList(h,r),E=g.filter(D=>d.includes(D.type.name));return o.ensureMarks(E),k?!0:u.clearNodes()}).wrapInList(h,r).command(()=>gb(o,h)).command(()=>yb(o,h)).run()},LZ=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=_a(t,r.schema);return _Z(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},BZ=(t,e,n={})=>({state:r,commands:i})=>{const o=Nn(t,r.schema),s=Nn(e,r.schema);return r3(r,o,n)?i.setNode(s):i.setNode(o,n)},PZ=(t,e={})=>({state:n,commands:r})=>{const i=Nn(t,n.schema);return r3(n,i,e)?r.lift(i):r.wrapIn(i,e)},zZ=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,l))}else s.delete(o.from,o.to)}return!0}}return!1},jZ=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},qZ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=_a(t,r.schema),{$from:u,empty:c,ranges:f}=a;if(!i)return!0;if(c&&s){let{from:d,to:h}=a;const p=(o=u.marks().find(b=>b.type===l))===null||o===void 0?void 0:o.attrs,m=t3(u,l,p);m&&(d=m.from,h=m.to),n.removeMark(d,h,l)}else f.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,l)});return n.removeStoredMark(l),!0},VZ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=i3(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Nn(t,r.schema)),a==="mark"&&(s=_a(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const u=l.$from.pos,c=l.$to.pos;r.doc.nodesBetween(u,c,(f,d)=>{o&&o===f.type&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),s&&f.marks.length&&f.marks.forEach(h=>{if(s===h.type){const p=Math.max(d,u),m=Math.min(d+f.nodeSize,c);n.addMark(p,m,s.create({...h.attrs,...e}))}})})}),!0):!1},UZ=(t,e={})=>({state:n,dispatch:r})=>{const i=Nn(t,n.schema);return fK(i,e)(n,r)},HZ=(t,e={})=>({state:n,dispatch:r})=>{const i=Nn(t,n.schema);return dK(i,e)(n,r)};var WZ=Object.freeze({__proto__:null,blur:CK,clearContent:_K,clearNodes:AK,command:TK,createParagraphNear:MK,cut:OK,deleteCurrentNode:DK,deleteNode:NK,deleteRange:$K,deleteSelection:IK,enter:RK,exitCode:FK,extendMarkRange:BK,first:PK,focus:jK,forEach:qK,insertContent:VK,insertContentAt:WK,joinBackward:ZK,joinDown:KK,joinForward:GK,joinItemBackward:YK,joinItemForward:QK,joinTextblockBackward:XK,joinTextblockForward:eZ,joinUp:JK,keyboardShortcut:nZ,lift:rZ,liftEmptyBlock:iZ,liftListItem:oZ,newlineInCode:sZ,resetAttributes:aZ,scrollIntoView:lZ,selectAll:uZ,selectNodeBackward:cZ,selectNodeForward:fZ,selectParentNode:dZ,selectTextblockEnd:hZ,selectTextblockStart:pZ,setContent:gZ,setMark:TZ,setMeta:MZ,setNode:OZ,setNodeSelection:DZ,setTextSelection:NZ,sinkListItem:$Z,splitBlock:IZ,splitListItem:RZ,toggleList:FZ,toggleMark:LZ,toggleNode:BZ,toggleWrap:PZ,undoInputRule:zZ,unsetAllMarks:jZ,unsetMark:qZ,updateAttributes:VZ,wrapIn:UZ,wrapInList:HZ});is.create({name:"commands",addCommands(){return{...WZ}}});is.create({name:"editable",addProseMirrorPlugins(){return[new ns({key:new rs("editable"),props:{editable:()=>this.editor.options.editable}})]}});is.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new ns({key:new rs("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});is.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:c,$anchor:f}=l,{pos:d,parent:h}=f,p=f.parent.isTextblock&&d>0?a.doc.resolve(d-1):f,m=p.parent.type.spec.isolating,b=f.pos-f.parentOffset,y=m&&p.parent.childCount===1?b===f.pos:ht.atStart(u).from===d;return!c||!h.type.isTextblock||h.textContent.length||!y||y&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return n3()||TD()?o:i},addProseMirrorPlugins(){return[new ns({key:new rs("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:o,to:s}=e.selection,a=ht.atStart(e.doc).from,l=ht.atEnd(e.doc).to;if(i||!(o===a&&s===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const f=n.tr,d=SD({state:n,transaction:f}),{commands:h}=new bK({editor:this.editor,state:d});if(h.clearNodes(),!!f.steps.length)return f}})]}});is.create({name:"tabindex",addProseMirrorPlugins(){return[new ns({key:new rs("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class qd{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=nr(tr(this,"addOptions",{name:this.name}))),this.storage=nr(tr(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new qd(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>dg(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new qd(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=nr(tr(n,"addOptions",{name:n.name})),n.storage=nr(tr(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const l=s.find(u=>(u==null?void 0:u.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}class Ri{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=nr(tr(this,"addOptions",{name:this.name}))),this.storage=nr(tr(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ri(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>dg(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ri(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=nr(tr(n,"addOptions",{name:n.name})),n.storage=nr(tr(n,"addStorage",{name:n.name,options:n.options})),n}}function DD(t){return new CD({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=nr(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let u=n.to;if(a){const c=l.search(/\S/),f=n.from+l.indexOf(a),d=f+a.length;if(OD(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(b=>b===t.type&&b!==p.mark.type)).filter(p=>p.to>f).length)return null;d<n.to&&s.delete(d,n.to),f>n.from&&s.delete(n.from+c,f),u=n.from+c+a.length,s.addMark(n.from+c,u,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function Eh(t){return new CD({find:t.find,handler({match:e,chain:n,range:r,pasteEvent:i}){const o=nr(t.getAttributes,void 0,e,i);if(o===!1||o===null)return null;e.input&&n().deleteRange(r).insertContentAt(r.from,{type:t.type.name,attrs:o})}})}var ND={};(function(t){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64url=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0;function e(C){if(!Number.isSafeInteger(C))throw new Error(`Wrong integer: ${C}`)}t.assertNumber=e;function n(...C){const R=(A,S)=>P=>A(S(P)),T=Array.from(C).reverse().reduce((A,S)=>A?R(A,S.encode):S.encode,void 0),q=C.reduce((A,S)=>A?R(A,S.decode):S.decode,void 0);return{encode:T,decode:q}}function r(C){return{encode:R=>{if(!Array.isArray(R)||R.length&&typeof R[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return R.map(T=>{if(e(T),T<0||T>=C.length)throw new Error(`Digit index outside alphabet: ${T} (alphabet: ${C.length})`);return C[T]})},decode:R=>{if(!Array.isArray(R)||R.length&&typeof R[0]!="string")throw new Error("alphabet.decode input should be array of strings");return R.map(T=>{if(typeof T!="string")throw new Error(`alphabet.decode: not string element=${T}`);const q=C.indexOf(T);if(q===-1)throw new Error(`Unknown letter: "${T}". Allowed: ${C}`);return q})}}}function i(C=""){if(typeof C!="string")throw new Error("join separator should be string");return{encode:R=>{if(!Array.isArray(R)||R.length&&typeof R[0]!="string")throw new Error("join.encode input should be array of strings");for(let T of R)if(typeof T!="string")throw new Error(`join.encode: non-string input=${T}`);return R.join(C)},decode:R=>{if(typeof R!="string")throw new Error("join.decode input should be string");return R.split(C)}}}function o(C,R="="){if(e(C),typeof R!="string")throw new Error("padding chr should be string");return{encode(T){if(!Array.isArray(T)||T.length&&typeof T[0]!="string")throw new Error("padding.encode input should be array of strings");for(let q of T)if(typeof q!="string")throw new Error(`padding.encode: non-string input=${q}`);for(;T.length*C%8;)T.push(R);return T},decode(T){if(!Array.isArray(T)||T.length&&typeof T[0]!="string")throw new Error("padding.encode input should be array of strings");for(let A of T)if(typeof A!="string")throw new Error(`padding.decode: non-string input=${A}`);let q=T.length;if(q*C%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;q>0&&T[q-1]===R;q--)if(!((q-1)*C%8))throw new Error("Invalid padding: string has too much padding");return T.slice(0,q)}}}function s(C){if(typeof C!="function")throw new Error("normalize fn should be function");return{encode:R=>R,decode:R=>C(R)}}function a(C,R,T){if(R<2)throw new Error(`convertRadix: wrong from=${R}, base cannot be less than 2`);if(T<2)throw new Error(`convertRadix: wrong to=${T}, base cannot be less than 2`);if(!Array.isArray(C))throw new Error("convertRadix: data should be array");if(!C.length)return[];let q=0;const A=[],S=Array.from(C);for(S.forEach(P=>{if(e(P),P<0||P>=R)throw new Error(`Wrong integer: ${P}`)});;){let P=0,B=!0;for(let j=q;j<S.length;j++){const z=S[j],J=R*P+z;if(!Number.isSafeInteger(J)||R*P/R!==P||J-z!==R*P)throw new Error("convertRadix: carry overflow");if(P=J%T,S[j]=Math.floor(J/T),!Number.isSafeInteger(S[j])||S[j]*T+P!==J)throw new Error("convertRadix: carry overflow");if(B)S[j]?B=!1:q=j;else continue}if(A.push(P),B)break}for(let P=0;P<C.length-1&&C[P]===0;P++)A.push(0);return A.reverse()}const l=(C,R)=>R?l(R,C%R):C,u=(C,R)=>C+(R-l(C,R));function c(C,R,T,q){if(!Array.isArray(C))throw new Error("convertRadix2: data should be array");if(R<=0||R>32)throw new Error(`convertRadix2: wrong from=${R}`);if(T<=0||T>32)throw new Error(`convertRadix2: wrong to=${T}`);if(u(R,T)>32)throw new Error(`convertRadix2: carry overflow from=${R} to=${T} carryBits=${u(R,T)}`);let A=0,S=0;const P=2**T-1,B=[];for(const j of C){if(e(j),j>=2**R)throw new Error(`convertRadix2: invalid data word=${j} from=${R}`);if(A=A<<R|j,S+R>32)throw new Error(`convertRadix2: carry overflow pos=${S} from=${R}`);for(S+=R;S>=T;S-=T)B.push((A>>S-T&P)>>>0);A&=2**S-1}if(A=A<<T-S&P,!q&&S>=R)throw new Error("Excess padding");if(!q&&A)throw new Error(`Non-zero padding: ${A}`);return q&&S>0&&B.push(A>>>0),B}function f(C){return e(C),{encode:R=>{if(!(R instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return a(Array.from(R),2**8,C)},decode:R=>{if(!Array.isArray(R)||R.length&&typeof R[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(a(R,C,2**8))}}}function d(C,R=!1){if(e(C),C<=0||C>32)throw new Error("radix2: bits should be in (0..32]");if(u(8,C)>32||u(C,8)>32)throw new Error("radix2: carry overflow");return{encode:T=>{if(!(T instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return c(Array.from(T),8,C,!R)},decode:T=>{if(!Array.isArray(T)||T.length&&typeof T[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(c(T,C,8,R))}}}function h(C){if(typeof C!="function")throw new Error("unsafeWrapper fn should be function");return function(...R){try{return C.apply(null,R)}catch{}}}function p(C,R){if(e(C),typeof R!="function")throw new Error("checksum fn should be function");return{encode(T){if(!(T instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const q=R(T).slice(0,C),A=new Uint8Array(T.length+C);return A.set(T),A.set(q,T.length),A},decode(T){if(!(T instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const q=T.slice(0,-C),A=R(q).slice(0,C),S=T.slice(-C);for(let P=0;P<C;P++)if(A[P]!==S[P])throw new Error("Invalid checksum");return q}}}t.utils={alphabet:r,chain:n,checksum:p,radix:f,radix2:d,join:i,padding:o},t.base16=n(d(4),r("0123456789ABCDEF"),i("")),t.base32=n(d(5),r("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),o(5),i("")),t.base32hex=n(d(5),r("0123456789ABCDEFGHIJKLMNOPQRSTUV"),o(5),i("")),t.base32crockford=n(d(5),r("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),i(""),s(C=>C.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),t.base64=n(d(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o(6),i("")),t.base64url=n(d(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),o(6),i(""));const m=C=>n(f(58),r(C),i(""));t.base58=m("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=m("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=m("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const b=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(C){let R="";for(let T=0;T<C.length;T+=8){const q=C.subarray(T,T+8);R+=t.base58.encode(q).padStart(b[q.length],"1")}return R},decode(C){let R=[];for(let T=0;T<C.length;T+=11){const q=C.slice(T,T+11),A=b.indexOf(q.length),S=t.base58.decode(q);for(let P=0;P<S.length-A;P++)if(S[P]!==0)throw new Error("base58xmr: wrong padding");R=R.concat(Array.from(S.slice(S.length-A)))}return Uint8Array.from(R)}};const y=C=>n(p(4,R=>C(C(R))),t.base58);t.base58check=y;const v=n(r("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),i("")),w=[996825010,642813549,513874426,1027748829,705979059];function g(C){const R=C>>25;let T=(C&33554431)<<5;for(let q=0;q<w.length;q++)(R>>q&1)===1&&(T^=w[q]);return T}function x(C,R,T=1){const q=C.length;let A=1;for(let S=0;S<q;S++){const P=C.charCodeAt(S);if(P<33||P>126)throw new Error(`Invalid prefix (${C})`);A=g(A)^P>>5}A=g(A);for(let S=0;S<q;S++)A=g(A)^C.charCodeAt(S)&31;for(let S of R)A=g(A)^S;for(let S=0;S<6;S++)A=g(A);return A^=T,v.encode(c([A%2**30],30,5,!1))}function k(C){const R=C==="bech32"?1:734539939,T=d(5),q=T.decode,A=T.encode,S=h(q);function P(J,K,ae=90){if(typeof J!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof J}`);if(!Array.isArray(K)||K.length&&typeof K[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof K}`);const fe=J.length+7+K.length;if(ae!==!1&&fe>ae)throw new TypeError(`Length ${fe} exceeds limit ${ae}`);return J=J.toLowerCase(),`${J}1${v.encode(K)}${x(J,K,R)}`}function B(J,K=90){if(typeof J!="string")throw new Error(`bech32.decode input should be string, not ${typeof J}`);if(J.length<8||K!==!1&&J.length>K)throw new TypeError(`Wrong string length: ${J.length} (${J}). Expected (8..${K})`);const ae=J.toLowerCase();if(J!==ae&&J!==J.toUpperCase())throw new Error("String must be lowercase or uppercase");J=ae;const fe=J.lastIndexOf("1");if(fe===0||fe===-1)throw new Error('Letter "1" must be present between prefix and data only');const ke=J.slice(0,fe),ve=J.slice(fe+1);if(ve.length<6)throw new Error("Data must be at least 6 characters long");const xe=v.decode(ve).slice(0,-6),Se=x(ke,xe,R);if(!ve.endsWith(Se))throw new Error(`Invalid checksum in ${J}: expected "${Se}"`);return{prefix:ke,words:xe}}const j=h(B);function z(J){const{prefix:K,words:ae}=B(J,!1);return{prefix:K,words:ae,bytes:q(ae)}}return{encode:P,decode:B,decodeToBytes:z,decodeUnsafe:j,fromWords:q,fromWordsUnsafe:S,toWords:A}}t.bech32=k("bech32"),t.bech32m=k("bech32m"),t.utf8={encode:C=>new TextDecoder().decode(C),decode:C=>new TextEncoder().encode(C)},t.hex=n(d(4),r("0123456789abcdef"),i(""),s(C=>{if(typeof C!="string"||C.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof C} with length ${C.length}`);return C.toLowerCase()}));const E={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},D=`Invalid encoding type. Available types: ${Object.keys(E).join(", ")}`,O=(C,R)=>{if(typeof C!="string"||!E.hasOwnProperty(C))throw new TypeError(D);if(!(R instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return E[C].encode(R)};t.bytesToString=O,t.str=t.bytesToString;const N=(C,R)=>{if(!E.hasOwnProperty(C))throw new TypeError(D);if(typeof R!="string")throw new TypeError("stringToBytes() expects string");return E[C].decode(R)};t.stringToBytes=N,t.bytes=t.stringToBytes})(ND);const{bech32:Yi,hex:_i,utf8:JZ}=ND,l4={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},u4={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},c4={bech32:"tbs",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},f4={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},d4={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},vp=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],KZ={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},ZZ=BigInt("2100000000000000000"),h4=BigInt(1e11),xw={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},$D={};for(let t=0,e=Object.keys(xw);t<e.length;t++){const n=e[t],r=xw[e[t]].toString();$D[r]=n}const GZ={1:t=>_i.encode(Yi.fromWordsUnsafe(t)),16:t=>_i.encode(Yi.fromWordsUnsafe(t)),13:t=>JZ.encode(Yi.fromWordsUnsafe(t)),19:t=>_i.encode(Yi.fromWordsUnsafe(t)),23:t=>_i.encode(Yi.fromWordsUnsafe(t)),27:t=>_i.encode(Yi.fromWordsUnsafe(t)),6:xm,24:xm,3:QZ,5:XZ};function YZ(t){return e=>({tagCode:parseInt(t),words:Yi.encode("unknown",e,Number.MAX_SAFE_INTEGER)})}function xm(t){return t.reverse().reduce((e,n,r)=>e+n*Math.pow(32,r),0)}function QZ(t){const e=[];let n,r,i,o,s,a=Yi.fromWordsUnsafe(t);for(;a.length>0;)n=_i.encode(a.slice(0,33)),r=_i.encode(a.slice(33,41)),i=parseInt(_i.encode(a.slice(41,45)),16),o=parseInt(_i.encode(a.slice(45,49)),16),s=parseInt(_i.encode(a.slice(49,51)),16),a=a.slice(51),e.push({pubkey:n,short_channel_id:r,fee_base_msat:i,fee_proportional_millionths:o,cltv_expiry_delta:s});return e}function XZ(t){const e=t.slice().reverse().map(i=>[!!(i&1),!!(i&2),!!(i&4),!!(i&8),!!(i&16)]).reduce((i,o)=>i.concat(o),[]);for(;e.length<vp.length*2;)e.push(!1);const n={};vp.forEach((i,o)=>{let s;e[o*2]?s="required":e[o*2+1]?s="supported":s="unsupported",n[i]=s});const r=e.slice(vp.length*2);return n.extra_bits={start_bit:vp.length*2,bits:r,has_required:r.reduce((i,o,s)=>s%2!==0?i||!1:i||o,!1)},n}function ID(t,e){let n,r;if(t.slice(-1).match(/^[munp]$/))n=t.slice(-1),r=t.slice(0,-1);else{if(t.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=t}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");const i=BigInt(r),o=n?i*h4/KZ[n]:i*h4;if(n==="p"&&i%BigInt(10)!==BigInt(0)||o>ZZ)throw new Error("Amount is outside of valid range");return e?o.toString():o}function eG(t,e){if(typeof t!="string")throw new Error("Lightning Payment Request must be string");if(t.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const n=[],r=Yi.decode(t,Number.MAX_SAFE_INTEGER);t=t.toLowerCase();const i=r.prefix;let o=r.words,s=t.slice(i.length+1),a=o.slice(-104);o=o.slice(0,-104);let l=i.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(l&&!l[2]&&(l=i.match(/^ln(\S+)$/)),!l)throw new Error("Not a proper lightning payment request");n.push({name:"lightning_network",letters:"ln"});const u=l[1];let c;if(e){if(e.bech32===void 0||e.pubKeyHash===void 0||e.scriptHash===void 0||!Array.isArray(e.validWitnessVersions))throw new Error("Invalid network");c=e}else switch(u){case l4.bech32:c=l4;break;case u4.bech32:c=u4;break;case c4.bech32:c=c4;break;case f4.bech32:c=f4;break;case d4.bech32:c=d4;break}if(!c||c.bech32!==u)throw new Error("Unknown coin bech32 prefix");n.push({name:"coin_network",letters:u,value:c});const f=l[2];let d;if(f){const g=l[3];d=ID(f+g,!0),n.push({name:"amount",letters:l[2]+l[3],value:d})}else d=null;n.push({name:"separator",letters:"1"});const h=xm(o.slice(0,7));o=o.slice(7),n.push({name:"timestamp",letters:s.slice(0,7),value:h}),s=s.slice(7);let p,m,b,y;for(;o.length>0;){const g=o[0].toString();p=$D[g]||"unknown_tag",m=GZ[g]||YZ(g),o=o.slice(1),b=xm(o.slice(0,2)),o=o.slice(2),y=o.slice(0,b),o=o.slice(b),n.push({name:p,tag:s[0],letters:s.slice(0,3+b),value:m(y)}),s=s.slice(3+b)}n.push({name:"signature",letters:s.slice(0,104),value:_i.encode(Yi.fromWordsUnsafe(a))}),s=s.slice(104),n.push({name:"checksum",letters:s});let v={paymentRequest:t,sections:n,get expiry(){let g=n.find(x=>x.name==="expiry");if(g)return w("timestamp")+g.value},get route_hints(){return n.filter(g=>g.name==="route_hint").map(g=>g.value)}};for(let g in xw)g!=="route_hint"&&Object.defineProperty(v,g,{get(){return w(g)}});return v;function w(g){let x=n.find(k=>k.name===g);return x?x.value:void 0}}var p4={decode:eG,hrpToMillisat:ID},tG=["/",":","?","#"],nG=[".","/","@"];function m4(t,e){for(var n,r=0,i=0,o=0,s=t.length,a=0;s--&&++a&&!(r&&tG.indexOf(t[a])>-1);)t[a]==="."&&(++r,i=a);for(n=a,a=i;a--;)if(nG.indexOf(t[a])!==-1){o=a+1;break}if(o===0&&n>3)return t;if(o>0&&o<2)return"";if(e.tld){for(var l=0,u=["/","@"],c=i;c--;)if(u.indexOf(t[c])>-1){l=c+1;break}return WW(()=>import("./index-C18jlTme-DjJJTT2G.js"),[]).then(f=>f.i).then(function(f){return Promise.resolve(f.get(t.slice(l,n)))}).catch(function(f){throw console.error(f),Error("You must install psl library (https://www.npmjs.com/package/psl) to use `tld` option")})}return t.slice(o,n)}function rG(t,e){if(e===void 0&&(e={}),typeof t=="string")return m4(t,e);if(Array.isArray(t)){for(var n=[],r=t.length,i=0;i<r;i++){var o=m4(t[i],e);n.push(o)}return n}(function(){throw new TypeError("The given URL is not a string. Please verify your string|array.")})()}const iG=["aaa","aarp","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mv","mw","mx","my","mz","na","nab","nagoya","name","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shell","shia","shiksha","shoes","shop","shopping","shouji","show","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermgensberater","vermgensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volvo","vote","voting","voto","voyage","vu","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function oG(t){const e=rG(t);if(e==="")return!0;const n=(e==null?void 0:e.toString().split("."))||[],r=n[n.length-1];return iG.includes(r)}const dc=(t,e)=>({index:t.index,replaceWith:t[2],text:t[0],match:t,data:e}),sG=/.(jpg|jpeg|gif|png|bmp|svg|webp)$/,aG=/.(webm|mp4|ogg|mov)$/;function lG(t,e,n){var r,i,o,s;const a=(s=(o=(i=(r=n==null?void 0:n[t])==null?void 0:r.m)==null?void 0:i.split)==null?void 0:o.call(i,"/"))==null?void 0:s[0];if(a==="image")return"image";if(a==="video")return"video";if(/youtube|youtu.be/.test(t))return"youtube";if(/^https?:\/\/(twitter|x)\.com\/(?:#!\/)?(\w+)\/status(es)?\/(\d+)/.test(t))return"tweet";try{const{pathname:l}=new URL(e);return sG.test(l)?"image":aG.test(l)?"video":"text"}catch(l){return console.log("url parser error",l),"text"}}const uG=/(lnbc[0-9a-z]{10,})/g,cG=Ri.create({name:"bolt11",group:"block",atom:!0,selectable:!0,draggable:!0,addAttributes(){return{lnbc:{default:null},bolt11:{default:null}}},addStorage(){return{markdown:{serialize(t,e){t.write(e.attrs.lnbc)},parse:{}}}},addCommands(){return{insertBolt11:({lnbc:t})=>({commands:e})=>{const n=p4.decode(t);return e.insertContent({type:this.name,attrs:{bolt11:n,lnbc:t}},{updateSelection:!1})}}},renderHTML(){return["div",{}]},renderText(t){return t.node.attrs.lnbc},addPasteRules(){return[Eh({type:this.type,getAttributes:t=>t.data,find:t=>{const e=[];for(const n of t.matchAll(uG)){const r=p4.decode(n[0]);e.push(dc(n,{bolt11:r,lnbc:n[0]}))}return e}})]}});async function fG(t){if(!t.hash)throw new Error("No hash function provided");if(!t.sign)throw new Error("No signer provided");const e=Date.now()/1e3,n=await t.hash(t.file),r=await t.sign({kind:24242,content:`Upload ${t.file.name}`,created_at:e,tags:[["t","upload"],["x",n],["expiration",(e+(t.expiration||6e4)).toString()]]});await new Promise(u=>setTimeout(()=>u(),1e3));const i=JSON.stringify(r),s=`Nostr ${btoa(i)}`,a=await fetch(t.serverUrl+"/upload",{method:"PUT",body:t.file,headers:{authorization:s}}),l=await a.json();if(a.status===200)return l;throw new Error(l.message)}function Ew(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function dG(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function RD(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function hG(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ew(t.outputLen),Ew(t.blockLen)}function pG(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function mG(t,e){RD(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const oo={number:Ew,bool:dG,bytes:RD,hash:hG,exists:pG,output:mG},bb=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const s3=t=>t instanceof Uint8Array,vb=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),qi=(t,e)=>t<<32-e|t>>>e,gG=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!gG)throw new Error("Non little-endian hardware is not supported");const yG=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ln(t){if(!s3(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=yG[t[n]];return e}function hc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function bG(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Vd(t){if(typeof t=="string"&&(t=bG(t)),!s3(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function hg(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!s3(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}let FD=class{clone(){return this._cloneInto()}};function LD(t){const e=r=>t().update(Vd(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function BD(t=32){if(bb&&typeof bb.getRandomValues=="function")return bb.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function vG(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),l=r?4:0,u=r?0:4;t.setUint32(e+l,s,r),t.setUint32(e+u,a,r)}let wG=class extends FD{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=vb(this.buffer)}update(e){oo.exists(this);const{view:n,buffer:r,blockLen:i}=this;e=Vd(e);const o=e.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const l=vb(e);for(;i<=o-s;s+=i)this.process(l,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){oo.exists(this),oo.output(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let f=s;f<i;f++)n[f]=0;vG(r,i-8,BigInt(this.length*8),o),this.process(r,0);const a=vb(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,c[f],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%n&&e.buffer.set(r),e}};const kG=(t,e,n)=>t&e^~t&n,xG=(t,e,n)=>t&e^t&n^e&n,EG=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ms=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),gs=new Uint32Array(64);let PD=class extends wG{constructor(){super(64,32,8,!1),this.A=ms[0]|0,this.B=ms[1]|0,this.C=ms[2]|0,this.D=ms[3]|0,this.E=ms[4]|0,this.F=ms[5]|0,this.G=ms[6]|0,this.H=ms[7]|0}get(){const{A:e,B:n,C:r,D:i,E:o,F:s,G:a,H:l}=this;return[e,n,r,i,o,s,a,l]}set(e,n,r,i,o,s,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=l|0}process(e,n){for(let f=0;f<16;f++,n+=4)gs[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const d=gs[f-15],h=gs[f-2],p=qi(d,7)^qi(d,18)^d>>>3,m=qi(h,17)^qi(h,19)^h>>>10;gs[f]=m+gs[f-7]+p+gs[f-16]|0}let{A:r,B:i,C:o,D:s,E:a,F:l,G:u,H:c}=this;for(let f=0;f<64;f++){const d=qi(a,6)^qi(a,11)^qi(a,25),h=c+d+kG(a,l,u)+EG[f]+gs[f]|0,m=(qi(r,2)^qi(r,13)^qi(r,22))+xG(r,i,o)|0;c=u,u=l,l=a,a=s+h|0,s=o,o=i,i=r,r=h+m|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,i,o,s,a,l,u,c)}roundClean(){gs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},SG=class extends PD{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Rc=LD(()=>new PD);LD(()=>new SG);function CG(t){return!(!t.api_url||t.delegated_to_url&&t.api_url)}async function _G(t){const e="/.well-known/nostr/nip96.json";let n="";try{const{origin:r}=new URL(t);n=r+e}catch{throw new Error("Invalid URL")}try{const r=await fetch(n);if(!r.ok)throw new Error(`Error fetching ${n}: ${r.statusText}`);const i=await r.json();if(!i)throw new Error("No data");if(!CG(i))throw new Error("Invalid configuration data");return i}catch{throw new Error("Error fetching.")}}function AG(t){if(typeof t!="object"||t===null||!t.status||!t.message||t.status!=="success"&&t.status!=="error"&&t.status!=="processing"||typeof t.message!="string"||t.status==="processing"&&!t.processing_url||t.processing_url&&typeof t.processing_url!="string"||t.status==="success"&&!t.nip94_event)return!1;if(t.nip94_event){if(!t.nip94_event.tags||!Array.isArray(t.nip94_event.tags)||t.nip94_event.tags.length===0)return!1;for(const e of t.nip94_event.tags)if(!Array.isArray(e)||e.length!==2||typeof e[0]!="string"||typeof e[1]!="string")return!1;if(!t.nip94_event.tags.find(e=>e[0]==="url")||!t.nip94_event.tags.find(e=>e[0]==="ox"))return!1}return!0}async function TG(t,e,n,r){const i=new FormData;r&&Object.entries(r).forEach(([s,a])=>{a&&i.append(s,a)}),i.append("file",t);const o=await fetch(e,{method:"POST",headers:{Authorization:n},body:i});if(o.ok===!1)throw o.status===413?new Error("File too large!"):o.status===400?new Error("Bad request! Some fields are missing or invalid!"):o.status===403?new Error("Forbidden! Payload tag does not match the requested file!"):o.status===402?new Error("Payment required!"):new Error("Unknown error in uploading file!");try{const s=await o.json();if(!AG(s))throw new Error("Invalid response from the server!");return s}catch{throw new Error("Error parsing JSON response!")}}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Fc(t){if(!Number.isSafeInteger(t))throw new Error(`Wrong integer: ${t}`)}function ss(...t){const e=(i,o)=>s=>i(o(s)),n=Array.from(t).reverse().reduce((i,o)=>i?e(i,o.encode):o.encode,void 0),r=t.reduce((i,o)=>i?e(i,o.decode):o.decode,void 0);return{encode:n,decode:r}}function as(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(n=>{if(Fc(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]})},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r})}}}function ls(t=""){if(typeof t!="string")throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of e)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return e.join(t)},decode:e=>{if(typeof e!="string")throw new Error("join.decode input should be string");return e.split(t)}}}function pg(t,e="="){if(Fc(t),typeof e!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*t%8;)n.push(e);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of n)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let r=n.length;if(r*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if(!((r-1)*t%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function zD(t){if(typeof t!="function")throw new Error("normalize fn should be function");return{encode:e=>e,decode:e=>t(e)}}function g4(t,e,n){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(t))throw new Error("convertRadix: data should be array");if(!t.length)return[];let r=0;const i=[],o=Array.from(t);for(o.forEach(s=>{if(Fc(s),s<0||s>=e)throw new Error(`Wrong integer: ${s}`)});;){let s=0,a=!0;for(let l=r;l<o.length;l++){const u=o[l],c=e*s+u;if(!Number.isSafeInteger(c)||e*s/e!==s||c-u!==e*s)throw new Error("convertRadix: carry overflow");if(s=c%n,o[l]=Math.floor(c/n),!Number.isSafeInteger(o[l])||o[l]*n+s!==c)throw new Error("convertRadix: carry overflow");if(a)o[l]?a=!1:r=l;else continue}if(i.push(s),a)break}for(let s=0;s<t.length-1&&t[s]===0;s++)i.push(0);return i.reverse()}const jD=(t,e)=>e?jD(e,t%e):t,Em=(t,e)=>t+(e-jD(t,e));function Sw(t,e,n,r){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Em(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Em(e,n)}`);let i=0,o=0;const s=2**n-1,a=[];for(const l of t){if(Fc(l),l>=2**e)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(i=i<<e|l,o+e>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${e}`);for(o+=e;o>=n;o-=n)a.push((i>>o-n&s)>>>0);i&=2**o-1}if(i=i<<n-o&s,!r&&o>=e)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&o>0&&a.push(i>>>0),a}function MG(t){return Fc(t),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return g4(Array.from(e),2**8,t)},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(g4(e,t,2**8))}}}function Aa(t,e=!1){if(Fc(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Em(8,t)>32||Em(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Sw(Array.from(n),8,t,!e)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Sw(n,t,8,e))}}}function y4(t){if(typeof t!="function")throw new Error("unsafeWrapper fn should be function");return function(...e){try{return t.apply(null,e)}catch{}}}const OG=ss(Aa(4),as("0123456789ABCDEF"),ls("")),DG=ss(Aa(5),as("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),pg(5),ls(""));ss(Aa(5),as("0123456789ABCDEFGHIJKLMNOPQRSTUV"),pg(5),ls(""));ss(Aa(5),as("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),ls(""),zD(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const ko=ss(Aa(6),as("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),pg(6),ls("")),NG=ss(Aa(6),as("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),pg(6),ls("")),a3=t=>ss(MG(58),as(t),ls("")),Cw=a3("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");a3("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");a3("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const b4=[0,2,3,5,6,7,9,10,11],$G={encode(t){let e="";for(let n=0;n<t.length;n+=8){const r=t.subarray(n,n+8);e+=Cw.encode(r).padStart(b4[r.length],"1")}return e},decode(t){let e=[];for(let n=0;n<t.length;n+=11){const r=t.slice(n,n+11),i=b4.indexOf(r.length),o=Cw.decode(r);for(let s=0;s<o.length-i;s++)if(o[s]!==0)throw new Error("base58xmr: wrong padding");e=e.concat(Array.from(o.slice(o.length-i)))}return Uint8Array.from(e)}},_w=ss(as("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),ls("")),v4=[996825010,642813549,513874426,1027748829,705979059];function uf(t){const e=t>>25;let n=(t&33554431)<<5;for(let r=0;r<v4.length;r++)(e>>r&1)===1&&(n^=v4[r]);return n}function w4(t,e,n=1){const r=t.length;let i=1;for(let o=0;o<r;o++){const s=t.charCodeAt(o);if(s<33||s>126)throw new Error(`Invalid prefix (${t})`);i=uf(i)^s>>5}i=uf(i);for(let o=0;o<r;o++)i=uf(i)^t.charCodeAt(o)&31;for(let o of e)i=uf(i)^o;for(let o=0;o<6;o++)i=uf(i);return i^=n,_w.encode(Sw([i%2**30],30,5,!1))}function qD(t){const e=t==="bech32"?1:734539939,n=Aa(5),r=n.decode,i=n.encode,o=y4(r);function s(c,f,d=90){if(typeof c!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof c}`);if(!Array.isArray(f)||f.length&&typeof f[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof f}`);const h=c.length+7+f.length;if(d!==!1&&h>d)throw new TypeError(`Length ${h} exceeds limit ${d}`);return c=c.toLowerCase(),`${c}1${_w.encode(f)}${w4(c,f,e)}`}function a(c,f=90){if(typeof c!="string")throw new Error(`bech32.decode input should be string, not ${typeof c}`);if(c.length<8||f!==!1&&c.length>f)throw new TypeError(`Wrong string length: ${c.length} (${c}). Expected (8..${f})`);const d=c.toLowerCase();if(c!==d&&c!==c.toUpperCase())throw new Error("String must be lowercase or uppercase");c=d;const h=c.lastIndexOf("1");if(h===0||h===-1)throw new Error('Letter "1" must be present between prefix and data only');const p=c.slice(0,h),m=c.slice(h+1);if(m.length<6)throw new Error("Data must be at least 6 characters long");const b=_w.decode(m).slice(0,-6),y=w4(p,b,e);if(!m.endsWith(y))throw new Error(`Invalid checksum in ${c}: expected "${y}"`);return{prefix:p,words:b}}const l=y4(a);function u(c){const{prefix:f,words:d}=a(c,!1);return{prefix:f,words:d,bytes:r(d)}}return{encode:s,decode:a,decodeToBytes:u,decodeUnsafe:l,fromWords:r,fromWordsUnsafe:o,toWords:i}}const pc=qD("bech32");qD("bech32m");const IG={encode:t=>new TextDecoder().decode(t),decode:t=>new TextEncoder().encode(t)},RG=ss(Aa(4),as("0123456789abcdef"),ls(""),zD(t=>{if(typeof t!="string"||t.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()})),FG={utf8:IG,hex:RG,base16:OG,base32:DG,base64:ko,base64url:NG,base58:Cw,base58xmr:$G};`${Object.keys(FG).join(", ")}`;function k4(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function VD(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function LG(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");k4(t.outputLen),k4(t.blockLen)}function Sm(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function BG(t,e){VD(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const wb=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const UD=t=>t instanceof Uint8Array,kb=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Vi=(t,e)=>t<<32-e|t>>>e,PG=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!PG)throw new Error("Non little-endian hardware is not supported");function zG(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function l3(t){if(typeof t=="string"&&(t=zG(t)),!UD(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function jG(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!UD(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class HD{clone(){return this._cloneInto()}}function qG(t){const e=r=>t().update(l3(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function WD(t=32){if(wb&&typeof wb.getRandomValues=="function")return wb.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function VG(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),l=r?4:0,u=r?0:4;t.setUint32(e+l,s,r),t.setUint32(e+u,a,r)}class UG extends HD{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=kb(this.buffer)}update(e){Sm(this);const{view:n,buffer:r,blockLen:i}=this;e=l3(e);const o=e.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const l=kb(e);for(;i<=o-s;s+=i)this.process(l,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Sm(this),BG(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let f=s;f<i;f++)n[f]=0;VG(r,i-8,BigInt(this.length*8),o),this.process(r,0);const a=kb(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,c[f],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%n&&e.buffer.set(r),e}}const HG=(t,e,n)=>t&e^~t&n,WG=(t,e,n)=>t&e^t&n^e&n,JG=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ys=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),bs=new Uint32Array(64);class KG extends UG{constructor(){super(64,32,8,!1),this.A=ys[0]|0,this.B=ys[1]|0,this.C=ys[2]|0,this.D=ys[3]|0,this.E=ys[4]|0,this.F=ys[5]|0,this.G=ys[6]|0,this.H=ys[7]|0}get(){const{A:e,B:n,C:r,D:i,E:o,F:s,G:a,H:l}=this;return[e,n,r,i,o,s,a,l]}set(e,n,r,i,o,s,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=l|0}process(e,n){for(let f=0;f<16;f++,n+=4)bs[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const d=bs[f-15],h=bs[f-2],p=Vi(d,7)^Vi(d,18)^d>>>3,m=Vi(h,17)^Vi(h,19)^h>>>10;bs[f]=m+bs[f-7]+p+bs[f-16]|0}let{A:r,B:i,C:o,D:s,E:a,F:l,G:u,H:c}=this;for(let f=0;f<64;f++){const d=Vi(a,6)^Vi(a,11)^Vi(a,25),h=c+d+HG(a,l,u)+JG[f]+bs[f]|0,m=(Vi(r,2)^Vi(r,13)^Vi(r,22))+WG(r,i,o)|0;c=u,u=l,l=a,a=s+h|0,s=o,o=i,i=r,r=h+m|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,i,o,s,a,l,u,c)}roundClean(){bs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Aw=qG(()=>new KG);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const JD=BigInt(0),mg=BigInt(1),ZG=BigInt(2),gg=t=>t instanceof Uint8Array,GG=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function mc(t){if(!gg(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=GG[t[n]];return e}function KD(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function u3(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function gc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function Er(t){return u3(mc(t))}function c3(t){if(!gg(t))throw new Error("Uint8Array expected");return u3(mc(Uint8Array.from(t).reverse()))}function ha(t,e){return gc(t.toString(16).padStart(e*2,"0"))}function f3(t,e){return ha(t,e).reverse()}function YG(t){return gc(KD(t))}function Bn(t,e,n){let r;if(typeof e=="string")try{r=gc(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else if(gg(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Dl(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!gg(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function QG(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function XG(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function eY(t){let e;for(e=0;t>JD;t>>=mg,e+=1);return e}function tY(t,e){return t>>BigInt(e)&mg}const nY=(t,e,n)=>t|(n?mg:JD)<<BigInt(e),d3=t=>(ZG<<BigInt(t-1))-mg,xb=t=>new Uint8Array(t),x4=t=>Uint8Array.from(t);function ZD(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=xb(t),i=xb(t),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...f)=>n(i,r,...f),l=(f=xb())=>{i=a(x4([0]),f),r=a(),f.length!==0&&(i=a(x4([1]),f),r=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<e;){r=a();const h=r.slice();d.push(h),f+=r.length}return Dl(...d)};return(f,d)=>{s(),l(f);let h;for(;!(h=d(u()));)l();return s(),h}}const rY={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Sh(t,e,n={}){const r=(i,o,s)=>{const a=rY[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);const l=t[i];if(!(s&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${o}`)};for(const[i,o]of Object.entries(e))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return t}const iY=Object.freeze(Object.defineProperty({__proto__:null,bitGet:tY,bitLen:eY,bitMask:d3,bitSet:nY,bytesToHex:mc,bytesToNumberBE:Er,bytesToNumberLE:c3,concatBytes:Dl,createHmacDrbg:ZD,ensureBytes:Bn,equalBytes:QG,hexToBytes:gc,hexToNumber:u3,numberToBytesBE:ha,numberToBytesLE:f3,numberToHexUnpadded:KD,numberToVarBytesBE:YG,utf8ToBytes:XG,validateObject:Sh},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dn=BigInt(0),qt=BigInt(1),Va=BigInt(2),oY=BigInt(3),Tw=BigInt(4),E4=BigInt(5),S4=BigInt(8);BigInt(9);BigInt(16);function _n(t,e){const n=t%e;return n>=dn?n:e+n}function sY(t,e,n){if(n<=dn||e<dn)throw new Error("Expected power/modulo > 0");if(n===qt)return dn;let r=qt;for(;e>dn;)e&qt&&(r=r*t%n),t=t*t%n,e>>=qt;return r}function Gr(t,e,n){let r=t;for(;e-- >dn;)r*=r,r%=n;return r}function Mw(t,e){if(t===dn||e<=dn)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=_n(t,e),r=e,i=dn,o=qt;for(;n!==dn;){const a=r/n,l=r%n,u=i-o*a;r=n,n=l,i=o,o=u}if(r!==qt)throw new Error("invert: does not exist");return _n(i,e)}function aY(t){const e=(t-qt)/Va;let n,r,i;for(n=t-qt,r=0;n%Va===dn;n/=Va,r++);for(i=Va;i<t&&sY(i,e,t)!==t-qt;i++);if(r===1){const s=(t+qt)/Tw;return function(l,u){const c=l.pow(u,s);if(!l.eql(l.sqr(c),u))throw new Error("Cannot find square root");return c}}const o=(n+qt)/Va;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,c=a.pow(a.mul(a.ONE,i),n),f=a.pow(l,o),d=a.pow(l,n);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let h=1;for(let m=a.sqr(d);h<u&&!a.eql(m,a.ONE);h++)m=a.sqr(m);const p=a.pow(c,qt<<BigInt(u-h-1));c=a.sqr(p),f=a.mul(f,p),d=a.mul(d,c),u=h}return f}}function lY(t){if(t%Tw===oY){const e=(t+qt)/Tw;return function(r,i){const o=r.pow(i,e);if(!r.eql(r.sqr(o),i))throw new Error("Cannot find square root");return o}}if(t%S4===E4){const e=(t-E4)/S4;return function(r,i){const o=r.mul(i,Va),s=r.pow(o,e),a=r.mul(i,s),l=r.mul(r.mul(a,Va),s),u=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(u),i))throw new Error("Cannot find square root");return u}}return aY(t)}const uY=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function cY(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=uY.reduce((r,i)=>(r[i]="function",r),e);return Sh(t,n)}function fY(t,e,n){if(n<dn)throw new Error("Expected power > 0");if(n===dn)return t.ONE;if(n===qt)return e;let r=t.ONE,i=e;for(;n>dn;)n&qt&&(r=t.mul(r,i)),i=t.sqr(i),n>>=qt;return r}function dY(t,e){const n=new Array(e.length),r=e.reduce((o,s,a)=>t.is0(s)?o:(n[a]=o,t.mul(o,s)),t.ONE),i=t.inv(r);return e.reduceRight((o,s,a)=>t.is0(s)?o:(n[a]=t.mul(o,n[a]),t.mul(o,s)),i),n}function GD(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function hY(t,e,n=!1,r={}){if(t<=dn)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=GD(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=lY(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:d3(i),ZERO:dn,ONE:qt,create:l=>_n(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return dn<=l&&l<t},is0:l=>l===dn,isOdd:l=>(l&qt)===qt,neg:l=>_n(-l,t),eql:(l,u)=>l===u,sqr:l=>_n(l*l,t),add:(l,u)=>_n(l+u,t),sub:(l,u)=>_n(l-u,t),mul:(l,u)=>_n(l*u,t),pow:(l,u)=>fY(a,l,u),div:(l,u)=>_n(l*Mw(u,t),t),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>Mw(l,t),sqrt:r.sqrt||(l=>s(a,l)),invertBatch:l=>dY(a,l),cmov:(l,u,c)=>c?u:l,toBytes:l=>n?f3(l,o):ha(l,o),fromBytes:l=>{if(l.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${l.length}`);return n?c3(l):Er(l)}});return Object.freeze(a)}function YD(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function QD(t){const e=YD(t);return e+Math.ceil(e/2)}function pY(t,e,n=!1){const r=t.length,i=YD(e),o=QD(e);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const s=n?Er(t):c3(t),a=_n(s,e-qt)+qt;return n?f3(a,i):ha(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mY=BigInt(0),Eb=BigInt(1);function gY(t,e){const n=(i,o)=>{const s=o.negate();return i?s:o},r=i=>{const o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:n,unsafeLadder(i,o){let s=t.ZERO,a=i;for(;o>mY;)o&Eb&&(s=s.add(a)),a=a.double(),o>>=Eb;return s},precomputeWindow(i,o){const{windows:s,windowSize:a}=r(o),l=[];let u=i,c=u;for(let f=0;f<s;f++){c=u,l.push(c);for(let d=1;d<a;d++)c=c.add(u),l.push(c);u=c.double()}return l},wNAF(i,o,s){const{windows:a,windowSize:l}=r(i);let u=t.ZERO,c=t.BASE;const f=BigInt(2**i-1),d=2**i,h=BigInt(i);for(let p=0;p<a;p++){const m=p*l;let b=Number(s&f);s>>=h,b>l&&(b-=d,s+=Eb);const y=m,v=m+Math.abs(b)-1,w=p%2!==0,g=b<0;b===0?c=c.add(n(w,o[y])):u=u.add(n(g,o[v]))}return{p:u,f:c}},wNAFCached(i,o,s,a){const l=i._WINDOW_SIZE||1;let u=o.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&o.set(i,a(u))),this.wNAF(l,u,s)}}}function XD(t){return cY(t.Fp),Sh(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...GD(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yY(t){const e=XD(t);Sh(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:bY,hexToBytes:vY}=iY,Qa={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Qa;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:bY(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Qa,n=typeof t=="string"?vY(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=Qa._parseInt(n.subarray(2)),{d:s,l:a}=Qa._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){const e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,n=u=>{const c=u.toString(16);return c.length&1?`0${c}`:c},r=e(n(t.s)),i=e(n(t.r)),o=r.length/2,s=i.length/2,a=n(o),l=n(s);return`30${n(s+o+4)}02${l}${i}02${a}${r}`}},Lo=BigInt(0),ti=BigInt(1);BigInt(2);const C4=BigInt(3);BigInt(4);function wY(t){const e=yY(t),{Fp:n}=e,r=e.toBytes||((p,m,b)=>{const y=m.toAffine();return Dl(Uint8Array.from([4]),n.toBytes(y.x),n.toBytes(y.y))}),i=e.fromBytes||(p=>{const m=p.subarray(1),b=n.fromBytes(m.subarray(0,n.BYTES)),y=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:b,y}});function o(p){const{a:m,b}=e,y=n.sqr(p),v=n.mul(y,p);return n.add(n.add(v,n.mul(p,m)),b)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(p){return typeof p=="bigint"&&Lo<p&&p<e.n}function a(p){if(!s(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(p){const{allowedPrivateKeyLengths:m,nByteLength:b,wrapPrivateKey:y,n:v}=e;if(m&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=mc(p)),typeof p!="string"||!m.includes(p.length))throw new Error("Invalid key");p=p.padStart(b*2,"0")}let w;try{w=typeof p=="bigint"?p:Er(Bn("private key",p,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof p}`)}return y&&(w=_n(w,v)),a(w),w}const u=new Map;function c(p){if(!(p instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(m,b,y){if(this.px=m,this.py=b,this.pz=y,m==null||!n.isValid(m))throw new Error("x required");if(b==null||!n.isValid(b))throw new Error("y required");if(y==null||!n.isValid(y))throw new Error("z required")}static fromAffine(m){const{x:b,y}=m||{};if(!m||!n.isValid(b)||!n.isValid(y))throw new Error("invalid affine point");if(m instanceof f)throw new Error("projective point not allowed");const v=w=>n.eql(w,n.ZERO);return v(b)&&v(y)?f.ZERO:new f(b,y,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const b=n.invertBatch(m.map(y=>y.pz));return m.map((y,v)=>y.toAffine(b[v])).map(f.fromAffine)}static fromHex(m){const b=f.fromAffine(i(Bn("pointHex",m)));return b.assertValidity(),b}static fromPrivateKey(m){return f.BASE.multiply(l(m))}_setWindowSize(m){this._WINDOW_SIZE=m,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y:b}=this.toAffine();if(!n.isValid(m)||!n.isValid(b))throw new Error("bad point: x or y not FE");const y=n.sqr(b),v=o(m);if(!n.eql(y,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){c(m);const{px:b,py:y,pz:v}=this,{px:w,py:g,pz:x}=m,k=n.eql(n.mul(b,x),n.mul(w,v)),E=n.eql(n.mul(y,x),n.mul(g,v));return k&&E}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b}=e,y=n.mul(b,C4),{px:v,py:w,pz:g}=this;let x=n.ZERO,k=n.ZERO,E=n.ZERO,D=n.mul(v,v),O=n.mul(w,w),N=n.mul(g,g),C=n.mul(v,w);return C=n.add(C,C),E=n.mul(v,g),E=n.add(E,E),x=n.mul(m,E),k=n.mul(y,N),k=n.add(x,k),x=n.sub(O,k),k=n.add(O,k),k=n.mul(x,k),x=n.mul(C,x),E=n.mul(y,E),N=n.mul(m,N),C=n.sub(D,N),C=n.mul(m,C),C=n.add(C,E),E=n.add(D,D),D=n.add(E,D),D=n.add(D,N),D=n.mul(D,C),k=n.add(k,D),N=n.mul(w,g),N=n.add(N,N),D=n.mul(N,C),x=n.sub(x,D),E=n.mul(N,O),E=n.add(E,E),E=n.add(E,E),new f(x,k,E)}add(m){c(m);const{px:b,py:y,pz:v}=this,{px:w,py:g,pz:x}=m;let k=n.ZERO,E=n.ZERO,D=n.ZERO;const O=e.a,N=n.mul(e.b,C4);let C=n.mul(b,w),R=n.mul(y,g),T=n.mul(v,x),q=n.add(b,y),A=n.add(w,g);q=n.mul(q,A),A=n.add(C,R),q=n.sub(q,A),A=n.add(b,v);let S=n.add(w,x);return A=n.mul(A,S),S=n.add(C,T),A=n.sub(A,S),S=n.add(y,v),k=n.add(g,x),S=n.mul(S,k),k=n.add(R,T),S=n.sub(S,k),D=n.mul(O,A),k=n.mul(N,T),D=n.add(k,D),k=n.sub(R,D),D=n.add(R,D),E=n.mul(k,D),R=n.add(C,C),R=n.add(R,C),T=n.mul(O,T),A=n.mul(N,A),R=n.add(R,T),T=n.sub(C,T),T=n.mul(O,T),A=n.add(A,T),C=n.mul(R,A),E=n.add(E,C),C=n.mul(S,A),k=n.mul(q,k),k=n.sub(k,C),C=n.mul(q,R),D=n.mul(S,D),D=n.add(D,C),new f(k,E,D)}subtract(m){return this.add(m.negate())}is0(){return this.equals(f.ZERO)}wNAF(m){return h.wNAFCached(this,u,m,b=>{const y=n.invertBatch(b.map(v=>v.pz));return b.map((v,w)=>v.toAffine(y[w])).map(f.fromAffine)})}multiplyUnsafe(m){const b=f.ZERO;if(m===Lo)return b;if(a(m),m===ti)return this;const{endo:y}=e;if(!y)return h.unsafeLadder(this,m);let{k1neg:v,k1:w,k2neg:g,k2:x}=y.splitScalar(m),k=b,E=b,D=this;for(;w>Lo||x>Lo;)w&ti&&(k=k.add(D)),x&ti&&(E=E.add(D)),D=D.double(),w>>=ti,x>>=ti;return v&&(k=k.negate()),g&&(E=E.negate()),E=new f(n.mul(E.px,y.beta),E.py,E.pz),k.add(E)}multiply(m){a(m);let b=m,y,v;const{endo:w}=e;if(w){const{k1neg:g,k1:x,k2neg:k,k2:E}=w.splitScalar(b);let{p:D,f:O}=this.wNAF(x),{p:N,f:C}=this.wNAF(E);D=h.constTimeNegate(g,D),N=h.constTimeNegate(k,N),N=new f(n.mul(N.px,w.beta),N.py,N.pz),y=D.add(N),v=O.add(C)}else{const{p:g,f:x}=this.wNAF(b);y=g,v=x}return f.normalizeZ([y,v])[0]}multiplyAndAddUnsafe(m,b,y){const v=f.BASE,w=(x,k)=>k===Lo||k===ti||!x.equals(v)?x.multiplyUnsafe(k):x.multiply(k),g=w(this,b).add(w(m,y));return g.is0()?void 0:g}toAffine(m){const{px:b,py:y,pz:v}=this,w=this.is0();m==null&&(m=w?n.ONE:n.inv(v));const g=n.mul(b,m),x=n.mul(y,m),k=n.mul(v,m);if(w)return{x:n.ZERO,y:n.ZERO};if(!n.eql(k,n.ONE))throw new Error("invZ was invalid");return{x:g,y:x}}isTorsionFree(){const{h:m,isTorsionFree:b}=e;if(m===ti)return!0;if(b)return b(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:b}=e;return m===ti?this:b?b(f,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return this.assertValidity(),r(f,this,m)}toHex(m=!0){return mc(this.toRawBytes(m))}}f.BASE=new f(e.Gx,e.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const d=e.nBitLength,h=gY(f,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:s}}function kY(t){const e=XD(t);return Sh(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function xY(t){const e=kY(t),{Fp:n,n:r}=e,i=n.BYTES+1,o=2*n.BYTES+1;function s(A){return Lo<A&&A<n.ORDER}function a(A){return _n(A,r)}function l(A){return Mw(A,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:f,isWithinCurveOrder:d}=wY({...e,toBytes(A,S,P){const B=S.toAffine(),j=n.toBytes(B.x),z=Dl;return P?z(Uint8Array.from([S.hasEvenY()?2:3]),j):z(Uint8Array.from([4]),j,n.toBytes(B.y))},fromBytes(A){const S=A.length,P=A[0],B=A.subarray(1);if(S===i&&(P===2||P===3)){const j=Er(B);if(!s(j))throw new Error("Point is not on curve");const z=f(j);let J=n.sqrt(z);const K=(J&ti)===ti;return(P&1)===1!==K&&(J=n.neg(J)),{x:j,y:J}}else if(S===o&&P===4){const j=n.fromBytes(B.subarray(0,n.BYTES)),z=n.fromBytes(B.subarray(n.BYTES,2*n.BYTES));return{x:j,y:z}}else throw new Error(`Point of length ${S} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),h=A=>mc(ha(A,e.nByteLength));function p(A){const S=r>>ti;return A>S}function m(A){return p(A)?a(-A):A}const b=(A,S,P)=>Er(A.slice(S,P));class y{constructor(S,P,B){this.r=S,this.s=P,this.recovery=B,this.assertValidity()}static fromCompact(S){const P=e.nByteLength;return S=Bn("compactSignature",S,P*2),new y(b(S,0,P),b(S,P,2*P))}static fromDER(S){const{r:P,s:B}=Qa.toSig(Bn("DER",S));return new y(P,B)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new y(this.r,this.s,S)}recoverPublicKey(S){const{r:P,s:B,recovery:j}=this,z=E(Bn("msgHash",S));if(j==null||![0,1,2,3].includes(j))throw new Error("recovery id invalid");const J=j===2||j===3?P+e.n:P;if(J>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const K=j&1?"03":"02",ae=u.fromHex(K+h(J)),fe=l(J),ke=a(-z*fe),ve=a(B*fe),xe=u.BASE.multiplyAndAddUnsafe(ae,ke,ve);if(!xe)throw new Error("point at infinify");return xe.assertValidity(),xe}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return gc(this.toDERHex())}toDERHex(){return Qa.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return gc(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const v={isValidPrivateKey(A){try{return c(A),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const A=QD(e.n);return pY(e.randomBytes(A),e.n)},precompute(A=8,S=u.BASE){return S._setWindowSize(A),S.multiply(BigInt(3)),S}};function w(A,S=!0){return u.fromPrivateKey(A).toRawBytes(S)}function g(A){const S=A instanceof Uint8Array,P=typeof A=="string",B=(S||P)&&A.length;return S?B===i||B===o:P?B===2*i||B===2*o:A instanceof u}function x(A,S,P=!0){if(g(A))throw new Error("first arg must be private key");if(!g(S))throw new Error("second arg must be public key");return u.fromHex(S).multiply(c(A)).toRawBytes(P)}const k=e.bits2int||function(A){const S=Er(A),P=A.length*8-e.nBitLength;return P>0?S>>BigInt(P):S},E=e.bits2int_modN||function(A){return a(k(A))},D=d3(e.nBitLength);function O(A){if(typeof A!="bigint")throw new Error("bigint expected");if(!(Lo<=A&&A<D))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ha(A,e.nByteLength)}function N(A,S,P=C){if(["recovered","canonical"].some(Oe=>Oe in P))throw new Error("sign() legacy options not supported");const{hash:B,randomBytes:j}=e;let{lowS:z,prehash:J,extraEntropy:K}=P;z==null&&(z=!0),A=Bn("msgHash",A),J&&(A=Bn("prehashed msgHash",B(A)));const ae=E(A),fe=c(S),ke=[O(fe),O(ae)];if(K!=null){const Oe=K===!0?j(n.BYTES):K;ke.push(Bn("extraEntropy",Oe))}const ve=Dl(...ke),xe=ae;function Se(Oe){const Fe=k(Oe);if(!d(Fe))return;const mt=l(Fe),Ce=u.BASE.multiply(Fe).toAffine(),pe=a(Ce.x);if(pe===Lo)return;const De=a(mt*a(xe+pe*fe));if(De===Lo)return;let Le=(Ce.x===pe?0:2)|Number(Ce.y&ti),Ze=De;return z&&p(De)&&(Ze=m(De),Le^=1),new y(pe,Ze,Le)}return{seed:ve,k2sig:Se}}const C={lowS:e.lowS,prehash:!1},R={lowS:e.lowS,prehash:!1};function T(A,S,P=C){const{seed:B,k2sig:j}=N(A,S,P),z=e;return ZD(z.hash.outputLen,z.nByteLength,z.hmac)(B,j)}u.BASE._setWindowSize(8);function q(A,S,P,B=R){var j;const z=A;if(S=Bn("msgHash",S),P=Bn("publicKey",P),"strict"in B)throw new Error("options.strict was renamed to lowS");const{lowS:J,prehash:K}=B;let ae,fe;try{if(typeof z=="string"||z instanceof Uint8Array)try{ae=y.fromDER(z)}catch(pe){if(!(pe instanceof Qa.Err))throw pe;ae=y.fromCompact(z)}else if(typeof z=="object"&&typeof z.r=="bigint"&&typeof z.s=="bigint"){const{r:pe,s:De}=z;ae=new y(pe,De)}else throw new Error("PARSE");fe=u.fromHex(P)}catch(pe){if(pe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(J&&ae.hasHighS())return!1;K&&(S=e.hash(S));const{r:ke,s:ve}=ae,xe=E(S),Se=l(ve),Oe=a(xe*Se),Fe=a(ke*Se),mt=(j=u.BASE.multiplyAndAddUnsafe(fe,Oe,Fe))==null?void 0:j.toAffine();return mt?a(mt.x)===ke:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:x,sign:T,verify:q,ProjectivePoint:u,Signature:y,utils:v}}let eN=class extends HD{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,LG(e);const r=l3(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return Sm(this),this.iHash.update(e),this}digestInto(e){Sm(this),VD(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const tN=(t,e,n)=>new eN(t,e).update(n).digest();tN.create=(t,e)=>new eN(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function EY(t){return{hash:t,hmac:(e,...n)=>tN(t,e,jG(...n)),randomBytes:WD}}function SY(t,e){const n=r=>xY({...t,...EY(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yg=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Cm=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),nN=BigInt(1),_m=BigInt(2),_4=(t,e)=>(t+e/_m)/e;function rN(t){const e=yg,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),u=t*t*t%e,c=u*u*t%e,f=Gr(c,n,e)*c%e,d=Gr(f,n,e)*c%e,h=Gr(d,_m,e)*u%e,p=Gr(h,i,e)*h%e,m=Gr(p,o,e)*p%e,b=Gr(m,a,e)*m%e,y=Gr(b,l,e)*b%e,v=Gr(y,a,e)*m%e,w=Gr(v,n,e)*c%e,g=Gr(w,s,e)*p%e,x=Gr(g,r,e)*u%e,k=Gr(x,_m,e);if(!Ow.eql(Ow.sqr(k),t))throw new Error("Cannot find square root");return k}const Ow=hY(yg,void 0,void 0,{sqrt:rN}),Lc=SY({a:BigInt(0),b:BigInt(7),Fp:Ow,n:Cm,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Cm,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-nN*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=_4(o*t,e),l=_4(-r*t,e);let u=_n(t-a*n-l*i,e),c=_n(-a*r-l*o,e);const f=u>s,d=c>s;if(f&&(u=e-u),d&&(c=e-c),u>s||c>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:u,k2neg:d,k2:c}}}},Aw),bg=BigInt(0),iN=t=>typeof t=="bigint"&&bg<t&&t<yg,CY=t=>typeof t=="bigint"&&bg<t&&t<Cm,A4={};function Am(t,...e){let n=A4[t];if(n===void 0){const r=Aw(Uint8Array.from(t,i=>i.charCodeAt(0)));n=Dl(r,r),A4[t]=n}return Aw(Dl(n,...e))}const h3=t=>t.toRawBytes(!0).slice(1),Dw=t=>ha(t,32),Sb=t=>_n(t,yg),Ud=t=>_n(t,Cm),p3=Lc.ProjectivePoint,_Y=(t,e,n)=>p3.BASE.multiplyAndAddUnsafe(t,e,n);function Nw(t){let e=Lc.utils.normPrivateKeyToScalar(t),n=p3.fromPrivateKey(e);return{scalar:n.hasEvenY()?e:Ud(-e),bytes:h3(n)}}function oN(t){if(!iN(t))throw new Error("bad x: need 0 < x < p");const e=Sb(t*t),n=Sb(e*t+BigInt(7));let r=rN(n);r%_m!==bg&&(r=Sb(-r));const i=new p3(t,r,nN);return i.assertValidity(),i}function sN(...t){return Ud(Er(Am("BIP0340/challenge",...t)))}function AY(t){return Nw(t).bytes}function TY(t,e,n=WD(32)){const r=Bn("message",t),{bytes:i,scalar:o}=Nw(e),s=Bn("auxRand",n,32),a=Dw(o^Er(Am("BIP0340/aux",s))),l=Am("BIP0340/nonce",a,i,r),u=Ud(Er(l));if(u===bg)throw new Error("sign failed: k is zero");const{bytes:c,scalar:f}=Nw(u),d=sN(c,i,r),h=new Uint8Array(64);if(h.set(c,0),h.set(Dw(Ud(f+d*o)),32),!aN(h,r,i))throw new Error("sign: Invalid signature produced");return h}function aN(t,e,n){const r=Bn("signature",t,64),i=Bn("message",e),o=Bn("publicKey",n,32);try{const s=oN(Er(o)),a=Er(r.subarray(0,32));if(!iN(a))return!1;const l=Er(r.subarray(32,64));if(!CY(l))return!1;const u=sN(Dw(a),h3(s),i),c=_Y(s,l,Ud(-u));return!(!c||!c.hasEvenY()||c.toAffine().x!==a)}catch{return!1}}const eo={getPublicKey:AY,sign:TY,verify:aN,utils:{randomPrivateKey:Lc.utils.randomPrivateKey,lift_x:oN,pointToBytes:h3,numberToBytesBE:ha,bytesToNumberBE:Er,taggedHash:Am,mod:_n}};var MY=27235,Zl=Symbol("verified"),OY=t=>t instanceof Object;function DY(t){if(!OY(t)||typeof t.kind!="number"||typeof t.content!="string"||typeof t.created_at!="number"||typeof t.pubkey!="string"||!t.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(t.tags))return!1;for(let e=0;e<t.tags.length;e++){let n=t.tags[e];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var lN=new TextEncoder,NY=class{generateSecretKey(){return eo.utils.randomPrivateKey()}getPublicKey(e){return ln(eo.getPublicKey(e))}finalizeEvent(e,n){const r=e;return r.pubkey=ln(eo.getPublicKey(n)),r.id=Cb(r),r.sig=ln(eo.sign(Cb(r),n)),r[Zl]=!0,r}verifyEvent(e){if(typeof e[Zl]=="boolean")return e[Zl];const n=Cb(e);if(n!==e.id)return e[Zl]=!1,!1;try{const r=eo.verify(e.sig,n,e.pubkey);return e[Zl]=r,r}catch{return e[Zl]=!1,!1}}};function $Y(t){if(!DY(t))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content])}function Cb(t){let e=Rc(lN.encode($Y(t)));return ln(e)}var vg=new NY;vg.generateSecretKey;vg.getPublicKey;vg.finalizeEvent;vg.verifyEvent;var IY="Nostr ";async function RY(t,e,n,r=!1,i){const o={kind:MY,tags:[["u",t],["method",e]],created_at:Math.round(new Date().getTime()/1e3),content:""},s=await n(o);return(r?IY:"")+ko.encode(lN.encode(JSON.stringify(s)))}async function FY(t){var e,n,r,i,o;if(!t.sign)return Promise.reject("No signer found");try{const s=await _G(t.serverUrl),a=await RY(s.api_url,"POST",t.sign,!0),l=await TG(t.file,s.api_url,a,{alt:t.alt||"",expiration:((e=t.expiration)==null?void 0:e.toString())||"",content_type:t.file.type});if(l.status==="error")throw new Error(l.message);const u=((r=(n=l.nip94_event)==null?void 0:n.tags.find(f=>f[0]==="url"))==null?void 0:r[1])||"",c=((o=(i=l.nip94_event)==null?void 0:i.tags.find(f=>f[0]==="x"))==null?void 0:o[1])||"PROCESSING";return{url:u,sha256:c}}catch(s){throw new Error(s)}}function LY(t){return Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join("")}const BY=is.create({name:"fileUpload",addOptions(){return{allowedMimeTypes:["image/jpeg","image/png","image/gif","video/mp4","video/mpeg","video/webm"],immediateUpload:!1,expiration:6e4,async hash(t){return LY(await crypto.subtle.digest("SHA-256",await t.arrayBuffer()))},onDrop(){},onComplete(){}}},addCommands(){return{selectFile:()=>t=>(t.tr.setMeta("selectFiles",!0),!0),uploadFiles:()=>t=>(t.tr.setMeta("uploadFiles",!0),!0)}},addProseMirrorPlugins(){const t=new PY(this.editor,this.options);return[new ns({key:new rs("fileUploadPlugin"),state:{init(){return{}},apply(e){return setTimeout(()=>{e.getMeta("selectFiles")?(t.selectFile(),e.setMeta("selectFiles",null)):e.getMeta("uploadFiles")&&(t.uploadFiles(),e.setMeta("uploadFiles",null))}),{}}},props:{handleDrop:(e,n)=>t.handleDrop(n)}})]}});class PY{constructor(e,n){this.editor=e,this.options=n}get view(){return this.editor.view}addFile(e,n){if(!this.options.allowedMimeTypes.includes(e.type))return!1;const{tr:r}=this.view.state,[i]=e.type.split("/"),o=this.view.state.schema.nodes[i].create({file:e,src:URL.createObjectURL(e),alt:""});return r.insert(n,o),this.view.dispatch(r),this.options.immediateUpload&&this.upload(o,n),this.options.onDrop(this.editor,e,n),!0}findNodes(e){const n=[];return this.view.state.doc.descendants((r,i)=>{(r.type.name==="image"||r.type.name==="video")&&(r.attrs.sha256||(r.attrs.uploading||!1)===e&&n.push([r,i]))}),n}updateNodeAttributes(e,n){const{tr:r}=this.view.state;Object.entries(n).forEach(([i,o])=>o!==void 0&&r.setNodeAttribute(e,i,o)),this.view.dispatch(r)}onUploadDone(e,n){this.findNodes(!0).forEach(([r,i])=>{r.attrs.src===e.attrs.src&&this.updateNodeAttributes(i,{uploading:!1,src:n.url,sha256:n.sha256,uploadError:n.error})})}async upload(e,n){const{sign:r,hash:i,expiration:o}=this.options,{file:s,alt:a,uploadType:l,uploadUrl:u}=e.attrs;this.updateNodeAttributes(n,{uploading:!0,uploadError:null});try{if(l==="nip96"){const c=await FY({file:s,alt:a,sign:r,serverUrl:u});this.onUploadDone(e,c)}else{const c=await fG({file:s,serverUrl:u,hash:i,sign:r,expiration:o});this.onUploadDone(e,c)}}catch(c){const f=c;throw this.onUploadDone(e,{error:f}),new Error(f)}}async uploadFiles(){const e=this.findNodes(!1).map(([n,r])=>this.upload(n,r));try{await Promise.all(e),this.options.onComplete(this.editor)}catch(n){console.error(n)}}selectFile(){const e=document.createElement("input");e.type="file",e.multiple=!0,e.accept=this.options.allowedMimeTypes.join(","),e.onchange=n=>{const r=n.target.files;r&&Array.from(r).forEach(i=>{if(i){const o=this.view.state.selection.from+1;this.addFile(i,o)}})},e.click()}handleDrop(e){var n,r,i;e.preventDefault();const o=(n=this.view.posAtCoords({left:e.clientX,top:e.clientY}))==null?void 0:n.pos;if(o===void 0)return!1;const s=(i=(r=e.dataTransfer)==null?void 0:r.files)==null?void 0:i[0];s&&this.addFile(s,o)}}const T4={};function zY(t){let e=T4[t];if(e)return e;e=T4[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);e.push(r)}for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function yc(t,e){typeof e!="string"&&(e=yc.defaultChars);const n=zY(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let o=0,s=r.length;o<s;o+=3){const a=parseInt(r.slice(o+1,o+3),16);if(a<128){i+=n[a];continue}if((a&224)===192&&o+3<s){const l=parseInt(r.slice(o+4,o+6),16);if((l&192)===128){const u=a<<6&1984|l&63;u<128?i+="":i+=String.fromCharCode(u),o+=3;continue}}if((a&240)===224&&o+6<s){const l=parseInt(r.slice(o+4,o+6),16),u=parseInt(r.slice(o+7,o+9),16);if((l&192)===128&&(u&192)===128){const c=a<<12&61440|l<<6&4032|u&63;c<2048||c>=55296&&c<=57343?i+="":i+=String.fromCharCode(c),o+=6;continue}}if((a&248)===240&&o+9<s){const l=parseInt(r.slice(o+4,o+6),16),u=parseInt(r.slice(o+7,o+9),16),c=parseInt(r.slice(o+10,o+12),16);if((l&192)===128&&(u&192)===128&&(c&192)===128){let f=a<<18&1835008|l<<12&258048|u<<6&4032|c&63;f<65536||f>1114111?i+="":(f-=65536,i+=String.fromCharCode(55296+(f>>10),56320+(f&1023))),o+=9;continue}}i+=""}return i})}yc.defaultChars=";/?:@&=+$,#";yc.componentChars="";const M4={};function jY(t){let e=M4[t];if(e)return e;e=M4[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<t.length;n++)e[t.charCodeAt(n)]=t[n];return e}function Ch(t,e,n){typeof e!="string"&&(n=e,e=Ch.defaultChars),typeof n>"u"&&(n=!0);const r=jY(e);let i="";for(let o=0,s=t.length;o<s;o++){const a=t.charCodeAt(o);if(n&&a===37&&o+2<s&&/^[0-9a-f]{2}$/i.test(t.slice(o+1,o+3))){i+=t.slice(o,o+3),o+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s){const l=t.charCodeAt(o+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(t[o]+t[o+1]),o++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(t[o])}return i}Ch.defaultChars=";/?:@&=+$,-_.!~*'()#";Ch.componentChars="-_.!~*'()";function m3(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function Tm(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const qY=/^([a-z0-9.+-]+:)/i,VY=/:[0-9]*$/,UY=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,HY=["<",">",'"',"`"," ","\r",`
`,"	"],WY=["{","}","|","\\","^","`"].concat(HY),JY=["'"].concat(WY),O4=["%","/","?",";","#"].concat(JY),D4=["/","?","#"],KY=255,N4=/^[+a-z0-9A-Z_-]{0,63}$/,ZY=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,$4={javascript:!0,"javascript:":!0},I4={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function g3(t,e){if(t&&t instanceof Tm)return t;const n=new Tm;return n.parse(t,e),n}Tm.prototype.parse=function(t,e){let n,r,i,o=t;if(o=o.trim(),!e&&t.split("#").length===1){const u=UY.exec(o);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=qY.exec(o);if(s&&(s=s[0],n=s.toLowerCase(),this.protocol=s,o=o.substr(s.length)),(e||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=o.substr(0,2)==="//",i&&!(s&&$4[s])&&(o=o.substr(2),this.slashes=!0)),!$4[s]&&(i||s&&!I4[s])){let u=-1;for(let p=0;p<D4.length;p++)r=o.indexOf(D4[p]),r!==-1&&(u===-1||r<u)&&(u=r);let c,f;u===-1?f=o.lastIndexOf("@"):f=o.lastIndexOf("@",u),f!==-1&&(c=o.slice(0,f),o=o.slice(f+1),this.auth=c),u=-1;for(let p=0;p<O4.length;p++)r=o.indexOf(O4[p]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=o.length),o[u-1]===":"&&u--;const d=o.slice(0,u);o=o.slice(u),this.parseHost(d),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const p=this.hostname.split(/\./);for(let m=0,b=p.length;m<b;m++){const y=p[m];if(y&&!y.match(N4)){let v="";for(let w=0,g=y.length;w<g;w++)y.charCodeAt(w)>127?v+="x":v+=y[w];if(!v.match(N4)){const w=p.slice(0,m),g=p.slice(m+1),x=y.match(ZY);x&&(w.push(x[1]),g.unshift(x[2])),g.length&&(o=g.join(".")+o),this.hostname=w.join(".");break}}}}this.hostname.length>KY&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=o.indexOf("#");a!==-1&&(this.hash=o.substr(a),o=o.slice(0,a));const l=o.indexOf("?");return l!==-1&&(this.search=o.substr(l),o=o.slice(0,l)),o&&(this.pathname=o),I4[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Tm.prototype.parseHost=function(t){let e=VY.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const GY=Object.freeze(Object.defineProperty({__proto__:null,decode:yc,encode:Ch,format:m3,parse:g3},Symbol.toStringTag,{value:"Module"})),uN=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,cN=/[\0-\x1F\x7F-\x9F]/,YY=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,y3=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,fN=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,dN=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,QY=Object.freeze(Object.defineProperty({__proto__:null,Any:uN,Cc:cN,Cf:YY,P:y3,S:fN,Z:dN},Symbol.toStringTag,{value:"Module"})),XY=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),eQ=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var _b;const tQ=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),nQ=(_b=String.fromCodePoint)!==null&&_b!==void 0?_b:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function rQ(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=tQ.get(t))!==null&&e!==void 0?e:t}var cn;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(cn||(cn={}));const iQ=32;var Hs;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Hs||(Hs={}));function $w(t){return t>=cn.ZERO&&t<=cn.NINE}function oQ(t){return t>=cn.UPPER_A&&t<=cn.UPPER_F||t>=cn.LOWER_A&&t<=cn.LOWER_F}function sQ(t){return t>=cn.UPPER_A&&t<=cn.UPPER_Z||t>=cn.LOWER_A&&t<=cn.LOWER_Z||$w(t)}function aQ(t){return t===cn.EQUALS||sQ(t)}var on;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(on||(on={}));var Bs;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Bs||(Bs={}));let lQ=class{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=on.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Bs.Strict}startEntity(e){this.decodeMode=e,this.state=on.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case on.EntityStart:return e.charCodeAt(n)===cn.NUM?(this.state=on.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=on.NamedEntity,this.stateNamedEntity(e,n));case on.NumericStart:return this.stateNumericStart(e,n);case on.NumericDecimal:return this.stateNumericDecimal(e,n);case on.NumericHex:return this.stateNumericHex(e,n);case on.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|iQ)===cn.LOWER_X?(this.state=on.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=on.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,i){if(n!==r){const o=r-n;this.result=this.result*Math.pow(i,o)+parseInt(e.substr(n,o),i),this.consumed+=o}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if($w(i)||oQ(i))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if($w(i))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===cn.SEMI)this.consumed+=1;else if(this.decodeMode===Bs.Strict)return 0;return this.emitCodePoint(rQ(this.result),this.consumed),this.errors&&(e!==cn.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let i=r[this.treeIndex],o=(i&Hs.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const s=e.charCodeAt(n);if(this.treeIndex=uQ(r,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===Bs.Attribute&&(o===0||aQ(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],o=(i&Hs.VALUE_LENGTH)>>14,o!==0){if(s===cn.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==Bs.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,i=(r[n]&Hs.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[e]&~Hs.VALUE_LENGTH:i[e+1],r),n===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case on.NamedEntity:return this.result!==0&&(this.decodeMode!==Bs.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case on.NumericDecimal:return this.emitNumericEntity(0,2);case on.NumericHex:return this.emitNumericEntity(0,3);case on.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case on.EntityStart:return 0}}};function hN(t){let e="";const n=new lQ(t,r=>e+=nQ(r));return function(i,o){let s=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(s,a),n.startEntity(o);const u=n.write(i,a+1);if(u<0){s=a+n.end();break}s=a+u,a=u===0?s+1:s}const l=e+i.slice(s);return e="",l}}function uQ(t,e,n,r){const i=(e&Hs.BRANCH_LENGTH)>>7,o=e&Hs.JUMP_TABLE;if(i===0)return o!==0&&r===o?n:-1;if(o){const l=r-o;return l<0||l>=i?-1:t[n+l]-1}let s=n,a=s+i-1;for(;s<=a;){const l=s+a>>>1,u=t[l];if(u<r)s=l+1;else if(u>r)a=l-1;else return t[l+i]}return-1}const cQ=hN(XY);hN(eQ);function pN(t,e=Bs.Legacy){return cQ(t,e)}function fQ(t){return Object.prototype.toString.call(t)}function b3(t){return fQ(t)==="[object String]"}const dQ=Object.prototype.hasOwnProperty;function hQ(t,e){return dQ.call(t,e)}function wg(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){t[r]=n[r]})}}),t}function mN(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))}function v3(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function Mm(t){if(t>65535){t-=65536;const e=55296+(t>>10),n=56320+(t&1023);return String.fromCharCode(e,n)}return String.fromCharCode(t)}const gN=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,pQ=/&([a-z#][a-z0-9]{1,31});/gi,mQ=new RegExp(gN.source+"|"+pQ.source,"gi"),gQ=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function yQ(t,e){if(e.charCodeAt(0)===35&&gQ.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return v3(r)?Mm(r):t}const n=pN(t);return n!==t?n:t}function bQ(t){return t.indexOf("\\")<0?t:t.replace(gN,"$1")}function bc(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(mQ,function(e,n,r){return n||yQ(e,r)})}const vQ=/[&<>"]/,wQ=/[&<>"]/g,kQ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function xQ(t){return kQ[t]}function pa(t){return vQ.test(t)?t.replace(wQ,xQ):t}const EQ=/[.?*+^$[\]\\(){}|-]/g;function SQ(t){return t.replace(EQ,"\\$&")}function wt(t){switch(t){case 9:case 32:return!0}return!1}function Hd(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Wd(t){return y3.test(t)||fN.test(t)}function Jd(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function kg(t){return t=t.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(t=t.replace(//g,"")),t.toLowerCase().toUpperCase()}const CQ={mdurl:GY,ucmicro:QY},_Q=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:mN,assign:wg,escapeHtml:pa,escapeRE:SQ,fromCodePoint:Mm,has:hQ,isMdAsciiPunct:Jd,isPunctChar:Wd,isSpace:wt,isString:b3,isValidEntityCode:v3,isWhiteSpace:Hd,lib:CQ,normalizeReference:kg,unescapeAll:bc,unescapeMd:bQ},Symbol.toStringTag,{value:"Module"}));function AQ(t,e,n){let r,i,o,s;const a=t.posMax,l=t.pos;for(t.pos=e+1,r=1;t.pos<a;){if(o=t.src.charCodeAt(t.pos),o===93&&(r--,r===0)){i=!0;break}if(s=t.pos,t.md.inline.skipToken(t),o===91){if(s===t.pos-1)r++;else if(n)return t.pos=l,-1}}let u=-1;return i&&(u=t.pos),t.pos=l,u}function TQ(t,e,n){let r,i=e;const o={ok:!1,pos:0,str:""};if(t.charCodeAt(i)===60){for(i++;i<n;){if(r=t.charCodeAt(i),r===10||r===60)return o;if(r===62)return o.pos=i+1,o.str=bc(t.slice(e+1,i)),o.ok=!0,o;if(r===92&&i+1<n){i+=2;continue}i++}return o}let s=0;for(;i<n&&(r=t.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<n){if(t.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(s++,s>32))return o;if(r===41){if(s===0)break;s--}i++}return e===i||s!==0||(o.str=bc(t.slice(e,i)),o.pos=i,o.ok=!0),o}function MQ(t,e,n,r){let i,o=e;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(o>=n)return s;let a=t.charCodeAt(o);if(a!==34&&a!==39&&a!==40)return s;e++,o++,a===40&&(a=41),s.marker=a}for(;o<n;){if(i=t.charCodeAt(o),i===s.marker)return s.pos=o+1,s.str+=bc(t.slice(e,o)),s.ok=!0,s;if(i===40&&s.marker===41)return s;i===92&&o+1<n&&o++,o++}return s.can_continue=!0,s.str+=bc(t.slice(e,o)),s}const OQ=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:TQ,parseLinkLabel:AQ,parseLinkTitle:MQ},Symbol.toStringTag,{value:"Module"})),So={};So.code_inline=function(t,e,n,r,i){const o=t[e];return"<code"+i.renderAttrs(o)+">"+pa(o.content)+"</code>"};So.code_block=function(t,e,n,r,i){const o=t[e];return"<pre"+i.renderAttrs(o)+"><code>"+pa(t[e].content)+`</code></pre>
`};So.fence=function(t,e,n,r,i){const o=t[e],s=o.info?bc(o.info).trim():"";let a="",l="";if(s){const c=s.split(/(\s+)/g);a=c[0],l=c.slice(2).join("")}let u;if(n.highlight?u=n.highlight(o.content,a,l)||pa(o.content):u=pa(o.content),u.indexOf("<pre")===0)return u+`
`;if(s){const c=o.attrIndex("class"),f=o.attrs?o.attrs.slice():[];c<0?f.push(["class",n.langPrefix+a]):(f[c]=f[c].slice(),f[c][1]+=" "+n.langPrefix+a);const d={attrs:f};return`<pre><code${i.renderAttrs(d)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(o)}>${u}</code></pre>
`};So.image=function(t,e,n,r,i){const o=t[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,n,r),i.renderToken(t,e,n)};So.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};So.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};So.text=function(t,e){return pa(t[e].content)};So.html_block=function(t,e){return t[e].content};So.html_inline=function(t,e){return t[e].content};function Bc(){this.rules=wg({},So)}Bc.prototype.renderAttrs=function(e){let n,r,i;if(!e.attrs)return"";for(i="",n=0,r=e.attrs.length;n<r;n++)i+=" "+pa(e.attrs[n][0])+'="'+pa(e.attrs[n][1])+'"';return i};Bc.prototype.renderToken=function(e,n,r){const i=e[n];let o="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&e[n-1].hidden&&(o+=`
`),o+=(i.nesting===-1?"</":"<")+i.tag,o+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(o+=" /");let s=!1;if(i.block&&(s=!0,i.nesting===1&&n+1<e.length)){const a=e[n+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(s=!1)}return o+=s?`>
`:">",o};Bc.prototype.renderInline=function(t,e,n){let r="";const i=this.rules;for(let o=0,s=t.length;o<s;o++){const a=t[o].type;typeof i[a]<"u"?r+=i[a](t,o,e,n,this):r+=this.renderToken(t,o,e)}return r};Bc.prototype.renderInlineAsText=function(t,e,n){let r="";for(let i=0,o=t.length;i<o;i++)switch(t[i].type){case"text":r+=t[i].content;break;case"image":r+=this.renderInlineAsText(t[i].children,e,n);break;case"html_inline":case"html_block":r+=t[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Bc.prototype.render=function(t,e,n){let r="";const i=this.rules;for(let o=0,s=t.length;o<s;o++){const a=t[o].type;a==="inline"?r+=this.renderInline(t[o].children,e,n):typeof i[a]<"u"?r+=i[a](t,o,e,n,this):r+=this.renderToken(t,o,e,n)}return r};function Tr(){this.__rules__=[],this.__cache__=null}Tr.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Tr.prototype.__compile__=function(){const t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};Tr.prototype.at=function(t,e,n){const r=this.__find__(t),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Tr.prototype.before=function(t,e,n,r){const i=this.__find__(t),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};Tr.prototype.after=function(t,e,n,r){const i=this.__find__(t),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};Tr.prototype.push=function(t,e,n){const r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};Tr.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};Tr.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(t,e)};Tr.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};Tr.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function Pi(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Pi.prototype.attrIndex=function(e){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,i=n.length;r<i;r++)if(n[r][0]===e)return r;return-1};Pi.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Pi.prototype.attrSet=function(e,n){const r=this.attrIndex(e),i=[e,n];r<0?this.attrPush(i):this.attrs[r]=i};Pi.prototype.attrGet=function(e){const n=this.attrIndex(e);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Pi.prototype.attrJoin=function(e,n){const r=this.attrIndex(e);r<0?this.attrPush([e,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function yN(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}yN.prototype.Token=Pi;const DQ=/\r\n?|\n/g,NQ=/\0/g;function $Q(t){let e;e=t.src.replace(DQ,`
`),e=e.replace(NQ,""),t.src=e}function IQ(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function RQ(t){const e=t.tokens;for(let n=0,r=e.length;n<r;n++){const i=e[n];i.type==="inline"&&t.md.inline.parse(i.content,t.md,t.env,i.children)}}function FQ(t){return/^<a[>\s]/i.test(t)}function LQ(t){return/^<\/a\s*>/i.test(t)}function BQ(t){const e=t.tokens;if(t.md.options.linkify)for(let n=0,r=e.length;n<r;n++){if(e[n].type!=="inline"||!t.md.linkify.pretest(e[n].content))continue;let i=e[n].children,o=0;for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.type==="link_close"){for(s--;i[s].level!==a.level&&i[s].type!=="link_open";)s--;continue}if(a.type==="html_inline"&&(FQ(a.content)&&o>0&&o--,LQ(a.content)&&o++),!(o>0)&&a.type==="text"&&t.md.linkify.test(a.content)){const l=a.content;let u=t.md.linkify.match(l);const c=[];let f=a.level,d=0;u.length>0&&u[0].index===0&&s>0&&i[s-1].type==="text_special"&&(u=u.slice(1));for(let h=0;h<u.length;h++){const p=u[h].url,m=t.md.normalizeLink(p);if(!t.md.validateLink(m))continue;let b=u[h].text;u[h].schema?u[h].schema==="mailto:"&&!/^mailto:/i.test(b)?b=t.md.normalizeLinkText("mailto:"+b).replace(/^mailto:/,""):b=t.md.normalizeLinkText(b):b=t.md.normalizeLinkText("http://"+b).replace(/^http:\/\//,"");const y=u[h].index;if(y>d){const x=new t.Token("text","",0);x.content=l.slice(d,y),x.level=f,c.push(x)}const v=new t.Token("link_open","a",1);v.attrs=[["href",m]],v.level=f++,v.markup="linkify",v.info="auto",c.push(v);const w=new t.Token("text","",0);w.content=b,w.level=f,c.push(w);const g=new t.Token("link_close","a",-1);g.level=--f,g.markup="linkify",g.info="auto",c.push(g),d=u[h].lastIndex}if(d<l.length){const h=new t.Token("text","",0);h.content=l.slice(d),h.level=f,c.push(h)}e[n].children=i=mN(i,s,c)}}}}const bN=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,PQ=/\((c|tm|r)\)/i,zQ=/\((c|tm|r)\)/ig,jQ={c:"",r:"",tm:""};function qQ(t,e){return jQ[e.toLowerCase()]}function VQ(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&(r.content=r.content.replace(zQ,qQ)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function UQ(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&bN.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function HQ(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(PQ.test(t.tokens[e].content)&&VQ(t.tokens[e].children),bN.test(t.tokens[e].content)&&UQ(t.tokens[e].children))}const WQ=/['"]/,R4=/['"]/g,F4="";function wp(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}function JQ(t,e){let n;const r=[];for(let i=0;i<t.length;i++){const o=t[i],s=t[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=s);n--);if(r.length=n+1,o.type!=="text")continue;let a=o.content,l=0,u=a.length;e:for(;l<u;){R4.lastIndex=l;const c=R4.exec(a);if(!c)break;let f=!0,d=!0;l=c.index+1;const h=c[0]==="'";let p=32;if(c.index-1>=0)p=a.charCodeAt(c.index-1);else for(n=i-1;n>=0&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n--)if(t[n].content){p=t[n].content.charCodeAt(t[n].content.length-1);break}let m=32;if(l<u)m=a.charCodeAt(l);else for(n=i+1;n<t.length&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n++)if(t[n].content){m=t[n].content.charCodeAt(0);break}const b=Jd(p)||Wd(String.fromCharCode(p)),y=Jd(m)||Wd(String.fromCharCode(m)),v=Hd(p),w=Hd(m);if(w?f=!1:y&&(v||b||(f=!1)),v?d=!1:b&&(w||y||(d=!1)),m===34&&c[0]==='"'&&p>=48&&p<=57&&(d=f=!1),f&&d&&(f=b,d=y),!f&&!d){h&&(o.content=wp(o.content,c.index,F4));continue}if(d)for(n=r.length-1;n>=0;n--){let g=r[n];if(r[n].level<s)break;if(g.single===h&&r[n].level===s){g=r[n];let x,k;h?(x=e.md.options.quotes[2],k=e.md.options.quotes[3]):(x=e.md.options.quotes[0],k=e.md.options.quotes[1]),o.content=wp(o.content,c.index,k),t[g.token].content=wp(t[g.token].content,g.pos,x),l+=k.length-1,g.token===i&&(l+=x.length-1),a=o.content,u=a.length,r.length=n;continue e}}f?r.push({token:i,pos:c.index,single:h,level:s}):d&&h&&(o.content=wp(o.content,c.index,F4))}}}function KQ(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!WQ.test(t.tokens[e].content)||JQ(t.tokens[e].children,t)}function ZQ(t){let e,n;const r=t.tokens,i=r.length;for(let o=0;o<i;o++){if(r[o].type!=="inline")continue;const s=r[o].children,a=s.length;for(e=0;e<a;e++)s[e].type==="text_special"&&(s[e].type="text");for(e=n=0;e<a;e++)s[e].type==="text"&&e+1<a&&s[e+1].type==="text"?s[e+1].content=s[e].content+s[e+1].content:(e!==n&&(s[n]=s[e]),n++);e!==n&&(s.length=n)}}const Ab=[["normalize",$Q],["block",IQ],["inline",RQ],["linkify",BQ],["replacements",HQ],["smartquotes",KQ],["text_join",ZQ]];function w3(){this.ruler=new Tr;for(let t=0;t<Ab.length;t++)this.ruler.push(Ab[t][0],Ab[t][1])}w3.prototype.process=function(t){const e=this.ruler.getRules("");for(let n=0,r=e.length;n<r;n++)e[n](t)};w3.prototype.State=yN;function Co(t,e,n,r){this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let o=0,s=0,a=0,l=0,u=i.length,c=!1;s<u;s++){const f=i.charCodeAt(s);if(!c)if(wt(f)){a++,f===9?l+=4-l%4:l++;continue}else c=!0;(f===10||s===u-1)&&(f!==10&&s++,this.bMarks.push(o),this.eMarks.push(s),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),c=!1,a=0,l=0,o=s+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Co.prototype.push=function(t,e,n){const r=new Pi(t,e,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Co.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Co.prototype.skipEmptyLines=function(e){for(let n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Co.prototype.skipSpaces=function(e){for(let n=this.src.length;e<n;e++){const r=this.src.charCodeAt(e);if(!wt(r))break}return e};Co.prototype.skipSpacesBack=function(e,n){if(e<=n)return e;for(;e>n;)if(!wt(this.src.charCodeAt(--e)))return e+1;return e};Co.prototype.skipChars=function(e,n){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};Co.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};Co.prototype.getLines=function(e,n,r,i){if(e>=n)return"";const o=new Array(n-e);for(let s=0,a=e;a<n;a++,s++){let l=0;const u=this.bMarks[a];let c=u,f;for(a+1<n||i?f=this.eMarks[a]+1:f=this.eMarks[a];c<f&&l<r;){const d=this.src.charCodeAt(c);if(wt(d))d===9?l+=4-(l+this.bsCount[a])%4:l++;else if(c-u<this.tShift[a])l++;else break;c++}l>r?o[s]=new Array(l-r+1).join(" ")+this.src.slice(c,f):o[s]=this.src.slice(c,f)}return o.join("")};Co.prototype.Token=Pi;const GQ=65536;function Tb(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];return t.src.slice(n,r)}function L4(t){const e=[],n=t.length;let r=0,i=t.charCodeAt(r),o=!1,s=0,a="";for(;r<n;)i===124&&(o?(a+=t.substring(s,r-1),s=r):(e.push(a+t.substring(s,r)),a="",s=r+1)),o=i===92,r++,i=t.charCodeAt(r);return e.push(a+t.substring(s)),e}function YQ(t,e,n,r){if(e+2>n)return!1;let i=e+1;if(t.sCount[i]<t.blkIndent||t.sCount[i]-t.blkIndent>=4)return!1;let o=t.bMarks[i]+t.tShift[i];if(o>=t.eMarks[i])return!1;const s=t.src.charCodeAt(o++);if(s!==124&&s!==45&&s!==58||o>=t.eMarks[i])return!1;const a=t.src.charCodeAt(o++);if(a!==124&&a!==45&&a!==58&&!wt(a)||s===45&&wt(a))return!1;for(;o<t.eMarks[i];){const g=t.src.charCodeAt(o);if(g!==124&&g!==45&&g!==58&&!wt(g))return!1;o++}let l=Tb(t,e+1),u=l.split("|");const c=[];for(let g=0;g<u.length;g++){const x=u[g].trim();if(!x){if(g===0||g===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(x))return!1;x.charCodeAt(x.length-1)===58?c.push(x.charCodeAt(0)===58?"center":"right"):x.charCodeAt(0)===58?c.push("left"):c.push("")}if(l=Tb(t,e).trim(),l.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;u=L4(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const f=u.length;if(f===0||f!==c.length)return!1;if(r)return!0;const d=t.parentType;t.parentType="table";const h=t.md.block.ruler.getRules("blockquote"),p=t.push("table_open","table",1),m=[e,0];p.map=m;const b=t.push("thead_open","thead",1);b.map=[e,e+1];const y=t.push("tr_open","tr",1);y.map=[e,e+1];for(let g=0;g<u.length;g++){const x=t.push("th_open","th",1);c[g]&&(x.attrs=[["style","text-align:"+c[g]]]);const k=t.push("inline","",0);k.content=u[g].trim(),k.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let v,w=0;for(i=e+2;i<n&&!(t.sCount[i]<t.blkIndent);i++){let g=!1;for(let k=0,E=h.length;k<E;k++)if(h[k](t,i,n,!0)){g=!0;break}if(g||(l=Tb(t,i).trim(),!l)||t.sCount[i]-t.blkIndent>=4||(u=L4(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),w+=f-u.length,w>GQ))break;if(i===e+2){const k=t.push("tbody_open","tbody",1);k.map=v=[e+2,0]}const x=t.push("tr_open","tr",1);x.map=[i,i+1];for(let k=0;k<f;k++){const E=t.push("td_open","td",1);c[k]&&(E.attrs=[["style","text-align:"+c[k]]]);const D=t.push("inline","",0);D.content=u[k]?u[k].trim():"",D.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return v&&(t.push("tbody_close","tbody",-1),v[1]=i),t.push("table_close","table",-1),m[1]=i,t.parentType=d,t.line=i,!0}function QQ(t,e,n){if(t.sCount[e]-t.blkIndent<4)return!1;let r=e+1,i=r;for(;r<n;){if(t.isEmpty(r)){r++;continue}if(t.sCount[r]-t.blkIndent>=4){r++,i=r;continue}break}t.line=i;const o=t.push("code_block","code",0);return o.content=t.getLines(e,i,4+t.blkIndent,!1)+`
`,o.map=[e,t.line],!0}function XQ(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||i+3>o)return!1;const s=t.src.charCodeAt(i);if(s!==126&&s!==96)return!1;let a=i;i=t.skipChars(i,s);let l=i-a;if(l<3)return!1;const u=t.src.slice(a,i),c=t.src.slice(i,o);if(s===96&&c.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let f=e,d=!1;for(;f++,!(f>=n||(i=a=t.bMarks[f]+t.tShift[f],o=t.eMarks[f],i<o&&t.sCount[f]<t.blkIndent));)if(t.src.charCodeAt(i)===s&&!(t.sCount[f]-t.blkIndent>=4)&&(i=t.skipChars(i,s),!(i-a<l)&&(i=t.skipSpaces(i),!(i<o)))){d=!0;break}l=t.sCount[e],t.line=f+(d?1:0);const h=t.push("fence","code",0);return h.info=c,h.content=t.getLines(e+1,f,l,!0),h.markup=u,h.map=[e,t.line],!0}function eX(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];const s=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==62)return!1;if(r)return!0;const a=[],l=[],u=[],c=[],f=t.md.block.ruler.getRules("blockquote"),d=t.parentType;t.parentType="blockquote";let h=!1,p;for(p=e;p<n;p++){const w=t.sCount[p]<t.blkIndent;if(i=t.bMarks[p]+t.tShift[p],o=t.eMarks[p],i>=o)break;if(t.src.charCodeAt(i++)===62&&!w){let x=t.sCount[p]+1,k,E;t.src.charCodeAt(i)===32?(i++,x++,E=!1,k=!0):t.src.charCodeAt(i)===9?(k=!0,(t.bsCount[p]+x)%4===3?(i++,x++,E=!1):E=!0):k=!1;let D=x;for(a.push(t.bMarks[p]),t.bMarks[p]=i;i<o;){const O=t.src.charCodeAt(i);if(wt(O))O===9?D+=4-(D+t.bsCount[p]+(E?1:0))%4:D++;else break;i++}h=i>=o,l.push(t.bsCount[p]),t.bsCount[p]=t.sCount[p]+1+(k?1:0),u.push(t.sCount[p]),t.sCount[p]=D-x,c.push(t.tShift[p]),t.tShift[p]=i-t.bMarks[p];continue}if(h)break;let g=!1;for(let x=0,k=f.length;x<k;x++)if(f[x](t,p,n,!0)){g=!0;break}if(g){t.lineMax=p,t.blkIndent!==0&&(a.push(t.bMarks[p]),l.push(t.bsCount[p]),c.push(t.tShift[p]),u.push(t.sCount[p]),t.sCount[p]-=t.blkIndent);break}a.push(t.bMarks[p]),l.push(t.bsCount[p]),c.push(t.tShift[p]),u.push(t.sCount[p]),t.sCount[p]=-1}const m=t.blkIndent;t.blkIndent=0;const b=t.push("blockquote_open","blockquote",1);b.markup=">";const y=[e,0];b.map=y,t.md.block.tokenize(t,e,p);const v=t.push("blockquote_close","blockquote",-1);v.markup=">",t.lineMax=s,t.parentType=d,y[1]=t.line;for(let w=0;w<c.length;w++)t.bMarks[w+e]=a[w],t.tShift[w+e]=c[w],t.sCount[w+e]=u[w],t.bsCount[w+e]=l[w];return t.blkIndent=m,!0}function tX(t,e,n,r){const i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let o=t.bMarks[e]+t.tShift[e];const s=t.src.charCodeAt(o++);if(s!==42&&s!==45&&s!==95)return!1;let a=1;for(;o<i;){const u=t.src.charCodeAt(o++);if(u!==s&&!wt(u))return!1;u===s&&a++}if(a<3)return!1;if(r)return!0;t.line=e+1;const l=t.push("hr","hr",0);return l.map=[e,t.line],l.markup=Array(a+1).join(String.fromCharCode(s)),!0}function B4(t,e){const n=t.eMarks[e];let r=t.bMarks[e]+t.tShift[e];const i=t.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<n){const o=t.src.charCodeAt(r);if(!wt(o))return-1}return r}function P4(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];let i=n;if(i+1>=r)return-1;let o=t.src.charCodeAt(i++);if(o<48||o>57)return-1;for(;;){if(i>=r)return-1;if(o=t.src.charCodeAt(i++),o>=48&&o<=57){if(i-n>=10)return-1;continue}if(o===41||o===46)break;return-1}return i<r&&(o=t.src.charCodeAt(i),!wt(o))?-1:i}function nX(t,e){const n=t.level+2;for(let r=e+2,i=t.tokens.length-2;r<i;r++)t.tokens[r].level===n&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}function rX(t,e,n,r){let i,o,s,a,l=e,u=!0;if(t.sCount[l]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[l]-t.listIndent>=4&&t.sCount[l]<t.blkIndent)return!1;let c=!1;r&&t.parentType==="paragraph"&&t.sCount[l]>=t.blkIndent&&(c=!0);let f,d,h;if((h=P4(t,l))>=0){if(f=!0,s=t.bMarks[l]+t.tShift[l],d=Number(t.src.slice(s,h-1)),c&&d!==1)return!1}else if((h=B4(t,l))>=0)f=!1;else return!1;if(c&&t.skipSpaces(h)>=t.eMarks[l])return!1;if(r)return!0;const p=t.src.charCodeAt(h-1),m=t.tokens.length;f?(a=t.push("ordered_list_open","ol",1),d!==1&&(a.attrs=[["start",d]])):a=t.push("bullet_list_open","ul",1);const b=[l,0];a.map=b,a.markup=String.fromCharCode(p);let y=!1;const v=t.md.block.ruler.getRules("list"),w=t.parentType;for(t.parentType="list";l<n;){o=h,i=t.eMarks[l];const g=t.sCount[l]+h-(t.bMarks[l]+t.tShift[l]);let x=g;for(;o<i;){const A=t.src.charCodeAt(o);if(A===9)x+=4-(x+t.bsCount[l])%4;else if(A===32)x++;else break;o++}const k=o;let E;k>=i?E=1:E=x-g,E>4&&(E=1);const D=g+E;a=t.push("list_item_open","li",1),a.markup=String.fromCharCode(p);const O=[l,0];a.map=O,f&&(a.info=t.src.slice(s,h-1));const N=t.tight,C=t.tShift[l],R=t.sCount[l],T=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=D,t.tight=!0,t.tShift[l]=k-t.bMarks[l],t.sCount[l]=x,k>=i&&t.isEmpty(l+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,l,n,!0),(!t.tight||y)&&(u=!1),y=t.line-l>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=T,t.tShift[l]=C,t.sCount[l]=R,t.tight=N,a=t.push("list_item_close","li",-1),a.markup=String.fromCharCode(p),l=t.line,O[1]=l,l>=n||t.sCount[l]<t.blkIndent||t.sCount[l]-t.blkIndent>=4)break;let q=!1;for(let A=0,S=v.length;A<S;A++)if(v[A](t,l,n,!0)){q=!0;break}if(q)break;if(f){if(h=P4(t,l),h<0)break;s=t.bMarks[l]+t.tShift[l]}else if(h=B4(t,l),h<0)break;if(p!==t.src.charCodeAt(h-1))break}return f?a=t.push("ordered_list_close","ol",-1):a=t.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(p),b[1]=l,t.line=l,t.parentType=w,u&&nX(t,m),!0}function iX(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],s=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==91)return!1;function a(v){const w=t.lineMax;if(v>=w||t.isEmpty(v))return null;let g=!1;if(t.sCount[v]-t.blkIndent>3&&(g=!0),t.sCount[v]<0&&(g=!0),!g){const E=t.md.block.ruler.getRules("reference"),D=t.parentType;t.parentType="reference";let O=!1;for(let N=0,C=E.length;N<C;N++)if(E[N](t,v,w,!0)){O=!0;break}if(t.parentType=D,O)return null}const x=t.bMarks[v]+t.tShift[v],k=t.eMarks[v];return t.src.slice(x,k+1)}let l=t.src.slice(i,o+1);o=l.length;let u=-1;for(i=1;i<o;i++){const v=l.charCodeAt(i);if(v===91)return!1;if(v===93){u=i;break}else if(v===10){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}else if(v===92&&(i++,i<o&&l.charCodeAt(i)===10)){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(i=u+2;i<o;i++){const v=l.charCodeAt(i);if(v===10){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}else if(!wt(v))break}const c=t.md.helpers.parseLinkDestination(l,i,o);if(!c.ok)return!1;const f=t.md.normalizeLink(c.str);if(!t.md.validateLink(f))return!1;i=c.pos;const d=i,h=s,p=i;for(;i<o;i++){const v=l.charCodeAt(i);if(v===10){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}else if(!wt(v))break}let m=t.md.helpers.parseLinkTitle(l,i,o);for(;m.can_continue;){const v=a(s);if(v===null)break;l+=v,i=o,o=l.length,s++,m=t.md.helpers.parseLinkTitle(l,i,o,m)}let b;for(i<o&&p!==i&&m.ok?(b=m.str,i=m.pos):(b="",i=d,s=h);i<o;){const v=l.charCodeAt(i);if(!wt(v))break;i++}if(i<o&&l.charCodeAt(i)!==10&&b)for(b="",i=d,s=h;i<o;){const v=l.charCodeAt(i);if(!wt(v))break;i++}if(i<o&&l.charCodeAt(i)!==10)return!1;const y=kg(l.slice(1,u));return y?(r||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[y]>"u"&&(t.env.references[y]={title:b,href:f}),t.line=s),!0):!1}const oX=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sX="[a-zA-Z_:][a-zA-Z0-9:._-]*",aX="[^\"'=<>`\\x00-\\x20]+",lX="'[^']*'",uX='"[^"]*"',cX="(?:"+aX+"|"+lX+"|"+uX+")",fX="(?:\\s+"+sX+"(?:\\s*=\\s*"+cX+")?)",vN="<[A-Za-z][A-Za-z0-9\\-]*"+fX+"*\\s*\\/?>",wN="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",dX="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",hX="<[?][\\s\\S]*?[?]>",pX="<![A-Za-z][^>]*>",mX="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",gX=new RegExp("^(?:"+vN+"|"+wN+"|"+dX+"|"+hX+"|"+pX+"|"+mX+")"),yX=new RegExp("^(?:"+vN+"|"+wN+")"),Gl=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+oX.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(yX.source+"\\s*$"),/^$/,!1]];function bX(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(i)!==60)return!1;let s=t.src.slice(i,o),a=0;for(;a<Gl.length&&!Gl[a][0].test(s);a++);if(a===Gl.length)return!1;if(r)return Gl[a][2];let l=e+1;if(!Gl[a][1].test(s)){for(;l<n&&!(t.sCount[l]<t.blkIndent);l++)if(i=t.bMarks[l]+t.tShift[l],o=t.eMarks[l],s=t.src.slice(i,o),Gl[a][1].test(s)){s.length!==0&&l++;break}}t.line=l;const u=t.push("html_block","",0);return u.map=[e,l],u.content=t.getLines(e,l,t.blkIndent,!0),!0}function vX(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let s=t.src.charCodeAt(i);if(s!==35||i>=o)return!1;let a=1;for(s=t.src.charCodeAt(++i);s===35&&i<o&&a<=6;)a++,s=t.src.charCodeAt(++i);if(a>6||i<o&&!wt(s))return!1;if(r)return!0;o=t.skipSpacesBack(o,i);const l=t.skipCharsBack(o,35,i);l>i&&wt(t.src.charCodeAt(l-1))&&(o=l),t.line=e+1;const u=t.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[e,t.line];const c=t.push("inline","",0);c.content=t.src.slice(i,o).trim(),c.map=[e,t.line],c.children=[];const f=t.push("heading_close","h"+String(a),-1);return f.markup="########".slice(0,a),!0}function wX(t,e,n){const r=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;const i=t.parentType;t.parentType="paragraph";let o=0,s,a=e+1;for(;a<n&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3)continue;if(t.sCount[a]>=t.blkIndent){let h=t.bMarks[a]+t.tShift[a];const p=t.eMarks[a];if(h<p&&(s=t.src.charCodeAt(h),(s===45||s===61)&&(h=t.skipChars(h,s),h=t.skipSpaces(h),h>=p))){o=s===61?1:2;break}}if(t.sCount[a]<0)continue;let d=!1;for(let h=0,p=r.length;h<p;h++)if(r[h](t,a,n,!0)){d=!0;break}if(d)break}if(!o)return!1;const l=t.getLines(e,a,t.blkIndent,!1).trim();t.line=a+1;const u=t.push("heading_open","h"+String(o),1);u.markup=String.fromCharCode(s),u.map=[e,t.line];const c=t.push("inline","",0);c.content=l,c.map=[e,t.line-1],c.children=[];const f=t.push("heading_close","h"+String(o),-1);return f.markup=String.fromCharCode(s),t.parentType=i,!0}function kX(t,e,n){const r=t.md.block.ruler.getRules("paragraph"),i=t.parentType;let o=e+1;for(t.parentType="paragraph";o<n&&!t.isEmpty(o);o++){if(t.sCount[o]-t.blkIndent>3||t.sCount[o]<0)continue;let u=!1;for(let c=0,f=r.length;c<f;c++)if(r[c](t,o,n,!0)){u=!0;break}if(u)break}const s=t.getLines(e,o,t.blkIndent,!1).trim();t.line=o;const a=t.push("paragraph_open","p",1);a.map=[e,t.line];const l=t.push("inline","",0);return l.content=s,l.map=[e,t.line],l.children=[],t.push("paragraph_close","p",-1),t.parentType=i,!0}const kp=[["table",YQ,["paragraph","reference"]],["code",QQ],["fence",XQ,["paragraph","reference","blockquote","list"]],["blockquote",eX,["paragraph","reference","blockquote","list"]],["hr",tX,["paragraph","reference","blockquote","list"]],["list",rX,["paragraph","reference","blockquote"]],["reference",iX],["html_block",bX,["paragraph","reference","blockquote"]],["heading",vX,["paragraph","reference","blockquote"]],["lheading",wX],["paragraph",kX]];function xg(){this.ruler=new Tr;for(let t=0;t<kp.length;t++)this.ruler.push(kp[t][0],kp[t][1],{alt:(kp[t][2]||[]).slice()})}xg.prototype.tokenize=function(t,e,n){const r=this.ruler.getRules(""),i=r.length,o=t.md.options.maxNesting;let s=e,a=!1;for(;s<n&&(t.line=s=t.skipEmptyLines(s),!(s>=n||t.sCount[s]<t.blkIndent));){if(t.level>=o){t.line=n;break}const l=t.line;let u=!1;for(let c=0;c<i;c++)if(u=r[c](t,s,n,!1),u){if(l>=t.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),s=t.line,s<n&&t.isEmpty(s)&&(a=!0,s++,t.line=s)}};xg.prototype.parse=function(t,e,n,r){if(!t)return;const i=new this.State(t,e,n,r);this.tokenize(i,i.line,i.lineMax)};xg.prototype.State=Co;function _h(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}_h.prototype.pushPending=function(){const t=new Pi("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};_h.prototype.push=function(t,e,n){this.pending&&this.pushPending();const r=new Pi(t,e,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};_h.prototype.scanDelims=function(t,e){const n=this.posMax,r=this.src.charCodeAt(t),i=t>0?this.src.charCodeAt(t-1):32;let o=t;for(;o<n&&this.src.charCodeAt(o)===r;)o++;const s=o-t,a=o<n?this.src.charCodeAt(o):32,l=Jd(i)||Wd(String.fromCharCode(i)),u=Jd(a)||Wd(String.fromCharCode(a)),c=Hd(i),f=Hd(a),d=!f&&(!u||c||l),h=!c&&(!l||f||u);return{can_open:d&&(e||!h||l),can_close:h&&(e||!d||u),length:s}};_h.prototype.Token=Pi;function xX(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function EX(t,e){let n=t.pos;for(;n<t.posMax&&!xX(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}const SX=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function CX(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;const n=t.pos,r=t.posMax;if(n+3>r||t.src.charCodeAt(n)!==58||t.src.charCodeAt(n+1)!==47||t.src.charCodeAt(n+2)!==47)return!1;const i=t.pending.match(SX);if(!i)return!1;const o=i[1],s=t.md.linkify.matchAtStart(t.src.slice(n-o.length));if(!s)return!1;let a=s.url;if(a.length<=o.length)return!1;a=a.replace(/\*+$/,"");const l=t.md.normalizeLink(a);if(!t.md.validateLink(l))return!1;if(!e){t.pending=t.pending.slice(0,-o.length);const u=t.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const c=t.push("text","",0);c.content=t.md.normalizeLinkText(a);const f=t.push("link_close","a",-1);f.markup="linkify",f.info="auto"}return t.pos+=a.length-o.length,!0}function _X(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==10)return!1;const r=t.pending.length-1,i=t.posMax;if(!e)if(r>=0&&t.pending.charCodeAt(r)===32)if(r>=1&&t.pending.charCodeAt(r-1)===32){let o=r-1;for(;o>=1&&t.pending.charCodeAt(o-1)===32;)o--;t.pending=t.pending.slice(0,o),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(n++;n<i&&wt(t.src.charCodeAt(n));)n++;return t.pos=n,!0}const k3=[];for(let t=0;t<256;t++)k3.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){k3[t.charCodeAt(0)]=1});function AX(t,e){let n=t.pos;const r=t.posMax;if(t.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let i=t.src.charCodeAt(n);if(i===10){for(e||t.push("hardbreak","br",0),n++;n<r&&(i=t.src.charCodeAt(n),!!wt(i));)n++;return t.pos=n,!0}let o=t.src[n];if(i>=55296&&i<=56319&&n+1<r){const a=t.src.charCodeAt(n+1);a>=56320&&a<=57343&&(o+=t.src[n+1],n++)}const s="\\"+o;if(!e){const a=t.push("text_special","",0);i<256&&k3[i]!==0?a.content=o:a.content=s,a.markup=s,a.info="escape"}return t.pos=n+1,!0}function TX(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==96)return!1;const i=n;n++;const o=t.posMax;for(;n<o&&t.src.charCodeAt(n)===96;)n++;const s=t.src.slice(i,n),a=s.length;if(t.backticksScanned&&(t.backticks[a]||0)<=i)return e||(t.pending+=s),t.pos+=a,!0;let l=n,u;for(;(u=t.src.indexOf("`",l))!==-1;){for(l=u+1;l<o&&t.src.charCodeAt(l)===96;)l++;const c=l-u;if(c===a){if(!e){const f=t.push("code_inline","code",0);f.markup=s,f.content=t.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=l,!0}t.backticks[c]=u}return t.backticksScanned=!0,e||(t.pending+=s),t.pos+=a,!0}function MX(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==126)return!1;const i=t.scanDelims(t.pos,!0);let o=i.length;const s=String.fromCharCode(r);if(o<2)return!1;let a;o%2&&(a=t.push("text","",0),a.content=s,o--);for(let l=0;l<o;l+=2)a=t.push("text","",0),a.content=s+s,t.delimiters.push({marker:r,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0}function z4(t,e){let n;const r=[],i=e.length;for(let o=0;o<i;o++){const s=e[o];if(s.marker!==126||s.end===-1)continue;const a=e[s.end];n=t.tokens[s.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=t.tokens[a.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",t.tokens[a.token-1].type==="text"&&t.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const o=r.pop();let s=o+1;for(;s<t.tokens.length&&t.tokens[s].type==="s_close";)s++;s--,o!==s&&(n=t.tokens[s],t.tokens[s]=t.tokens[o],t.tokens[o]=n)}}function OX(t){const e=t.tokens_meta,n=t.tokens_meta.length;z4(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&z4(t,e[r].delimiters)}const kN={tokenize:MX,postProcess:OX};function DX(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==95&&r!==42)return!1;const i=t.scanDelims(t.pos,r===42);for(let o=0;o<i.length;o++){const s=t.push("text","",0);s.content=String.fromCharCode(r),t.delimiters.push({marker:r,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return t.pos+=i.length,!0}function j4(t,e){const n=e.length;for(let r=n-1;r>=0;r--){const i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const o=e[i.end],s=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===o.token+1,a=String.fromCharCode(i.marker),l=t.tokens[i.token];l.type=s?"strong_open":"em_open",l.tag=s?"strong":"em",l.nesting=1,l.markup=s?a+a:a,l.content="";const u=t.tokens[o.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?a+a:a,u.content="",s&&(t.tokens[e[r-1].token].content="",t.tokens[e[i.end+1].token].content="",r--)}}function NX(t){const e=t.tokens_meta,n=t.tokens_meta.length;j4(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&j4(t,e[r].delimiters)}const xN={tokenize:DX,postProcess:NX};function $X(t,e){let n,r,i,o,s="",a="",l=t.pos,u=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;const c=t.pos,f=t.posMax,d=t.pos+1,h=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(h<0)return!1;let p=h+1;if(p<f&&t.src.charCodeAt(p)===40){for(u=!1,p++;p<f&&(n=t.src.charCodeAt(p),!(!wt(n)&&n!==10));p++);if(p>=f)return!1;if(l=p,i=t.md.helpers.parseLinkDestination(t.src,p,t.posMax),i.ok){for(s=t.md.normalizeLink(i.str),t.md.validateLink(s)?p=i.pos:s="",l=p;p<f&&(n=t.src.charCodeAt(p),!(!wt(n)&&n!==10));p++);if(i=t.md.helpers.parseLinkTitle(t.src,p,t.posMax),p<f&&l!==p&&i.ok)for(a=i.str,p=i.pos;p<f&&(n=t.src.charCodeAt(p),!(!wt(n)&&n!==10));p++);}(p>=f||t.src.charCodeAt(p)!==41)&&(u=!0),p++}if(u){if(typeof t.env.references>"u")return!1;if(p<f&&t.src.charCodeAt(p)===91?(l=p+1,p=t.md.helpers.parseLinkLabel(t,p),p>=0?r=t.src.slice(l,p++):p=h+1):p=h+1,r||(r=t.src.slice(d,h)),o=t.env.references[kg(r)],!o)return t.pos=c,!1;s=o.href,a=o.title}if(!e){t.pos=d,t.posMax=h;const m=t.push("link_open","a",1),b=[["href",s]];m.attrs=b,a&&b.push(["title",a]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=p,t.posMax=f,!0}function IX(t,e){let n,r,i,o,s,a,l,u,c="";const f=t.pos,d=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;const h=t.pos+2,p=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(p<0)return!1;if(o=p+1,o<d&&t.src.charCodeAt(o)===40){for(o++;o<d&&(n=t.src.charCodeAt(o),!(!wt(n)&&n!==10));o++);if(o>=d)return!1;for(u=o,a=t.md.helpers.parseLinkDestination(t.src,o,t.posMax),a.ok&&(c=t.md.normalizeLink(a.str),t.md.validateLink(c)?o=a.pos:c=""),u=o;o<d&&(n=t.src.charCodeAt(o),!(!wt(n)&&n!==10));o++);if(a=t.md.helpers.parseLinkTitle(t.src,o,t.posMax),o<d&&u!==o&&a.ok)for(l=a.str,o=a.pos;o<d&&(n=t.src.charCodeAt(o),!(!wt(n)&&n!==10));o++);else l="";if(o>=d||t.src.charCodeAt(o)!==41)return t.pos=f,!1;o++}else{if(typeof t.env.references>"u")return!1;if(o<d&&t.src.charCodeAt(o)===91?(u=o+1,o=t.md.helpers.parseLinkLabel(t,o),o>=0?i=t.src.slice(u,o++):o=p+1):o=p+1,i||(i=t.src.slice(h,p)),s=t.env.references[kg(i)],!s)return t.pos=f,!1;c=s.href,l=s.title}if(!e){r=t.src.slice(h,p);const m=[];t.md.inline.parse(r,t.md,t.env,m);const b=t.push("image","img",0),y=[["src",c],["alt",""]];b.attrs=y,b.children=m,b.content=r,l&&y.push(["title",l])}return t.pos=o,t.posMax=d,!0}const RX=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,FX=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function LX(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==60)return!1;const r=t.pos,i=t.posMax;for(;;){if(++n>=i)return!1;const s=t.src.charCodeAt(n);if(s===60)return!1;if(s===62)break}const o=t.src.slice(r+1,n);if(FX.test(o)){const s=t.md.normalizeLink(o);if(!t.md.validateLink(s))return!1;if(!e){const a=t.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";const l=t.push("text","",0);l.content=t.md.normalizeLinkText(o);const u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=o.length+2,!0}if(RX.test(o)){const s=t.md.normalizeLink("mailto:"+o);if(!t.md.validateLink(s))return!1;if(!e){const a=t.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";const l=t.push("text","",0);l.content=t.md.normalizeLinkText(o);const u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=o.length+2,!0}return!1}function BX(t){return/^<a[>\s]/i.test(t)}function PX(t){return/^<\/a\s*>/i.test(t)}function zX(t){const e=t|32;return e>=97&&e<=122}function jX(t,e){if(!t.md.options.html)return!1;const n=t.posMax,r=t.pos;if(t.src.charCodeAt(r)!==60||r+2>=n)return!1;const i=t.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!zX(i))return!1;const o=t.src.slice(r).match(gX);if(!o)return!1;if(!e){const s=t.push("html_inline","",0);s.content=o[0],BX(s.content)&&t.linkLevel++,PX(s.content)&&t.linkLevel--}return t.pos+=o[0].length,!0}const qX=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,VX=/^&([a-z][a-z0-9]{1,31});/i;function UX(t,e){const n=t.pos,r=t.posMax;if(t.src.charCodeAt(n)!==38||n+1>=r)return!1;if(t.src.charCodeAt(n+1)===35){const o=t.src.slice(n).match(qX);if(o){if(!e){const s=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),a=t.push("text_special","",0);a.content=v3(s)?Mm(s):Mm(65533),a.markup=o[0],a.info="entity"}return t.pos+=o[0].length,!0}}else{const o=t.src.slice(n).match(VX);if(o){const s=pN(o[0]);if(s!==o[0]){if(!e){const a=t.push("text_special","",0);a.content=s,a.markup=o[0],a.info="entity"}return t.pos+=o[0].length,!0}}}return!1}function q4(t){const e={},n=t.length;if(!n)return;let r=0,i=-2;const o=[];for(let s=0;s<n;s++){const a=t[s];if(o.push(0),(t[r].marker!==a.marker||i!==a.token-1)&&(r=s),i=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);const l=e[a.marker][(a.open?3:0)+a.length%3];let u=r-o[r]-1,c=u;for(;u>l;u-=o[u]+1){const f=t[u];if(f.marker===a.marker&&f.open&&f.end<0){let d=!1;if((f.close||a.open)&&(f.length+a.length)%3===0&&(f.length%3!==0||a.length%3!==0)&&(d=!0),!d){const h=u>0&&!t[u-1].open?o[u-1]+1:0;o[s]=s-u+h,o[u]=h,a.open=!1,f.end=s,f.close=!1,c=-1,i=-2;break}}}c!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=c)}}function HX(t){const e=t.tokens_meta,n=t.tokens_meta.length;q4(t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&q4(e[r].delimiters)}function WX(t){let e,n,r=0;const i=t.tokens,o=t.tokens.length;for(e=n=0;e<o;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<o&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==n&&(i[n]=i[e]),n++);e!==n&&(i.length=n)}const Mb=[["text",EX],["linkify",CX],["newline",_X],["escape",AX],["backticks",TX],["strikethrough",kN.tokenize],["emphasis",xN.tokenize],["link",$X],["image",IX],["autolink",LX],["html_inline",jX],["entity",UX]],Ob=[["balance_pairs",HX],["strikethrough",kN.postProcess],["emphasis",xN.postProcess],["fragments_join",WX]];function Ah(){this.ruler=new Tr;for(let t=0;t<Mb.length;t++)this.ruler.push(Mb[t][0],Mb[t][1]);this.ruler2=new Tr;for(let t=0;t<Ob.length;t++)this.ruler2.push(Ob[t][0],Ob[t][1])}Ah.prototype.skipToken=function(t){const e=t.pos,n=this.ruler.getRules(""),r=n.length,i=t.md.options.maxNesting,o=t.cache;if(typeof o[e]<"u"){t.pos=o[e];return}let s=!1;if(t.level<i){for(let a=0;a<r;a++)if(t.level++,s=n[a](t,!0),t.level--,s){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;s||t.pos++,o[e]=t.pos};Ah.prototype.tokenize=function(t){const e=this.ruler.getRules(""),n=e.length,r=t.posMax,i=t.md.options.maxNesting;for(;t.pos<r;){const o=t.pos;let s=!1;if(t.level<i){for(let a=0;a<n;a++)if(s=e[a](t,!1),s){if(o>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(t.pos>=r)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};Ah.prototype.parse=function(t,e,n,r){const i=new this.State(t,e,n,r);this.tokenize(i);const o=this.ruler2.getRules(""),s=o.length;for(let a=0;a<s;a++)o[a](i)};Ah.prototype.State=_h;function JX(t){const e={};t=t||{},e.src_Any=uN.source,e.src_Cc=cN.source,e.src_Z=dN.source,e.src_P=y3.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const n="[><]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function Iw(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t}function Eg(t){return Object.prototype.toString.call(t)}function KX(t){return Eg(t)==="[object String]"}function ZX(t){return Eg(t)==="[object Object]"}function GX(t){return Eg(t)==="[object RegExp]"}function V4(t){return Eg(t)==="[object Function]"}function YX(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const EN={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function QX(t){return Object.keys(t||{}).reduce(function(e,n){return e||EN.hasOwnProperty(n)},!1)}const XX={"http:":{validate:function(t,e,n){const r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){const r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){const r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},eee="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",tee="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function nee(t){t.__index__=-1,t.__text_cache__=""}function ree(t){return function(e,n){const r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}function U4(){return function(t,e){e.normalize(t)}}function Om(t){const e=t.re=JX(t.__opts__),n=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||n.push(eee),n.push(e.src_xn),e.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];t.__compiled__={};function o(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(t.__schemas__).forEach(function(a){const l=t.__schemas__[a];if(l===null)return;const u={validate:null,link:null};if(t.__compiled__[a]=u,ZX(l)){GX(l.validate)?u.validate=ree(l.validate):V4(l.validate)?u.validate=l.validate:o(a,l),V4(l.normalize)?u.normalize=l.normalize:l.normalize?o(a,l):u.normalize=U4();return}if(KX(l)){i.push(a);return}o(a,l)}),i.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:U4()};const s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(YX).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),nee(t)}function iee(t,e){const n=t.__index__,r=t.__last_index__,i=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function Rw(t,e){const n=new iee(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function Ur(t,e){if(!(this instanceof Ur))return new Ur(t,e);e||QX(t)&&(e=t,t={}),this.__opts__=Iw({},EN,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Iw({},XX,t),this.__compiled__={},this.__tlds__=tee,this.__tlds_replaced__=!1,this.re={},Om(this)}Ur.prototype.add=function(e,n){return this.__schemas__[e]=n,Om(this),this};Ur.prototype.set=function(e){return this.__opts__=Iw(this.__opts__,e),this};Ur.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let n,r,i,o,s,a,l,u,c;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(e))!==null;)if(o=this.testSchemaAt(e,n[2],l.lastIndex),o){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};Ur.prototype.pretest=function(e){return this.re.pretest.test(e)};Ur.prototype.testSchemaAt=function(e,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(e,r,this):0};Ur.prototype.match=function(e){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(n.push(Rw(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)n.push(Rw(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Ur.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const n=this.re.schema_at_start.exec(e);if(!n)return null;const r=this.testSchemaAt(e,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Rw(this,0)):null};Ur.prototype.tlds=function(e,n){return e=Array.isArray(e)?e:[e],n?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,o){return r!==o[i-1]}).reverse(),Om(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Om(this),this)};Ur.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Ur.prototype.onCompile=function(){};const qu=2147483647,so=36,x3=1,Kd=26,oee=38,see=700,SN=72,CN=128,_N="-",aee=/^xn--/,lee=/[^\0-\x7F]/,uee=/[\x2E\u3002\uFF0E\uFF61]/g,cee={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Db=so-x3,ao=Math.floor,Nb=String.fromCharCode;function Ds(t){throw new RangeError(cee[t])}function fee(t,e){const n=[];let r=t.length;for(;r--;)n[r]=e(t[r]);return n}function AN(t,e){const n=t.split("@");let r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(uee,".");const i=t.split("."),o=fee(i,e).join(".");return r+o}function TN(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const o=t.charCodeAt(n++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}const dee=t=>String.fromCodePoint(...t),hee=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:so},H4=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},MN=function(t,e,n){let r=0;for(t=n?ao(t/see):t>>1,t+=ao(t/e);t>Db*Kd>>1;r+=so)t=ao(t/Db);return ao(r+(Db+1)*t/(t+oee))},ON=function(t){const e=[],n=t.length;let r=0,i=CN,o=SN,s=t.lastIndexOf(_N);s<0&&(s=0);for(let a=0;a<s;++a)t.charCodeAt(a)>=128&&Ds("not-basic"),e.push(t.charCodeAt(a));for(let a=s>0?s+1:0;a<n;){const l=r;for(let c=1,f=so;;f+=so){a>=n&&Ds("invalid-input");const d=hee(t.charCodeAt(a++));d>=so&&Ds("invalid-input"),d>ao((qu-r)/c)&&Ds("overflow"),r+=d*c;const h=f<=o?x3:f>=o+Kd?Kd:f-o;if(d<h)break;const p=so-h;c>ao(qu/p)&&Ds("overflow"),c*=p}const u=e.length+1;o=MN(r-l,u,l==0),ao(r/u)>qu-i&&Ds("overflow"),i+=ao(r/u),r%=u,e.splice(r++,0,i)}return String.fromCodePoint(...e)},DN=function(t){const e=[];t=TN(t);const n=t.length;let r=CN,i=0,o=SN;for(const l of t)l<128&&e.push(Nb(l));const s=e.length;let a=s;for(s&&e.push(_N);a<n;){let l=qu;for(const c of t)c>=r&&c<l&&(l=c);const u=a+1;l-r>ao((qu-i)/u)&&Ds("overflow"),i+=(l-r)*u,r=l;for(const c of t)if(c<r&&++i>qu&&Ds("overflow"),c===r){let f=i;for(let d=so;;d+=so){const h=d<=o?x3:d>=o+Kd?Kd:d-o;if(f<h)break;const p=f-h,m=so-h;e.push(Nb(H4(h+p%m,0))),f=ao(p/m)}e.push(Nb(H4(f,0))),o=MN(i,u,a===s),i=0,++a}++i,++r}return e.join("")},pee=function(t){return AN(t,function(e){return aee.test(e)?ON(e.slice(4).toLowerCase()):e})},mee=function(t){return AN(t,function(e){return lee.test(e)?"xn--"+DN(e):e})},NN={version:"2.3.1",ucs2:{decode:TN,encode:dee},decode:ON,encode:DN,toASCII:mee,toUnicode:pee},gee={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},yee={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},bee={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},vee={default:gee,zero:yee,commonmark:bee},wee=/^(vbscript|javascript|file|data):/,kee=/^data:image\/(gif|png|jpeg|webp);/;function xee(t){const e=t.trim().toLowerCase();return wee.test(e)?kee.test(e):!0}const $N=["http:","https:","mailto:"];function Eee(t){const e=g3(t,!0);if(e.hostname&&(!e.protocol||$N.indexOf(e.protocol)>=0))try{e.hostname=NN.toASCII(e.hostname)}catch{}return Ch(m3(e))}function See(t){const e=g3(t,!0);if(e.hostname&&(!e.protocol||$N.indexOf(e.protocol)>=0))try{e.hostname=NN.toUnicode(e.hostname)}catch{}return yc(m3(e),yc.defaultChars+"%")}function gi(t,e){if(!(this instanceof gi))return new gi(t,e);e||b3(t)||(e=t||{},t="default"),this.inline=new Ah,this.block=new xg,this.core=new w3,this.renderer=new Bc,this.linkify=new Ur,this.validateLink=xee,this.normalizeLink=Eee,this.normalizeLinkText=See,this.utils=_Q,this.helpers=wg({},OQ),this.options={},this.configure(t),e&&this.set(e)}gi.prototype.set=function(t){return wg(this.options,t),this};gi.prototype.configure=function(t){const e=this;if(b3(t)){const n=t;if(t=vee[n],!t)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};gi.prototype.enable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(t,!0))},this),n=n.concat(this.inline.ruler2.enable(t,!0));const r=t.filter(function(i){return n.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};gi.prototype.disable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(t,!0))},this),n=n.concat(this.inline.ruler2.disable(t,!0));const r=t.filter(function(i){return n.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};gi.prototype.use=function(t){const e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};gi.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");const n=new this.core.State(t,this,e);return this.core.process(n),n.tokens};gi.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};gi.prototype.parseInline=function(t,e){const n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens};gi.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};const Cee=new GO({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:t=>({params:t.getAttribute("data-params")||""})}],toDOM(t){return["pre",t.attrs.params?{"data-params":t.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1,tight:t.hasAttribute("data-tight")}}}],toDOM(t){return["ol",{start:t.attrs.order==1?null:t.attrs.order,"data-tight":t.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:t=>({tight:t.hasAttribute("data-tight")})}],toDOM(t){return["ul",{"data-tight":t.attrs.tight?"true":null},0]}},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM(t){return["img",t.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:t=>t.type.name=="em"}],toDOM(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name=="strong"},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM(t){return["a",t.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}});function _ee(t,e){if(t.isText&&e.isText&&dt.sameSet(t.marks,e.marks))return t.withText(t.text+e.text)}let Aee=class{constructor(e,n){this.schema=e,this.tokenHandlers=n,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:dt.none}]}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(!e)return;let n=this.top(),r=n.content,i=r[r.length-1],o=this.schema.text(e,n.marks),s;i&&(s=_ee(i,o))?r[r.length-1]=s:r.push(o)}openMark(e){let n=this.top();n.marks=e.addToSet(n.marks)}closeMark(e){let n=this.top();n.marks=e.removeFromSet(n.marks)}parseTokens(e){for(let n=0;n<e.length;n++){let r=e[n],i=this.tokenHandlers[r.type];if(!i)throw new Error("Token type `"+r.type+"` not supported by Markdown parser");i(this,r,e,n)}}addNode(e,n,r){let i=this.top(),o=e.createAndFill(n,r,i?i.marks:[]);return o?(this.push(o),o):null}openNode(e,n){this.stack.push({type:e,attrs:n,content:[],marks:dt.none})}closeNode(){let e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}};function cf(t,e,n,r){return t.getAttrs?t.getAttrs(e,n,r):t.attrs instanceof Function?t.attrs(e):t.attrs}function $b(t,e){return t.noCloseToken||e=="code_inline"||e=="code_block"||e=="fence"}function W4(t){return t[t.length-1]==`
`?t.slice(0,t.length-1):t}function Ib(){}function Tee(t,e){let n=Object.create(null);for(let r in e){let i=e[r];if(i.block){let o=t.nodeType(i.block);$b(i,r)?n[r]=(s,a,l,u)=>{s.openNode(o,cf(i,a,l,u)),s.addText(W4(a.content)),s.closeNode()}:(n[r+"_open"]=(s,a,l,u)=>s.openNode(o,cf(i,a,l,u)),n[r+"_close"]=s=>s.closeNode())}else if(i.node){let o=t.nodeType(i.node);n[r]=(s,a,l,u)=>s.addNode(o,cf(i,a,l,u))}else if(i.mark){let o=t.marks[i.mark];$b(i,r)?n[r]=(s,a,l,u)=>{s.openMark(o.create(cf(i,a,l,u))),s.addText(W4(a.content)),s.closeMark(o)}:(n[r+"_open"]=(s,a,l,u)=>s.openMark(o.create(cf(i,a,l,u))),n[r+"_close"]=s=>s.closeMark(o))}else if(i.ignore)$b(i,r)?n[r]=Ib:(n[r+"_open"]=Ib,n[r+"_close"]=Ib);else throw new RangeError("Unrecognized parsing spec "+JSON.stringify(i))}return n.text=(r,i)=>r.addText(i.content),n.inline=(r,i)=>r.parseTokens(i.children),n.softbreak=n.softbreak||(r=>r.addText(" ")),n}let Mee=class{constructor(e,n,r){this.schema=e,this.tokenizer=n,this.tokens=r,this.tokenHandlers=Tee(e,r)}parse(e,n={}){let r=new Aee(this.schema,this.tokenHandlers),i;r.parseTokens(this.tokenizer.parse(e,n));do i=r.closeNode();while(r.stack.length);return i||this.schema.topNodeType.createAndFill()}};function J4(t,e){for(;++e<t.length;)if(t[e].type!="list_item_open")return t[e].hidden;return!1}new Mee(Cee,gi("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(t,e,n)=>({tight:J4(e,n)})},ordered_list:{block:"ordered_list",getAttrs:(t,e,n)=>({order:+t.attrGet("start")||1,tight:J4(e,n)})},heading:{block:"heading",getAttrs:t=>({level:+t.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:t=>({params:t.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:t=>({src:t.attrGet("src"),title:t.attrGet("title")||null,alt:t.children[0]&&t.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:t=>({href:t.attrGet("href"),title:t.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});const Oee={open:"",close:"",mixable:!0};let Dee=class{constructor(e,n,r={}){this.nodes=e,this.marks=n,this.options=r}serialize(e,n={}){n=Object.assign({},this.options,n);let r=new $ee(this.nodes,this.marks,n);return r.renderContent(e),r.out}};const IN=new Dee({blockquote(t,e){t.wrapBlock("> ",null,e,()=>t.renderContent(e))},code_block(t,e){const n=e.textContent.match(/`{3,}/gm),r=n?n.sort().slice(-1)[0]+"`":"```";t.write(r+(e.attrs.params||"")+`
`),t.text(e.textContent,!1),t.write(`
`),t.write(r),t.closeBlock(e)},heading(t,e){t.write(t.repeat("#",e.attrs.level)+" "),t.renderInline(e,!1),t.closeBlock(e)},horizontal_rule(t,e){t.write(e.attrs.markup||"---"),t.closeBlock(e)},bullet_list(t,e){t.renderList(e,"  ",()=>(e.attrs.bullet||"*")+" ")},ordered_list(t,e){let n=e.attrs.order||1,r=String(n+e.childCount-1).length,i=t.repeat(" ",r+2);t.renderList(e,i,o=>{let s=String(n+o);return t.repeat(" ",r-s.length)+s+". "})},list_item(t,e){t.renderContent(e)},paragraph(t,e){t.renderInline(e),t.closeBlock(e)},image(t,e){t.write("!["+t.esc(e.attrs.alt||"")+"]("+e.attrs.src.replace(/[\(\)]/g,"\\$&")+(e.attrs.title?' "'+e.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(t,e,n,r){for(let i=r+1;i<n.childCount;i++)if(n.child(i).type!=e.type){t.write(`\\
`);return}},text(t,e){t.text(e.text,!t.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open(t,e,n,r){return t.inAutolink=Nee(e,n,r),t.inAutolink?"<":"["},close(t,e,n,r){let{inAutolink:i}=t;return t.inAutolink=void 0,i?">":"]("+e.attrs.href.replace(/[\(\)"]/g,"\\$&")+(e.attrs.title?` "${e.attrs.title.replace(/"/g,'\\"')}"`:"")+")"},mixable:!0},code:{open(t,e,n,r){return K4(n.child(r),-1)},close(t,e,n,r){return K4(n.child(r-1),1)},escape:!1}});function K4(t,e){let n=/`+/g,r,i=0;if(t.isText)for(;r=n.exec(t.text);)i=Math.max(i,r[0].length);let o=i>0&&e>0?" `":"`";for(let s=0;s<i;s++)o+="`";return i>0&&e<0&&(o+=" "),o}function Nee(t,e,n){if(t.attrs.title||!/^\w+:/.test(t.attrs.href))return!1;let r=e.child(n);return!r.isText||r.text!=t.attrs.href||r.marks[r.marks.length-1]!=t?!1:n==e.childCount-1||!t.isInSet(e.child(n+1).marks)}let $ee=class{constructor(e,n,r){this.nodes=e,this.marks=n,this.options=r,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists>"u"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName>"u"&&(this.options.hardBreakNodeName="hard_break")}flushClose(e=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),e>1){let n=this.delim,r=/\s+$/.exec(n);r&&(n=n.slice(0,n.length-r[0].length));for(let i=1;i<e;i++)this.out+=n+`
`}this.closed=null}}getMark(e){let n=this.marks[e];if(!n){if(this.options.strict!==!1)throw new Error(`Mark type \`${e}\` not supported by Markdown renderer`);n=Oee}return n}wrapBlock(e,n,r,i){let o=this.delim;this.write(n??e),this.delim+=e,i(),this.delim=o,this.closeBlock(r)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e,n=!0){let r=e.split(`
`);for(let i=0;i<r.length;i++)this.write(),!n&&r[i][0]=="["&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=n?this.esc(r[i],this.atBlockStart):r[i],i!=r.length-1&&(this.out+=`
`)}render(e,n,r){if(this.nodes[e.type.name])this.nodes[e.type.name](this,e,n,r);else{if(this.options.strict!==!1)throw new Error("Token type `"+e.type.name+"` not supported by Markdown renderer");e.type.isLeaf||(e.type.inlineContent?this.renderInline(e):this.renderContent(e),e.isBlock&&this.closeBlock(e))}}renderContent(e){e.forEach((n,r,i)=>this.render(n,e,i))}renderInline(e,n=!0){this.atBlockStart=n;let r=[],i="",o=(s,a,l)=>{let u=s?s.marks:[];s&&s.type.name===this.options.hardBreakNodeName&&(u=u.filter(m=>{if(l+1==e.childCount)return!1;let b=e.child(l+1);return m.isInSet(b.marks)&&(!b.isText||/\S/.test(b.text))}));let c=i;if(i="",s&&s.isText&&u.some(m=>{let b=this.getMark(m.type.name);return b&&b.expelEnclosingWhitespace&&!m.isInSet(r)})){let[m,b,y]=/^(\s*)(.*)$/m.exec(s.text);b&&(c+=b,s=y?s.withText(y):null,s||(u=r))}if(s&&s.isText&&u.some(m=>{let b=this.getMark(m.type.name);return b&&b.expelEnclosingWhitespace&&(l==e.childCount-1||!m.isInSet(e.child(l+1).marks))})){let[m,b,y]=/^(.*?)(\s*)$/m.exec(s.text);y&&(i=y,s=b?s.withText(b):null,s||(u=r))}let f=u.length?u[u.length-1]:null,d=f&&this.getMark(f.type.name).escape===!1,h=u.length-(d?1:0);e:for(let m=0;m<h;m++){let b=u[m];if(!this.getMark(b.type.name).mixable)break;for(let y=0;y<r.length;y++){let v=r[y];if(!this.getMark(v.type.name).mixable)break;if(b.eq(v)){m>y?u=u.slice(0,y).concat(b).concat(u.slice(y,m)).concat(u.slice(m+1,h)):y>m&&(u=u.slice(0,m).concat(u.slice(m+1,y)).concat(b).concat(u.slice(y,h)));continue e}}}let p=0;for(;p<Math.min(r.length,h)&&u[p].eq(r[p]);)++p;for(;p<r.length;)this.text(this.markString(r.pop(),!1,e,l),!1);if(c&&this.text(c),s){for(;r.length<h;){let m=u[r.length];r.push(m),this.text(this.markString(m,!0,e,l),!1),this.atBlockStart=!1}d&&s.isText?this.text(this.markString(f,!0,e,l)+s.text+this.markString(f,!1,e,l+1),!1):this.render(s,e,l),this.atBlockStart=!1}s!=null&&s.isText&&s.nodeSize>0&&(this.atBlockStart=!1)};e.forEach(o),o(null,0,e.childCount),this.atBlockStart=!1}renderList(e,n,r){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let i=typeof e.attrs.tight<"u"?e.attrs.tight:this.options.tightLists,o=this.inTightList;this.inTightList=i,e.forEach((s,a,l)=>{l&&i&&this.flushClose(1),this.wrapBlock(n,r(l),e,()=>this.render(s,e,l))}),this.inTightList=o}esc(e,n=!1){return e=e.replace(/[`*\\~\[\]_]/g,(r,i)=>r=="_"&&i>0&&i+1<e.length&&e[i-1].match(/\w/)&&e[i+1].match(/\w/)?r:"\\"+r),n&&(e=e.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(e=e.replace(this.options.escapeExtraCharacters,"\\$&")),e}quote(e){let n=e.indexOf('"')==-1?'""':e.indexOf("'")==-1?"''":"()";return n[0]+e+n[1]}repeat(e,n){let r="";for(let i=0;i<n;i++)r+=e;return r}markString(e,n,r,i){let o=this.getMark(e.type.name),s=n?o.open:o.close;return typeof s=="string"?s:s(this,e,r,i)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}};const Iee=Ri.create({name:"image",draggable:!0,addOptions(){return{inline:!1,defaultUploadUrl:"https://nostr.build",defaultUploadType:"nip96"}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},addStorage(){return{markdown:{serialize:IN.nodes.image,parse:{}}}},addAttributes(){return{src:{default:null},alt:{default:null},hash:{default:null},file:{default:null},sha256:{default:null},uploading:{default:!1},uploadError:{default:null},uploadType:{default:this.options.defaultUploadType},uploadUrl:{default:this.options.defaultUploadUrl}}},parseHTML(){return[{tag:"img[src]"}]},renderText(t){return t.node.attrs.src},renderHTML({HTMLAttributes:t}){return["img",t]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}}}),Ree="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Fee="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",vc=(t,e)=>{for(const n in e)t[n]=e[n];return t},Fw="numeric",Lw="ascii",Bw="alpha",b0="asciinumeric",xp="alphanumeric",Pw="domain",RN="emoji",Lee="scheme",Bee="slashscheme",Z4="whitespace";function Pee(t,e){return t in e||(e[t]=[]),e[t]}function Xa(t,e,n){e[Fw]&&(e[b0]=!0,e[xp]=!0),e[Lw]&&(e[b0]=!0,e[Bw]=!0),e[b0]&&(e[xp]=!0),e[Bw]&&(e[xp]=!0),e[xp]&&(e[Pw]=!0),e[RN]&&(e[Pw]=!0);for(const r in e){const i=Pee(r,n);i.indexOf(t)<0&&i.push(t)}}function zee(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function hr(t){t===void 0&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}hr.groups={};hr.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(t))return o}return e.jd},has(t,e){return e===void 0&&(e=!1),e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||hr.groups;let i;return e&&e.j?i=e:(i=new hr(e),n&&r&&Xa(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const o=t.length;if(!o)return i;for(let s=0;s<o-1;s++)i=i.tt(t[s]);return i.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||hr.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const o=e;let s,a=i.go(t);if(a?(s=new hr,vc(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new hr,o){if(r)if(s.t&&typeof s.t=="string"){const l=vc(zee(s.t,r),n);Xa(o,l,r)}else n&&Xa(o,n,r);s.t=o}return i.j[t]=s,s}};const ze=(t,e,n,r,i)=>t.ta(e,n,r,i),Yr=(t,e,n,r,i)=>t.tr(e,n,r,i),G4=(t,e,n,r,i)=>t.ts(e,n,r,i),ie=(t,e,n,r,i)=>t.tt(e,n,r,i),$o="WORD",zw="UWORD",Zd="LOCALHOST",jw="TLD",qw="UTLD",v0="SCHEME",du="SLASH_SCHEME",E3="NUM",FN="WS",S3="NL",ld="OPENBRACE",ud="CLOSEBRACE",Dm="OPENBRACKET",Nm="CLOSEBRACKET",$m="OPENPAREN",Im="CLOSEPAREN",Rm="OPENANGLEBRACKET",Fm="CLOSEANGLEBRACKET",Lm="FULLWIDTHLEFTPAREN",Bm="FULLWIDTHRIGHTPAREN",Pm="LEFTCORNERBRACKET",zm="RIGHTCORNERBRACKET",jm="LEFTWHITECORNERBRACKET",qm="RIGHTWHITECORNERBRACKET",Vm="FULLWIDTHLESSTHAN",Um="FULLWIDTHGREATERTHAN",Hm="AMPERSAND",Wm="APOSTROPHE",Jm="ASTERISK",Ns="AT",Km="BACKSLASH",Zm="BACKTICK",Gm="CARET",Ps="COLON",C3="COMMA",Ym="DOLLAR",Ji="DOT",Qm="EQUALS",_3="EXCLAMATION",Ki="HYPHEN",Xm="PERCENT",e1="PIPE",t1="PLUS",n1="POUND",r1="QUERY",A3="QUOTE",T3="SEMI",Zi="SLASH",cd="TILDE",i1="UNDERSCORE",LN="EMOJI",o1="SYM";var BN=Object.freeze({__proto__:null,WORD:$o,UWORD:zw,LOCALHOST:Zd,TLD:jw,UTLD:qw,SCHEME:v0,SLASH_SCHEME:du,NUM:E3,WS:FN,NL:S3,OPENBRACE:ld,CLOSEBRACE:ud,OPENBRACKET:Dm,CLOSEBRACKET:Nm,OPENPAREN:$m,CLOSEPAREN:Im,OPENANGLEBRACKET:Rm,CLOSEANGLEBRACKET:Fm,FULLWIDTHLEFTPAREN:Lm,FULLWIDTHRIGHTPAREN:Bm,LEFTCORNERBRACKET:Pm,RIGHTCORNERBRACKET:zm,LEFTWHITECORNERBRACKET:jm,RIGHTWHITECORNERBRACKET:qm,FULLWIDTHLESSTHAN:Vm,FULLWIDTHGREATERTHAN:Um,AMPERSAND:Hm,APOSTROPHE:Wm,ASTERISK:Jm,AT:Ns,BACKSLASH:Km,BACKTICK:Zm,CARET:Gm,COLON:Ps,COMMA:C3,DOLLAR:Ym,DOT:Ji,EQUALS:Qm,EXCLAMATION:_3,HYPHEN:Ki,PERCENT:Xm,PIPE:e1,PLUS:t1,POUND:n1,QUERY:r1,QUOTE:A3,SEMI:T3,SLASH:Zi,TILDE:cd,UNDERSCORE:i1,EMOJI:LN,SYM:o1});const Yl=/[a-z]/,Rb=new RegExp("\\p{L}","u"),Fb=new RegExp("\\p{Emoji}","u"),Lb=/\d/,Y4=/\s/,Q4=`
`,jee="",qee="";let Ep=null,Sp=null;function Vee(t){t===void 0&&(t=[]);const e={};hr.groups=e;const n=new hr;Ep==null&&(Ep=X4(Ree)),Sp==null&&(Sp=X4(Fee)),ie(n,"'",Wm),ie(n,"{",ld),ie(n,"}",ud),ie(n,"[",Dm),ie(n,"]",Nm),ie(n,"(",$m),ie(n,")",Im),ie(n,"<",Rm),ie(n,">",Fm),ie(n,"",Lm),ie(n,"",Bm),ie(n,"",Pm),ie(n,"",zm),ie(n,"",jm),ie(n,"",qm),ie(n,"",Vm),ie(n,"",Um),ie(n,"&",Hm),ie(n,"*",Jm),ie(n,"@",Ns),ie(n,"`",Zm),ie(n,"^",Gm),ie(n,":",Ps),ie(n,",",C3),ie(n,"$",Ym),ie(n,".",Ji),ie(n,"=",Qm),ie(n,"!",_3),ie(n,"-",Ki),ie(n,"%",Xm),ie(n,"|",e1),ie(n,"+",t1),ie(n,"#",n1),ie(n,"?",r1),ie(n,'"',A3),ie(n,"/",Zi),ie(n,";",T3),ie(n,"~",cd),ie(n,"_",i1),ie(n,"\\",Km);const r=Yr(n,Lb,E3,{[Fw]:!0});Yr(r,Lb,r);const i=Yr(n,Yl,$o,{[Lw]:!0});Yr(i,Yl,i);const o=Yr(n,Rb,zw,{[Bw]:!0});Yr(o,Yl),Yr(o,Rb,o);const s=Yr(n,Y4,FN,{[Z4]:!0});ie(n,Q4,S3,{[Z4]:!0}),ie(s,Q4),Yr(s,Y4,s);const a=Yr(n,Fb,LN,{[RN]:!0});Yr(a,Fb,a),ie(a,jee,a);const l=ie(a,qee);Yr(l,Fb,a);const u=[[Yl,i]],c=[[Yl,null],[Rb,o]];for(let f=0;f<Ep.length;f++)vs(n,Ep[f],jw,$o,u);for(let f=0;f<Sp.length;f++)vs(n,Sp[f],qw,zw,c);Xa(jw,{tld:!0,ascii:!0},e),Xa(qw,{utld:!0,alpha:!0},e),vs(n,"file",v0,$o,u),vs(n,"mailto",v0,$o,u),vs(n,"http",du,$o,u),vs(n,"https",du,$o,u),vs(n,"ftp",du,$o,u),vs(n,"ftps",du,$o,u),Xa(v0,{scheme:!0,ascii:!0},e),Xa(du,{slashscheme:!0,ascii:!0},e),t=t.sort((f,d)=>f[0]>d[0]?1:-1);for(let f=0;f<t.length;f++){const d=t[f][0],p=t[f][1]?{[Lee]:!0}:{[Bee]:!0};d.indexOf("-")>=0?p[Pw]=!0:Yl.test(d)?Lb.test(d)?p[b0]=!0:p[Lw]=!0:p[Fw]=!0,G4(n,d,d,p)}return G4(n,"localhost",Zd,{ascii:!0}),n.jd=new hr(o1),{start:n,tokens:vc({groups:e},BN)}}function Uee(t,e){const n=Hee(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let o=0,s=0;for(;s<r;){let a=t,l=null,u=0,c=null,f=-1,d=-1;for(;s<r&&(l=a.go(n[s]));)a=l,a.accepts()?(f=0,d=0,c=a):f>=0&&(f+=n[s].length,d++),u+=n[s].length,o+=n[s].length,s++;o-=f,s-=d,u-=f,i.push({t:c.t,v:e.slice(o-u,o),s:o-u,e:o})}return i}function Hee(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),o,s=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function vs(t,e,n,r,i){let o;const s=e.length;for(let a=0;a<s-1;a++){const l=e[a];t.j[l]?o=t.j[l]:(o=new hr(r),o.jr=i.slice(),t.j[l]=o),t=o}return o=new hr(n),o.jr=i.slice(),t.j[e[s-1]]=o,o}function X4(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let o=0;for(;i.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+o),10);s>0;s--)n.pop();r+=o}else n.push(t[r]),r++}return e}const Gd={defaultProtocol:"http",events:null,format:e_,formatHref:e_,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function M3(t,e){e===void 0&&(e=null);let n=vc({},Gd);t&&(n=vc(n,t instanceof M3?t.o:t));const r=n.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}M3.prototype={o:Gd,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Gd[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function e_(t){return t}function PN(t,e){this.t="token",this.v=t,this.tk=e}PN.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t){return t===void 0&&(t=Gd.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),o=this.toFormattedString(t),s={},a=t.get("className",n,e),l=t.get("target",n,e),u=t.get("rel",n,e),c=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return s.href=r,a&&(s.class=a),l&&(s.target=l),u&&(s.rel=u),c&&vc(s,c),{tagName:i,attributes:s,content:o,eventListeners:f}}};function Sg(t,e){class n extends PN{constructor(i,o){super(i,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const t_=Sg("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),n_=Sg("text"),Wee=Sg("nl"),Cp=Sg("url",{isLink:!0,toHref(t){return t===void 0&&(t=Gd.defaultProtocol),this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Zd&&t[1].t===Ps}}),Qr=t=>new hr(t);function Jee(t){let{groups:e}=t;const n=e.domain.concat([Hm,Jm,Ns,Km,Zm,Gm,Ym,Qm,Ki,E3,Xm,e1,t1,n1,Zi,o1,cd,i1]),r=[Wm,Ps,C3,Ji,_3,r1,A3,T3,Rm,Fm,ld,ud,Nm,Dm,$m,Im,Lm,Bm,Pm,zm,jm,qm,Vm,Um],i=[Hm,Wm,Jm,Km,Zm,Gm,Ym,Qm,Ki,ld,ud,Xm,e1,t1,n1,r1,Zi,o1,cd,i1],o=Qr(),s=ie(o,cd);ze(s,i,s),ze(s,e.domain,s);const a=Qr(),l=Qr(),u=Qr();ze(o,e.domain,a),ze(o,e.scheme,l),ze(o,e.slashscheme,u),ze(a,i,s),ze(a,e.domain,a);const c=ie(a,Ns);ie(s,Ns,c),ie(l,Ns,c),ie(u,Ns,c);const f=ie(s,Ji);ze(f,i,s),ze(f,e.domain,s);const d=Qr();ze(c,e.domain,d),ze(d,e.domain,d);const h=ie(d,Ji);ze(h,e.domain,d);const p=Qr(t_);ze(h,e.tld,p),ze(h,e.utld,p),ie(c,Zd,p);const m=ie(d,Ki);ze(m,e.domain,d),ze(p,e.domain,d),ie(p,Ji,h),ie(p,Ki,m);const b=ie(p,Ps);ze(b,e.numeric,t_);const y=ie(a,Ki),v=ie(a,Ji);ze(y,e.domain,a),ze(v,i,s),ze(v,e.domain,a);const w=Qr(Cp);ze(v,e.tld,w),ze(v,e.utld,w),ze(w,e.domain,a),ze(w,i,s),ie(w,Ji,v),ie(w,Ki,y),ie(w,Ns,c);const g=ie(w,Ps),x=Qr(Cp);ze(g,e.numeric,x);const k=Qr(Cp),E=Qr();ze(k,n,k),ze(k,r,E),ze(E,n,k),ze(E,r,E),ie(w,Zi,k),ie(x,Zi,k);const D=ie(l,Ps),O=ie(u,Ps),N=ie(O,Zi),C=ie(N,Zi);ze(l,e.domain,a),ie(l,Ji,v),ie(l,Ki,y),ze(u,e.domain,a),ie(u,Ji,v),ie(u,Ki,y),ze(D,e.domain,k),ie(D,Zi,k),ze(C,e.domain,k),ze(C,n,k),ie(C,Zi,k);const R=[[ld,ud],[Dm,Nm],[$m,Im],[Rm,Fm],[Lm,Bm],[Pm,zm],[jm,qm],[Vm,Um]];for(let T=0;T<R.length;T++){const[q,A]=R[T],S=ie(k,q);ie(E,q,S),ie(S,A,k);const P=Qr(Cp);ze(S,n,P);const B=Qr();ze(S,r),ze(P,n,P),ze(P,r,B),ze(B,n,P),ze(B,r,B),ie(P,A,k),ie(B,A,k)}return ie(o,Zd,w),ie(o,S3,Wee),{start:o,tokens:BN}}function Kee(t,e,n){let r=n.length,i=0,o=[],s=[];for(;i<r;){let a=t,l=null,u=null,c=0,f=null,d=-1;for(;i<r&&!(l=a.go(n[i].t));)s.push(n[i++]);for(;i<r&&(u=l||a.go(n[i].t));)l=null,a=u,a.accepts()?(d=0,f=a):d>=0&&d++,i++,c++;if(d<0)i-=c,i<r&&(s.push(n[i]),i++);else{s.length>0&&(o.push(Bb(n_,e,s)),s=[]),i-=d,c-=d;const h=f.t,p=n.slice(i-c,i);o.push(Bb(h,e,p))}}return s.length>0&&o.push(Bb(n_,e,s)),o}function Bb(t,e,n){const r=n[0].s,i=n[n.length-1].e,o=e.slice(r,i);return new t(o,n)}const Zee=typeof console<"u"&&console&&console.warn||(()=>{}),Gee="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",At={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Yee(){hr.groups={},At.scanner=null,At.parser=null,At.tokenQueue=[],At.pluginQueue=[],At.customSchemes=[],At.initialized=!1}function r_(t,e){if(e===void 0&&(e=!1),At.initialized&&Zee(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Gee}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);At.customSchemes.push([t,e])}function Qee(){At.scanner=Vee(At.customSchemes);for(let t=0;t<At.tokenQueue.length;t++)At.tokenQueue[t][1]({scanner:At.scanner});At.parser=Jee(At.scanner.tokens);for(let t=0;t<At.pluginQueue.length;t++)At.pluginQueue[t][1]({scanner:At.scanner,parser:At.parser});At.initialized=!0}function zN(t){return At.initialized||Qee(),Kee(At.parser.start,t,Uee(At.scanner.start,t))}function O3(t,e,n){if(e===void 0&&(e=null),n===void 0&&(n=null),e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new M3(n),i=zN(t),o=[];for(let s=0;s<i.length;s++){const a=i[s];a.isLink&&(!e||a.t===e)&&r.check(a)&&o.push(a.toFormattedObject(r))}return o}function Xee(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function ete(t){return new ns({key:new rs("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(u=>u.docChanged)&&!n.doc.eq(r.doc),o=e.some(u=>u.getMeta("preventAutolink"));if(!i||o)return;const{tr:s}=r,a=yZ(n.doc,[...e]);if(CZ(a).forEach(({newRange:u})=>{const c=vZ(r.doc,u,h=>h.isTextblock);let f,d;if(c.length>1?(f=c[0],d=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ")):c.length&&r.doc.textBetween(u.from,u.to," "," ").endsWith(" ")&&(f=c[0],d=r.doc.textBetween(f.pos,u.to,void 0," ")),f&&d){const h=d.split(" ").filter(y=>y!=="");if(h.length<=0)return!1;const p=h[h.length-1],m=f.pos+d.lastIndexOf(p);if(!p)return!1;const b=zN(p).map(y=>y.toObject(t.defaultProtocol));if(!Xee(b))return!1;b.filter(y=>y.isLink).map(y=>({...y,from:m+y.start+1,to:m+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>t.validate(y.value)).forEach(y=>{OD(y.from,y.to,r.doc).some(v=>v.mark.type===t.type)||s.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!s.steps.length)return s}})}function tte(t){return new ns({key:new rs("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let s=r.target;const a=[];for(;s.nodeName!=="DIV";)a.push(s),s=s.parentNode;if(!a.find(d=>d.nodeName==="A"))return!1;const l=xZ(e.state,t.type.name),u=r.target,c=(i=u==null?void 0:u.href)!==null&&i!==void 0?i:l.href,f=(o=u==null?void 0:u.target)!==null&&o!==void 0?o:l.target;return u&&c?(window.open(c,f),!0):!1}}})}function nte(t){return new ns({key:new rs("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:o}=i,{empty:s}=o;if(s)return!1;let a="";r.content.forEach(u=>{a+=u.textContent});const l=O3(a,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===a);return!a||!l?!1:(t.editor.commands.setMark(t.type,{href:l.href}),!0)}}})}const rte=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function i_(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(rte,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}const ite=qd.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.protocols.forEach(t=>{if(typeof t=="string"){r_(t);return}r_(t.scheme,t.optionalSlashes)})},onDestroy(){Yee()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!i_(e,this.options.protocols)?!1:null}}]},renderHTML({HTMLAttributes:t}){return i_(t.href,this.options.protocols)?["a",vm(this.options.HTMLAttributes,t),0]:["a",vm(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>e().setMark(this.name,t).setMeta("preventAutolink",!0).run(),toggleLink:t=>({chain:e})=>e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[DD({find:t=>{const e=[];if(t){const{validate:n}=this.options,r=O3(t).filter(i=>i.isLink&&n(i.value));r.length&&r.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[];return this.options.autolink&&t.push(ete({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:this.options.validate})),this.options.openOnClick===!0&&t.push(tte({type:this.type})),this.options.linkOnPaste&&t.push(nte({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),ote=ite.configure({autolink:!1}).extend({addPasteRules(){return[{find:t=>{const e=[];for(const{start:n,value:r,href:i}of O3(t.replace(/\ufffc/g," "))||[])!oG(i)&&!i.startsWith("tel:")||e.push({index:n,text:r,data:{href:i}});return e},handler:t=>{var e;const{range:n,state:r,match:i}=t,{from:o,to:s}=n,{nodes:a,marks:l}=r.schema,u=this.editor.storage.nostr.imeta,c=(e=i.data)==null?void 0:e.href,f=lG(c,c,u);if(f!=="text"&&a[f]){r.tr.replaceWith(o,s,a[f].create({src:c}));return}r.tr.addMark(o,s,l.link.create({href:c}))}}]}});function Pb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function o_(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function ste(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function qo(t,...e){if(!ste(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const qn=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),ate=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ate)throw new Error("Non little-endian hardware is not supported");function lte(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function ute(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const cte=(t,e)=>(Object.assign(e,t),e),aa=16,fte=283;function D3(t){return t<<1^fte&-(t>>7)}function Tu(t,e){let n=0;for(;e>0;e>>=1)n^=t&-(e&1),t=D3(t);return n}const Vw=(()=>{let t=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=D3(r))t[n]=r;const e=new Uint8Array(256);e[0]=99;for(let n=0;n<255;n++){let r=t[255-n];r|=r<<8,e[t[n]]=(r^r>>4^r>>5^r>>6^r>>7^99)&255}return e})(),dte=Vw.map((t,e)=>Vw.indexOf(e)),hte=t=>t<<24|t>>>8,zb=t=>t<<8|t>>>24;function jN(t,e){if(t.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((u,c)=>e(t[c])),r=n.map(zb),i=r.map(zb),o=i.map(zb),s=new Uint32Array(256*256),a=new Uint32Array(256*256),l=new Uint16Array(256*256);for(let u=0;u<256;u++)for(let c=0;c<256;c++){const f=u*256+c;s[f]=n[u]^r[c],a[f]=i[u]^o[c],l[f]=t[u]<<8|t[c]}return{sbox:t,sbox2:l,T0:n,T1:r,T2:i,T3:o,T01:s,T23:a}}const N3=jN(Vw,t=>Tu(t,3)<<24|t<<16|t<<8|Tu(t,2)),qN=jN(dte,t=>Tu(t,11)<<24|Tu(t,13)<<16|Tu(t,9)<<8|Tu(t,14)),pte=(()=>{const t=new Uint8Array(16);for(let e=0,n=1;e<16;e++,n=D3(n))t[e]=n;return t})();function VN(t){qo(t);const e=t.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:n}=N3,r=qn(t),i=r.length,o=a=>lo(n,a,a,a,a),s=new Uint32Array(e+28);s.set(r);for(let a=i;a<s.length;a++){let l=s[a-1];a%i===0?l=o(hte(l))^pte[a/i-1]:i>6&&a%i===4&&(l=o(l)),s[a]=s[a-i]^l}return s}function mte(t){const e=VN(t),n=e.slice(),r=e.length,{sbox2:i}=N3,{T0:o,T1:s,T2:a,T3:l}=qN;for(let u=0;u<r;u+=4)for(let c=0;c<4;c++)n[u+c]=e[r-u-4+c];e.fill(0);for(let u=4;u<r-4;u++){const c=n[u],f=lo(i,c,c,c,c);n[u]=o[f&255]^s[f>>>8&255]^a[f>>>16&255]^l[f>>>24]}return n}function Ws(t,e,n,r,i,o){return t[n<<8&65280|r>>>8&255]^e[i>>>8&65280|o>>>24&255]}function lo(t,e,n,r,i){return t[e&255|n&65280]|t[r>>>16&255|i>>>16&65280]<<16}function s_(t,e,n,r,i){const{sbox2:o,T01:s,T23:a}=N3;let l=0;e^=t[l++],n^=t[l++],r^=t[l++],i^=t[l++];const u=t.length/4-2;for(let p=0;p<u;p++){const m=t[l++]^Ws(s,a,e,n,r,i),b=t[l++]^Ws(s,a,n,r,i,e),y=t[l++]^Ws(s,a,r,i,e,n),v=t[l++]^Ws(s,a,i,e,n,r);e=m,n=b,r=y,i=v}const c=t[l++]^lo(o,e,n,r,i),f=t[l++]^lo(o,n,r,i,e),d=t[l++]^lo(o,r,i,e,n),h=t[l++]^lo(o,i,e,n,r);return{s0:c,s1:f,s2:d,s3:h}}function gte(t,e,n,r,i){const{sbox2:o,T01:s,T23:a}=qN;let l=0;e^=t[l++],n^=t[l++],r^=t[l++],i^=t[l++];const u=t.length/4-2;for(let p=0;p<u;p++){const m=t[l++]^Ws(s,a,e,i,r,n),b=t[l++]^Ws(s,a,n,e,i,r),y=t[l++]^Ws(s,a,r,n,e,i),v=t[l++]^Ws(s,a,i,r,n,e);e=m,n=b,r=y,i=v}const c=t[l++]^lo(o,e,i,r,n),f=t[l++]^lo(o,n,e,i,r),d=t[l++]^lo(o,r,n,e,i),h=t[l++]^lo(o,i,r,n,e);return{s0:c,s1:f,s2:d,s3:h}}function UN(t,e){if(!e)return new Uint8Array(t);if(qo(e),e.length<t)throw new Error(`aes: wrong destination length, expected at least ${t}, got: ${e.length}`);return e}function yte(t){if(qo(t),t.length%aa!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${aa}`)}function bte(t,e,n){let r=t.length;const i=r%aa;if(!e&&i!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const o=qn(t);if(e){let l=aa-i;l||(l=aa),r=r+l}const s=UN(r,n),a=qn(s);return{b:o,o:a,out:s}}function vte(t,e){if(!e)return t;const n=t.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=t[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const i=t.subarray(0,-r);for(let o=0;o<r;o++)if(t[n-o-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function wte(t){const e=new Uint8Array(16),n=qn(e);e.set(t);const r=aa-t.length;for(let i=aa-r;i<aa;i++)e[i]=r;return n}const HN=cte({blockSize:16,nonceLength:16},function(e,n,r={}){qo(e),qo(n,16);const i=!r.disablePadding;return{encrypt:(o,s)=>{const a=VN(e),{b:l,o:u,out:c}=bte(o,i,s),f=qn(n);let d=f[0],h=f[1],p=f[2],m=f[3],b=0;for(;b+4<=l.length;)d^=l[b+0],h^=l[b+1],p^=l[b+2],m^=l[b+3],{s0:d,s1:h,s2:p,s3:m}=s_(a,d,h,p,m),u[b++]=d,u[b++]=h,u[b++]=p,u[b++]=m;if(i){const y=wte(o.subarray(b*4));d^=y[0],h^=y[1],p^=y[2],m^=y[3],{s0:d,s1:h,s2:p,s3:m}=s_(a,d,h,p,m),u[b++]=d,u[b++]=h,u[b++]=p,u[b++]=m}return a.fill(0),c},decrypt:(o,s)=>{yte(o);const a=mte(e),l=qn(n),u=UN(o.length,s),c=qn(o),f=qn(u);let d=l[0],h=l[1],p=l[2],m=l[3];for(let b=0;b+4<=c.length;){const y=d,v=h,w=p,g=m;d=c[b+0],h=c[b+1],p=c[b+2],m=c[b+3];const{s0:x,s1:k,s2:E,s3:D}=gte(a,d,h,p,m);f[b++]=x^y,f[b++]=k^v,f[b++]=E^w,f[b++]=D^g}return a.fill(0),vte(u,i)}}}),WN=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),kte=WN("expand 16-byte k"),xte=WN("expand 32-byte k"),Ete=qn(kte),JN=qn(xte);JN.slice();function Ye(t,e){return t<<e|t>>>32-e}function Uw(t){return t.byteOffset%4===0}const _p=64,Ste=16,KN=2**32-1,a_=new Uint32Array;function Cte(t,e,n,r,i,o,s,a){const l=i.length,u=new Uint8Array(_p),c=qn(u),f=Uw(i)&&Uw(o),d=f?qn(i):a_,h=f?qn(o):a_;for(let p=0;p<l;s++){if(t(e,n,r,c,s,a),s>=KN)throw new Error("arx: counter overflow");const m=Math.min(_p,l-p);if(f&&m===_p){const b=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,v;y<Ste;y++)v=b+y,h[v]=d[v]^c[y];p+=_p;continue}for(let b=0,y;b<m;b++)y=p+b,o[y]=i[y]^u[b];p+=m}}function _te(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:o,rounds:s}=lte({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Pb(i),Pb(s),o_(o),o_(n),(a,l,u,c,f=0)=>{qo(a),qo(l),qo(u);const d=u.length;if(c||(c=new Uint8Array(d)),qo(c),Pb(f),f<0||f>=KN)throw new Error("arx: counter overflow");if(c.length<d)throw new Error(`arx: output (${c.length}) is shorter than data (${d})`);const h=[];let p=a.length,m,b;if(p===32)m=a.slice(),h.push(m),b=JN;else if(p===16&&n)m=new Uint8Array(32),m.set(a),m.set(a,16),b=Ete,h.push(m);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);Uw(l)||(l=l.slice(),h.push(l));const y=qn(m);if(r){if(l.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(b,y,qn(l.subarray(0,16)),y),l=l.subarray(16)}const v=16-i;if(v!==l.length)throw new Error(`arx: nonce must be ${v} or 16 bytes`);if(v!==12){const g=new Uint8Array(12);g.set(l,o?0:12-l.length),l=g,h.push(l)}const w=qn(l);for(Cte(t,b,y,w,u,c,f,s);h.length>0;)h.pop().fill(0);return c}}function Ate(t,e,n,r,i,o=20){let s=t[0],a=t[1],l=t[2],u=t[3],c=e[0],f=e[1],d=e[2],h=e[3],p=e[4],m=e[5],b=e[6],y=e[7],v=i,w=n[0],g=n[1],x=n[2],k=s,E=a,D=l,O=u,N=c,C=f,R=d,T=h,q=p,A=m,S=b,P=y,B=v,j=w,z=g,J=x;for(let ae=0;ae<o;ae+=2)k=k+N|0,B=Ye(B^k,16),q=q+B|0,N=Ye(N^q,12),k=k+N|0,B=Ye(B^k,8),q=q+B|0,N=Ye(N^q,7),E=E+C|0,j=Ye(j^E,16),A=A+j|0,C=Ye(C^A,12),E=E+C|0,j=Ye(j^E,8),A=A+j|0,C=Ye(C^A,7),D=D+R|0,z=Ye(z^D,16),S=S+z|0,R=Ye(R^S,12),D=D+R|0,z=Ye(z^D,8),S=S+z|0,R=Ye(R^S,7),O=O+T|0,J=Ye(J^O,16),P=P+J|0,T=Ye(T^P,12),O=O+T|0,J=Ye(J^O,8),P=P+J|0,T=Ye(T^P,7),k=k+C|0,J=Ye(J^k,16),S=S+J|0,C=Ye(C^S,12),k=k+C|0,J=Ye(J^k,8),S=S+J|0,C=Ye(C^S,7),E=E+R|0,B=Ye(B^E,16),P=P+B|0,R=Ye(R^P,12),E=E+R|0,B=Ye(B^E,8),P=P+B|0,R=Ye(R^P,7),D=D+T|0,j=Ye(j^D,16),q=q+j|0,T=Ye(T^q,12),D=D+T|0,j=Ye(j^D,8),q=q+j|0,T=Ye(T^q,7),O=O+N|0,z=Ye(z^O,16),A=A+z|0,N=Ye(N^A,12),O=O+N|0,z=Ye(z^O,8),A=A+z|0,N=Ye(N^A,7);let K=0;r[K++]=s+k|0,r[K++]=a+E|0,r[K++]=l+D|0,r[K++]=u+O|0,r[K++]=c+N|0,r[K++]=f+C|0,r[K++]=d+R|0,r[K++]=h+T|0,r[K++]=p+q|0,r[K++]=m+A|0,r[K++]=b+S|0,r[K++]=y+P|0,r[K++]=v+B|0,r[K++]=w+j|0,r[K++]=g+z|0,r[K++]=x+J|0}const ZN=_te(Ate,{counterRight:!1,counterLength:4,allowShortKeys:!1});class GN extends FD{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,oo.hash(e);const r=Vd(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return oo.exists(this),this.iHash.update(e),this}digestInto(e){oo.exists(this),oo.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Cg=(t,e,n)=>new GN(t,e).update(n).digest();Cg.create=(t,e)=>new GN(t,e);function Tte(t,e,n){return oo.hash(t),Cg(t,Vd(n),Vd(e))}const jb=new Uint8Array([0]),l_=new Uint8Array;function Mte(t,e,n,r=32){if(oo.hash(t),oo.number(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=l_);const o=new Uint8Array(i*t.outputLen),s=Cg.create(t,e),a=s._cloneInto(),l=new Uint8Array(s.outputLen);for(let u=0;u<i;u++)jb[0]=u+1,a.update(u===0?l_:l).update(n).update(jb).digestInto(l),o.set(l,t.outputLen*u),s._cloneInto(a);return s.destroy(),a.destroy(),l.fill(0),jb.fill(0),o.slice(0,r)}var Ote=Object.defineProperty,Ut=(t,e)=>{for(var n in e)Ote(t,n,{get:e[n],enumerable:!0})},Ql=Symbol("verified"),Dte=t=>t instanceof Object;function YN(t){if(!Dte(t)||typeof t.kind!="number"||typeof t.content!="string"||typeof t.created_at!="number"||typeof t.pubkey!="string"||!t.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(t.tags))return!1;for(let e=0;e<t.tags.length;e++){let n=t.tags[e];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}var Nte={};Ut(Nte,{Queue:()=>Fte,QueueNode:()=>QN,binarySearch:()=>$3,insertEventIntoAscendingList:()=>Rte,insertEventIntoDescendingList:()=>Ite,normalizeURL:()=>$te,utf8Decoder:()=>to,utf8Encoder:()=>Fi});var to=new TextDecoder("utf-8"),Fi=new TextEncoder;function $te(t){t.indexOf("://")===-1&&(t="wss://"+t);let e=new URL(t);return e.pathname=e.pathname.replace(/\/+/g,"/"),e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1)),(e.port==="80"&&e.protocol==="ws:"||e.port==="443"&&e.protocol==="wss:")&&(e.port=""),e.searchParams.sort(),e.hash="",e.toString()}function Ite(t,e){const[n,r]=$3(t,i=>e.id===i.id?0:e.created_at===i.created_at?-1:i.created_at-e.created_at);return r||t.splice(n,0,e),t}function Rte(t,e){const[n,r]=$3(t,i=>e.id===i.id?0:e.created_at===i.created_at?-1:e.created_at-i.created_at);return r||t.splice(n,0,e),t}function $3(t,e){let n=0,r=t.length-1;for(;n<=r;){const i=Math.floor((n+r)/2),o=e(t[i]);if(o===0)return[i,!0];o<0?r=i-1:n=i+1}return[n,!1]}var QN=class{constructor(e){id(this,"value"),id(this,"next",null),id(this,"prev",null),this.value=e}},Fte=class{constructor(){id(this,"first"),id(this,"last"),this.first=null,this.last=null}enqueue(e){const n=new QN(e);return this.last?this.last===this.first?(this.last=n,this.last.prev=this.first,this.first.next=n):(n.prev=this.last,this.last.next=n,this.last=n):(this.first=n,this.last=n),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const n=this.first;return this.first=null,this.last=null,n.value}const e=this.first;return this.first=e.next,e.value}},Lte=class{generateSecretKey(){return eo.utils.randomPrivateKey()}getPublicKey(t){return ln(eo.getPublicKey(t))}finalizeEvent(t,e){const n=t;return n.pubkey=ln(eo.getPublicKey(e)),n.id=w0(n),n.sig=ln(eo.sign(w0(n),e)),n[Ql]=!0,n}verifyEvent(t){if(typeof t[Ql]=="boolean")return t[Ql];const e=w0(t);if(e!==t.id)return t[Ql]=!1,!1;try{const n=eo.verify(t.sig,e,t.pubkey);return t[Ql]=n,n}catch{return t[Ql]=!1,!1}}};function Bte(t){if(!YN(t))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content])}function w0(t){let e=Rc(Fi.encode(Bte(t)));return ln(e)}var _g=new Lte;_g.generateSecretKey;_g.getPublicKey;var Ta=_g.finalizeEvent,I3=_g.verifyEvent,Pte={};Ut(Pte,{Application:()=>Pne,BadgeAward:()=>Kte,BadgeDefinition:()=>Nne,BlockedRelaysList:()=>yne,BookmarkList:()=>pne,Bookmarksets:()=>Mne,Calendar:()=>Wne,CalendarEventRSVP:()=>Jne,ChannelCreation:()=>r$,ChannelHideMessage:()=>s$,ChannelMessage:()=>o$,ChannelMetadata:()=>i$,ChannelMuteUser:()=>a$,ClassifiedListing:()=>qne,ClientAuth:()=>l$,CommunitiesList:()=>mne,CommunityDefinition:()=>Gne,CommunityPostApproval:()=>rne,Contacts:()=>Ute,CreateOrUpdateProduct:()=>Rne,CreateOrUpdateStall:()=>Ine,Curationsets:()=>One,Date:()=>Une,DraftClassifiedListing:()=>Vne,DraftLong:()=>Lne,Emojisets:()=>Bne,EncryptedDirectMessage:()=>Hte,EncryptedDirectMessages:()=>Wte,EventDeletion:()=>Jte,FileMetadata:()=>Yte,FileServerPreference:()=>kne,Followsets:()=>_ne,GenericRepost:()=>Zte,Genericlists:()=>Ane,HTTPAuth:()=>L3,Handlerinformation:()=>Zne,Handlerrecommendation:()=>Kne,Highlights:()=>cne,InterestsList:()=>vne,Interestsets:()=>$ne,JobFeedback:()=>sne,JobRequest:()=>ine,JobResult:()=>one,Label:()=>nne,LightningPubRPC:()=>Ene,LiveChatMessage:()=>Qte,LiveEvent:()=>zne,LongFormArticle:()=>Fne,Metadata:()=>jte,Mutelist:()=>fne,NWCWalletInfo:()=>xne,NWCWalletRequest:()=>u$,NWCWalletResponse:()=>Sne,NostrConnect:()=>Cne,OpenTimestamps:()=>Gte,Pinlist:()=>dne,ProblemTracker:()=>Xte,ProfileBadges:()=>Dne,PublicChatsList:()=>gne,Reaction:()=>F3,RecommendRelay:()=>Vte,RelayList:()=>hne,Relaysets:()=>Tne,Report:()=>ene,Reporting:()=>tne,Repost:()=>R3,SearchRelaysList:()=>bne,ShortTextNote:()=>qte,Time:()=>Hne,UserEmojiList:()=>wne,UserStatuses:()=>jne,Zap:()=>une,ZapGoal:()=>ane,ZapRequest:()=>lne,classifyKind:()=>zte,isEphemeralKind:()=>t$,isParameterizedReplaceableKind:()=>n$,isRegularKind:()=>XN,isReplaceableKind:()=>e$});function XN(t){return 1e3<=t&&t<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(t)}function e$(t){return[0,3].includes(t)||1e4<=t&&t<2e4}function t$(t){return 2e4<=t&&t<3e4}function n$(t){return 3e4<=t&&t<4e4}function zte(t){return XN(t)?"regular":e$(t)?"replaceable":t$(t)?"ephemeral":n$(t)?"parameterized":"unknown"}var jte=0,qte=1,Vte=2,Ute=3,Hte=4,Wte=4,Jte=5,R3=6,F3=7,Kte=8,Zte=16,r$=40,i$=41,o$=42,s$=43,a$=44,Gte=1040,Yte=1063,Qte=1311,Xte=1971,ene=1984,tne=1984,nne=1985,rne=4550,ine=5999,one=6999,sne=7e3,ane=9041,lne=9734,une=9735,cne=9802,fne=1e4,dne=10001,hne=10002,pne=10003,mne=10004,gne=10005,yne=10006,bne=10007,vne=10015,wne=10030,kne=10096,xne=13194,Ene=21e3,l$=22242,u$=23194,Sne=23195,Cne=24133,L3=27235,_ne=3e4,Ane=30001,Tne=30002,Mne=30003,One=30004,Dne=30008,Nne=30009,$ne=30015,Ine=30017,Rne=30018,Fne=30023,Lne=30024,Bne=30030,Pne=30078,zne=30311,jne=30315,qne=30402,Vne=30403,Une=31922,Hne=31923,Wne=31924,Jne=31925,Kne=31989,Zne=31990,Gne=34550,Yne={};Ut(Yne,{getHex64:()=>B3,getInt:()=>c$,getSubscriptionId:()=>Qne,matchEventId:()=>Xne,matchEventKind:()=>tre,matchEventPubkey:()=>ere});function B3(t,e){let n=e.length+3,r=t.indexOf(`"${e}":`)+n,i=t.slice(r).indexOf('"')+r+1;return t.slice(i,i+64)}function c$(t,e){let n=e.length,r=t.indexOf(`"${e}":`)+n+3,i=t.slice(r),o=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,o),10)}function Qne(t){let e=t.slice(0,22).indexOf('"EVENT"');if(e===-1)return null;let n=t.slice(e+7+1).indexOf('"');if(n===-1)return null;let r=e+7+1+n,i=t.slice(r+1,80).indexOf('"');if(i===-1)return null;let o=r+1+i;return t.slice(r+1,o)}function Xne(t,e){return e===B3(t,"id")}function ere(t,e){return e===B3(t,"pubkey")}function tre(t,e){return e===c$(t,"kind")}var nre={};Ut(nre,{makeAuthEvent:()=>rre});function rre(t,e){return{kind:l$,created_at:Math.floor(Date.now()/1e3),tags:[["relay",t],["challenge",e]],content:""}}var ire;try{ire=WebSocket}catch{}var ore;try{ore=WebSocket}catch{}var Wo={};Ut(Wo,{BECH32_REGEX:()=>f$,Bech32MaxSize:()=>P3,decode:()=>Ag,encodeBytes:()=>Tg,naddrEncode:()=>dre,neventEncode:()=>fre,noteEncode:()=>ure,nprofileEncode:()=>cre,npubEncode:()=>lre,nrelayEncode:()=>hre,nsecEncode:()=>are});var P3=5e3,f$=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function sre(t){const e=new Uint8Array(4);return e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=t&255,e}function Ag(t){var e,n,r,i,o,s,a,l;let{prefix:u,words:c}=pc.decode(t,P3),f=new Uint8Array(pc.fromWords(c));switch(u){case"nprofile":{let d=Ap(f);if(!((e=d[0])!=null&&e[0]))throw new Error("missing TLV 0 for nprofile");if(d[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:ln(d[0][0]),relays:d[1]?d[1].map(h=>to.decode(h)):[]}}}case"nevent":{let d=Ap(f);if(!((n=d[0])!=null&&n[0]))throw new Error("missing TLV 0 for nevent");if(d[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(d[2]&&d[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(d[3]&&d[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:ln(d[0][0]),relays:d[1]?d[1].map(h=>to.decode(h)):[],author:(r=d[2])!=null&&r[0]?ln(d[2][0]):void 0,kind:(i=d[3])!=null&&i[0]?parseInt(ln(d[3][0]),16):void 0}}}case"naddr":{let d=Ap(f);if(!((o=d[0])!=null&&o[0]))throw new Error("missing TLV 0 for naddr");if(!((s=d[2])!=null&&s[0]))throw new Error("missing TLV 2 for naddr");if(d[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((a=d[3])!=null&&a[0]))throw new Error("missing TLV 3 for naddr");if(d[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:to.decode(d[0][0]),pubkey:ln(d[2][0]),kind:parseInt(ln(d[3][0]),16),relays:d[1]?d[1].map(h=>to.decode(h)):[]}}}case"nrelay":{let d=Ap(f);if(!((l=d[0])!=null&&l[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:to.decode(d[0][0])}}case"nsec":return{type:u,data:f};case"npub":case"note":return{type:u,data:ln(f)};default:throw new Error(`unknown prefix ${u}`)}}function Ap(t){let e={},n=t;for(;n.length>0;){let r=n[0],i=n[1],o=n.slice(2,2+i);if(n=n.slice(2+i),o.length<i)throw new Error(`not enough data to read on TLV ${r}`);e[r]=e[r]||[],e[r].push(o)}return e}function are(t){return Tg("nsec",t)}function lre(t){return Tg("npub",hc(t))}function ure(t){return Tg("note",hc(t))}function Th(t,e){let n=pc.toWords(e);return pc.encode(t,n,P3)}function Tg(t,e){return Th(t,e)}function cre(t){let e=Mg({0:[hc(t.pubkey)],1:(t.relays||[]).map(n=>Fi.encode(n))});return Th("nprofile",e)}function fre(t){let e;t.kind!==void 0&&(e=sre(t.kind));let n=Mg({0:[hc(t.id)],1:(t.relays||[]).map(r=>Fi.encode(r)),2:t.author?[hc(t.author)]:[],3:e?[new Uint8Array(e)]:[]});return Th("nevent",n)}function dre(t){let e=new ArrayBuffer(4);new DataView(e).setUint32(0,t.kind,!1);let n=Mg({0:[Fi.encode(t.identifier)],1:(t.relays||[]).map(r=>Fi.encode(r)),2:[hc(t.pubkey)],3:[new Uint8Array(e)]});return Th("naddr",n)}function hre(t){let e=Mg({0:[Fi.encode(t)]});return Th("nrelay",e)}function Mg(t){let e=[];return Object.entries(t).reverse().forEach(([n,r])=>{r.forEach(i=>{let o=new Uint8Array(i.length+2);o.set([parseInt(n)],0),o.set([i.length],1),o.set(i,2),e.push(o)})}),hg(...e)}var pre={};Ut(pre,{decrypt:()=>mre,encrypt:()=>d$});async function d$(t,e,n){const r=t instanceof Uint8Array?ln(t):t,i=Lc.getSharedSecret(r,"02"+e),o=h$(i);let s=Uint8Array.from(BD(16)),a=Fi.encode(n),l=HN(o,s).encrypt(a),u=ko.encode(new Uint8Array(l)),c=ko.encode(new Uint8Array(s.buffer));return`${u}?iv=${c}`}async function mre(t,e,n){const r=t instanceof Uint8Array?ln(t):t;let[i,o]=n.split("?iv="),s=Lc.getSharedSecret(r,"02"+e),a=h$(s),l=ko.decode(o),u=ko.decode(i),c=HN(a,l).decrypt(u);return to.decode(c)}function h$(t){return t.slice(1,33)}var gre={};Ut(gre,{NIP05_REGEX:()=>p$,isValid:()=>vre,queryProfile:()=>m$,searchDomain:()=>bre,useFetchImplementation:()=>yre});var p$=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,Og;try{Og=fetch}catch{}function yre(t){Og=t}async function bre(t,e=""){try{const n=`https://${t}/.well-known/nostr.json?name=${e}`;return(await(await Og(n,{redirect:"error"})).json()).names}catch{return{}}}async function m$(t){var e;const n=t.match(p$);if(!n)return null;const[r,i="_",o]=n;try{const s=`https://${o}/.well-known/nostr.json?name=${i}`,a=await(await Og(s,{redirect:"error"})).json();let l=a.names[i];return l?{pubkey:l,relays:(e=a.relays)==null?void 0:e[l]}:null}catch{return null}}async function vre(t,e){let n=await m$(e);return n?n.pubkey===t:!1}var wre={};Ut(wre,{parse:()=>kre});function kre(t){const e={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of t.tags)r[0]==="e"&&r[1]&&n.push(r),r[0]==="p"&&r[1]&&e.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const i=n[r],[o,s,a,l]=i,u={id:s,relays:a?[a]:[]},c=r===0,f=r===n.length-1;if(l==="root"){e.root=u;continue}if(l==="reply"){e.reply=u;continue}if(l==="mention"){e.mentions.push(u);continue}if(c){e.root=u;continue}if(f){e.reply=u;continue}e.mentions.push(u)}return e}var xre={};Ut(xre,{fetchRelayInformation:()=>Sre,useFetchImplementation:()=>Ere});var g$;try{g$=fetch}catch{}function Ere(t){g$=t}async function Sre(t){return await(await fetch(t.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var Cre={};Ut(Cre,{getPow:()=>y$,minePow:()=>_re});function y$(t){let e=0;for(let n=0;n<t.length;n++){const r=parseInt(t[n],16);if(r===0)e+=4;else{e+=Math.clz32(r)-28;break}}return e}function _re(t,e){let n=0;const r=t,i=["nonce",n.toString(),e.toString()];for(r.tags.push(i);;){const o=Math.floor(new Date().getTime()/1e3);if(o!==r.created_at&&(n=0,r.created_at=o),i[1]=(++n).toString(),r.id=w0(r),y$(r.id)>=e)break}return r}var Are={};Ut(Are,{finishRepostEvent:()=>Tre,getRepostedEvent:()=>Mre,getRepostedEventPointer:()=>b$});function Tre(t,e,n,r){return Ta({kind:R3,tags:[...t.tags??[],["e",e.id,n],["p",e.pubkey]],content:t.content===""?"":JSON.stringify(e),created_at:t.created_at},r)}function b$(t){if(t.kind!==R3)return;let e,n;for(let r=t.tags.length-1;r>=0&&(e===void 0||n===void 0);r--){const i=t.tags[r];i.length>=2&&(i[0]==="e"&&e===void 0?e=i:i[0]==="p"&&n===void 0&&(n=i))}if(e!==void 0)return{id:e[1],relays:[e[2],n==null?void 0:n[2]].filter(r=>typeof r=="string"),author:n==null?void 0:n[1]}}function Mre(t,{skipVerification:e}={}){const n=b$(t);if(n===void 0||t.content==="")return;let r;try{r=JSON.parse(t.content)}catch{return}if(r.id===n.id&&!(!e&&!I3(r)))return r}var Ore={};Ut(Ore,{NOSTR_URI_REGEX:()=>Dg,parse:()=>Nre,test:()=>Dre});var Dg=new RegExp(`nostr:(${f$.source})`);function Dre(t){return typeof t=="string"&&new RegExp(`^${Dg.source}$`).test(t)}function Nre(t){const e=t.match(new RegExp(`^${Dg.source}$`));if(!e)throw new Error(`Invalid Nostr URI: ${t}`);return{uri:e[0],value:e[1],decoded:Ag(e[1])}}var $re={};Ut($re,{finishReactionEvent:()=>Ire,getReactedEventPointer:()=>Rre});function Ire(t,e,n){const r=e.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return Ta({...t,kind:F3,tags:[...t.tags??[],...r,["e",e.id],["p",e.pubkey]],content:t.content??"+"},n)}function Rre(t){if(t.kind!==F3)return;let e,n;for(let r=t.tags.length-1;r>=0&&(e===void 0||n===void 0);r--){const i=t.tags[r];i.length>=2&&(i[0]==="e"&&e===void 0?e=i:i[0]==="p"&&n===void 0&&(n=i))}if(!(e===void 0||n===void 0))return{id:e[1],relays:[e[2],n[2]].filter(r=>r!==void 0),author:n[1]}}var Fre={};Ut(Fre,{matchAll:()=>Lre,regex:()=>z3,replaceAll:()=>Bre});var z3=()=>new RegExp(`\\b${Dg.source}\\b`,"g");function*Lre(t){const e=t.matchAll(z3());for(const n of e)try{const[r,i]=n;yield{uri:r,value:i,decoded:Ag(i),start:n.index,end:n.index+r.length}}catch{}}function Bre(t,e){return t.replaceAll(z3(),(n,r)=>e({uri:n,value:r,decoded:Ag(r)}))}var Pre={};Ut(Pre,{channelCreateEvent:()=>zre,channelHideMessageEvent:()=>Vre,channelMessageEvent:()=>qre,channelMetadataEvent:()=>jre,channelMuteUserEvent:()=>Ure});var zre=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return Ta({kind:r$,tags:[...t.tags??[]],content:n,created_at:t.created_at},e)},jre=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return Ta({kind:i$,tags:[["e",t.channel_create_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},qre=(t,e)=>{const n=[["e",t.channel_create_event_id,t.relay_url,"root"]];return t.reply_to_channel_message_event_id&&n.push(["e",t.reply_to_channel_message_event_id,t.relay_url,"reply"]),Ta({kind:o$,tags:[...n,...t.tags??[]],content:t.content,created_at:t.created_at},e)},Vre=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return Ta({kind:s$,tags:[["e",t.channel_message_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},Ure=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return Ta({kind:a$,tags:[["p",t.pubkey_to_mute],...t.tags??[]],content:n,created_at:t.created_at},e)},Hre={};Ut(Hre,{EMOJI_SHORTCODE_REGEX:()=>v$,matchAll:()=>Wre,regex:()=>j3,replaceAll:()=>Jre});var v$=/:(\w+):/,j3=()=>new RegExp(`\\B${v$.source}\\B`,"g");function*Wre(t){const e=t.matchAll(j3());for(const n of e)try{const[r,i]=n;yield{shortcode:r,name:i,start:n.index,end:n.index+r.length}}catch{}}function Jre(t,e){return t.replaceAll(j3(),(n,r)=>e({shortcode:n,name:r}))}var Kre={};Ut(Kre,{useFetchImplementation:()=>Zre,validateGithub:()=>Gre});var q3;try{q3=fetch}catch{}function Zre(t){q3=t}async function Gre(t,e,n){try{return await(await q3(`https://gist.github.com/${e}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${t}`}catch{return!1}}var Yre={};Ut(Yre,{decrypt:()=>_$,encrypt:()=>C$,getConversationKey:()=>x$,v2:()=>nie});var w$=1,k$=65535;function x$(t,e){const n=Lc.getSharedSecret(t,"02"+e).subarray(1,33);return Tte(Rc,n,"nip44-v2")}function E$(t,e){const n=Mte(Rc,t,e,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}function V3(t){if(!Number.isSafeInteger(t)||t<1)throw new Error("expected positive integer");if(t<=32)return 32;const e=1<<Math.floor(Math.log2(t-1))+1,n=e<=256?32:e/8;return n*(Math.floor((t-1)/n)+1)}function Qre(t){if(!Number.isSafeInteger(t)||t<w$||t>k$)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const e=new Uint8Array(2);return new DataView(e.buffer).setUint16(0,t,!1),e}function Xre(t){const e=Fi.encode(t),n=e.length,r=Qre(n),i=new Uint8Array(V3(n)-n);return hg(r,e,i)}function eie(t){const e=new DataView(t.buffer).getUint16(0),n=t.subarray(2,2+e);if(e<w$||e>k$||n.length!==e||t.length!==2+V3(e))throw new Error("invalid padding");return to.decode(n)}function S$(t,e,n){if(n.length!==32)throw new Error("AAD associated data must be 32 bytes");const r=hg(n,e);return Cg(Rc,t,r)}function tie(t){if(typeof t!="string")throw new Error("payload must be a valid string");const e=t.length;if(e<132||e>87472)throw new Error("invalid payload length: "+e);if(t[0]==="#")throw new Error("unknown encryption version");let n;try{n=ko.decode(t)}catch(o){throw new Error("invalid base64: "+o.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const i=n[0];if(i!==2)throw new Error("unknown encryption version "+i);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}function C$(t,e,n=BD(32)){const{chacha_key:r,chacha_nonce:i,hmac_key:o}=E$(e,n),s=Xre(t),a=ZN(r,i,s),l=S$(o,a,n);return ko.encode(hg(new Uint8Array([2]),n,a,l))}function _$(t,e){const{nonce:n,ciphertext:r,mac:i}=tie(t),{chacha_key:o,chacha_nonce:s,hmac_key:a}=E$(e,n),l=S$(a,r,n);if(!ute(l,i))throw new Error("invalid MAC");const u=ZN(o,s,r);return eie(u)}var nie={utils:{getConversationKey:x$,calcPaddedLen:V3},encrypt:C$,decrypt:_$},rie={};Ut(rie,{makeNwcRequestEvent:()=>oie,parseConnectionString:()=>iie});function iie(t){const{pathname:e,searchParams:n}=new URL(t),r=e,i=n.get("relay"),o=n.get("secret");if(!r||!i||!o)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:o}}async function oie(t,e,n){const i=await d$(e,t,JSON.stringify({method:"pay_invoice",params:{invoice:n}})),o={kind:u$,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t]]};return Ta(o,e)}var sie={};Ut(sie,{getZapEndpoint:()=>lie,makeZapReceipt:()=>fie,makeZapRequest:()=>uie,useFetchImplementation:()=>aie,validateZapRequest:()=>cie});var U3;try{U3=fetch}catch{}function aie(t){U3=t}async function lie(t){try{let e="",{lud06:n,lud16:r}=JSON.parse(t.content);if(n){let{words:s}=pc.decode(n,1e3),a=pc.fromWords(s);e=to.decode(a)}else if(r){let[s,a]=r.split("@");e=new URL(`/.well-known/lnurlp/${s}`,`https://${a}`).toString()}else return null;let o=await(await U3(e)).json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch{}return null}function uie({profile:t,event:e,amount:n,relays:r,comment:i=""}){if(!n)throw new Error("amount not given");if(!t)throw new Error("profile not given");let o={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t],["amount",n.toString()],["relays",...r]]};return e&&o.tags.push(["e",e]),o}function cie(t){let e;try{e=JSON.parse(t)}catch{return"Invalid zap request JSON."}if(!YN(e))return"Zap request is not a valid Nostr event.";if(!I3(e))return"Invalid signature on zap request.";let n=e.tags.find(([o,s])=>o==="p"&&s);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=e.tags.find(([o,s])=>o==="e"&&s);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":e.tags.find(([o,s])=>o==="relays"&&s)?null:"Zap request doesn't have a 'relays' tag."}function fie({zapRequest:t,preimage:e,bolt11:n,paidAt:r}){let i=JSON.parse(t),o=i.tags.filter(([a])=>a==="e"||a==="p"||a==="a"),s={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...o,["P",i.pubkey],["bolt11",n],["description",t]]};return e&&s.tags.push(["preimage",e]),s}var die={};Ut(die,{getToken:()=>hie,hashPayload:()=>H3,unpackEventFromToken:()=>T$,validateEvent:()=>I$,validateEventKind:()=>O$,validateEventMethodTag:()=>N$,validateEventPayloadTag:()=>$$,validateEventTimestamp:()=>M$,validateEventUrlTag:()=>D$,validateToken:()=>pie});var A$="Nostr ";async function hie(t,e,n,r=!1,i){const o={kind:L3,tags:[["u",t],["method",e]],created_at:Math.round(new Date().getTime()/1e3),content:""};i&&o.tags.push(["payload",H3(i)]);const s=await n(o);return(r?A$:"")+ko.encode(Fi.encode(JSON.stringify(s)))}async function pie(t,e,n){const r=await T$(t).catch(o=>{throw o});return await I$(r,e,n).catch(o=>{throw o})}async function T$(t){if(!t)throw new Error("Missing token");t=t.replace(A$,"");const e=to.decode(ko.decode(t));if(!e||e.length===0||!e.startsWith("{"))throw new Error("Invalid token");return JSON.parse(e)}function M$(t){return t.created_at?Math.round(new Date().getTime()/1e3)-t.created_at<60:!1}function O$(t){return t.kind===L3}function D$(t,e){const n=t.tags.find(r=>r[0]==="u");return n?n.length>0&&n[1]===e:!1}function N$(t,e){const n=t.tags.find(r=>r[0]==="method");return n?n.length>0&&n[1].toLowerCase()===e.toLowerCase():!1}function H3(t){const e=Rc(Fi.encode(JSON.stringify(t)));return ln(e)}function $$(t,e){const n=t.tags.find(i=>i[0]==="payload");if(!n)return!1;const r=H3(e);return n.length>0&&n[1]===r}async function I$(t,e,n,r){if(!I3(t))throw new Error("Invalid nostr event, signature invalid");if(!O$(t))throw new Error("Invalid nostr event, kind invalid");if(!M$(t))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!D$(t,e))throw new Error("Invalid nostr event, url tag invalid");if(!N$(t,n))throw new Error("Invalid nostr event, method tag invalid");if(r&&typeof r=="object"&&Object.keys(r).length>0&&!$$(t,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}const mie=/(nostr:)?(naddr1[0-9a-z]+)/g,gie=Ri.create({name:"naddr",group:"block",atom:!0,selectable:!0,draggable:!0,priority:1e3,addAttributes(){return{naddr:{default:null},identifier:{default:null},pubkey:{default:null},kind:{default:null},relays:{default:[]}}},renderHTML(t){return["div",{"data-naddr":t.node.attrs.naddr}]},renderText(t){return t.node.attrs.naddr},addStorage(){return{markdown:{serialize(t,e){t.write(e.attrs.naddr)},parse:{}}}},addCommands(){return{insertNAddr:({naddr:t})=>({commands:e})=>{var n;const r=t.split(":"),i=(n=Wo.decode(r[r.length-1]))==null?void 0:n.data;return e.insertContent({type:this.name,attrs:{...i,naddr:t}},{updateSelection:!1})}}},addPasteRules(){return[Eh({type:this.type,getAttributes:t=>t.data,find:t=>{const e=[];for(const n of t.matchAll(mie))try{const r=n[0],i=Wo.decode(n[2]).data;e.push(dc(n,{...i,naddr:r}))}catch{continue}return e}})]}}),yie=/(nostr:)?(note1[0-9a-z]+)/g,bie=/(nostr:)?(nevent1[0-9a-z]+)/g,vie=Ri.create({name:"nevent",group:"block",selectable:!0,draggable:!0,priority:1e3,addAttributes(){return{id:{default:null},kind:{default:null},author:{default:null},relays:{default:[]},nevent:{default:null}}},renderHTML(t){return["div",{"data-nevent":t.node.attrs.nevent}]},renderText(t){return t.node.attrs.nevent},parseHTML(){return[{tag:"div[data-nevent]"}]},addStorage(){return{markdown:{serialize(t,e){t.write(e.attrs.nevent)},parse:{}}}},addCommands(){return{insertNEvent:({nevent:t})=>({commands:e})=>{var n;const r=t.split(":"),i=(n=Wo.decode(r[r.length-1]))==null?void 0:n.data;return e.insertContent({type:this.name,attrs:{...i,nevent:t}},{updateSelection:!1})}}},addPasteRules(){return[Eh({type:this.type,getAttributes:t=>t.data,find:t=>{const e=[];for(const n of t.matchAll(yie))try{const r=Wo.decode(n[2]).data,i=n[0];e.push(dc(n,{id:r,nevent:i}))}catch{continue}for(const n of t.matchAll(bie))try{const r=Wo.decode(n[2]).data,i=n[0];e.push(dc(n,{...r,nevent:i}))}catch{continue}return e}})]}}),wie=/^(https?:\/\/)?(www\.|music\.)?(youtube\.com|youtu\.be|youtube-nocookie\.com)\/(?!channel\/)(?!@)(.+)?$/,kie=/^(https?:\/\/)?(www\.|music\.)?(youtube\.com|youtu\.be)\/(?!channel\/)(?!@)(.+)?$/g,R$=t=>t.match(wie),u_=t=>t?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",xie=t=>{const{url:e,allowFullscreen:n,autoplay:r,ccLanguage:i,ccLoadPolicy:o,controls:s,disableKBcontrols:a,enableIFrameApi:l,endTime:u,interfaceLanguage:c,ivLoadPolicy:f,loop:d,modestBranding:h,nocookie:p,origin:m,playlist:b,progressBarColor:y,startAt:v}=t;if(!R$(e))return null;if(e.includes("/embed/"))return e;if(e.includes("youtu.be")){const E=e.split("/").pop();return E?`${u_(p)}${E}`:null}const g=/(?:v=|shorts\/)([-\w]+)/gm.exec(e);if(!g||!g[1])return null;let x=`${u_(p)}${g[1]}`;const k=[];return n===!1&&k.push("fs=0"),r&&k.push("autoplay=1"),i&&k.push(`cc_lang_pref=${i}`),o&&k.push("cc_load_policy=1"),s||k.push("controls=0"),a&&k.push("disablekb=1"),l&&k.push("enablejsapi=1"),u&&k.push(`end=${u}`),c&&k.push(`hl=${c}`),f&&k.push(`iv_load_policy=${f}`),d&&k.push("loop=1"),h&&k.push("modestbranding=1"),m&&k.push(`origin=${m}`),b&&k.push(`playlist=${b}`),v&&k.push(`start=${v}`),y&&k.push(`color=${y}`),k.length&&(x+=`?${k.join("&")}`),x},Eie=Ri.create({name:"youtube",addOptions(){return{addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML(){return[{tag:"div[data-youtube-video] iframe"}]},addCommands(){return{setYoutubeVideo:t=>({commands:e})=>R$(t.src)?e.insertContent({type:this.name,attrs:t}):!1}},addPasteRules(){return this.options.addPasteHandler?[Eh({find:kie,type:this.type,getAttributes:t=>({src:t.input})})]:[]},renderHTML({HTMLAttributes:t}){const e=xie({url:t.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:t.start||0});return t.src=e,["div",{"data-youtube-video":""},["iframe",vm(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor},t)]]}}),Sie={bh:"blurhash"};function Cie(t){const e={};for(const n of t)if(n[0]==="imeta"){let r;for(const[i,o]of n.map(s=>s.split(/ (.+)/))){const s=Sie[i]||i;if(s==="url"&&(r=o,e[r]??(e[r]={})),o&&r)switch(s){case"fallback":{e[r].fallback=[...e[r].fallback||[],o];break}case"dim":{const a=o.split("x");e[r].dim={width:parseInt(a[0]),height:parseInt(a[1])};break}default:{e[r][s]=o;break}}}}return e}const _ie=/(nostr:)?(npub1[0-9a-z]+)/g,Aie=/(nostr:)?(nprofile1[0-9a-z]+)/g,Tie=Ri.create({name:"nprofile",inline:!0,group:"inline",atom:!0,priority:1e3,addAttributes(){return{nprofile:{default:null},pubkey:{default:null},relays:{default:[]}}},renderHTML({HTMLAttributes:t}){return["span",vm(t,{"data-type":"nprofile"}),"@"]},renderText(t){return t.node.attrs.nprofile},addStorage(){return{markdown:{serialize(t,e){t.write(e.attrs.nprofile)},parse:{}}}},addCommands(){return{insertNProfile:({nprofile:t})=>({chain:e})=>{var n;const r=t.split(":"),i=(n=Wo.decode(r[r.length-1]))==null?void 0:n.data;return e().insertContent({type:this.name,attrs:{...i,nprofile:t}}).insertContent(" ").run()}}},addPasteRules(){return[Eh({type:this.type,getAttributes:t=>t.data,find:t=>{const e=[];for(const n of t.matchAll(_ie))try{const r=n[0],i=Wo.decode(n[2]).data;e.push(dc(n,{pubkey:i,nprofile:r}))}catch{continue}for(const n of t.matchAll(Aie))try{const r=n[0],i=Wo.decode(n[2]).data;e.push(dc(n,{...i,nprofile:r}))}catch{continue}return e}})]}}),Mie=/(nsec1[0-9a-z]+)/g,Oie=is.create({name:"nsecReject",addOptions(){return{}},addPasteRules(){return[{find:Mie,handler:t=>{if(t.chain().deleteRange(t.range).insertContentAt(t.range.from,{text:"*NSEC_DELETED*",type:"text"}).run(),this.options.onError){this.options.onError(t);return}window.alert("DO NOT PASTE YOUR NSEC INTO THE EDITOR")}}]}}),Die=/(#[^\s]+)/g,Nie=/(#[^\s]+)$/g,$ie=qd.create({name:"tag",inline:!0,selectable:!0,inclusive:!1,group:"inline",priority:100,addStorage(){return{markdown:{serialize:{open:"",close:"",mixable:!1,expelEnclosingWhitespace:!0},parse:{}}}},renderHTML(t){return["a",{...t.mark.attrs},0]},addAttributes(){return{tag:{default:null}}},addPasteRules(){return[DD({find:Die,getAttributes:t=>({tag:t[0]}),type:this.type})]},addInputRules(){return[{find:Nie,handler:({state:t,range:e,match:n})=>{t.tr.delete(e.from,e.to).insertText(n[0]).addMark(e.from,e.to+1,this.type.create({tag:n[0]}))}}]}}),Iie=Ri.create({name:"tweet",group:"block",selectable:!0,draggable:!0,addAttributes(){return{src:{default:null}}},addStorage(){return{markdown:{serialize(t,e){t.write(e.attrs.src)},parse:{}}}},renderText(t){return t.node.attrs.src},renderHTML(){return["div",{}]}}),Rie=Ri.create({name:"video",inline:!1,group:"block",atom:!0,selectable:!0,draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},file:{default:null},sha256:{default:null},uploading:{default:!1},uploadError:{default:null},uploadType:{default:"nip96"},uploadUrl:{default:"https://nostr.build"}}},renderText(t){return t.node.attrs.src},renderHTML(){return["video",{}]},addStorage(){return{markdown:{serialize:IN.nodes.image,parse:{}}}}}),Hw=is.create({name:"nostr",addExtensions(){const{extend:t={}}=this.options,e=[];return this.options.nprofile!==!1&&e.push(Tie.extend(t.nprofile)),this.options.nevent!==!1&&e.push(vie.extend(t.nevent)),this.options.naddr!==!1&&e.push(gie.extend(t.naddr)),this.options.link!==!1&&e.push(ote.extend(t.link).configure(this.options.link)),this.options.tag!==!1&&e.push($ie.extend(t.tag)),this.options.youtube!==!1&&e.push(Eie.extend({renderText:n=>n.node.attrs.src,...t.youtube})),this.options.image!==!1&&e.push(Iee.configure(this.options.image).extend(t.image)),this.options.video!==!1&&e.push(Rie.extend(t.video)),this.options.tweet!==!1&&e.push(Iie.extend(t.tweet)),this.options.bolt11!==!1&&e.push(cG.extend(t.bolt11)),this.options.nsecReject!==!1&&e.push(Oie),this.options.fileUpload!==!1&&e.push(BY.configure(this.options.fileUpload)),e},addStorage(){return{imeta:null,pending:!1,setImeta:()=>{},getNprofiles:()=>[],getNevents:()=>[]}},onBeforeCreate(){this.storage.setImeta=t=>{this.storage.imeta=t},this.storage.getNprofiles=()=>{const t=[];return this.editor.state.doc.descendants(e=>{e.type.name==="nprofile"&&t.push(e.attrs)}),t},this.storage.getNevents=()=>{const t=[];return this.editor.state.doc.descendants(e=>{e.type.name==="nevents"&&t.push(e.attrs)}),t}},addCommands(){return{parseNote:(t,e)=>n=>(this.storage.setImeta(e||Cie(t.tags)),n.chain().setMeta("parse",!0).setMeta("uiEvent","paste").setContent(t.kind===1?t.content.replace(/(\n)+/g,"<br />"):t.content),!0),parseUserAbout:t=>e=>{if(t.kind!==0)return!1;let n;try{n=JSON.parse(t.content)}catch{return!1}return e.chain().setMeta("parse",!0).setMeta("uiEvent","paste").setContent(n.about,!0),!0}}}});function c_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function F$(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Fie(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");c_(t.outputLen),c_(t.blockLen)}function s1(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Lie(t,e){F$(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const qb=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const L$=t=>t instanceof Uint8Array,Vb=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Ui=(t,e)=>t<<32-e|t>>>e,Bie=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Bie)throw new Error("Non little-endian hardware is not supported");function Pie(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function W3(t){if(typeof t=="string"&&(t=Pie(t)),!L$(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function zie(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!L$(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}let B$=class{clone(){return this._cloneInto()}};function jie(t){const e=r=>t().update(W3(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function P$(t=32){if(qb&&typeof qb.getRandomValues=="function")return qb.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function qie(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),l=r?4:0,u=r?0:4;t.setUint32(e+l,s,r),t.setUint32(e+u,a,r)}let Vie=class extends B${constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Vb(this.buffer)}update(e){s1(this);const{view:n,buffer:r,blockLen:i}=this;e=W3(e);const o=e.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const l=Vb(e);for(;i<=o-s;s+=i)this.process(l,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){s1(this),Lie(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let f=s;f<i;f++)n[f]=0;qie(r,i-8,BigInt(this.length*8),o),this.process(r,0);const a=Vb(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,c[f],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%n&&e.buffer.set(r),e}};const Uie=(t,e,n)=>t&e^~t&n,Hie=(t,e,n)=>t&e^t&n^e&n,Wie=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ws=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ks=new Uint32Array(64);let Jie=class extends Vie{constructor(){super(64,32,8,!1),this.A=ws[0]|0,this.B=ws[1]|0,this.C=ws[2]|0,this.D=ws[3]|0,this.E=ws[4]|0,this.F=ws[5]|0,this.G=ws[6]|0,this.H=ws[7]|0}get(){const{A:e,B:n,C:r,D:i,E:o,F:s,G:a,H:l}=this;return[e,n,r,i,o,s,a,l]}set(e,n,r,i,o,s,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=l|0}process(e,n){for(let f=0;f<16;f++,n+=4)ks[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const d=ks[f-15],h=ks[f-2],p=Ui(d,7)^Ui(d,18)^d>>>3,m=Ui(h,17)^Ui(h,19)^h>>>10;ks[f]=m+ks[f-7]+p+ks[f-16]|0}let{A:r,B:i,C:o,D:s,E:a,F:l,G:u,H:c}=this;for(let f=0;f<64;f++){const d=Ui(a,6)^Ui(a,11)^Ui(a,25),h=c+d+Uie(a,l,u)+Wie[f]+ks[f]|0,m=(Ui(r,2)^Ui(r,13)^Ui(r,22))+Hie(r,i,o)|0;c=u,u=l,l=a,a=s+h|0,s=o,o=i,i=r,r=h+m|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,i,o,s,a,l,u,c)}roundClean(){ks.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Ww=jie(()=>new Jie);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const z$=BigInt(0),Ng=BigInt(1),Kie=BigInt(2),$g=t=>t instanceof Uint8Array,Zie=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function wc(t){if(!$g(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=Zie[t[n]];return e}function j$(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function J3(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function kc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function Sr(t){return J3(wc(t))}function K3(t){if(!$g(t))throw new Error("Uint8Array expected");return J3(wc(Uint8Array.from(t).reverse()))}function ma(t,e){return kc(t.toString(16).padStart(e*2,"0"))}function Z3(t,e){return ma(t,e).reverse()}function Gie(t){return kc(j$(t))}function Pn(t,e,n){let r;if(typeof e=="string")try{r=kc(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else if($g(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Nl(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!$g(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function Yie(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Qie(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Xie(t){let e;for(e=0;t>z$;t>>=Ng,e+=1);return e}function eoe(t,e){return t>>BigInt(e)&Ng}const toe=(t,e,n)=>t|(n?Ng:z$)<<BigInt(e),G3=t=>(Kie<<BigInt(t-1))-Ng,Ub=t=>new Uint8Array(t),f_=t=>Uint8Array.from(t);function q$(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Ub(t),i=Ub(t),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...f)=>n(i,r,...f),l=(f=Ub())=>{i=a(f_([0]),f),r=a(),f.length!==0&&(i=a(f_([1]),f),r=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<e;){r=a();const h=r.slice();d.push(h),f+=r.length}return Nl(...d)};return(f,d)=>{s(),l(f);let h;for(;!(h=d(u()));)l();return s(),h}}const noe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Mh(t,e,n={}){const r=(i,o,s)=>{const a=noe[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);const l=t[i];if(!(s&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${o}`)};for(const[i,o]of Object.entries(e))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return t}const roe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:eoe,bitLen:Xie,bitMask:G3,bitSet:toe,bytesToHex:wc,bytesToNumberBE:Sr,bytesToNumberLE:K3,concatBytes:Nl,createHmacDrbg:q$,ensureBytes:Pn,equalBytes:Yie,hexToBytes:kc,hexToNumber:J3,numberToBytesBE:ma,numberToBytesLE:Z3,numberToHexUnpadded:j$,numberToVarBytesBE:Gie,utf8ToBytes:Qie,validateObject:Mh},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hn=BigInt(0),Vt=BigInt(1),Ua=BigInt(2),ioe=BigInt(3),Jw=BigInt(4),d_=BigInt(5),h_=BigInt(8);BigInt(9);BigInt(16);function An(t,e){const n=t%e;return n>=hn?n:e+n}function ooe(t,e,n){if(n<=hn||e<hn)throw new Error("Expected power/modulo > 0");if(n===Vt)return hn;let r=Vt;for(;e>hn;)e&Vt&&(r=r*t%n),t=t*t%n,e>>=Vt;return r}function Xr(t,e,n){let r=t;for(;e-- >hn;)r*=r,r%=n;return r}function Kw(t,e){if(t===hn||e<=hn)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=An(t,e),r=e,i=hn,o=Vt;for(;n!==hn;){const a=r/n,l=r%n,u=i-o*a;r=n,n=l,i=o,o=u}if(r!==Vt)throw new Error("invert: does not exist");return An(i,e)}function soe(t){const e=(t-Vt)/Ua;let n,r,i;for(n=t-Vt,r=0;n%Ua===hn;n/=Ua,r++);for(i=Ua;i<t&&ooe(i,e,t)!==t-Vt;i++);if(r===1){const s=(t+Vt)/Jw;return function(l,u){const c=l.pow(u,s);if(!l.eql(l.sqr(c),u))throw new Error("Cannot find square root");return c}}const o=(n+Vt)/Ua;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,c=a.pow(a.mul(a.ONE,i),n),f=a.pow(l,o),d=a.pow(l,n);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let h=1;for(let m=a.sqr(d);h<u&&!a.eql(m,a.ONE);h++)m=a.sqr(m);const p=a.pow(c,Vt<<BigInt(u-h-1));c=a.sqr(p),f=a.mul(f,p),d=a.mul(d,c),u=h}return f}}function aoe(t){if(t%Jw===ioe){const e=(t+Vt)/Jw;return function(r,i){const o=r.pow(i,e);if(!r.eql(r.sqr(o),i))throw new Error("Cannot find square root");return o}}if(t%h_===d_){const e=(t-d_)/h_;return function(r,i){const o=r.mul(i,Ua),s=r.pow(o,e),a=r.mul(i,s),l=r.mul(r.mul(a,Ua),s),u=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(u),i))throw new Error("Cannot find square root");return u}}return soe(t)}const loe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function uoe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=loe.reduce((r,i)=>(r[i]="function",r),e);return Mh(t,n)}function coe(t,e,n){if(n<hn)throw new Error("Expected power > 0");if(n===hn)return t.ONE;if(n===Vt)return e;let r=t.ONE,i=e;for(;n>hn;)n&Vt&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Vt;return r}function foe(t,e){const n=new Array(e.length),r=e.reduce((o,s,a)=>t.is0(s)?o:(n[a]=o,t.mul(o,s)),t.ONE),i=t.inv(r);return e.reduceRight((o,s,a)=>t.is0(s)?o:(n[a]=t.mul(o,n[a]),t.mul(o,s)),i),n}function V$(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function doe(t,e,n=!1,r={}){if(t<=hn)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=V$(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=aoe(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:G3(i),ZERO:hn,ONE:Vt,create:l=>An(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return hn<=l&&l<t},is0:l=>l===hn,isOdd:l=>(l&Vt)===Vt,neg:l=>An(-l,t),eql:(l,u)=>l===u,sqr:l=>An(l*l,t),add:(l,u)=>An(l+u,t),sub:(l,u)=>An(l-u,t),mul:(l,u)=>An(l*u,t),pow:(l,u)=>coe(a,l,u),div:(l,u)=>An(l*Kw(u,t),t),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>Kw(l,t),sqrt:r.sqrt||(l=>s(a,l)),invertBatch:l=>foe(a,l),cmov:(l,u,c)=>c?u:l,toBytes:l=>n?Z3(l,o):ma(l,o),fromBytes:l=>{if(l.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${l.length}`);return n?K3(l):Sr(l)}});return Object.freeze(a)}function U$(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function H$(t){const e=U$(t);return e+Math.ceil(e/2)}function hoe(t,e,n=!1){const r=t.length,i=U$(e),o=H$(e);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const s=n?Sr(t):K3(t),a=An(s,e-Vt)+Vt;return n?Z3(a,i):ma(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const poe=BigInt(0),Hb=BigInt(1);function moe(t,e){const n=(i,o)=>{const s=o.negate();return i?s:o},r=i=>{const o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:n,unsafeLadder(i,o){let s=t.ZERO,a=i;for(;o>poe;)o&Hb&&(s=s.add(a)),a=a.double(),o>>=Hb;return s},precomputeWindow(i,o){const{windows:s,windowSize:a}=r(o),l=[];let u=i,c=u;for(let f=0;f<s;f++){c=u,l.push(c);for(let d=1;d<a;d++)c=c.add(u),l.push(c);u=c.double()}return l},wNAF(i,o,s){const{windows:a,windowSize:l}=r(i);let u=t.ZERO,c=t.BASE;const f=BigInt(2**i-1),d=2**i,h=BigInt(i);for(let p=0;p<a;p++){const m=p*l;let b=Number(s&f);s>>=h,b>l&&(b-=d,s+=Hb);const y=m,v=m+Math.abs(b)-1,w=p%2!==0,g=b<0;b===0?c=c.add(n(w,o[y])):u=u.add(n(g,o[v]))}return{p:u,f:c}},wNAFCached(i,o,s,a){const l=i._WINDOW_SIZE||1;let u=o.get(i);return u||(u=this.precomputeWindow(i,l),l!==1&&o.set(i,a(u))),this.wNAF(l,u,s)}}}function W$(t){return uoe(t.Fp),Mh(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...V$(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function goe(t){const e=W$(t);Mh(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:yoe,hexToBytes:boe}=roe,el={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=el;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:yoe(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=el,n=typeof t=="string"?boe(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=el._parseInt(n.subarray(2)),{d:s,l:a}=el._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){const e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,n=u=>{const c=u.toString(16);return c.length&1?`0${c}`:c},r=e(n(t.s)),i=e(n(t.r)),o=r.length/2,s=i.length/2,a=n(o),l=n(s);return`30${n(s+o+4)}02${l}${i}02${a}${r}`}},Bo=BigInt(0),ni=BigInt(1);BigInt(2);const p_=BigInt(3);BigInt(4);function voe(t){const e=goe(t),{Fp:n}=e,r=e.toBytes||((p,m,b)=>{const y=m.toAffine();return Nl(Uint8Array.from([4]),n.toBytes(y.x),n.toBytes(y.y))}),i=e.fromBytes||(p=>{const m=p.subarray(1),b=n.fromBytes(m.subarray(0,n.BYTES)),y=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:b,y}});function o(p){const{a:m,b}=e,y=n.sqr(p),v=n.mul(y,p);return n.add(n.add(v,n.mul(p,m)),b)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(p){return typeof p=="bigint"&&Bo<p&&p<e.n}function a(p){if(!s(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(p){const{allowedPrivateKeyLengths:m,nByteLength:b,wrapPrivateKey:y,n:v}=e;if(m&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=wc(p)),typeof p!="string"||!m.includes(p.length))throw new Error("Invalid key");p=p.padStart(b*2,"0")}let w;try{w=typeof p=="bigint"?p:Sr(Pn("private key",p,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof p}`)}return y&&(w=An(w,v)),a(w),w}const u=new Map;function c(p){if(!(p instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(m,b,y){if(this.px=m,this.py=b,this.pz=y,m==null||!n.isValid(m))throw new Error("x required");if(b==null||!n.isValid(b))throw new Error("y required");if(y==null||!n.isValid(y))throw new Error("z required")}static fromAffine(m){const{x:b,y}=m||{};if(!m||!n.isValid(b)||!n.isValid(y))throw new Error("invalid affine point");if(m instanceof f)throw new Error("projective point not allowed");const v=w=>n.eql(w,n.ZERO);return v(b)&&v(y)?f.ZERO:new f(b,y,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const b=n.invertBatch(m.map(y=>y.pz));return m.map((y,v)=>y.toAffine(b[v])).map(f.fromAffine)}static fromHex(m){const b=f.fromAffine(i(Pn("pointHex",m)));return b.assertValidity(),b}static fromPrivateKey(m){return f.BASE.multiply(l(m))}_setWindowSize(m){this._WINDOW_SIZE=m,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y:b}=this.toAffine();if(!n.isValid(m)||!n.isValid(b))throw new Error("bad point: x or y not FE");const y=n.sqr(b),v=o(m);if(!n.eql(y,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){c(m);const{px:b,py:y,pz:v}=this,{px:w,py:g,pz:x}=m,k=n.eql(n.mul(b,x),n.mul(w,v)),E=n.eql(n.mul(y,x),n.mul(g,v));return k&&E}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b}=e,y=n.mul(b,p_),{px:v,py:w,pz:g}=this;let x=n.ZERO,k=n.ZERO,E=n.ZERO,D=n.mul(v,v),O=n.mul(w,w),N=n.mul(g,g),C=n.mul(v,w);return C=n.add(C,C),E=n.mul(v,g),E=n.add(E,E),x=n.mul(m,E),k=n.mul(y,N),k=n.add(x,k),x=n.sub(O,k),k=n.add(O,k),k=n.mul(x,k),x=n.mul(C,x),E=n.mul(y,E),N=n.mul(m,N),C=n.sub(D,N),C=n.mul(m,C),C=n.add(C,E),E=n.add(D,D),D=n.add(E,D),D=n.add(D,N),D=n.mul(D,C),k=n.add(k,D),N=n.mul(w,g),N=n.add(N,N),D=n.mul(N,C),x=n.sub(x,D),E=n.mul(N,O),E=n.add(E,E),E=n.add(E,E),new f(x,k,E)}add(m){c(m);const{px:b,py:y,pz:v}=this,{px:w,py:g,pz:x}=m;let k=n.ZERO,E=n.ZERO,D=n.ZERO;const O=e.a,N=n.mul(e.b,p_);let C=n.mul(b,w),R=n.mul(y,g),T=n.mul(v,x),q=n.add(b,y),A=n.add(w,g);q=n.mul(q,A),A=n.add(C,R),q=n.sub(q,A),A=n.add(b,v);let S=n.add(w,x);return A=n.mul(A,S),S=n.add(C,T),A=n.sub(A,S),S=n.add(y,v),k=n.add(g,x),S=n.mul(S,k),k=n.add(R,T),S=n.sub(S,k),D=n.mul(O,A),k=n.mul(N,T),D=n.add(k,D),k=n.sub(R,D),D=n.add(R,D),E=n.mul(k,D),R=n.add(C,C),R=n.add(R,C),T=n.mul(O,T),A=n.mul(N,A),R=n.add(R,T),T=n.sub(C,T),T=n.mul(O,T),A=n.add(A,T),C=n.mul(R,A),E=n.add(E,C),C=n.mul(S,A),k=n.mul(q,k),k=n.sub(k,C),C=n.mul(q,R),D=n.mul(S,D),D=n.add(D,C),new f(k,E,D)}subtract(m){return this.add(m.negate())}is0(){return this.equals(f.ZERO)}wNAF(m){return h.wNAFCached(this,u,m,b=>{const y=n.invertBatch(b.map(v=>v.pz));return b.map((v,w)=>v.toAffine(y[w])).map(f.fromAffine)})}multiplyUnsafe(m){const b=f.ZERO;if(m===Bo)return b;if(a(m),m===ni)return this;const{endo:y}=e;if(!y)return h.unsafeLadder(this,m);let{k1neg:v,k1:w,k2neg:g,k2:x}=y.splitScalar(m),k=b,E=b,D=this;for(;w>Bo||x>Bo;)w&ni&&(k=k.add(D)),x&ni&&(E=E.add(D)),D=D.double(),w>>=ni,x>>=ni;return v&&(k=k.negate()),g&&(E=E.negate()),E=new f(n.mul(E.px,y.beta),E.py,E.pz),k.add(E)}multiply(m){a(m);let b=m,y,v;const{endo:w}=e;if(w){const{k1neg:g,k1:x,k2neg:k,k2:E}=w.splitScalar(b);let{p:D,f:O}=this.wNAF(x),{p:N,f:C}=this.wNAF(E);D=h.constTimeNegate(g,D),N=h.constTimeNegate(k,N),N=new f(n.mul(N.px,w.beta),N.py,N.pz),y=D.add(N),v=O.add(C)}else{const{p:g,f:x}=this.wNAF(b);y=g,v=x}return f.normalizeZ([y,v])[0]}multiplyAndAddUnsafe(m,b,y){const v=f.BASE,w=(x,k)=>k===Bo||k===ni||!x.equals(v)?x.multiplyUnsafe(k):x.multiply(k),g=w(this,b).add(w(m,y));return g.is0()?void 0:g}toAffine(m){const{px:b,py:y,pz:v}=this,w=this.is0();m==null&&(m=w?n.ONE:n.inv(v));const g=n.mul(b,m),x=n.mul(y,m),k=n.mul(v,m);if(w)return{x:n.ZERO,y:n.ZERO};if(!n.eql(k,n.ONE))throw new Error("invZ was invalid");return{x:g,y:x}}isTorsionFree(){const{h:m,isTorsionFree:b}=e;if(m===ni)return!0;if(b)return b(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:b}=e;return m===ni?this:b?b(f,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return this.assertValidity(),r(f,this,m)}toHex(m=!0){return wc(this.toRawBytes(m))}}f.BASE=new f(e.Gx,e.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const d=e.nBitLength,h=moe(f,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:s}}function woe(t){const e=W$(t);return Mh(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function koe(t){const e=woe(t),{Fp:n,n:r}=e,i=n.BYTES+1,o=2*n.BYTES+1;function s(A){return Bo<A&&A<n.ORDER}function a(A){return An(A,r)}function l(A){return Kw(A,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:f,isWithinCurveOrder:d}=voe({...e,toBytes(A,S,P){const B=S.toAffine(),j=n.toBytes(B.x),z=Nl;return P?z(Uint8Array.from([S.hasEvenY()?2:3]),j):z(Uint8Array.from([4]),j,n.toBytes(B.y))},fromBytes(A){const S=A.length,P=A[0],B=A.subarray(1);if(S===i&&(P===2||P===3)){const j=Sr(B);if(!s(j))throw new Error("Point is not on curve");const z=f(j);let J=n.sqrt(z);const K=(J&ni)===ni;return(P&1)===1!==K&&(J=n.neg(J)),{x:j,y:J}}else if(S===o&&P===4){const j=n.fromBytes(B.subarray(0,n.BYTES)),z=n.fromBytes(B.subarray(n.BYTES,2*n.BYTES));return{x:j,y:z}}else throw new Error(`Point of length ${S} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),h=A=>wc(ma(A,e.nByteLength));function p(A){const S=r>>ni;return A>S}function m(A){return p(A)?a(-A):A}const b=(A,S,P)=>Sr(A.slice(S,P));class y{constructor(S,P,B){this.r=S,this.s=P,this.recovery=B,this.assertValidity()}static fromCompact(S){const P=e.nByteLength;return S=Pn("compactSignature",S,P*2),new y(b(S,0,P),b(S,P,2*P))}static fromDER(S){const{r:P,s:B}=el.toSig(Pn("DER",S));return new y(P,B)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new y(this.r,this.s,S)}recoverPublicKey(S){const{r:P,s:B,recovery:j}=this,z=E(Pn("msgHash",S));if(j==null||![0,1,2,3].includes(j))throw new Error("recovery id invalid");const J=j===2||j===3?P+e.n:P;if(J>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const K=j&1?"03":"02",ae=u.fromHex(K+h(J)),fe=l(J),ke=a(-z*fe),ve=a(B*fe),xe=u.BASE.multiplyAndAddUnsafe(ae,ke,ve);if(!xe)throw new Error("point at infinify");return xe.assertValidity(),xe}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return kc(this.toDERHex())}toDERHex(){return el.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return kc(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const v={isValidPrivateKey(A){try{return c(A),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const A=H$(e.n);return hoe(e.randomBytes(A),e.n)},precompute(A=8,S=u.BASE){return S._setWindowSize(A),S.multiply(BigInt(3)),S}};function w(A,S=!0){return u.fromPrivateKey(A).toRawBytes(S)}function g(A){const S=A instanceof Uint8Array,P=typeof A=="string",B=(S||P)&&A.length;return S?B===i||B===o:P?B===2*i||B===2*o:A instanceof u}function x(A,S,P=!0){if(g(A))throw new Error("first arg must be private key");if(!g(S))throw new Error("second arg must be public key");return u.fromHex(S).multiply(c(A)).toRawBytes(P)}const k=e.bits2int||function(A){const S=Sr(A),P=A.length*8-e.nBitLength;return P>0?S>>BigInt(P):S},E=e.bits2int_modN||function(A){return a(k(A))},D=G3(e.nBitLength);function O(A){if(typeof A!="bigint")throw new Error("bigint expected");if(!(Bo<=A&&A<D))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ma(A,e.nByteLength)}function N(A,S,P=C){if(["recovered","canonical"].some(Oe=>Oe in P))throw new Error("sign() legacy options not supported");const{hash:B,randomBytes:j}=e;let{lowS:z,prehash:J,extraEntropy:K}=P;z==null&&(z=!0),A=Pn("msgHash",A),J&&(A=Pn("prehashed msgHash",B(A)));const ae=E(A),fe=c(S),ke=[O(fe),O(ae)];if(K!=null){const Oe=K===!0?j(n.BYTES):K;ke.push(Pn("extraEntropy",Oe))}const ve=Nl(...ke),xe=ae;function Se(Oe){const Fe=k(Oe);if(!d(Fe))return;const mt=l(Fe),Ce=u.BASE.multiply(Fe).toAffine(),pe=a(Ce.x);if(pe===Bo)return;const De=a(mt*a(xe+pe*fe));if(De===Bo)return;let Le=(Ce.x===pe?0:2)|Number(Ce.y&ni),Ze=De;return z&&p(De)&&(Ze=m(De),Le^=1),new y(pe,Ze,Le)}return{seed:ve,k2sig:Se}}const C={lowS:e.lowS,prehash:!1},R={lowS:e.lowS,prehash:!1};function T(A,S,P=C){const{seed:B,k2sig:j}=N(A,S,P),z=e;return q$(z.hash.outputLen,z.nByteLength,z.hmac)(B,j)}u.BASE._setWindowSize(8);function q(A,S,P,B=R){var Ce;const j=A;if(S=Pn("msgHash",S),P=Pn("publicKey",P),"strict"in B)throw new Error("options.strict was renamed to lowS");const{lowS:z,prehash:J}=B;let K,ae;try{if(typeof j=="string"||j instanceof Uint8Array)try{K=y.fromDER(j)}catch(pe){if(!(pe instanceof el.Err))throw pe;K=y.fromCompact(j)}else if(typeof j=="object"&&typeof j.r=="bigint"&&typeof j.s=="bigint"){const{r:pe,s:De}=j;K=new y(pe,De)}else throw new Error("PARSE");ae=u.fromHex(P)}catch(pe){if(pe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(z&&K.hasHighS())return!1;J&&(S=e.hash(S));const{r:fe,s:ke}=K,ve=E(S),xe=l(ke),Se=a(ve*xe),Oe=a(fe*xe),Fe=(Ce=u.BASE.multiplyAndAddUnsafe(ae,Se,Oe))==null?void 0:Ce.toAffine();return Fe?a(Fe.x)===fe:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:x,sign:T,verify:q,ProjectivePoint:u,Signature:y,utils:v}}let J$=class extends B${constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Fie(e);const r=W3(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return s1(this),this.iHash.update(e),this}digestInto(e){s1(this),F$(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const K$=(t,e,n)=>new J$(t,e).update(n).digest();K$.create=(t,e)=>new J$(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xoe(t){return{hash:t,hmac:(e,...n)=>K$(t,e,zie(...n)),randomBytes:P$}}function Eoe(t,e){const n=r=>koe({...t,...xoe(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ig=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),a1=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Z$=BigInt(1),l1=BigInt(2),m_=(t,e)=>(t+e/l1)/e;function G$(t){const e=Ig,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),u=t*t*t%e,c=u*u*t%e,f=Xr(c,n,e)*c%e,d=Xr(f,n,e)*c%e,h=Xr(d,l1,e)*u%e,p=Xr(h,i,e)*h%e,m=Xr(p,o,e)*p%e,b=Xr(m,a,e)*m%e,y=Xr(b,l,e)*b%e,v=Xr(y,a,e)*m%e,w=Xr(v,n,e)*c%e,g=Xr(w,s,e)*p%e,x=Xr(g,r,e)*u%e,k=Xr(x,l1,e);if(!Zw.eql(Zw.sqr(k),t))throw new Error("Cannot find square root");return k}const Zw=doe(Ig,void 0,void 0,{sqrt:G$}),Pc=Eoe({a:BigInt(0),b:BigInt(7),Fp:Zw,n:a1,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=a1,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Z$*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=m_(o*t,e),l=m_(-r*t,e);let u=An(t-a*n-l*i,e),c=An(-a*r-l*o,e);const f=u>s,d=c>s;if(f&&(u=e-u),d&&(c=e-c),u>s||c>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:u,k2neg:d,k2:c}}}},Ww),Rg=BigInt(0),Y$=t=>typeof t=="bigint"&&Rg<t&&t<Ig,Soe=t=>typeof t=="bigint"&&Rg<t&&t<a1,g_={};function u1(t,...e){let n=g_[t];if(n===void 0){const r=Ww(Uint8Array.from(t,i=>i.charCodeAt(0)));n=Nl(r,r),g_[t]=n}return Ww(Nl(n,...e))}const Y3=t=>t.toRawBytes(!0).slice(1),Gw=t=>ma(t,32),Wb=t=>An(t,Ig),Yd=t=>An(t,a1),Q3=Pc.ProjectivePoint,Coe=(t,e,n)=>Q3.BASE.multiplyAndAddUnsafe(t,e,n);function Yw(t){let e=Pc.utils.normPrivateKeyToScalar(t),n=Q3.fromPrivateKey(e);return{scalar:n.hasEvenY()?e:Yd(-e),bytes:Y3(n)}}function Q$(t){if(!Y$(t))throw new Error("bad x: need 0 < x < p");const e=Wb(t*t),n=Wb(e*t+BigInt(7));let r=G$(n);r%l1!==Rg&&(r=Wb(-r));const i=new Q3(t,r,Z$);return i.assertValidity(),i}function X$(...t){return Yd(Sr(u1("BIP0340/challenge",...t)))}function _oe(t){return Yw(t).bytes}function Aoe(t,e,n=P$(32)){const r=Pn("message",t),{bytes:i,scalar:o}=Yw(e),s=Pn("auxRand",n,32),a=Gw(o^Sr(u1("BIP0340/aux",s))),l=u1("BIP0340/nonce",a,i,r),u=Yd(Sr(l));if(u===Rg)throw new Error("sign failed: k is zero");const{bytes:c,scalar:f}=Yw(u),d=X$(c,i,r),h=new Uint8Array(64);if(h.set(c,0),h.set(Gw(Yd(f+d*o)),32),!e9(h,r,i))throw new Error("sign: Invalid signature produced");return h}function e9(t,e,n){const r=Pn("signature",t,64),i=Pn("message",e),o=Pn("publicKey",n,32);try{const s=Q$(Sr(o)),a=Sr(r.subarray(0,32));if(!Y$(a))return!1;const l=Sr(r.subarray(32,64));if(!Soe(l))return!1;const u=X$(Gw(a),Y3(s),i),c=Coe(s,l,Yd(-u));return!(!c||!c.hasEvenY()||c.toAffine().x!==a)}catch{return!1}}const no={getPublicKey:_oe,sign:Aoe,verify:e9,utils:{randomPrivateKey:Pc.utils.randomPrivateKey,lift_x:Q$,pointToBytes:Y3,numberToBytesBE:ma,bytesToNumberBE:Sr,taggedHash:u1,mod:An}},Jb=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const X3=t=>t instanceof Uint8Array,Kb=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Hi=(t,e)=>t<<32-e|t>>>e,Toe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Toe)throw new Error("Non little-endian hardware is not supported");const Moe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function un(t){if(!X3(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=Moe[t[n]];return e}function xc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function Ooe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Qd(t){if(typeof t=="string"&&(t=Ooe(t)),!X3(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Fg(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!X3(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class t9{clone(){return this._cloneInto()}}function n9(t){const e=r=>t().update(Qd(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function r9(t=32){if(Jb&&typeof Jb.getRandomValues=="function")return Jb.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Qw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Doe(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function i9(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Noe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Qw(t.outputLen),Qw(t.blockLen)}function $oe(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ioe(t,e){i9(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const uo={number:Qw,bool:Doe,bytes:i9,hash:Noe,exists:$oe,output:Ioe};function Roe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),l=r?4:0,u=r?0:4;t.setUint32(e+l,s,r),t.setUint32(e+u,a,r)}class Foe extends t9{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Kb(this.buffer)}update(e){uo.exists(this);const{view:n,buffer:r,blockLen:i}=this;e=Qd(e);const o=e.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const l=Kb(e);for(;i<=o-s;s+=i)this.process(l,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){uo.exists(this),uo.output(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let f=s;f<i;f++)n[f]=0;Roe(r,i-8,BigInt(this.length*8),o),this.process(r,0);const a=Kb(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,c[f],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%n&&e.buffer.set(r),e}}const Loe=(t,e,n)=>t&e^~t&n,Boe=(t,e,n)=>t&e^t&n^e&n,Poe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Es=new Uint32Array(64);class o9 extends Foe{constructor(){super(64,32,8,!1),this.A=xs[0]|0,this.B=xs[1]|0,this.C=xs[2]|0,this.D=xs[3]|0,this.E=xs[4]|0,this.F=xs[5]|0,this.G=xs[6]|0,this.H=xs[7]|0}get(){const{A:e,B:n,C:r,D:i,E:o,F:s,G:a,H:l}=this;return[e,n,r,i,o,s,a,l]}set(e,n,r,i,o,s,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=l|0}process(e,n){for(let f=0;f<16;f++,n+=4)Es[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const d=Es[f-15],h=Es[f-2],p=Hi(d,7)^Hi(d,18)^d>>>3,m=Hi(h,17)^Hi(h,19)^h>>>10;Es[f]=m+Es[f-7]+p+Es[f-16]|0}let{A:r,B:i,C:o,D:s,E:a,F:l,G:u,H:c}=this;for(let f=0;f<64;f++){const d=Hi(a,6)^Hi(a,11)^Hi(a,25),h=c+d+Loe(a,l,u)+Poe[f]+Es[f]|0,m=(Hi(r,2)^Hi(r,13)^Hi(r,22))+Boe(r,i,o)|0;c=u,u=l,l=a,a=s+h|0,s=o,o=i,i=r,r=h+m|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,i,o,s,a,l,u,c)}roundClean(){Es.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class zoe extends o9{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const zc=n9(()=>new o9);n9(()=>new zoe);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function jc(t){if(!Number.isSafeInteger(t))throw new Error(`Wrong integer: ${t}`)}function us(...t){const e=(i,o)=>s=>i(o(s)),n=Array.from(t).reverse().reduce((i,o)=>i?e(i,o.encode):o.encode,void 0),r=t.reduce((i,o)=>i?e(i,o.decode):o.decode,void 0);return{encode:n,decode:r}}function cs(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(n=>{if(jc(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]})},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r})}}}function fs(t=""){if(typeof t!="string")throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of e)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return e.join(t)},decode:e=>{if(typeof e!="string")throw new Error("join.decode input should be string");return e.split(t)}}}function Lg(t,e="="){if(jc(t),typeof e!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*t%8;)n.push(e);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of n)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let r=n.length;if(r*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if(!((r-1)*t%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function s9(t){if(typeof t!="function")throw new Error("normalize fn should be function");return{encode:e=>e,decode:e=>t(e)}}function y_(t,e,n){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(t))throw new Error("convertRadix: data should be array");if(!t.length)return[];let r=0;const i=[],o=Array.from(t);for(o.forEach(s=>{if(jc(s),s<0||s>=e)throw new Error(`Wrong integer: ${s}`)});;){let s=0,a=!0;for(let l=r;l<o.length;l++){const u=o[l],c=e*s+u;if(!Number.isSafeInteger(c)||e*s/e!==s||c-u!==e*s)throw new Error("convertRadix: carry overflow");if(s=c%n,o[l]=Math.floor(c/n),!Number.isSafeInteger(o[l])||o[l]*n+s!==c)throw new Error("convertRadix: carry overflow");if(a)o[l]?a=!1:r=l;else continue}if(i.push(s),a)break}for(let s=0;s<t.length-1&&t[s]===0;s++)i.push(0);return i.reverse()}const a9=(t,e)=>e?a9(e,t%e):t,c1=(t,e)=>t+(e-a9(t,e));function Xw(t,e,n,r){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(c1(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${c1(e,n)}`);let i=0,o=0;const s=2**n-1,a=[];for(const l of t){if(jc(l),l>=2**e)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(i=i<<e|l,o+e>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${e}`);for(o+=e;o>=n;o-=n)a.push((i>>o-n&s)>>>0);i&=2**o-1}if(i=i<<n-o&s,!r&&o>=e)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&o>0&&a.push(i>>>0),a}function joe(t){return jc(t),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return y_(Array.from(e),2**8,t)},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(y_(e,t,2**8))}}}function Ma(t,e=!1){if(jc(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(c1(8,t)>32||c1(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Xw(Array.from(n),8,t,!e)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Xw(n,t,8,e))}}}function b_(t){if(typeof t!="function")throw new Error("unsafeWrapper fn should be function");return function(...e){try{return t.apply(null,e)}catch{}}}const qoe=us(Ma(4),cs("0123456789ABCDEF"),fs("")),Voe=us(Ma(5),cs("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Lg(5),fs(""));us(Ma(5),cs("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Lg(5),fs(""));us(Ma(5),cs("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),fs(""),s9(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const Qo=us(Ma(6),cs("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Lg(6),fs("")),Uoe=us(Ma(6),cs("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Lg(6),fs("")),eE=t=>us(joe(58),cs(t),fs("")),ek=eE("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");eE("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");eE("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const v_=[0,2,3,5,6,7,9,10,11],Hoe={encode(t){let e="";for(let n=0;n<t.length;n+=8){const r=t.subarray(n,n+8);e+=ek.encode(r).padStart(v_[r.length],"1")}return e},decode(t){let e=[];for(let n=0;n<t.length;n+=11){const r=t.slice(n,n+11),i=v_.indexOf(r.length),o=ek.decode(r);for(let s=0;s<o.length-i;s++)if(o[s]!==0)throw new Error("base58xmr: wrong padding");e=e.concat(Array.from(o.slice(o.length-i)))}return Uint8Array.from(e)}},tk=us(cs("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),fs("")),w_=[996825010,642813549,513874426,1027748829,705979059];function ff(t){const e=t>>25;let n=(t&33554431)<<5;for(let r=0;r<w_.length;r++)(e>>r&1)===1&&(n^=w_[r]);return n}function k_(t,e,n=1){const r=t.length;let i=1;for(let o=0;o<r;o++){const s=t.charCodeAt(o);if(s<33||s>126)throw new Error(`Invalid prefix (${t})`);i=ff(i)^s>>5}i=ff(i);for(let o=0;o<r;o++)i=ff(i)^t.charCodeAt(o)&31;for(let o of e)i=ff(i)^o;for(let o=0;o<6;o++)i=ff(i);return i^=n,tk.encode(Xw([i%2**30],30,5,!1))}function l9(t){const e=t==="bech32"?1:734539939,n=Ma(5),r=n.decode,i=n.encode,o=b_(r);function s(c,f,d=90){if(typeof c!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof c}`);if(!Array.isArray(f)||f.length&&typeof f[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof f}`);const h=c.length+7+f.length;if(d!==!1&&h>d)throw new TypeError(`Length ${h} exceeds limit ${d}`);return c=c.toLowerCase(),`${c}1${tk.encode(f)}${k_(c,f,e)}`}function a(c,f=90){if(typeof c!="string")throw new Error(`bech32.decode input should be string, not ${typeof c}`);if(c.length<8||f!==!1&&c.length>f)throw new TypeError(`Wrong string length: ${c.length} (${c}). Expected (8..${f})`);const d=c.toLowerCase();if(c!==d&&c!==c.toUpperCase())throw new Error("String must be lowercase or uppercase");c=d;const h=c.lastIndexOf("1");if(h===0||h===-1)throw new Error('Letter "1" must be present between prefix and data only');const p=c.slice(0,h),m=c.slice(h+1);if(m.length<6)throw new Error("Data must be at least 6 characters long");const b=tk.decode(m).slice(0,-6),y=k_(p,b,e);if(!m.endsWith(y))throw new Error(`Invalid checksum in ${c}: expected "${y}"`);return{prefix:p,words:b}}const l=b_(a);function u(c){const{prefix:f,words:d}=a(c,!1);return{prefix:f,words:d,bytes:r(d)}}return{encode:s,decode:a,decodeToBytes:u,decodeUnsafe:l,fromWords:r,fromWordsUnsafe:o,toWords:i}}const Ec=l9("bech32");l9("bech32m");const Woe={encode:t=>new TextDecoder().decode(t),decode:t=>new TextEncoder().encode(t)},Joe=us(Ma(4),cs("0123456789abcdef"),fs(""),s9(t=>{if(typeof t!="string"||t.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()})),Koe={utf8:Woe,hex:Joe,base16:qoe,base32:Voe,base64:Qo,base64url:Uoe,base58:ek,base58xmr:Hoe};`${Object.keys(Koe).join(", ")}`;function Zb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function x_(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function Zoe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Vo(t,...e){if(!Zoe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const Vn=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Goe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Goe)throw new Error("Non little-endian hardware is not supported");function Yoe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Qoe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Xoe=(t,e)=>(Object.assign(e,t),e),la=16,ese=283;function tE(t){return t<<1^ese&-(t>>7)}function Mu(t,e){let n=0;for(;e>0;e>>=1)n^=t&-(e&1),t=tE(t);return n}const nk=(()=>{let t=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=tE(r))t[n]=r;const e=new Uint8Array(256);e[0]=99;for(let n=0;n<255;n++){let r=t[255-n];r|=r<<8,e[t[n]]=(r^r>>4^r>>5^r>>6^r>>7^99)&255}return e})(),tse=nk.map((t,e)=>nk.indexOf(e)),nse=t=>t<<24|t>>>8,Gb=t=>t<<8|t>>>24;function u9(t,e){if(t.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((u,c)=>e(t[c])),r=n.map(Gb),i=r.map(Gb),o=i.map(Gb),s=new Uint32Array(256*256),a=new Uint32Array(256*256),l=new Uint16Array(256*256);for(let u=0;u<256;u++)for(let c=0;c<256;c++){const f=u*256+c;s[f]=n[u]^r[c],a[f]=i[u]^o[c],l[f]=t[u]<<8|t[c]}return{sbox:t,sbox2:l,T0:n,T1:r,T2:i,T3:o,T01:s,T23:a}}const nE=u9(nk,t=>Mu(t,3)<<24|t<<16|t<<8|Mu(t,2)),c9=u9(tse,t=>Mu(t,11)<<24|Mu(t,13)<<16|Mu(t,9)<<8|Mu(t,14)),rse=(()=>{const t=new Uint8Array(16);for(let e=0,n=1;e<16;e++,n=tE(n))t[e]=n;return t})();function f9(t){Vo(t);const e=t.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:n}=nE,r=Vn(t),i=r.length,o=a=>co(n,a,a,a,a),s=new Uint32Array(e+28);s.set(r);for(let a=i;a<s.length;a++){let l=s[a-1];a%i===0?l=o(nse(l))^rse[a/i-1]:i>6&&a%i===4&&(l=o(l)),s[a]=s[a-i]^l}return s}function ise(t){const e=f9(t),n=e.slice(),r=e.length,{sbox2:i}=nE,{T0:o,T1:s,T2:a,T3:l}=c9;for(let u=0;u<r;u+=4)for(let c=0;c<4;c++)n[u+c]=e[r-u-4+c];e.fill(0);for(let u=4;u<r-4;u++){const c=n[u],f=co(i,c,c,c,c);n[u]=o[f&255]^s[f>>>8&255]^a[f>>>16&255]^l[f>>>24]}return n}function Js(t,e,n,r,i,o){return t[n<<8&65280|r>>>8&255]^e[i>>>8&65280|o>>>24&255]}function co(t,e,n,r,i){return t[e&255|n&65280]|t[r>>>16&255|i>>>16&65280]<<16}function E_(t,e,n,r,i){const{sbox2:o,T01:s,T23:a}=nE;let l=0;e^=t[l++],n^=t[l++],r^=t[l++],i^=t[l++];const u=t.length/4-2;for(let p=0;p<u;p++){const m=t[l++]^Js(s,a,e,n,r,i),b=t[l++]^Js(s,a,n,r,i,e),y=t[l++]^Js(s,a,r,i,e,n),v=t[l++]^Js(s,a,i,e,n,r);e=m,n=b,r=y,i=v}const c=t[l++]^co(o,e,n,r,i),f=t[l++]^co(o,n,r,i,e),d=t[l++]^co(o,r,i,e,n),h=t[l++]^co(o,i,e,n,r);return{s0:c,s1:f,s2:d,s3:h}}function ose(t,e,n,r,i){const{sbox2:o,T01:s,T23:a}=c9;let l=0;e^=t[l++],n^=t[l++],r^=t[l++],i^=t[l++];const u=t.length/4-2;for(let p=0;p<u;p++){const m=t[l++]^Js(s,a,e,i,r,n),b=t[l++]^Js(s,a,n,e,i,r),y=t[l++]^Js(s,a,r,n,e,i),v=t[l++]^Js(s,a,i,r,n,e);e=m,n=b,r=y,i=v}const c=t[l++]^co(o,e,i,r,n),f=t[l++]^co(o,n,e,i,r),d=t[l++]^co(o,r,n,e,i),h=t[l++]^co(o,i,r,n,e);return{s0:c,s1:f,s2:d,s3:h}}function d9(t,e){if(!e)return new Uint8Array(t);if(Vo(e),e.length<t)throw new Error(`aes: wrong destination length, expected at least ${t}, got: ${e.length}`);return e}function sse(t){if(Vo(t),t.length%la!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${la}`)}function ase(t,e,n){let r=t.length;const i=r%la;if(!e&&i!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const o=Vn(t);if(e){let l=la-i;l||(l=la),r=r+l}const s=d9(r,n),a=Vn(s);return{b:o,o:a,out:s}}function lse(t,e){if(!e)return t;const n=t.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=t[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const i=t.subarray(0,-r);for(let o=0;o<r;o++)if(t[n-o-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function use(t){const e=new Uint8Array(16),n=Vn(e);e.set(t);const r=la-t.length;for(let i=la-r;i<la;i++)e[i]=r;return n}const h9=Xoe({blockSize:16,nonceLength:16},function(e,n,r={}){Vo(e),Vo(n,16);const i=!r.disablePadding;return{encrypt:(o,s)=>{const a=f9(e),{b:l,o:u,out:c}=ase(o,i,s),f=Vn(n);let d=f[0],h=f[1],p=f[2],m=f[3],b=0;for(;b+4<=l.length;)d^=l[b+0],h^=l[b+1],p^=l[b+2],m^=l[b+3],{s0:d,s1:h,s2:p,s3:m}=E_(a,d,h,p,m),u[b++]=d,u[b++]=h,u[b++]=p,u[b++]=m;if(i){const y=use(o.subarray(b*4));d^=y[0],h^=y[1],p^=y[2],m^=y[3],{s0:d,s1:h,s2:p,s3:m}=E_(a,d,h,p,m),u[b++]=d,u[b++]=h,u[b++]=p,u[b++]=m}return a.fill(0),c},decrypt:(o,s)=>{sse(o);const a=ise(e),l=Vn(n),u=d9(o.length,s),c=Vn(o),f=Vn(u);let d=l[0],h=l[1],p=l[2],m=l[3];for(let b=0;b+4<=c.length;){const y=d,v=h,w=p,g=m;d=c[b+0],h=c[b+1],p=c[b+2],m=c[b+3];const{s0:x,s1:k,s2:E,s3:D}=ose(a,d,h,p,m);f[b++]=x^y,f[b++]=k^v,f[b++]=E^w,f[b++]=D^g}return a.fill(0),lse(u,i)}}}),p9=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),cse=p9("expand 16-byte k"),fse=p9("expand 32-byte k"),dse=Vn(cse),m9=Vn(fse);m9.slice();function Qe(t,e){return t<<e|t>>>32-e}function rk(t){return t.byteOffset%4===0}const Tp=64,hse=16,g9=2**32-1,S_=new Uint32Array;function pse(t,e,n,r,i,o,s,a){const l=i.length,u=new Uint8Array(Tp),c=Vn(u),f=rk(i)&&rk(o),d=f?Vn(i):S_,h=f?Vn(o):S_;for(let p=0;p<l;s++){if(t(e,n,r,c,s,a),s>=g9)throw new Error("arx: counter overflow");const m=Math.min(Tp,l-p);if(f&&m===Tp){const b=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,v;y<hse;y++)v=b+y,h[v]=d[v]^c[y];p+=Tp;continue}for(let b=0,y;b<m;b++)y=p+b,o[y]=i[y]^u[b];p+=m}}function mse(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:o,rounds:s}=Yoe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Zb(i),Zb(s),x_(o),x_(n),(a,l,u,c,f=0)=>{Vo(a),Vo(l),Vo(u);const d=u.length;if(c||(c=new Uint8Array(d)),Vo(c),Zb(f),f<0||f>=g9)throw new Error("arx: counter overflow");if(c.length<d)throw new Error(`arx: output (${c.length}) is shorter than data (${d})`);const h=[];let p=a.length,m,b;if(p===32)m=a.slice(),h.push(m),b=m9;else if(p===16&&n)m=new Uint8Array(32),m.set(a),m.set(a,16),b=dse,h.push(m);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);rk(l)||(l=l.slice(),h.push(l));const y=Vn(m);if(r){if(l.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(b,y,Vn(l.subarray(0,16)),y),l=l.subarray(16)}const v=16-i;if(v!==l.length)throw new Error(`arx: nonce must be ${v} or 16 bytes`);if(v!==12){const g=new Uint8Array(12);g.set(l,o?0:12-l.length),l=g,h.push(l)}const w=Vn(l);for(pse(t,b,y,w,u,c,f,s);h.length>0;)h.pop().fill(0);return c}}function gse(t,e,n,r,i,o=20){let s=t[0],a=t[1],l=t[2],u=t[3],c=e[0],f=e[1],d=e[2],h=e[3],p=e[4],m=e[5],b=e[6],y=e[7],v=i,w=n[0],g=n[1],x=n[2],k=s,E=a,D=l,O=u,N=c,C=f,R=d,T=h,q=p,A=m,S=b,P=y,B=v,j=w,z=g,J=x;for(let ae=0;ae<o;ae+=2)k=k+N|0,B=Qe(B^k,16),q=q+B|0,N=Qe(N^q,12),k=k+N|0,B=Qe(B^k,8),q=q+B|0,N=Qe(N^q,7),E=E+C|0,j=Qe(j^E,16),A=A+j|0,C=Qe(C^A,12),E=E+C|0,j=Qe(j^E,8),A=A+j|0,C=Qe(C^A,7),D=D+R|0,z=Qe(z^D,16),S=S+z|0,R=Qe(R^S,12),D=D+R|0,z=Qe(z^D,8),S=S+z|0,R=Qe(R^S,7),O=O+T|0,J=Qe(J^O,16),P=P+J|0,T=Qe(T^P,12),O=O+T|0,J=Qe(J^O,8),P=P+J|0,T=Qe(T^P,7),k=k+C|0,J=Qe(J^k,16),S=S+J|0,C=Qe(C^S,12),k=k+C|0,J=Qe(J^k,8),S=S+J|0,C=Qe(C^S,7),E=E+R|0,B=Qe(B^E,16),P=P+B|0,R=Qe(R^P,12),E=E+R|0,B=Qe(B^E,8),P=P+B|0,R=Qe(R^P,7),D=D+T|0,j=Qe(j^D,16),q=q+j|0,T=Qe(T^q,12),D=D+T|0,j=Qe(j^D,8),q=q+j|0,T=Qe(T^q,7),O=O+N|0,z=Qe(z^O,16),A=A+z|0,N=Qe(N^A,12),O=O+N|0,z=Qe(z^O,8),A=A+z|0,N=Qe(N^A,7);let K=0;r[K++]=s+k|0,r[K++]=a+E|0,r[K++]=l+D|0,r[K++]=u+O|0,r[K++]=c+N|0,r[K++]=f+C|0,r[K++]=d+R|0,r[K++]=h+T|0,r[K++]=p+q|0,r[K++]=m+A|0,r[K++]=b+S|0,r[K++]=y+P|0,r[K++]=v+B|0,r[K++]=w+j|0,r[K++]=g+z|0,r[K++]=x+J|0}const y9=mse(gse,{counterRight:!1,counterLength:4,allowShortKeys:!1});class b9 extends t9{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,uo.hash(e);const r=Qd(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return uo.exists(this),this.iHash.update(e),this}digestInto(e){uo.exists(this),uo.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Bg=(t,e,n)=>new b9(t,e).update(n).digest();Bg.create=(t,e)=>new b9(t,e);function yse(t,e,n){return uo.hash(t),Bg(t,Qd(n),Qd(e))}const Yb=new Uint8Array([0]),C_=new Uint8Array;function bse(t,e,n,r=32){if(uo.hash(t),uo.number(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=C_);const o=new Uint8Array(i*t.outputLen),s=Bg.create(t,e),a=s._cloneInto(),l=new Uint8Array(s.outputLen);for(let u=0;u<i;u++)Yb[0]=u+1,a.update(u===0?C_:l).update(n).update(Yb).digestInto(l),o.set(l,t.outputLen*u),s._cloneInto(a);return s.destroy(),a.destroy(),l.fill(0),Yb.fill(0),o.slice(0,r)}var vse=Object.defineProperty,Ht=(t,e)=>{for(var n in e)vse(t,n,{get:e[n],enumerable:!0})},Xl=Symbol("verified"),wse=t=>t instanceof Object;function v9(t){if(!wse(t)||typeof t.kind!="number"||typeof t.content!="string"||typeof t.created_at!="number"||typeof t.pubkey!="string"||!t.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(t.tags))return!1;for(let e=0;e<t.tags.length;e++){let n=t.tags[e];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}var kse={};Ht(kse,{Queue:()=>Cse,QueueNode:()=>w9,binarySearch:()=>rE,insertEventIntoAscendingList:()=>Sse,insertEventIntoDescendingList:()=>Ese,normalizeURL:()=>xse,utf8Decoder:()=>ro,utf8Encoder:()=>Li});var ro=new TextDecoder("utf-8"),Li=new TextEncoder;function xse(t){t.indexOf("://")===-1&&(t="wss://"+t);let e=new URL(t);return e.pathname=e.pathname.replace(/\/+/g,"/"),e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1)),(e.port==="80"&&e.protocol==="ws:"||e.port==="443"&&e.protocol==="wss:")&&(e.port=""),e.searchParams.sort(),e.hash="",e.toString()}function Ese(t,e){const[n,r]=rE(t,i=>e.id===i.id?0:e.created_at===i.created_at?-1:i.created_at-e.created_at);return r||t.splice(n,0,e),t}function Sse(t,e){const[n,r]=rE(t,i=>e.id===i.id?0:e.created_at===i.created_at?-1:e.created_at-i.created_at);return r||t.splice(n,0,e),t}function rE(t,e){let n=0,r=t.length-1;for(;n<=r;){const i=Math.floor((n+r)/2),o=e(t[i]);if(o===0)return[i,!0];o<0?r=i-1:n=i+1}return[n,!1]}var w9=class{constructor(e){Te(this,"value");Te(this,"next",null);Te(this,"prev",null);this.value=e}},Cse=class{constructor(){Te(this,"first");Te(this,"last");this.first=null,this.last=null}enqueue(e){const n=new w9(e);return this.last?this.last===this.first?(this.last=n,this.last.prev=this.first,this.first.next=n):(n.prev=this.last,this.last.next=n,this.last=n):(this.first=n,this.last=n),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const n=this.first;return this.first=null,this.last=null,n.value}const e=this.first;return this.first=e.next,e.value}},_se=class{generateSecretKey(){return no.utils.randomPrivateKey()}getPublicKey(e){return un(no.getPublicKey(e))}finalizeEvent(e,n){const r=e;return r.pubkey=un(no.getPublicKey(n)),r.id=k0(r),r.sig=un(no.sign(k0(r),n)),r[Xl]=!0,r}verifyEvent(e){if(typeof e[Xl]=="boolean")return e[Xl];const n=k0(e);if(n!==e.id)return e[Xl]=!1,!1;try{const r=no.verify(e.sig,n,e.pubkey);return e[Xl]=r,r}catch{return e[Xl]=!1,!1}}};function Ase(t){if(!v9(t))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content])}function k0(t){let e=zc(Li.encode(Ase(t)));return un(e)}var Pg=new _se;Pg.generateSecretKey;Pg.getPublicKey;var Oa=Pg.finalizeEvent,iE=Pg.verifyEvent,Tse={};Ht(Tse,{Application:()=>Tae,BadgeAward:()=>Lse,BadgeDefinition:()=>kae,BlockedRelaysList:()=>sae,BookmarkList:()=>rae,Bookmarksets:()=>bae,Calendar:()=>Rae,CalendarEventRSVP:()=>Fae,ChannelCreation:()=>C9,ChannelHideMessage:()=>T9,ChannelMessage:()=>A9,ChannelMetadata:()=>_9,ChannelMuteUser:()=>M9,ClassifiedListing:()=>Dae,ClientAuth:()=>O9,CommunitiesList:()=>iae,CommunityDefinition:()=>Pae,CommunityPostApproval:()=>Wse,Contacts:()=>$se,CreateOrUpdateProduct:()=>Sae,CreateOrUpdateStall:()=>Eae,Curationsets:()=>vae,Date:()=>$ae,DraftClassifiedListing:()=>Nae,DraftLong:()=>_ae,Emojisets:()=>Aae,EncryptedDirectMessage:()=>Ise,EncryptedDirectMessages:()=>Rse,EventDeletion:()=>Fse,FileMetadata:()=>zse,FileServerPreference:()=>cae,Followsets:()=>mae,GenericRepost:()=>Bse,Genericlists:()=>gae,HTTPAuth:()=>aE,Handlerinformation:()=>Bae,Handlerrecommendation:()=>Lae,Highlights:()=>Xse,InterestsList:()=>lae,Interestsets:()=>xae,JobFeedback:()=>Zse,JobRequest:()=>Jse,JobResult:()=>Kse,Label:()=>Hse,LightningPubRPC:()=>dae,LiveChatMessage:()=>jse,LiveEvent:()=>Mae,LongFormArticle:()=>Cae,Metadata:()=>Ose,Mutelist:()=>eae,NWCWalletInfo:()=>fae,NWCWalletRequest:()=>D9,NWCWalletResponse:()=>hae,NostrConnect:()=>pae,OpenTimestamps:()=>Pse,Pinlist:()=>tae,ProblemTracker:()=>qse,ProfileBadges:()=>wae,PublicChatsList:()=>oae,Reaction:()=>sE,RecommendRelay:()=>Nse,RelayList:()=>nae,Relaysets:()=>yae,Report:()=>Vse,Reporting:()=>Use,Repost:()=>oE,SearchRelaysList:()=>aae,ShortTextNote:()=>Dse,Time:()=>Iae,UserEmojiList:()=>uae,UserStatuses:()=>Oae,Zap:()=>Qse,ZapGoal:()=>Gse,ZapRequest:()=>Yse,classifyKind:()=>Mse,isEphemeralKind:()=>E9,isParameterizedReplaceableKind:()=>S9,isRegularKind:()=>k9,isReplaceableKind:()=>x9});function k9(t){return 1e3<=t&&t<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(t)}function x9(t){return[0,3].includes(t)||1e4<=t&&t<2e4}function E9(t){return 2e4<=t&&t<3e4}function S9(t){return 3e4<=t&&t<4e4}function Mse(t){return k9(t)?"regular":x9(t)?"replaceable":E9(t)?"ephemeral":S9(t)?"parameterized":"unknown"}var Ose=0,Dse=1,Nse=2,$se=3,Ise=4,Rse=4,Fse=5,oE=6,sE=7,Lse=8,Bse=16,C9=40,_9=41,A9=42,T9=43,M9=44,Pse=1040,zse=1063,jse=1311,qse=1971,Vse=1984,Use=1984,Hse=1985,Wse=4550,Jse=5999,Kse=6999,Zse=7e3,Gse=9041,Yse=9734,Qse=9735,Xse=9802,eae=1e4,tae=10001,nae=10002,rae=10003,iae=10004,oae=10005,sae=10006,aae=10007,lae=10015,uae=10030,cae=10096,fae=13194,dae=21e3,O9=22242,D9=23194,hae=23195,pae=24133,aE=27235,mae=3e4,gae=30001,yae=30002,bae=30003,vae=30004,wae=30008,kae=30009,xae=30015,Eae=30017,Sae=30018,Cae=30023,_ae=30024,Aae=30030,Tae=30078,Mae=30311,Oae=30315,Dae=30402,Nae=30403,$ae=31922,Iae=31923,Rae=31924,Fae=31925,Lae=31989,Bae=31990,Pae=34550,zae={};Ht(zae,{getHex64:()=>lE,getInt:()=>N9,getSubscriptionId:()=>jae,matchEventId:()=>qae,matchEventKind:()=>Uae,matchEventPubkey:()=>Vae});function lE(t,e){let n=e.length+3,r=t.indexOf(`"${e}":`)+n,i=t.slice(r).indexOf('"')+r+1;return t.slice(i,i+64)}function N9(t,e){let n=e.length,r=t.indexOf(`"${e}":`)+n+3,i=t.slice(r),o=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,o),10)}function jae(t){let e=t.slice(0,22).indexOf('"EVENT"');if(e===-1)return null;let n=t.slice(e+7+1).indexOf('"');if(n===-1)return null;let r=e+7+1+n,i=t.slice(r+1,80).indexOf('"');if(i===-1)return null;let o=r+1+i;return t.slice(r+1,o)}function qae(t,e){return e===lE(t,"id")}function Vae(t,e){return e===lE(t,"pubkey")}function Uae(t,e){return e===N9(t,"kind")}var Hae={};Ht(Hae,{makeAuthEvent:()=>Wae});function Wae(t,e){return{kind:O9,created_at:Math.floor(Date.now()/1e3),tags:[["relay",t],["challenge",e]],content:""}}var Jae;try{Jae=WebSocket}catch{}var Kae;try{Kae=WebSocket}catch{}var $9={};Ht($9,{BECH32_REGEX:()=>I9,Bech32MaxSize:()=>uE,decode:()=>zg,encodeBytes:()=>jg,naddrEncode:()=>tle,neventEncode:()=>ele,noteEncode:()=>Qae,nprofileEncode:()=>Xae,npubEncode:()=>Yae,nrelayEncode:()=>nle,nsecEncode:()=>Gae});var uE=5e3,I9=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Zae(t){const e=new Uint8Array(4);return e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=t&255,e}function zg(t){var i,o,s,a,l,u,c,f;let{prefix:e,words:n}=Ec.decode(t,uE),r=new Uint8Array(Ec.fromWords(n));switch(e){case"nprofile":{let d=Mp(r);if(!((i=d[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(d[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:un(d[0][0]),relays:d[1]?d[1].map(h=>ro.decode(h)):[]}}}case"nevent":{let d=Mp(r);if(!((o=d[0])!=null&&o[0]))throw new Error("missing TLV 0 for nevent");if(d[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(d[2]&&d[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(d[3]&&d[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:un(d[0][0]),relays:d[1]?d[1].map(h=>ro.decode(h)):[],author:(s=d[2])!=null&&s[0]?un(d[2][0]):void 0,kind:(a=d[3])!=null&&a[0]?parseInt(un(d[3][0]),16):void 0}}}case"naddr":{let d=Mp(r);if(!((l=d[0])!=null&&l[0]))throw new Error("missing TLV 0 for naddr");if(!((u=d[2])!=null&&u[0]))throw new Error("missing TLV 2 for naddr");if(d[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((c=d[3])!=null&&c[0]))throw new Error("missing TLV 3 for naddr");if(d[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:ro.decode(d[0][0]),pubkey:un(d[2][0]),kind:parseInt(un(d[3][0]),16),relays:d[1]?d[1].map(h=>ro.decode(h)):[]}}}case"nrelay":{let d=Mp(r);if(!((f=d[0])!=null&&f[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:ro.decode(d[0][0])}}case"nsec":return{type:e,data:r};case"npub":case"note":return{type:e,data:un(r)};default:throw new Error(`unknown prefix ${e}`)}}function Mp(t){let e={},n=t;for(;n.length>0;){let r=n[0],i=n[1],o=n.slice(2,2+i);if(n=n.slice(2+i),o.length<i)throw new Error(`not enough data to read on TLV ${r}`);e[r]=e[r]||[],e[r].push(o)}return e}function Gae(t){return jg("nsec",t)}function Yae(t){return jg("npub",xc(t))}function Qae(t){return jg("note",xc(t))}function Oh(t,e){let n=Ec.toWords(e);return Ec.encode(t,n,uE)}function jg(t,e){return Oh(t,e)}function Xae(t){let e=qg({0:[xc(t.pubkey)],1:(t.relays||[]).map(n=>Li.encode(n))});return Oh("nprofile",e)}function ele(t){let e;t.kind!==void 0&&(e=Zae(t.kind));let n=qg({0:[xc(t.id)],1:(t.relays||[]).map(r=>Li.encode(r)),2:t.author?[xc(t.author)]:[],3:e?[new Uint8Array(e)]:[]});return Oh("nevent",n)}function tle(t){let e=new ArrayBuffer(4);new DataView(e).setUint32(0,t.kind,!1);let n=qg({0:[Li.encode(t.identifier)],1:(t.relays||[]).map(r=>Li.encode(r)),2:[xc(t.pubkey)],3:[new Uint8Array(e)]});return Oh("naddr",n)}function nle(t){let e=qg({0:[Li.encode(t)]});return Oh("nrelay",e)}function qg(t){let e=[];return Object.entries(t).reverse().forEach(([n,r])=>{r.forEach(i=>{let o=new Uint8Array(i.length+2);o.set([parseInt(n)],0),o.set([i.length],1),o.set(i,2),e.push(o)})}),Fg(...e)}var rle={};Ht(rle,{decrypt:()=>ile,encrypt:()=>R9});async function R9(t,e,n){const r=t instanceof Uint8Array?un(t):t,i=Pc.getSharedSecret(r,"02"+e),o=F9(i);let s=Uint8Array.from(r9(16)),a=Li.encode(n),l=h9(o,s).encrypt(a),u=Qo.encode(new Uint8Array(l)),c=Qo.encode(new Uint8Array(s.buffer));return`${u}?iv=${c}`}async function ile(t,e,n){const r=t instanceof Uint8Array?un(t):t;let[i,o]=n.split("?iv="),s=Pc.getSharedSecret(r,"02"+e),a=F9(s),l=Qo.decode(o),u=Qo.decode(i),c=h9(a,l).decrypt(u);return ro.decode(c)}function F9(t){return t.slice(1,33)}var ole={};Ht(ole,{NIP05_REGEX:()=>L9,isValid:()=>lle,queryProfile:()=>B9,searchDomain:()=>ale,useFetchImplementation:()=>sle});var L9=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,Vg;try{Vg=fetch}catch{}function sle(t){Vg=t}async function ale(t,e=""){try{const n=`https://${t}/.well-known/nostr.json?name=${e}`;return(await(await Vg(n,{redirect:"error"})).json()).names}catch{return{}}}async function B9(t){var o;const e=t.match(L9);if(!e)return null;const[n,r="_",i]=e;try{const s=`https://${i}/.well-known/nostr.json?name=${r}`,a=await(await Vg(s,{redirect:"error"})).json();let l=a.names[r];return l?{pubkey:l,relays:(o=a.relays)==null?void 0:o[l]}:null}catch{return null}}async function lle(t,e){let n=await B9(e);return n?n.pubkey===t:!1}var ule={};Ht(ule,{parse:()=>cle});function cle(t){const e={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of t.tags)r[0]==="e"&&r[1]&&n.push(r),r[0]==="p"&&r[1]&&e.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const i=n[r],[o,s,a,l]=i,u={id:s,relays:a?[a]:[]},c=r===0,f=r===n.length-1;if(l==="root"){e.root=u;continue}if(l==="reply"){e.reply=u;continue}if(l==="mention"){e.mentions.push(u);continue}if(c){e.root=u;continue}if(f){e.reply=u;continue}e.mentions.push(u)}return e}var fle={};Ht(fle,{fetchRelayInformation:()=>hle,useFetchImplementation:()=>dle});var P9;try{P9=fetch}catch{}function dle(t){P9=t}async function hle(t){return await(await fetch(t.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var ple={};Ht(ple,{getPow:()=>z9,minePow:()=>mle});function z9(t){let e=0;for(let n=0;n<t.length;n++){const r=parseInt(t[n],16);if(r===0)e+=4;else{e+=Math.clz32(r)-28;break}}return e}function mle(t,e){let n=0;const r=t,i=["nonce",n.toString(),e.toString()];for(r.tags.push(i);;){const o=Math.floor(new Date().getTime()/1e3);if(o!==r.created_at&&(n=0,r.created_at=o),i[1]=(++n).toString(),r.id=k0(r),z9(r.id)>=e)break}return r}var gle={};Ht(gle,{finishRepostEvent:()=>yle,getRepostedEvent:()=>ble,getRepostedEventPointer:()=>j9});function yle(t,e,n,r){return Oa({kind:oE,tags:[...t.tags??[],["e",e.id,n],["p",e.pubkey]],content:t.content===""?"":JSON.stringify(e),created_at:t.created_at},r)}function j9(t){if(t.kind!==oE)return;let e,n;for(let r=t.tags.length-1;r>=0&&(e===void 0||n===void 0);r--){const i=t.tags[r];i.length>=2&&(i[0]==="e"&&e===void 0?e=i:i[0]==="p"&&n===void 0&&(n=i))}if(e!==void 0)return{id:e[1],relays:[e[2],n==null?void 0:n[2]].filter(r=>typeof r=="string"),author:n==null?void 0:n[1]}}function ble(t,{skipVerification:e}={}){const n=j9(t);if(n===void 0||t.content==="")return;let r;try{r=JSON.parse(t.content)}catch{return}if(r.id===n.id&&!(!e&&!iE(r)))return r}var vle={};Ht(vle,{NOSTR_URI_REGEX:()=>Ug,parse:()=>kle,test:()=>wle});var Ug=new RegExp(`nostr:(${I9.source})`);function wle(t){return typeof t=="string"&&new RegExp(`^${Ug.source}$`).test(t)}function kle(t){const e=t.match(new RegExp(`^${Ug.source}$`));if(!e)throw new Error(`Invalid Nostr URI: ${t}`);return{uri:e[0],value:e[1],decoded:zg(e[1])}}var xle={};Ht(xle,{finishReactionEvent:()=>Ele,getReactedEventPointer:()=>Sle});function Ele(t,e,n){const r=e.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return Oa({...t,kind:sE,tags:[...t.tags??[],...r,["e",e.id],["p",e.pubkey]],content:t.content??"+"},n)}function Sle(t){if(t.kind!==sE)return;let e,n;for(let r=t.tags.length-1;r>=0&&(e===void 0||n===void 0);r--){const i=t.tags[r];i.length>=2&&(i[0]==="e"&&e===void 0?e=i:i[0]==="p"&&n===void 0&&(n=i))}if(!(e===void 0||n===void 0))return{id:e[1],relays:[e[2],n[2]].filter(r=>r!==void 0),author:n[1]}}var Cle={};Ht(Cle,{matchAll:()=>_le,regex:()=>cE,replaceAll:()=>Ale});var cE=()=>new RegExp(`\\b${Ug.source}\\b`,"g");function*_le(t){const e=t.matchAll(cE());for(const n of e)try{const[r,i]=n;yield{uri:r,value:i,decoded:zg(i),start:n.index,end:n.index+r.length}}catch{}}function Ale(t,e){return t.replaceAll(cE(),(n,r)=>e({uri:n,value:r,decoded:zg(r)}))}var Tle={};Ht(Tle,{channelCreateEvent:()=>Mle,channelHideMessageEvent:()=>Nle,channelMessageEvent:()=>Dle,channelMetadataEvent:()=>Ole,channelMuteUserEvent:()=>$le});var Mle=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return Oa({kind:C9,tags:[...t.tags??[]],content:n,created_at:t.created_at},e)},Ole=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return Oa({kind:_9,tags:[["e",t.channel_create_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},Dle=(t,e)=>{const n=[["e",t.channel_create_event_id,t.relay_url,"root"]];return t.reply_to_channel_message_event_id&&n.push(["e",t.reply_to_channel_message_event_id,t.relay_url,"reply"]),Oa({kind:A9,tags:[...n,...t.tags??[]],content:t.content,created_at:t.created_at},e)},Nle=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return Oa({kind:T9,tags:[["e",t.channel_message_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},$le=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return Oa({kind:M9,tags:[["p",t.pubkey_to_mute],...t.tags??[]],content:n,created_at:t.created_at},e)},Ile={};Ht(Ile,{EMOJI_SHORTCODE_REGEX:()=>q9,matchAll:()=>Rle,regex:()=>fE,replaceAll:()=>Fle});var q9=/:(\w+):/,fE=()=>new RegExp(`\\B${q9.source}\\B`,"g");function*Rle(t){const e=t.matchAll(fE());for(const n of e)try{const[r,i]=n;yield{shortcode:r,name:i,start:n.index,end:n.index+r.length}}catch{}}function Fle(t,e){return t.replaceAll(fE(),(n,r)=>e({shortcode:n,name:r}))}var Lle={};Ht(Lle,{useFetchImplementation:()=>Ble,validateGithub:()=>Ple});var dE;try{dE=fetch}catch{}function Ble(t){dE=t}async function Ple(t,e,n){try{return await(await dE(`https://gist.github.com/${e}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${t}`}catch{return!1}}var zle={};Ht(zle,{decrypt:()=>Z9,encrypt:()=>K9,getConversationKey:()=>H9,v2:()=>Hle});var V9=1,U9=65535;function H9(t,e){const n=Pc.getSharedSecret(t,"02"+e).subarray(1,33);return yse(zc,n,"nip44-v2")}function W9(t,e){const n=bse(zc,t,e,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}function hE(t){if(!Number.isSafeInteger(t)||t<1)throw new Error("expected positive integer");if(t<=32)return 32;const e=1<<Math.floor(Math.log2(t-1))+1,n=e<=256?32:e/8;return n*(Math.floor((t-1)/n)+1)}function jle(t){if(!Number.isSafeInteger(t)||t<V9||t>U9)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const e=new Uint8Array(2);return new DataView(e.buffer).setUint16(0,t,!1),e}function qle(t){const e=Li.encode(t),n=e.length,r=jle(n),i=new Uint8Array(hE(n)-n);return Fg(r,e,i)}function Vle(t){const e=new DataView(t.buffer).getUint16(0),n=t.subarray(2,2+e);if(e<V9||e>U9||n.length!==e||t.length!==2+hE(e))throw new Error("invalid padding");return ro.decode(n)}function J9(t,e,n){if(n.length!==32)throw new Error("AAD associated data must be 32 bytes");const r=Fg(n,e);return Bg(zc,t,r)}function Ule(t){if(typeof t!="string")throw new Error("payload must be a valid string");const e=t.length;if(e<132||e>87472)throw new Error("invalid payload length: "+e);if(t[0]==="#")throw new Error("unknown encryption version");let n;try{n=Qo.decode(t)}catch(o){throw new Error("invalid base64: "+o.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const i=n[0];if(i!==2)throw new Error("unknown encryption version "+i);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}function K9(t,e,n=r9(32)){const{chacha_key:r,chacha_nonce:i,hmac_key:o}=W9(e,n),s=qle(t),a=y9(r,i,s),l=J9(o,a,n);return Qo.encode(Fg(new Uint8Array([2]),n,a,l))}function Z9(t,e){const{nonce:n,ciphertext:r,mac:i}=Ule(t),{chacha_key:o,chacha_nonce:s,hmac_key:a}=W9(e,n),l=J9(a,r,n);if(!Qoe(l,i))throw new Error("invalid MAC");const u=y9(o,s,r);return Vle(u)}var Hle={utils:{getConversationKey:H9,calcPaddedLen:hE},encrypt:K9,decrypt:Z9},Wle={};Ht(Wle,{makeNwcRequestEvent:()=>Kle,parseConnectionString:()=>Jle});function Jle(t){const{pathname:e,searchParams:n}=new URL(t),r=e,i=n.get("relay"),o=n.get("secret");if(!r||!i||!o)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:o}}async function Kle(t,e,n){const i=await R9(e,t,JSON.stringify({method:"pay_invoice",params:{invoice:n}})),o={kind:D9,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t]]};return Oa(o,e)}var Zle={};Ht(Zle,{getZapEndpoint:()=>Yle,makeZapReceipt:()=>eue,makeZapRequest:()=>Qle,useFetchImplementation:()=>Gle,validateZapRequest:()=>Xle});var pE;try{pE=fetch}catch{}function Gle(t){pE=t}async function Yle(t){try{let e="",{lud06:n,lud16:r}=JSON.parse(t.content);if(n){let{words:s}=Ec.decode(n,1e3),a=Ec.fromWords(s);e=ro.decode(a)}else if(r){let[s,a]=r.split("@");e=new URL(`/.well-known/lnurlp/${s}`,`https://${a}`).toString()}else return null;let o=await(await pE(e)).json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch{}return null}function Qle({profile:t,event:e,amount:n,relays:r,comment:i=""}){if(!n)throw new Error("amount not given");if(!t)throw new Error("profile not given");let o={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t],["amount",n.toString()],["relays",...r]]};return e&&o.tags.push(["e",e]),o}function Xle(t){let e;try{e=JSON.parse(t)}catch{return"Invalid zap request JSON."}if(!v9(e))return"Zap request is not a valid Nostr event.";if(!iE(e))return"Invalid signature on zap request.";let n=e.tags.find(([o,s])=>o==="p"&&s);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=e.tags.find(([o,s])=>o==="e"&&s);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":e.tags.find(([o,s])=>o==="relays"&&s)?null:"Zap request doesn't have a 'relays' tag."}function eue({zapRequest:t,preimage:e,bolt11:n,paidAt:r}){let i=JSON.parse(t),o=i.tags.filter(([a])=>a==="e"||a==="p"||a==="a"),s={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...o,["P",i.pubkey],["bolt11",n],["description",t]]};return e&&s.tags.push(["preimage",e]),s}var tue={};Ht(tue,{getToken:()=>nue,hashPayload:()=>mE,unpackEventFromToken:()=>Y9,validateEvent:()=>rI,validateEventKind:()=>X9,validateEventMethodTag:()=>tI,validateEventPayloadTag:()=>nI,validateEventTimestamp:()=>Q9,validateEventUrlTag:()=>eI,validateToken:()=>rue});var G9="Nostr ";async function nue(t,e,n,r=!1,i){const o={kind:aE,tags:[["u",t],["method",e]],created_at:Math.round(new Date().getTime()/1e3),content:""};i&&o.tags.push(["payload",mE(i)]);const s=await n(o);return(r?G9:"")+Qo.encode(Li.encode(JSON.stringify(s)))}async function rue(t,e,n){const r=await Y9(t).catch(o=>{throw o});return await rI(r,e,n).catch(o=>{throw o})}async function Y9(t){if(!t)throw new Error("Missing token");t=t.replace(G9,"");const e=ro.decode(Qo.decode(t));if(!e||e.length===0||!e.startsWith("{"))throw new Error("Invalid token");return JSON.parse(e)}function Q9(t){return t.created_at?Math.round(new Date().getTime()/1e3)-t.created_at<60:!1}function X9(t){return t.kind===aE}function eI(t,e){const n=t.tags.find(r=>r[0]==="u");return n?n.length>0&&n[1]===e:!1}function tI(t,e){const n=t.tags.find(r=>r[0]==="method");return n?n.length>0&&n[1].toLowerCase()===e.toLowerCase():!1}function mE(t){const e=zc(Li.encode(JSON.stringify(t)));return un(e)}function nI(t,e){const n=t.tags.find(i=>i[0]==="payload");if(!n)return!1;const r=mE(e);return n.length>0&&n[1]===r}async function rI(t,e,n,r){if(!iE(t))throw new Error("Invalid nostr event, signature invalid");if(!X9(t))throw new Error("Invalid nostr event, kind invalid");if(!Q9(t))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!eI(t,e))throw new Error("Invalid nostr event, url tag invalid");if(!tI(t,n))throw new Error("Invalid nostr event, method tag invalid");if(r&&typeof r=="object"&&Object.keys(r).length>0&&!nI(t,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}var iI={exports:{}};(function(t,e){(function(n,r){t.exports=r(ee)})(gF,function(n){return function(r){var i={};function o(s){if(i[s])return i[s].exports;var a=i[s]={i:s,l:!1,exports:{}};return r[s].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=r,o.c=i,o.d=function(s,a,l){o.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:l})},o.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},o.t=function(s,a){if(1&a&&(s=o(s)),8&a||4&a&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&a&&typeof s!="string")for(var u in s)o.d(l,u,(function(c){return s[c]}).bind(null,u));return l},o.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return o.d(a,"a",a),a},o.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},o.p="",o(o.s=48)}([function(r,i){r.exports=n},function(r,i){var o=r.exports={version:"2.6.12"};typeof __e=="number"&&(__e=o)},function(r,i,o){var s=o(26)("wks"),a=o(17),l=o(3).Symbol,u=typeof l=="function";(r.exports=function(c){return s[c]||(s[c]=u&&l[c]||(u?l:a)("Symbol."+c))}).store=s},function(r,i){var o=r.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=o)},function(r,i,o){r.exports=!o(8)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(r,i){var o={}.hasOwnProperty;r.exports=function(s,a){return o.call(s,a)}},function(r,i,o){var s=o(7),a=o(16);r.exports=o(4)?function(l,u,c){return s.f(l,u,a(1,c))}:function(l,u,c){return l[u]=c,l}},function(r,i,o){var s=o(10),a=o(35),l=o(23),u=Object.defineProperty;i.f=o(4)?Object.defineProperty:function(c,f,d){if(s(c),f=l(f,!0),s(d),a)try{return u(c,f,d)}catch{}if("get"in d||"set"in d)throw TypeError("Accessors not supported!");return"value"in d&&(c[f]=d.value),c}},function(r,i){r.exports=function(o){try{return!!o()}catch{return!0}}},function(r,i,o){var s=o(40),a=o(22);r.exports=function(l){return s(a(l))}},function(r,i,o){var s=o(11);r.exports=function(a){if(!s(a))throw TypeError(a+" is not an object!");return a}},function(r,i){r.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},function(r,i){r.exports={}},function(r,i,o){var s=o(39),a=o(27);r.exports=Object.keys||function(l){return s(l,a)}},function(r,i){r.exports=!0},function(r,i,o){var s=o(3),a=o(1),l=o(53),u=o(6),c=o(5),f=function(d,h,p){var m,b,y,v=d&f.F,w=d&f.G,g=d&f.S,x=d&f.P,k=d&f.B,E=d&f.W,D=w?a:a[h]||(a[h]={}),O=D.prototype,N=w?s:g?s[h]:(s[h]||{}).prototype;for(m in w&&(p=h),p)(b=!v&&N&&N[m]!==void 0)&&c(D,m)||(y=b?N[m]:p[m],D[m]=w&&typeof N[m]!="function"?p[m]:k&&b?l(y,s):E&&N[m]==y?function(C){var R=function(T,q,A){if(this instanceof C){switch(arguments.length){case 0:return new C;case 1:return new C(T);case 2:return new C(T,q)}return new C(T,q,A)}return C.apply(this,arguments)};return R.prototype=C.prototype,R}(y):x&&typeof y=="function"?l(Function.call,y):y,x&&((D.virtual||(D.virtual={}))[m]=y,d&f.R&&O&&!O[m]&&u(O,m,y)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,r.exports=f},function(r,i){r.exports=function(o,s){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:s}}},function(r,i){var o=0,s=Math.random();r.exports=function(a){return"Symbol(".concat(a===void 0?"":a,")_",(++o+s).toString(36))}},function(r,i,o){var s=o(22);r.exports=function(a){return Object(s(a))}},function(r,i){i.f={}.propertyIsEnumerable},function(r,i,o){var s=o(52)(!0);o(34)(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,l=this._t,u=this._i;return u>=l.length?{value:void 0,done:!0}:(a=s(l,u),this._i+=a.length,{value:a,done:!1})})},function(r,i){var o=Math.ceil,s=Math.floor;r.exports=function(a){return isNaN(a=+a)?0:(a>0?s:o)(a)}},function(r,i){r.exports=function(o){if(o==null)throw TypeError("Can't call method on  "+o);return o}},function(r,i,o){var s=o(11);r.exports=function(a,l){if(!s(a))return a;var u,c;if(l&&typeof(u=a.toString)=="function"&&!s(c=u.call(a))||typeof(u=a.valueOf)=="function"&&!s(c=u.call(a))||!l&&typeof(u=a.toString)=="function"&&!s(c=u.call(a)))return c;throw TypeError("Can't convert object to primitive value")}},function(r,i){var o={}.toString;r.exports=function(s){return o.call(s).slice(8,-1)}},function(r,i,o){var s=o(26)("keys"),a=o(17);r.exports=function(l){return s[l]||(s[l]=a(l))}},function(r,i,o){var s=o(1),a=o(3),l=a["__core-js_shared__"]||(a["__core-js_shared__"]={});(r.exports=function(u,c){return l[u]||(l[u]=c!==void 0?c:{})})("versions",[]).push({version:s.version,mode:o(14)?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(r,i){r.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(r,i,o){var s=o(7).f,a=o(5),l=o(2)("toStringTag");r.exports=function(u,c,f){u&&!a(u=f?u:u.prototype,l)&&s(u,l,{configurable:!0,value:c})}},function(r,i,o){o(62);for(var s=o(3),a=o(6),l=o(12),u=o(2)("toStringTag"),c="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),f=0;f<c.length;f++){var d=c[f],h=s[d],p=h&&h.prototype;p&&!p[u]&&a(p,u,d),l[d]=l.Array}},function(r,i,o){i.f=o(2)},function(r,i,o){var s=o(3),a=o(1),l=o(14),u=o(30),c=o(7).f;r.exports=function(f){var d=a.Symbol||(a.Symbol=l?{}:s.Symbol||{});f.charAt(0)=="_"||f in d||c(d,f,{value:u.f(f)})}},function(r,i){i.f=Object.getOwnPropertySymbols},function(r,i){r.exports=function(o,s,a){return Math.min(Math.max(o,s),a)}},function(r,i,o){var s=o(14),a=o(15),l=o(37),u=o(6),c=o(12),f=o(55),d=o(28),h=o(61),p=o(2)("iterator"),m=!([].keys&&"next"in[].keys()),b=function(){return this};r.exports=function(y,v,w,g,x,k,E){f(w,v,g);var D,O,N,C=function(z){if(!m&&z in A)return A[z];switch(z){case"keys":case"values":return function(){return new w(this,z)}}return function(){return new w(this,z)}},R=v+" Iterator",T=x=="values",q=!1,A=y.prototype,S=A[p]||A["@@iterator"]||x&&A[x],P=S||C(x),B=x?T?C("entries"):P:void 0,j=v=="Array"&&A.entries||S;if(j&&(N=h(j.call(new y)))!==Object.prototype&&N.next&&(d(N,R,!0),s||typeof N[p]=="function"||u(N,p,b)),T&&S&&S.name!=="values"&&(q=!0,P=function(){return S.call(this)}),s&&!E||!m&&!q&&A[p]||u(A,p,P),c[v]=P,c[R]=b,x)if(D={values:T?P:C("values"),keys:k?P:C("keys"),entries:B},E)for(O in D)O in A||l(A,O,D[O]);else a(a.P+a.F*(m||q),v,D);return D}},function(r,i,o){r.exports=!o(4)&&!o(8)(function(){return Object.defineProperty(o(36)("div"),"a",{get:function(){return 7}}).a!=7})},function(r,i,o){var s=o(11),a=o(3).document,l=s(a)&&s(a.createElement);r.exports=function(u){return l?a.createElement(u):{}}},function(r,i,o){r.exports=o(6)},function(r,i,o){var s=o(10),a=o(56),l=o(27),u=o(25)("IE_PROTO"),c=function(){},f=function(){var d,h=o(36)("iframe"),p=l.length;for(h.style.display="none",o(60).appendChild(h),h.src="javascript:",(d=h.contentWindow.document).open(),d.write("<script>document.F=Object<\/script>"),d.close(),f=d.F;p--;)delete f.prototype[l[p]];return f()};r.exports=Object.create||function(d,h){var p;return d!==null?(c.prototype=s(d),p=new c,c.prototype=null,p[u]=d):p=f(),h===void 0?p:a(p,h)}},function(r,i,o){var s=o(5),a=o(9),l=o(57)(!1),u=o(25)("IE_PROTO");r.exports=function(c,f){var d,h=a(c),p=0,m=[];for(d in h)d!=u&&s(h,d)&&m.push(d);for(;f.length>p;)s(h,d=f[p++])&&(~l(m,d)||m.push(d));return m}},function(r,i,o){var s=o(24);r.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return s(a)=="String"?a.split(""):Object(a)}},function(r,i,o){var s=o(39),a=o(27).concat("length","prototype");i.f=Object.getOwnPropertyNames||function(l){return s(l,a)}},function(r,i,o){var s=o(24),a=o(2)("toStringTag"),l=s(function(){return arguments}())=="Arguments";r.exports=function(u){var c,f,d;return u===void 0?"Undefined":u===null?"Null":typeof(f=function(h,p){try{return h[p]}catch{}}(c=Object(u),a))=="string"?f:l?s(c):(d=s(c))=="Object"&&typeof c.callee=="function"?"Arguments":d}},function(r,i){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}r.exports=o},function(r,i){var o=/-?\d+(\.\d+)?%?/g;r.exports=function(s){return s.match(o)}},function(r,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.getBase16Theme=i.createStyling=i.invertTheme=void 0;var s=b(o(49)),a=b(o(76)),l=b(o(81)),u=b(o(89)),c=b(o(93)),f=function(O){if(O&&O.__esModule)return O;var N={};if(O!=null)for(var C in O)Object.prototype.hasOwnProperty.call(O,C)&&(N[C]=O[C]);return N.default=O,N}(o(94)),d=b(o(132)),h=b(o(133)),p=b(o(138)),m=o(139);function b(O){return O&&O.__esModule?O:{default:O}}var y=f.default,v=(0,u.default)(y),w=(0,p.default)(h.default,m.rgb2yuv,function(O){var N,C=(0,l.default)(O,3),R=C[0],T=C[1],q=C[2];return[(N=R,N<.25?1:N<.5?.9-N:1.1-N),T,q]},m.yuv2rgb,d.default),g=function(O){return function(N){return{className:[N.className,O.className].filter(Boolean).join(" "),style:(0,a.default)({},N.style||{},O.style||{})}}},x=function(O,N){var C=(0,u.default)(N);for(var R in O)C.indexOf(R)===-1&&C.push(R);return C.reduce(function(T,q){return T[q]=function(A,S){if(A===void 0)return S;if(S===void 0)return A;var P=A===void 0?"undefined":(0,s.default)(A),B=S===void 0?"undefined":(0,s.default)(S);switch(P){case"string":switch(B){case"string":return[S,A].filter(Boolean).join(" ");case"object":return g({className:A,style:S});case"function":return function(j){for(var z=arguments.length,J=Array(z>1?z-1:0),K=1;K<z;K++)J[K-1]=arguments[K];return g({className:A})(S.apply(void 0,[j].concat(J)))}}case"object":switch(B){case"string":return g({className:S,style:A});case"object":return(0,a.default)({},S,A);case"function":return function(j){for(var z=arguments.length,J=Array(z>1?z-1:0),K=1;K<z;K++)J[K-1]=arguments[K];return g({style:A})(S.apply(void 0,[j].concat(J)))}}case"function":switch(B){case"string":return function(j){for(var z=arguments.length,J=Array(z>1?z-1:0),K=1;K<z;K++)J[K-1]=arguments[K];return A.apply(void 0,[g(j)({className:S})].concat(J))};case"object":return function(j){for(var z=arguments.length,J=Array(z>1?z-1:0),K=1;K<z;K++)J[K-1]=arguments[K];return A.apply(void 0,[g(j)({style:S})].concat(J))};case"function":return function(j){for(var z=arguments.length,J=Array(z>1?z-1:0),K=1;K<z;K++)J[K-1]=arguments[K];return A.apply(void 0,[S.apply(void 0,[j].concat(J))].concat(J))}}}}(O[q],N[q]),T},{})},k=function(O,N){for(var C=arguments.length,R=Array(C>2?C-2:0),T=2;T<C;T++)R[T-2]=arguments[T];if(N===null)return O;Array.isArray(N)||(N=[N]);var q=N.map(function(S){return O[S]}).filter(Boolean),A=q.reduce(function(S,P){return typeof P=="string"?S.className=[S.className,P].filter(Boolean).join(" "):(P===void 0?"undefined":(0,s.default)(P))==="object"?S.style=(0,a.default)({},S.style,P):typeof P=="function"&&(S=(0,a.default)({},S,P.apply(void 0,[S].concat(R)))),S},{className:"",style:{}});return A.className||delete A.className,(0,u.default)(A.style).length===0&&delete A.style,A},E=i.invertTheme=function(O){return(0,u.default)(O).reduce(function(N,C){return N[C]=/^base/.test(C)?w(O[C]):C==="scheme"?O[C]+":inverted":O[C],N},{})},D=(i.createStyling=(0,c.default)(function(O){for(var N=arguments.length,C=Array(N>3?N-3:0),R=3;R<N;R++)C[R-3]=arguments[R];var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},A=T.defaultBase16,S=A===void 0?y:A,P=T.base16Themes,B=P===void 0?null:P,j=D(q,B);j&&(q=(0,a.default)({},j,q));var z=v.reduce(function(fe,ke){return fe[ke]=q[ke]||S[ke],fe},{}),J=(0,u.default)(q).reduce(function(fe,ke){return v.indexOf(ke)===-1&&(fe[ke]=q[ke]),fe},{}),K=O(z),ae=x(J,K);return(0,c.default)(k,2).apply(void 0,[ae].concat(C))},3),i.getBase16Theme=function(O,N){if(O&&O.extend&&(O=O.extend),typeof O=="string"){var C=O.split(":"),R=(0,l.default)(C,2),T=R[0],q=R[1];O=(N||{})[T]||f[T],q==="inverted"&&(O=E(O))}return O&&O.hasOwnProperty("base00")?O:void 0})},function(r,i,o){var s,a=typeof Reflect=="object"?Reflect:null,l=a&&typeof a.apply=="function"?a.apply:function(g,x,k){return Function.prototype.apply.call(g,x,k)};s=a&&typeof a.ownKeys=="function"?a.ownKeys:Object.getOwnPropertySymbols?function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:function(g){return Object.getOwnPropertyNames(g)};var u=Number.isNaN||function(g){return g!=g};function c(){c.init.call(this)}r.exports=c,r.exports.once=function(g,x){return new Promise(function(k,E){function D(){O!==void 0&&g.removeListener("error",O),k([].slice.call(arguments))}var O;x!=="error"&&(O=function(N){g.removeListener(x,D),E(N)},g.once("error",O)),g.once(x,D)})},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var f=10;function d(g){if(typeof g!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g)}function h(g){return g._maxListeners===void 0?c.defaultMaxListeners:g._maxListeners}function p(g,x,k,E){var D,O,N,C;if(d(k),(O=g._events)===void 0?(O=g._events=Object.create(null),g._eventsCount=0):(O.newListener!==void 0&&(g.emit("newListener",x,k.listener?k.listener:k),O=g._events),N=O[x]),N===void 0)N=O[x]=k,++g._eventsCount;else if(typeof N=="function"?N=O[x]=E?[k,N]:[N,k]:E?N.unshift(k):N.push(k),(D=h(g))>0&&N.length>D&&!N.warned){N.warned=!0;var R=new Error("Possible EventEmitter memory leak detected. "+N.length+" "+String(x)+" listeners added. Use emitter.setMaxListeners() to increase limit");R.name="MaxListenersExceededWarning",R.emitter=g,R.type=x,R.count=N.length,C=R,console&&console.warn&&console.warn(C)}return g}function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(g,x,k){var E={fired:!1,wrapFn:void 0,target:g,type:x,listener:k},D=m.bind(E);return D.listener=k,E.wrapFn=D,D}function y(g,x,k){var E=g._events;if(E===void 0)return[];var D=E[x];return D===void 0?[]:typeof D=="function"?k?[D.listener||D]:[D]:k?function(O){for(var N=new Array(O.length),C=0;C<N.length;++C)N[C]=O[C].listener||O[C];return N}(D):w(D,D.length)}function v(g){var x=this._events;if(x!==void 0){var k=x[g];if(typeof k=="function")return 1;if(k!==void 0)return k.length}return 0}function w(g,x){for(var k=new Array(x),E=0;E<x;++E)k[E]=g[E];return k}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(g){if(typeof g!="number"||g<0||u(g))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+g+".");f=g}}),c.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(g){if(typeof g!="number"||g<0||u(g))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+g+".");return this._maxListeners=g,this},c.prototype.getMaxListeners=function(){return h(this)},c.prototype.emit=function(g){for(var x=[],k=1;k<arguments.length;k++)x.push(arguments[k]);var E=g==="error",D=this._events;if(D!==void 0)E=E&&D.error===void 0;else if(!E)return!1;if(E){var O;if(x.length>0&&(O=x[0]),O instanceof Error)throw O;var N=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw N.context=O,N}var C=D[g];if(C===void 0)return!1;if(typeof C=="function")l(C,this,x);else{var R=C.length,T=w(C,R);for(k=0;k<R;++k)l(T[k],this,x)}return!0},c.prototype.addListener=function(g,x){return p(this,g,x,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(g,x){return p(this,g,x,!0)},c.prototype.once=function(g,x){return d(x),this.on(g,b(this,g,x)),this},c.prototype.prependOnceListener=function(g,x){return d(x),this.prependListener(g,b(this,g,x)),this},c.prototype.removeListener=function(g,x){var k,E,D,O,N;if(d(x),(E=this._events)===void 0)return this;if((k=E[g])===void 0)return this;if(k===x||k.listener===x)--this._eventsCount==0?this._events=Object.create(null):(delete E[g],E.removeListener&&this.emit("removeListener",g,k.listener||x));else if(typeof k!="function"){for(D=-1,O=k.length-1;O>=0;O--)if(k[O]===x||k[O].listener===x){N=k[O].listener,D=O;break}if(D<0)return this;D===0?k.shift():function(C,R){for(;R+1<C.length;R++)C[R]=C[R+1];C.pop()}(k,D),k.length===1&&(E[g]=k[0]),E.removeListener!==void 0&&this.emit("removeListener",g,N||x)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(g){var x,k,E;if((k=this._events)===void 0)return this;if(k.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):k[g]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete k[g]),this;if(arguments.length===0){var D,O=Object.keys(k);for(E=0;E<O.length;++E)(D=O[E])!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(x=k[g])=="function")this.removeListener(g,x);else if(x!==void 0)for(E=x.length-1;E>=0;E--)this.removeListener(g,x[E]);return this},c.prototype.listeners=function(g){return y(this,g,!0)},c.prototype.rawListeners=function(g){return y(this,g,!1)},c.listenerCount=function(g,x){return typeof g.listenerCount=="function"?g.listenerCount(x):v.call(g,x)},c.prototype.listenerCount=v,c.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]}},function(r,i,o){r.exports.Dispatcher=o(140)},function(r,i,o){r.exports=o(142)},function(r,i,o){i.__esModule=!0;var s=u(o(50)),a=u(o(65)),l=typeof a.default=="function"&&typeof s.default=="symbol"?function(c){return typeof c}:function(c){return c&&typeof a.default=="function"&&c.constructor===a.default&&c!==a.default.prototype?"symbol":typeof c};function u(c){return c&&c.__esModule?c:{default:c}}i.default=typeof a.default=="function"&&l(s.default)==="symbol"?function(c){return c===void 0?"undefined":l(c)}:function(c){return c&&typeof a.default=="function"&&c.constructor===a.default&&c!==a.default.prototype?"symbol":c===void 0?"undefined":l(c)}},function(r,i,o){r.exports={default:o(51),__esModule:!0}},function(r,i,o){o(20),o(29),r.exports=o(30).f("iterator")},function(r,i,o){var s=o(21),a=o(22);r.exports=function(l){return function(u,c){var f,d,h=String(a(u)),p=s(c),m=h.length;return p<0||p>=m?l?"":void 0:(f=h.charCodeAt(p))<55296||f>56319||p+1===m||(d=h.charCodeAt(p+1))<56320||d>57343?l?h.charAt(p):f:l?h.slice(p,p+2):d-56320+(f-55296<<10)+65536}}},function(r,i,o){var s=o(54);r.exports=function(a,l,u){if(s(a),l===void 0)return a;switch(u){case 1:return function(c){return a.call(l,c)};case 2:return function(c,f){return a.call(l,c,f)};case 3:return function(c,f,d){return a.call(l,c,f,d)}}return function(){return a.apply(l,arguments)}}},function(r,i){r.exports=function(o){if(typeof o!="function")throw TypeError(o+" is not a function!");return o}},function(r,i,o){var s=o(38),a=o(16),l=o(28),u={};o(6)(u,o(2)("iterator"),function(){return this}),r.exports=function(c,f,d){c.prototype=s(u,{next:a(1,d)}),l(c,f+" Iterator")}},function(r,i,o){var s=o(7),a=o(10),l=o(13);r.exports=o(4)?Object.defineProperties:function(u,c){a(u);for(var f,d=l(c),h=d.length,p=0;h>p;)s.f(u,f=d[p++],c[f]);return u}},function(r,i,o){var s=o(9),a=o(58),l=o(59);r.exports=function(u){return function(c,f,d){var h,p=s(c),m=a(p.length),b=l(d,m);if(u&&f!=f){for(;m>b;)if((h=p[b++])!=h)return!0}else for(;m>b;b++)if((u||b in p)&&p[b]===f)return u||b||0;return!u&&-1}}},function(r,i,o){var s=o(21),a=Math.min;r.exports=function(l){return l>0?a(s(l),9007199254740991):0}},function(r,i,o){var s=o(21),a=Math.max,l=Math.min;r.exports=function(u,c){return(u=s(u))<0?a(u+c,0):l(u,c)}},function(r,i,o){var s=o(3).document;r.exports=s&&s.documentElement},function(r,i,o){var s=o(5),a=o(18),l=o(25)("IE_PROTO"),u=Object.prototype;r.exports=Object.getPrototypeOf||function(c){return c=a(c),s(c,l)?c[l]:typeof c.constructor=="function"&&c instanceof c.constructor?c.constructor.prototype:c instanceof Object?u:null}},function(r,i,o){var s=o(63),a=o(64),l=o(12),u=o(9);r.exports=o(34)(Array,"Array",function(c,f){this._t=u(c),this._i=0,this._k=f},function(){var c=this._t,f=this._k,d=this._i++;return!c||d>=c.length?(this._t=void 0,a(1)):a(0,f=="keys"?d:f=="values"?c[d]:[d,c[d]])},"values"),l.Arguments=l.Array,s("keys"),s("values"),s("entries")},function(r,i){r.exports=function(){}},function(r,i){r.exports=function(o,s){return{value:s,done:!!o}}},function(r,i,o){r.exports={default:o(66),__esModule:!0}},function(r,i,o){o(67),o(73),o(74),o(75),r.exports=o(1).Symbol},function(r,i,o){var s=o(3),a=o(5),l=o(4),u=o(15),c=o(37),f=o(68).KEY,d=o(8),h=o(26),p=o(28),m=o(17),b=o(2),y=o(30),v=o(31),w=o(69),g=o(70),x=o(10),k=o(11),E=o(18),D=o(9),O=o(23),N=o(16),C=o(38),R=o(71),T=o(72),q=o(32),A=o(7),S=o(13),P=T.f,B=A.f,j=R.f,z=s.Symbol,J=s.JSON,K=J&&J.stringify,ae=b("_hidden"),fe=b("toPrimitive"),ke={}.propertyIsEnumerable,ve=h("symbol-registry"),xe=h("symbols"),Se=h("op-symbols"),Oe=Object.prototype,Fe=typeof z=="function"&&!!q.f,mt=s.QObject,Ce=!mt||!mt.prototype||!mt.prototype.findChild,pe=l&&d(function(){return C(B({},"a",{get:function(){return B(this,"a",{value:7}).a}})).a!=7})?function(W,X,se){var ge=P(Oe,X);ge&&delete Oe[X],B(W,X,se),ge&&W!==Oe&&B(Oe,X,ge)}:B,De=function(W){var X=xe[W]=C(z.prototype);return X._k=W,X},Le=Fe&&typeof z.iterator=="symbol"?function(W){return typeof W=="symbol"}:function(W){return W instanceof z},Ze=function(W,X,se){return W===Oe&&Ze(Se,X,se),x(W),X=O(X,!0),x(se),a(xe,X)?(se.enumerable?(a(W,ae)&&W[ae][X]&&(W[ae][X]=!1),se=C(se,{enumerable:N(0,!1)})):(a(W,ae)||B(W,ae,N(1,{})),W[ae][X]=!0),pe(W,X,se)):B(W,X,se)},Qt=function(W,X){x(W);for(var se,ge=w(X=D(X)),Pe=0,Be=ge.length;Be>Pe;)Ze(W,se=ge[Pe++],X[se]);return W},rt=function(W){var X=ke.call(this,W=O(W,!0));return!(this===Oe&&a(xe,W)&&!a(Se,W))&&(!(X||!a(this,W)||!a(xe,W)||a(this,ae)&&this[ae][W])||X)},it=function(W,X){if(W=D(W),X=O(X,!0),W!==Oe||!a(xe,X)||a(Se,X)){var se=P(W,X);return!se||!a(xe,X)||a(W,ae)&&W[ae][X]||(se.enumerable=!0),se}},bt=function(W){for(var X,se=j(D(W)),ge=[],Pe=0;se.length>Pe;)a(xe,X=se[Pe++])||X==ae||X==f||ge.push(X);return ge},Ft=function(W){for(var X,se=W===Oe,ge=j(se?Se:D(W)),Pe=[],Be=0;ge.length>Be;)!a(xe,X=ge[Be++])||se&&!a(Oe,X)||Pe.push(xe[X]);return Pe};Fe||(c((z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor!");var W=m(arguments.length>0?arguments[0]:void 0),X=function(se){this===Oe&&X.call(Se,se),a(this,ae)&&a(this[ae],W)&&(this[ae][W]=!1),pe(this,W,N(1,se))};return l&&Ce&&pe(Oe,W,{configurable:!0,set:X}),De(W)}).prototype,"toString",function(){return this._k}),T.f=it,A.f=Ze,o(41).f=R.f=bt,o(19).f=rt,q.f=Ft,l&&!o(14)&&c(Oe,"propertyIsEnumerable",rt,!0),y.f=function(W){return De(b(W))}),u(u.G+u.W+u.F*!Fe,{Symbol:z});for(var Lt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),at=0;Lt.length>at;)b(Lt[at++]);for(var gt=S(b.store),Y=0;gt.length>Y;)v(gt[Y++]);u(u.S+u.F*!Fe,"Symbol",{for:function(W){return a(ve,W+="")?ve[W]:ve[W]=z(W)},keyFor:function(W){if(!Le(W))throw TypeError(W+" is not a symbol!");for(var X in ve)if(ve[X]===W)return X},useSetter:function(){Ce=!0},useSimple:function(){Ce=!1}}),u(u.S+u.F*!Fe,"Object",{create:function(W,X){return X===void 0?C(W):Qt(C(W),X)},defineProperty:Ze,defineProperties:Qt,getOwnPropertyDescriptor:it,getOwnPropertyNames:bt,getOwnPropertySymbols:Ft});var U=d(function(){q.f(1)});u(u.S+u.F*U,"Object",{getOwnPropertySymbols:function(W){return q.f(E(W))}}),J&&u(u.S+u.F*(!Fe||d(function(){var W=z();return K([W])!="[null]"||K({a:W})!="{}"||K(Object(W))!="{}"})),"JSON",{stringify:function(W){for(var X,se,ge=[W],Pe=1;arguments.length>Pe;)ge.push(arguments[Pe++]);if(se=X=ge[1],(k(X)||W!==void 0)&&!Le(W))return g(X)||(X=function(Be,nt){if(typeof se=="function"&&(nt=se.call(this,Be,nt)),!Le(nt))return nt}),ge[1]=X,K.apply(J,ge)}}),z.prototype[fe]||o(6)(z.prototype,fe,z.prototype.valueOf),p(z,"Symbol"),p(Math,"Math",!0),p(s.JSON,"JSON",!0)},function(r,i,o){var s=o(17)("meta"),a=o(11),l=o(5),u=o(7).f,c=0,f=Object.isExtensible||function(){return!0},d=!o(8)(function(){return f(Object.preventExtensions({}))}),h=function(m){u(m,s,{value:{i:"O"+ ++c,w:{}}})},p=r.exports={KEY:s,NEED:!1,fastKey:function(m,b){if(!a(m))return typeof m=="symbol"?m:(typeof m=="string"?"S":"P")+m;if(!l(m,s)){if(!f(m))return"F";if(!b)return"E";h(m)}return m[s].i},getWeak:function(m,b){if(!l(m,s)){if(!f(m))return!0;if(!b)return!1;h(m)}return m[s].w},onFreeze:function(m){return d&&p.NEED&&f(m)&&!l(m,s)&&h(m),m}}},function(r,i,o){var s=o(13),a=o(32),l=o(19);r.exports=function(u){var c=s(u),f=a.f;if(f)for(var d,h=f(u),p=l.f,m=0;h.length>m;)p.call(u,d=h[m++])&&c.push(d);return c}},function(r,i,o){var s=o(24);r.exports=Array.isArray||function(a){return s(a)=="Array"}},function(r,i,o){var s=o(9),a=o(41).f,l={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];r.exports.f=function(c){return u&&l.call(c)=="[object Window]"?function(f){try{return a(f)}catch{return u.slice()}}(c):a(s(c))}},function(r,i,o){var s=o(19),a=o(16),l=o(9),u=o(23),c=o(5),f=o(35),d=Object.getOwnPropertyDescriptor;i.f=o(4)?d:function(h,p){if(h=l(h),p=u(p,!0),f)try{return d(h,p)}catch{}if(c(h,p))return a(!s.f.call(h,p),h[p])}},function(r,i){},function(r,i,o){o(31)("asyncIterator")},function(r,i,o){o(31)("observable")},function(r,i,o){i.__esModule=!0;var s,a=o(77),l=(s=a)&&s.__esModule?s:{default:s};i.default=l.default||function(u){for(var c=1;c<arguments.length;c++){var f=arguments[c];for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])}return u}},function(r,i,o){r.exports={default:o(78),__esModule:!0}},function(r,i,o){o(79),r.exports=o(1).Object.assign},function(r,i,o){var s=o(15);s(s.S+s.F,"Object",{assign:o(80)})},function(r,i,o){var s=o(4),a=o(13),l=o(32),u=o(19),c=o(18),f=o(40),d=Object.assign;r.exports=!d||o(8)(function(){var h={},p={},m=Symbol(),b="abcdefghijklmnopqrst";return h[m]=7,b.split("").forEach(function(y){p[y]=y}),d({},h)[m]!=7||Object.keys(d({},p)).join("")!=b})?function(h,p){for(var m=c(h),b=arguments.length,y=1,v=l.f,w=u.f;b>y;)for(var g,x=f(arguments[y++]),k=v?a(x).concat(v(x)):a(x),E=k.length,D=0;E>D;)g=k[D++],s&&!w.call(x,g)||(m[g]=x[g]);return m}:d},function(r,i,o){i.__esModule=!0;var s=l(o(82)),a=l(o(85));function l(u){return u&&u.__esModule?u:{default:u}}i.default=function(u,c){if(Array.isArray(u))return u;if((0,s.default)(Object(u)))return function(f,d){var h=[],p=!0,m=!1,b=void 0;try{for(var y,v=(0,a.default)(f);!(p=(y=v.next()).done)&&(h.push(y.value),!d||h.length!==d);p=!0);}catch(w){m=!0,b=w}finally{try{!p&&v.return&&v.return()}finally{if(m)throw b}}return h}(u,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(r,i,o){r.exports={default:o(83),__esModule:!0}},function(r,i,o){o(29),o(20),r.exports=o(84)},function(r,i,o){var s=o(42),a=o(2)("iterator"),l=o(12);r.exports=o(1).isIterable=function(u){var c=Object(u);return c[a]!==void 0||"@@iterator"in c||l.hasOwnProperty(s(c))}},function(r,i,o){r.exports={default:o(86),__esModule:!0}},function(r,i,o){o(29),o(20),r.exports=o(87)},function(r,i,o){var s=o(10),a=o(88);r.exports=o(1).getIterator=function(l){var u=a(l);if(typeof u!="function")throw TypeError(l+" is not iterable!");return s(u.call(l))}},function(r,i,o){var s=o(42),a=o(2)("iterator"),l=o(12);r.exports=o(1).getIteratorMethod=function(u){if(u!=null)return u[a]||u["@@iterator"]||l[s(u)]}},function(r,i,o){r.exports={default:o(90),__esModule:!0}},function(r,i,o){o(91),r.exports=o(1).Object.keys},function(r,i,o){var s=o(18),a=o(13);o(92)("keys",function(){return function(l){return a(s(l))}})},function(r,i,o){var s=o(15),a=o(1),l=o(8);r.exports=function(u,c){var f=(a.Object||{})[u]||Object[u],d={};d[u]=c(f),s(s.S+s.F*l(function(){f(1)}),"Object",d)}},function(r,i,o){(function(s){var a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],l=/^\s+|\s+$/g,u=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,c=/\{\n\/\* \[wrapped with (.+)\] \*/,f=/,? & /,d=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,p=/^\[object .+?Constructor\]$/,m=/^0o[0-7]+$/i,b=/^(?:0|[1-9]\d*)$/,y=parseInt,v=typeof s=="object"&&s&&s.Object===Object&&s,w=typeof self=="object"&&self&&self.Object===Object&&self,g=v||w||Function("return this")();function x(Y,U,W){switch(W.length){case 0:return Y.call(U);case 1:return Y.call(U,W[0]);case 2:return Y.call(U,W[0],W[1]);case 3:return Y.call(U,W[0],W[1],W[2])}return Y.apply(U,W)}function k(Y,U){return!!(Y&&Y.length)&&function(W,X,se){if(X!=X)return function(Be,nt,Z,re){for(var me=Be.length,Ee=Z+-1;++Ee<me;)if(nt(Be[Ee],Ee,Be))return Ee;return-1}(W,E,se);for(var ge=se-1,Pe=W.length;++ge<Pe;)if(W[ge]===X)return ge;return-1}(Y,U,0)>-1}function E(Y){return Y!=Y}function D(Y,U){for(var W=Y.length,X=0;W--;)Y[W]===U&&X++;return X}function O(Y,U){for(var W=-1,X=Y.length,se=0,ge=[];++W<X;){var Pe=Y[W];Pe!==U&&Pe!=="__lodash_placeholder__"||(Y[W]="__lodash_placeholder__",ge[se++]=W)}return ge}var N,C,R,T=Function.prototype,q=Object.prototype,A=g["__core-js_shared__"],S=(N=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+N:"",P=T.toString,B=q.hasOwnProperty,j=q.toString,z=RegExp("^"+P.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=Object.create,K=Math.max,ae=Math.min,fe=(C=De(Object,"defineProperty"),(R=De.name)&&R.length>2?C:void 0);function ke(Y){return Lt(Y)?J(Y):{}}function ve(Y){return!(!Lt(Y)||function(U){return!!S&&S in U}(Y))&&(function(U){var W=Lt(U)?j.call(U):"";return W=="[object Function]"||W=="[object GeneratorFunction]"}(Y)||function(U){var W=!1;if(U!=null&&typeof U.toString!="function")try{W=!!(U+"")}catch{}return W}(Y)?z:p).test(function(U){if(U!=null){try{return P.call(U)}catch{}try{return U+""}catch{}}return""}(Y))}function xe(Y,U,W,X){for(var se=-1,ge=Y.length,Pe=W.length,Be=-1,nt=U.length,Z=K(ge-Pe,0),re=Array(nt+Z),me=!X;++Be<nt;)re[Be]=U[Be];for(;++se<Pe;)(me||se<ge)&&(re[W[se]]=Y[se]);for(;Z--;)re[Be++]=Y[se++];return re}function Se(Y,U,W,X){for(var se=-1,ge=Y.length,Pe=-1,Be=W.length,nt=-1,Z=U.length,re=K(ge-Be,0),me=Array(re+Z),Ee=!X;++se<re;)me[se]=Y[se];for(var Ae=se;++nt<Z;)me[Ae+nt]=U[nt];for(;++Pe<Be;)(Ee||se<ge)&&(me[Ae+W[Pe]]=Y[se++]);return me}function Oe(Y){return function(){var U=arguments;switch(U.length){case 0:return new Y;case 1:return new Y(U[0]);case 2:return new Y(U[0],U[1]);case 3:return new Y(U[0],U[1],U[2]);case 4:return new Y(U[0],U[1],U[2],U[3]);case 5:return new Y(U[0],U[1],U[2],U[3],U[4]);case 6:return new Y(U[0],U[1],U[2],U[3],U[4],U[5]);case 7:return new Y(U[0],U[1],U[2],U[3],U[4],U[5],U[6])}var W=ke(Y.prototype),X=Y.apply(W,U);return Lt(X)?X:W}}function Fe(Y,U,W,X,se,ge,Pe,Be,nt,Z){var re=128&U,me=1&U,Ee=2&U,Ae=24&U,ot=512&U,_t=Ee?void 0:Oe(Y);return function Xt(){for(var Nt=arguments.length,Ie=Array(Nt),Bt=Nt;Bt--;)Ie[Bt]=arguments[Bt];if(Ae)var Wt=pe(Xt),vn=D(Ie,Wt);if(X&&(Ie=xe(Ie,X,se,Ae)),ge&&(Ie=Se(Ie,ge,Pe,Ae)),Nt-=vn,Ae&&Nt<Z){var Dr=O(Ie,Wt);return mt(Y,U,Fe,Xt.placeholder,W,Ie,Dr,Be,nt,Z-Nt)}var wn=me?W:this,$n=Ee?wn[Y]:Y;return Nt=Ie.length,Be?Ie=rt(Ie,Be):ot&&Nt>1&&Ie.reverse(),re&&nt<Nt&&(Ie.length=nt),this&&this!==g&&this instanceof Xt&&($n=_t||Oe($n)),$n.apply(wn,Ie)}}function mt(Y,U,W,X,se,ge,Pe,Be,nt,Z){var re=8&U;U|=re?32:64,4&(U&=~(re?64:32))||(U&=-4);var me=W(Y,U,se,re?ge:void 0,re?Pe:void 0,re?void 0:ge,re?void 0:Pe,Be,nt,Z);return me.placeholder=X,it(me,Y,U)}function Ce(Y,U,W,X,se,ge,Pe,Be){var nt=2&U;if(!nt&&typeof Y!="function")throw new TypeError("Expected a function");var Z=X?X.length:0;if(Z||(U&=-97,X=se=void 0),Pe=Pe===void 0?Pe:K(gt(Pe),0),Be=Be===void 0?Be:gt(Be),Z-=se?se.length:0,64&U){var re=X,me=se;X=se=void 0}var Ee=[Y,U,W,X,se,re,me,ge,Pe,Be];if(Y=Ee[0],U=Ee[1],W=Ee[2],X=Ee[3],se=Ee[4],!(Be=Ee[9]=Ee[9]==null?nt?0:Y.length:K(Ee[9]-Z,0))&&24&U&&(U&=-25),U&&U!=1)Ae=U==8||U==16?function(ot,_t,Xt){var Nt=Oe(ot);return function Ie(){for(var Bt=arguments.length,Wt=Array(Bt),vn=Bt,Dr=pe(Ie);vn--;)Wt[vn]=arguments[vn];var wn=Bt<3&&Wt[0]!==Dr&&Wt[Bt-1]!==Dr?[]:O(Wt,Dr);if((Bt-=wn.length)<Xt)return mt(ot,_t,Fe,Ie.placeholder,void 0,Wt,wn,void 0,void 0,Xt-Bt);var $n=this&&this!==g&&this instanceof Ie?Nt:ot;return x($n,this,Wt)}}(Y,U,Be):U!=32&&U!=33||se.length?Fe.apply(void 0,Ee):function(ot,_t,Xt,Nt){var Ie=1&_t,Bt=Oe(ot);return function Wt(){for(var vn=-1,Dr=arguments.length,wn=-1,$n=Nt.length,jl=Array($n+Dr),Gc=this&&this!==g&&this instanceof Wt?Bt:ot;++wn<$n;)jl[wn]=Nt[wn];for(;Dr--;)jl[wn++]=arguments[++vn];return x(Gc,Ie?Xt:this,jl)}}(Y,U,W,X);else var Ae=function(ot,_t,Xt){var Nt=1&_t,Ie=Oe(ot);return function Bt(){var Wt=this&&this!==g&&this instanceof Bt?Ie:ot;return Wt.apply(Nt?Xt:this,arguments)}}(Y,U,W);return it(Ae,Y,U)}function pe(Y){return Y.placeholder}function De(Y,U){var W=function(X,se){return X==null?void 0:X[se]}(Y,U);return ve(W)?W:void 0}function Le(Y){var U=Y.match(c);return U?U[1].split(f):[]}function Ze(Y,U){var W=U.length,X=W-1;return U[X]=(W>1?"& ":"")+U[X],U=U.join(W>2?", ":" "),Y.replace(u,`{
/* [wrapped with `+U+`] */
`)}function Qt(Y,U){return!!(U=U??9007199254740991)&&(typeof Y=="number"||b.test(Y))&&Y>-1&&Y%1==0&&Y<U}function rt(Y,U){for(var W=Y.length,X=ae(U.length,W),se=function(Pe,Be){var nt=-1,Z=Pe.length;for(Be||(Be=Array(Z));++nt<Z;)Be[nt]=Pe[nt];return Be}(Y);X--;){var ge=U[X];Y[X]=Qt(ge,W)?se[ge]:void 0}return Y}var it=fe?function(Y,U,W){var X,se=U+"";return fe(Y,"toString",{configurable:!0,enumerable:!1,value:(X=Ze(se,bt(Le(se),W)),function(){return X})})}:function(Y){return Y};function bt(Y,U){return function(W,X){for(var se=-1,ge=W?W.length:0;++se<ge&&X(W[se],se,W)!==!1;);}(a,function(W){var X="_."+W[0];U&W[1]&&!k(Y,X)&&Y.push(X)}),Y.sort()}function Ft(Y,U,W){var X=Ce(Y,8,void 0,void 0,void 0,void 0,void 0,U=W?void 0:U);return X.placeholder=Ft.placeholder,X}function Lt(Y){var U=typeof Y;return!!Y&&(U=="object"||U=="function")}function at(Y){return Y?(Y=function(U){if(typeof U=="number")return U;if(function(se){return typeof se=="symbol"||function(ge){return!!ge&&typeof ge=="object"}(se)&&j.call(se)=="[object Symbol]"}(U))return NaN;if(Lt(U)){var W=typeof U.valueOf=="function"?U.valueOf():U;U=Lt(W)?W+"":W}if(typeof U!="string")return U===0?U:+U;U=U.replace(l,"");var X=h.test(U);return X||m.test(U)?y(U.slice(2),X?2:8):d.test(U)?NaN:+U}(Y))===1/0||Y===-1/0?17976931348623157e292*(Y<0?-1:1):Y==Y?Y:0:Y===0?Y:0}function gt(Y){var U=at(Y),W=U%1;return U==U?W?U-W:U:0}Ft.placeholder={},r.exports=Ft}).call(this,o(43))},function(r,i,o){function s(Se){return Se&&Se.__esModule?Se.default:Se}i.__esModule=!0;var a=o(95);i.threezerotwofour=s(a);var l=o(96);i.apathy=s(l);var u=o(97);i.ashes=s(u);var c=o(98);i.atelierDune=s(c);var f=o(99);i.atelierForest=s(f);var d=o(100);i.atelierHeath=s(d);var h=o(101);i.atelierLakeside=s(h);var p=o(102);i.atelierSeaside=s(p);var m=o(103);i.bespin=s(m);var b=o(104);i.brewer=s(b);var y=o(105);i.bright=s(y);var v=o(106);i.chalk=s(v);var w=o(107);i.codeschool=s(w);var g=o(108);i.colors=s(g);var x=o(109);i.default=s(x);var k=o(110);i.eighties=s(k);var E=o(111);i.embers=s(E);var D=o(112);i.flat=s(D);var O=o(113);i.google=s(O);var N=o(114);i.grayscale=s(N);var C=o(115);i.greenscreen=s(C);var R=o(116);i.harmonic=s(R);var T=o(117);i.hopscotch=s(T);var q=o(118);i.isotope=s(q);var A=o(119);i.marrakesh=s(A);var S=o(120);i.mocha=s(S);var P=o(121);i.monokai=s(P);var B=o(122);i.ocean=s(B);var j=o(123);i.paraiso=s(j);var z=o(124);i.pop=s(z);var J=o(125);i.railscasts=s(J);var K=o(126);i.shapeshifter=s(K);var ae=o(127);i.solarized=s(ae);var fe=o(128);i.summerfruit=s(fe);var ke=o(129);i.tomorrow=s(ke);var ve=o(130);i.tube=s(ve);var xe=o(131);i.twilight=s(xe)},function(r,i,o){i.__esModule=!0,i.default={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"brewer",author:"timothe poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"},r.exports=i.default},function(r,i,o){i.__esModule=!0,i.default={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"},r.exports=i.default},function(r,i,o){var s=o(33);function a(l){var u=Math.round(s(l,0,255)).toString(16);return u.length==1?"0"+u:u}r.exports=function(l){var u=l.length===4?a(255*l[3]):"";return"#"+a(l[0])+a(l[1])+a(l[2])+u}},function(r,i,o){var s=o(134),a=o(135),l=o(136),u=o(137),c={"#":a,hsl:function(d){var h=s(d),p=u(h);return h.length===4&&p.push(h[3]),p},rgb:l};function f(d){for(var h in c)if(d.indexOf(h)===0)return c[h](d)}f.rgb=l,f.hsl=s,f.hex=a,r.exports=f},function(r,i,o){var s=o(44),a=o(33);function l(u,c){switch(u=parseFloat(u),c){case 0:return a(u,0,360);case 1:case 2:return a(u,0,100);case 3:return a(u,0,1)}}r.exports=function(u){return s(u).map(l)}},function(r,i){r.exports=function(o){o.length!==4&&o.length!==5||(o=function(l){for(var u="#",c=1;c<l.length;c++){var f=l.charAt(c);u+=f+f}return u}(o));var s=[parseInt(o.substring(1,3),16),parseInt(o.substring(3,5),16),parseInt(o.substring(5,7),16)];if(o.length===9){var a=parseFloat((parseInt(o.substring(7,9),16)/255).toFixed(2));s.push(a)}return s}},function(r,i,o){var s=o(44),a=o(33);function l(u,c){return c<3?u.indexOf("%")!=-1?Math.round(255*a(parseInt(u,10),0,100)/100):a(parseInt(u,10),0,255):a(parseFloat(u),0,1)}r.exports=function(u){return s(u).map(l)}},function(r,i){r.exports=function(o){var s,a,l,u,c,f=o[0]/360,d=o[1]/100,h=o[2]/100;if(d==0)return[c=255*h,c,c];s=2*h-(a=h<.5?h*(1+d):h+d-h*d),u=[0,0,0];for(var p=0;p<3;p++)(l=f+1/3*-(p-1))<0&&l++,l>1&&l--,c=6*l<1?s+6*(a-s)*l:2*l<1?a:3*l<2?s+(a-s)*(2/3-l)*6:s,u[p]=255*c;return u}},function(r,i,o){(function(s){var a=typeof s=="object"&&s&&s.Object===Object&&s,l=typeof self=="object"&&self&&self.Object===Object&&self,u=a||l||Function("return this")();function c(O,N,C){switch(C.length){case 0:return O.call(N);case 1:return O.call(N,C[0]);case 2:return O.call(N,C[0],C[1]);case 3:return O.call(N,C[0],C[1],C[2])}return O.apply(N,C)}function f(O,N){for(var C=-1,R=N.length,T=O.length;++C<R;)O[T+C]=N[C];return O}var d=Object.prototype,h=d.hasOwnProperty,p=d.toString,m=u.Symbol,b=d.propertyIsEnumerable,y=m?m.isConcatSpreadable:void 0,v=Math.max;function w(O){return g(O)||function(N){return function(C){return function(R){return!!R&&typeof R=="object"}(C)&&function(R){return R!=null&&function(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=9007199254740991}(R.length)&&!function(T){var q=function(A){var S=typeof A;return!!A&&(S=="object"||S=="function")}(T)?p.call(T):"";return q=="[object Function]"||q=="[object GeneratorFunction]"}(R)}(C)}(N)&&h.call(N,"callee")&&(!b.call(N,"callee")||p.call(N)=="[object Arguments]")}(O)||!!(y&&O&&O[y])}var g=Array.isArray,x,k,E,D=(k=function(O){var N=(O=function(T,q,A,S,P){var B=-1,j=T.length;for(A||(A=w),P||(P=[]);++B<j;){var z=T[B];A(z)?f(P,z):P[P.length]=z}return P}(O)).length,C=N;for(x;C--;)if(typeof O[C]!="function")throw new TypeError("Expected a function");return function(){for(var R=0,T=N?O[R].apply(this,arguments):arguments[0];++R<N;)T=O[R].call(this,T);return T}},E=v(E===void 0?k.length-1:E,0),function(){for(var O=arguments,N=-1,C=v(O.length-E,0),R=Array(C);++N<C;)R[N]=O[E+N];N=-1;for(var T=Array(E+1);++N<E;)T[N]=O[N];return T[E]=R,c(k,this,T)});r.exports=D}).call(this,o(43))},function(r,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.yuv2rgb=function(s){var a,l,u,c=s[0],f=s[1],d=s[2];return a=1*c+0*f+1.13983*d,l=1*c+-.39465*f+-.5806*d,u=1*c+2.02311*f+0*d,a=Math.min(Math.max(0,a),1),l=Math.min(Math.max(0,l),1),u=Math.min(Math.max(0,u),1),[255*a,255*l,255*u]},i.rgb2yuv=function(s){var a=s[0]/255,l=s[1]/255,u=s[2]/255;return[.299*a+.587*l+.114*u,-.14713*a+-.28886*l+.436*u,.615*a+-.51499*l+-.10001*u]}},function(r,i,o){function s(u,c,f){return c in u?Object.defineProperty(u,c,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[c]=f,u}var a=o(141),l=function(){function u(){s(this,"_callbacks",void 0),s(this,"_isDispatching",void 0),s(this,"_isHandled",void 0),s(this,"_isPending",void 0),s(this,"_lastID",void 0),s(this,"_pendingPayload",void 0),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}var c=u.prototype;return c.register=function(f){var d="ID_"+this._lastID++;return this._callbacks[d]=f,d},c.unregister=function(f){this._callbacks[f]||a(!1),delete this._callbacks[f]},c.waitFor=function(f){this._isDispatching||a(!1);for(var d=0;d<f.length;d++){var h=f[d];this._isPending[h]?this._isHandled[h]||a(!1):(this._callbacks[h]||a(!1),this._invokeCallback(h))}},c.dispatch=function(f){this._isDispatching&&a(!1),this._startDispatching(f);try{for(var d in this._callbacks)this._isPending[d]||this._invokeCallback(d)}finally{this._stopDispatching()}},c.isDispatching=function(){return this._isDispatching},c._invokeCallback=function(f){this._isPending[f]=!0,this._callbacks[f](this._pendingPayload),this._isHandled[f]=!0},c._startDispatching=function(f){for(var d in this._callbacks)this._isPending[d]=!1,this._isHandled[d]=!1;this._pendingPayload=f,this._isDispatching=!0},c._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},u}();r.exports=l},function(r,i,o){r.exports=function(s,a){for(var l=arguments.length,u=new Array(l>2?l-2:0),c=2;c<l;c++)u[c-2]=arguments[c];if(!s){var f;if(a===void 0)f=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=0;(f=new Error(a.replace(/%s/g,function(){return String(u[d++])}))).name="Invariant Violation"}throw f.framesToPop=1,f}}},function(r,i,o){function s(F,L,M){return L in F?Object.defineProperty(F,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):F[L]=M,F}function a(F,L){var M=Object.keys(F);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(F);L&&($=$.filter(function(I){return Object.getOwnPropertyDescriptor(F,I).enumerable})),M.push.apply(M,$)}return M}function l(F){for(var L=1;L<arguments.length;L++){var M=arguments[L]!=null?arguments[L]:{};L%2?a(Object(M),!0).forEach(function($){s(F,$,M[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(M)):a(Object(M)).forEach(function($){Object.defineProperty(F,$,Object.getOwnPropertyDescriptor(M,$))})}return F}function u(F,L){if(!(F instanceof L))throw new TypeError("Cannot call a class as a function")}function c(F,L){for(var M=0;M<L.length;M++){var $=L[M];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(F,$.key,$)}}function f(F,L,M){return L&&c(F.prototype,L),M&&c(F,M),F}function d(F,L){return(d=Object.setPrototypeOf||function(M,$){return M.__proto__=$,M})(F,L)}function h(F,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(L&&L.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),L&&d(F,L)}function p(F){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)})(F)}function m(F){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(F)}function b(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function y(F,L){return!L||m(L)!=="object"&&typeof L!="function"?b(F):L}function v(F){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var M,$=p(F);if(L){var I=p(this).constructor;M=Reflect.construct($,arguments,I)}else M=$.apply(this,arguments);return y(this,M)}}o.r(i);var w=o(0),g=o.n(w);function x(){var F=this.constructor.getDerivedStateFromProps(this.props,this.state);F!=null&&this.setState(F)}function k(F){this.setState((function(L){var M=this.constructor.getDerivedStateFromProps(F,L);return M??null}).bind(this))}function E(F,L){try{var M=this.props,$=this.state;this.props=F,this.state=L,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(M,$)}finally{this.props=M,this.state=$}}function D(F){var L=F.prototype;if(!L||!L.isReactComponent)throw new Error("Can only polyfill class components");if(typeof F.getDerivedStateFromProps!="function"&&typeof L.getSnapshotBeforeUpdate!="function")return F;var M=null,$=null,I=null;if(typeof L.componentWillMount=="function"?M="componentWillMount":typeof L.UNSAFE_componentWillMount=="function"&&(M="UNSAFE_componentWillMount"),typeof L.componentWillReceiveProps=="function"?$="componentWillReceiveProps":typeof L.UNSAFE_componentWillReceiveProps=="function"&&($="UNSAFE_componentWillReceiveProps"),typeof L.componentWillUpdate=="function"?I="componentWillUpdate":typeof L.UNSAFE_componentWillUpdate=="function"&&(I="UNSAFE_componentWillUpdate"),M!==null||$!==null||I!==null){var H=F.displayName||F.name,Q=typeof F.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+H+" uses "+Q+" but also contains the following legacy lifecycles:"+(M!==null?`
  `+M:"")+($!==null?`
  `+$:"")+(I!==null?`
  `+I:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof F.getDerivedStateFromProps=="function"&&(L.componentWillMount=x,L.componentWillReceiveProps=k),typeof L.getSnapshotBeforeUpdate=="function"){if(typeof L.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");L.componentWillUpdate=E;var G=L.componentDidUpdate;L.componentDidUpdate=function(V,te,be){var Ve=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:be;G.call(this,V,te,Ve)}}return F}function O(F,L){if(F==null)return{};var M,$,I=function(Q,G){if(Q==null)return{};var V,te,be={},Ve=Object.keys(Q);for(te=0;te<Ve.length;te++)V=Ve[te],G.indexOf(V)>=0||(be[V]=Q[V]);return be}(F,L);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(F);for($=0;$<H.length;$++)M=H[$],L.indexOf(M)>=0||Object.prototype.propertyIsEnumerable.call(F,M)&&(I[M]=F[M])}return I}function N(F){var L=function(M){return{}.toString.call(M).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}(F);return L==="number"&&(L=isNaN(F)?"nan":(0|F)!=F?"float":"integer"),L}x.__suppressDeprecationWarning=!0,k.__suppressDeprecationWarning=!0,E.__suppressDeprecationWarning=!0;var C={scheme:"rjv-default",author:"mac gainor",base00:"rgba(0, 0, 0, 0)",base01:"rgb(245, 245, 245)",base02:"rgb(235, 235, 235)",base03:"#93a1a1",base04:"rgba(0, 0, 0, 0.3)",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#d33682",base09:"#cb4b16",base0A:"#dc322f",base0B:"#859900",base0C:"#6c71c4",base0D:"#586e75",base0E:"#2aa198",base0F:"#268bd2"},R={scheme:"rjv-grey",author:"mac gainor",base00:"rgba(1, 1, 1, 0)",base01:"rgba(1, 1, 1, 0.1)",base02:"rgba(0, 0, 0, 0.2)",base03:"rgba(1, 1, 1, 0.3)",base04:"rgba(0, 0, 0, 0.4)",base05:"rgba(1, 1, 1, 0.5)",base06:"rgba(1, 1, 1, 0.6)",base07:"rgba(1, 1, 1, 0.7)",base08:"rgba(1, 1, 1, 0.8)",base09:"rgba(1, 1, 1, 0.8)",base0A:"rgba(1, 1, 1, 0.8)",base0B:"rgba(1, 1, 1, 0.8)",base0C:"rgba(1, 1, 1, 0.8)",base0D:"rgba(1, 1, 1, 0.8)",base0E:"rgba(1, 1, 1, 0.8)",base0F:"rgba(1, 1, 1, 0.8)"},T={white:"#fff",black:"#000",transparent:"rgba(1, 1, 1, 0)",globalFontFamily:"monospace",globalCursor:"default",indentBlockWidth:"5px",braceFontWeight:"bold",braceCursor:"pointer",ellipsisFontSize:"18px",ellipsisLineHeight:"10px",ellipsisCursor:"pointer",keyMargin:"0px 5px",keyLetterSpacing:"0.5px",keyFontStyle:"none",keyBorderRadius:"3px",keyColonWeight:"bold",keyVerticalAlign:"top",keyOpacity:"0.85",keyOpacityHover:"1",keyValPaddingTop:"3px",keyValPaddingBottom:"3px",keyValPaddingRight:"5px",keyValBorderLeft:"1px solid",keyValBorderHover:"2px solid",keyValPaddingHover:"3px 5px 3px 4px",pushedContentMarginLeft:"6px",variableValuePaddingRight:"6px",nullFontSize:"11px",nullFontWeight:"bold",nullPadding:"1px 2px",nullBorderRadius:"3px",nanFontSize:"11px",nanFontWeight:"bold",nanPadding:"1px 2px",nanBorderRadius:"3px",undefinedFontSize:"11px",undefinedFontWeight:"bold",undefinedPadding:"1px 2px",undefinedBorderRadius:"3px",dataTypeFontSize:"11px",dataTypeMarginRight:"4px",datatypeOpacity:"0.8",objectSizeBorderRadius:"3px",objectSizeFontStyle:"italic",objectSizeMargin:"0px 6px 0px 0px",clipboardCursor:"pointer",clipboardCheckMarginLeft:"-12px",metaDataPadding:"0px 0px 0px 10px",arrayGroupMetaPadding:"0px 0px 0px 4px",iconContainerWidth:"17px",tooltipPadding:"4px",editInputMinWidth:"130px",editInputBorderRadius:"2px",editInputPadding:"5px",editInputMarginRight:"4px",editInputFontFamily:"monospace",iconCursor:"pointer",iconFontSize:"15px",iconPaddingRight:"1px",dateValueMarginLeft:"2px",iconMarginRight:"3px",detectedRowPaddingTop:"3px",addKeyCoverBackground:"rgba(255, 255, 255, 0.3)",addKeyCoverPosition:"absolute",addKeyCoverPositionPx:"0px",addKeyModalWidth:"200px",addKeyModalMargin:"auto",addKeyModalPadding:"10px",addKeyModalRadius:"3px"},q=o(45),A=function(F){var L=function(M){return{backgroundColor:M.base00,ellipsisColor:M.base09,braceColor:M.base07,expandedIcon:M.base0D,collapsedIcon:M.base0E,keyColor:M.base07,arrayKeyColor:M.base0C,objectSize:M.base04,copyToClipboard:M.base0F,copyToClipboardCheck:M.base0D,objectBorder:M.base02,dataTypes:{boolean:M.base0E,date:M.base0D,float:M.base0B,function:M.base0D,integer:M.base0F,string:M.base09,nan:M.base08,null:M.base0A,undefined:M.base05,regexp:M.base0A,background:M.base02},editVariable:{editIcon:M.base0E,cancelIcon:M.base09,removeIcon:M.base09,addIcon:M.base0E,checkIcon:M.base0E,background:M.base01,color:M.base0A,border:M.base07},addKeyModal:{background:M.base05,border:M.base04,color:M.base0A,labelColor:M.base01},validationFailure:{background:M.base09,iconColor:M.base01,fontColor:M.base01}}}(F);return{"app-container":{fontFamily:T.globalFontFamily,cursor:T.globalCursor,backgroundColor:L.backgroundColor,position:"relative"},ellipsis:{display:"inline-block",color:L.ellipsisColor,fontSize:T.ellipsisFontSize,lineHeight:T.ellipsisLineHeight,cursor:T.ellipsisCursor},"brace-row":{display:"inline-block",cursor:"pointer"},brace:{display:"inline-block",cursor:T.braceCursor,fontWeight:T.braceFontWeight,color:L.braceColor},"expanded-icon":{color:L.expandedIcon},"collapsed-icon":{color:L.collapsedIcon},colon:{display:"inline-block",margin:T.keyMargin,color:L.keyColor,verticalAlign:"top"},objectKeyVal:function(M,$){return{style:l({paddingTop:T.keyValPaddingTop,paddingRight:T.keyValPaddingRight,paddingBottom:T.keyValPaddingBottom,borderLeft:T.keyValBorderLeft+" "+L.objectBorder,":hover":{paddingLeft:$.paddingLeft-1+"px",borderLeft:T.keyValBorderHover+" "+L.objectBorder}},$)}},"object-key-val-no-border":{padding:T.keyValPadding},"pushed-content":{marginLeft:T.pushedContentMarginLeft},variableValue:function(M,$){return{style:l({display:"inline-block",paddingRight:T.variableValuePaddingRight,position:"relative"},$)}},"object-name":{display:"inline-block",color:L.keyColor,letterSpacing:T.keyLetterSpacing,fontStyle:T.keyFontStyle,verticalAlign:T.keyVerticalAlign,opacity:T.keyOpacity,":hover":{opacity:T.keyOpacityHover}},"array-key":{display:"inline-block",color:L.arrayKeyColor,letterSpacing:T.keyLetterSpacing,fontStyle:T.keyFontStyle,verticalAlign:T.keyVerticalAlign,opacity:T.keyOpacity,":hover":{opacity:T.keyOpacityHover}},"object-size":{color:L.objectSize,borderRadius:T.objectSizeBorderRadius,fontStyle:T.objectSizeFontStyle,margin:T.objectSizeMargin,cursor:"default"},"data-type-label":{fontSize:T.dataTypeFontSize,marginRight:T.dataTypeMarginRight,opacity:T.datatypeOpacity},boolean:{display:"inline-block",color:L.dataTypes.boolean},date:{display:"inline-block",color:L.dataTypes.date},"date-value":{marginLeft:T.dateValueMarginLeft},float:{display:"inline-block",color:L.dataTypes.float},function:{display:"inline-block",color:L.dataTypes.function,cursor:"pointer",whiteSpace:"pre-line"},"function-value":{fontStyle:"italic"},integer:{display:"inline-block",color:L.dataTypes.integer},string:{display:"inline-block",color:L.dataTypes.string},nan:{display:"inline-block",color:L.dataTypes.nan,fontSize:T.nanFontSize,fontWeight:T.nanFontWeight,backgroundColor:L.dataTypes.background,padding:T.nanPadding,borderRadius:T.nanBorderRadius},null:{display:"inline-block",color:L.dataTypes.null,fontSize:T.nullFontSize,fontWeight:T.nullFontWeight,backgroundColor:L.dataTypes.background,padding:T.nullPadding,borderRadius:T.nullBorderRadius},undefined:{display:"inline-block",color:L.dataTypes.undefined,fontSize:T.undefinedFontSize,padding:T.undefinedPadding,borderRadius:T.undefinedBorderRadius,backgroundColor:L.dataTypes.background},regexp:{display:"inline-block",color:L.dataTypes.regexp},"copy-to-clipboard":{cursor:T.clipboardCursor},"copy-icon":{color:L.copyToClipboard,fontSize:T.iconFontSize,marginRight:T.iconMarginRight,verticalAlign:"top"},"copy-icon-copied":{color:L.copyToClipboardCheck,marginLeft:T.clipboardCheckMarginLeft},"array-group-meta-data":{display:"inline-block",padding:T.arrayGroupMetaPadding},"object-meta-data":{display:"inline-block",padding:T.metaDataPadding},"icon-container":{display:"inline-block",width:T.iconContainerWidth},tooltip:{padding:T.tooltipPadding},removeVarIcon:{verticalAlign:"top",display:"inline-block",color:L.editVariable.removeIcon,cursor:T.iconCursor,fontSize:T.iconFontSize,marginRight:T.iconMarginRight},addVarIcon:{verticalAlign:"top",display:"inline-block",color:L.editVariable.addIcon,cursor:T.iconCursor,fontSize:T.iconFontSize,marginRight:T.iconMarginRight},editVarIcon:{verticalAlign:"top",display:"inline-block",color:L.editVariable.editIcon,cursor:T.iconCursor,fontSize:T.iconFontSize,marginRight:T.iconMarginRight},"edit-icon-container":{display:"inline-block",verticalAlign:"top"},"check-icon":{display:"inline-block",cursor:T.iconCursor,color:L.editVariable.checkIcon,fontSize:T.iconFontSize,paddingRight:T.iconPaddingRight},"cancel-icon":{display:"inline-block",cursor:T.iconCursor,color:L.editVariable.cancelIcon,fontSize:T.iconFontSize,paddingRight:T.iconPaddingRight},"edit-input":{display:"inline-block",minWidth:T.editInputMinWidth,borderRadius:T.editInputBorderRadius,backgroundColor:L.editVariable.background,color:L.editVariable.color,padding:T.editInputPadding,marginRight:T.editInputMarginRight,fontFamily:T.editInputFontFamily},"detected-row":{paddingTop:T.detectedRowPaddingTop},"key-modal-request":{position:T.addKeyCoverPosition,top:T.addKeyCoverPositionPx,left:T.addKeyCoverPositionPx,right:T.addKeyCoverPositionPx,bottom:T.addKeyCoverPositionPx,backgroundColor:T.addKeyCoverBackground},"key-modal":{width:T.addKeyModalWidth,backgroundColor:L.addKeyModal.background,marginLeft:T.addKeyModalMargin,marginRight:T.addKeyModalMargin,padding:T.addKeyModalPadding,borderRadius:T.addKeyModalRadius,marginTop:"15px",position:"relative"},"key-modal-label":{color:L.addKeyModal.labelColor,marginLeft:"2px",marginBottom:"5px",fontSize:"11px"},"key-modal-input-container":{overflow:"hidden"},"key-modal-input":{width:"100%",padding:"3px 6px",fontFamily:"monospace",color:L.addKeyModal.color,border:"none",boxSizing:"border-box",borderRadius:"2px"},"key-modal-cancel":{backgroundColor:L.editVariable.removeIcon,position:"absolute",top:"0px",right:"0px",borderRadius:"0px 3px 0px 3px",cursor:"pointer"},"key-modal-cancel-icon":{color:L.addKeyModal.labelColor,fontSize:T.iconFontSize,transform:"rotate(45deg)"},"key-modal-submit":{color:L.editVariable.addIcon,fontSize:T.iconFontSize,position:"absolute",right:"2px",top:"3px",cursor:"pointer"},"function-ellipsis":{display:"inline-block",color:L.ellipsisColor,fontSize:T.ellipsisFontSize,lineHeight:T.ellipsisLineHeight,cursor:T.ellipsisCursor},"validation-failure":{float:"right",padding:"3px 6px",borderRadius:"2px",cursor:"pointer",color:L.validationFailure.fontColor,backgroundColor:L.validationFailure.background},"validation-failure-label":{marginRight:"6px"},"validation-failure-clear":{position:"relative",verticalAlign:"top",cursor:"pointer",color:L.validationFailure.iconColor,fontSize:T.iconFontSize,transform:"rotate(45deg)"}}};function S(F,L,M){return F||console.error("theme has not been set"),function($){var I=C;return $!==!1&&$!=="none"||(I=R),Object(q.createStyling)(A,{defaultBase16:I})($)}(F)(L,M)}var P=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props,I=($.rjvId,$.type_name),H=$.displayDataTypes,Q=$.theme;return H?g.a.createElement("span",Object.assign({className:"data-type-label"},S(Q,"data-type-label")),I):null}}]),M}(g.a.PureComponent),B=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props;return g.a.createElement("div",S($.theme,"boolean"),g.a.createElement(P,Object.assign({type_name:"bool"},$)),$.value?"true":"false")}}]),M}(g.a.PureComponent),j=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props;return g.a.createElement("div",S($.theme,"date"),g.a.createElement(P,Object.assign({type_name:"date"},$)),g.a.createElement("span",Object.assign({className:"date-value"},S($.theme,"date-value")),$.value.toLocaleTimeString("en-us",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})))}}]),M}(g.a.PureComponent),z=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props;return g.a.createElement("div",S($.theme,"float"),g.a.createElement(P,Object.assign({type_name:"float"},$)),this.props.value)}}]),M}(g.a.PureComponent);function J(F,L){(L==null||L>F.length)&&(L=F.length);for(var M=0,$=new Array(L);M<L;M++)$[M]=F[M];return $}function K(F,L){if(F){if(typeof F=="string")return J(F,L);var M=Object.prototype.toString.call(F).slice(8,-1);return M==="Object"&&F.constructor&&(M=F.constructor.name),M==="Map"||M==="Set"?Array.from(F):M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?J(F,L):void 0}}function ae(F,L){var M;if(typeof Symbol>"u"||F[Symbol.iterator]==null){if(Array.isArray(F)||(M=K(F))||L){M&&(F=M);var $=0,I=function(){};return{s:I,n:function(){return $>=F.length?{done:!0}:{done:!1,value:F[$++]}},e:function(V){throw V},f:I}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var H,Q=!0,G=!1;return{s:function(){M=F[Symbol.iterator]()},n:function(){var V=M.next();return Q=V.done,V},e:function(V){G=!0,H=V},f:function(){try{Q||M.return==null||M.return()}finally{if(G)throw H}}}}function fe(F){return function(L){if(Array.isArray(L))return J(L)}(F)||function(L){if(typeof Symbol<"u"&&Symbol.iterator in Object(L))return Array.from(L)}(F)||K(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var ke=o(46),ve=new(o(47)).Dispatcher,xe=new(function(F){h(M,F);var L=v(M);function M(){var $;u(this,M);for(var I=arguments.length,H=new Array(I),Q=0;Q<I;Q++)H[Q]=arguments[Q];return($=L.call.apply(L,[this].concat(H))).objects={},$.set=function(G,V,te,be){$.objects[G]===void 0&&($.objects[G]={}),$.objects[G][V]===void 0&&($.objects[G][V]={}),$.objects[G][V][te]=be},$.get=function(G,V,te,be){return $.objects[G]===void 0||$.objects[G][V]===void 0||$.objects[G][V][te]==null?be:$.objects[G][V][te]},$.handleAction=function(G){var V=G.rjvId,te=G.data;switch(G.name){case"RESET":$.emit("reset-"+V);break;case"VARIABLE_UPDATED":G.data.updated_src=$.updateSrc(V,te),$.set(V,"action","variable-update",l(l({},te),{},{type:"variable-edited"})),$.emit("variable-update-"+V);break;case"VARIABLE_REMOVED":G.data.updated_src=$.updateSrc(V,te),$.set(V,"action","variable-update",l(l({},te),{},{type:"variable-removed"})),$.emit("variable-update-"+V);break;case"VARIABLE_ADDED":G.data.updated_src=$.updateSrc(V,te),$.set(V,"action","variable-update",l(l({},te),{},{type:"variable-added"})),$.emit("variable-update-"+V);break;case"ADD_VARIABLE_KEY_REQUEST":$.set(V,"action","new-key-request",te),$.emit("add-key-request-"+V)}},$.updateSrc=function(G,V){var te=V.name,be=V.namespace,Ve=V.new_value,Ge=(V.existing_value,V.variable_removed);be.shift();var lt,qe=$.get(G,"global","src"),ut=$.deepCopy(qe,fe(be)),Pt=ut,Ne=ae(be);try{for(Ne.s();!(lt=Ne.n()).done;)Pt=Pt[lt.value]}catch(rn){Ne.e(rn)}finally{Ne.f()}return Ge?N(Pt)=="array"?Pt.splice(te,1):delete Pt[te]:te!==null?Pt[te]=Ve:ut=Ve,$.set(G,"global","src",ut),ut},$.deepCopy=function(G,V){var te,be=N(G),Ve=V.shift();return be=="array"?te=fe(G):be=="object"&&(te=l({},G)),Ve!==void 0&&(te[Ve]=$.deepCopy(G[Ve],V)),te},$}return M}(ke.EventEmitter));ve.register(xe.handleAction.bind(xe));var Se=xe,Oe=function(F){h(M,F);var L=v(M);function M($){var I;return u(this,M),(I=L.call(this,$)).toggleCollapsed=function(){I.setState({collapsed:!I.state.collapsed},function(){Se.set(I.props.rjvId,I.props.namespace,"collapsed",I.state.collapsed)})},I.getFunctionDisplay=function(H){var Q=b(I).props;return H?g.a.createElement("span",null,I.props.value.toString().slice(9,-1).replace(/\{[\s\S]+/,""),g.a.createElement("span",{className:"function-collapsed",style:{fontWeight:"bold"}},g.a.createElement("span",null,"{"),g.a.createElement("span",S(Q.theme,"ellipsis"),"..."),g.a.createElement("span",null,"}"))):I.props.value.toString().slice(9,-1)},I.state={collapsed:Se.get($.rjvId,$.namespace,"collapsed",!0)},I}return f(M,[{key:"render",value:function(){var $=this.props,I=this.state.collapsed;return g.a.createElement("div",S($.theme,"function"),g.a.createElement(P,Object.assign({type_name:"function"},$)),g.a.createElement("span",Object.assign({},S($.theme,"function-value"),{className:"rjv-function-container",onClick:this.toggleCollapsed}),this.getFunctionDisplay(I)))}}]),M}(g.a.PureComponent),Fe=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){return g.a.createElement("div",S(this.props.theme,"nan"),"NaN")}}]),M}(g.a.PureComponent),mt=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){return g.a.createElement("div",S(this.props.theme,"null"),"NULL")}}]),M}(g.a.PureComponent),Ce=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props;return g.a.createElement("div",S($.theme,"integer"),g.a.createElement(P,Object.assign({type_name:"int"},$)),this.props.value)}}]),M}(g.a.PureComponent),pe=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props;return g.a.createElement("div",S($.theme,"regexp"),g.a.createElement(P,Object.assign({type_name:"regexp"},$)),this.props.value.toString())}}]),M}(g.a.PureComponent),De=function(F){h(M,F);var L=v(M);function M($){var I;return u(this,M),(I=L.call(this,$)).toggleCollapsed=function(){I.setState({collapsed:!I.state.collapsed},function(){Se.set(I.props.rjvId,I.props.namespace,"collapsed",I.state.collapsed)})},I.state={collapsed:Se.get($.rjvId,$.namespace,"collapsed",!0)},I}return f(M,[{key:"render",value:function(){this.state.collapsed;var $=this.props,I=$.collapseStringsAfterLength,H=$.theme,Q=$.value,G={style:{cursor:"default"}};return N(I)==="integer"&&Q.length>I&&(G.style.cursor="pointer",this.state.collapsed&&(Q=g.a.createElement("span",null,Q.substring(0,I),g.a.createElement("span",S(H,"ellipsis")," ...")))),g.a.createElement("div",S(H,"string"),g.a.createElement(P,Object.assign({type_name:"string"},$)),g.a.createElement("span",Object.assign({className:"string-value"},G,{onClick:this.toggleCollapsed}),'"',Q,'"'))}}]),M}(g.a.PureComponent),Le=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){return g.a.createElement("div",S(this.props.theme,"undefined"),"undefined")}}]),M}(g.a.PureComponent);function Ze(){return(Ze=Object.assign||function(F){for(var L=1;L<arguments.length;L++){var M=arguments[L];for(var $ in M)Object.prototype.hasOwnProperty.call(M,$)&&(F[$]=M[$])}return F}).apply(this,arguments)}var Qt=w.useLayoutEffect,rt=function(F){var L=Object(w.useRef)(F);return Qt(function(){L.current=F}),L},it=function(F,L){typeof F!="function"?F.current=L:F(L)},bt=function(F,L){var M=Object(w.useRef)();return Object(w.useCallback)(function($){F.current=$,M.current&&it(M.current,null),M.current=L,L&&it(L,$)},[L])},Ft={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Lt=function(F){Object.keys(Ft).forEach(function(L){F.style.setProperty(L,Ft[L],"important")})},at=null,gt=function(){},Y=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width"],U=!!document.documentElement.currentStyle,W=function(F,L){var M=F.cacheMeasurements,$=F.maxRows,I=F.minRows,H=F.onChange,Q=H===void 0?gt:H,G=F.onHeightChange,V=G===void 0?gt:G,te=function(Ne,rn){if(Ne==null)return{};var Nr,Mo,zh={},Oo=Object.keys(Ne);for(Mo=0;Mo<Oo.length;Mo++)Nr=Oo[Mo],rn.indexOf(Nr)>=0||(zh[Nr]=Ne[Nr]);return zh}(F,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),be,Ve=te.value!==void 0,Ge=Object(w.useRef)(null),lt=bt(Ge,L),qe=Object(w.useRef)(0),ut=Object(w.useRef)(),Pt=function(){var Ne=Ge.current,rn=M&&ut.current?ut.current:function(Oo){var jh=window.getComputedStyle(Oo);if(jh===null)return null;var ql,In=(ql=jh,Y.reduce(function(Yc,Ul){return Yc[Ul]=ql[Ul],Yc},{})),Vl=In.boxSizing;return Vl===""?null:(U&&Vl==="border-box"&&(In.width=parseFloat(In.width)+parseFloat(In.borderRightWidth)+parseFloat(In.borderLeftWidth)+parseFloat(In.paddingRight)+parseFloat(In.paddingLeft)+"px"),{sizingStyle:In,paddingSize:parseFloat(In.paddingBottom)+parseFloat(In.paddingTop),borderSize:parseFloat(In.borderBottomWidth)+parseFloat(In.borderTopWidth)})}(Ne);if(rn){ut.current=rn;var Nr=function(Oo,jh,ql,In){ql===void 0&&(ql=1),In===void 0&&(In=1/0),at||((at=document.createElement("textarea")).setAttribute("tab-index","-1"),at.setAttribute("aria-hidden","true"),Lt(at)),at.parentNode===null&&document.body.appendChild(at);var Vl=Oo.paddingSize,Yc=Oo.borderSize,Ul=Oo.sizingStyle,YE=Ul.boxSizing;Object.keys(Ul).forEach(function(fy){var Hl=fy;at.style[Hl]=Ul[Hl]}),Lt(at),at.value=jh;var qh=function(fy,Hl){var QE=fy.scrollHeight;return Hl.sizingStyle.boxSizing==="border-box"?QE+Hl.borderSize:QE-Hl.paddingSize}(at,Oo);at.value="x";var ly=at.scrollHeight-Vl,uy=ly*ql;YE==="border-box"&&(uy=uy+Vl+Yc),qh=Math.max(uy,qh);var cy=ly*In;return YE==="border-box"&&(cy=cy+Vl+Yc),[qh=Math.min(cy,qh),ly]}(rn,Ne.value||Ne.placeholder||"x",I,$),Mo=Nr[0],zh=Nr[1];qe.current!==Mo&&(qe.current=Mo,Ne.style.setProperty("height",Mo+"px","important"),V(Mo,{rowHeight:zh}))}};return Object(w.useLayoutEffect)(Pt),be=rt(Pt),Object(w.useLayoutEffect)(function(){var Ne=function(rn){be.current(rn)};return window.addEventListener("resize",Ne),function(){window.removeEventListener("resize",Ne)}},[]),Object(w.createElement)("textarea",Ze({},te,{onChange:function(Ne){Ve||Pt(),Q(Ne)},ref:lt}))},X=Object(w.forwardRef)(W);function se(F){F=F.trim();try{if((F=JSON.stringify(JSON.parse(F)))[0]==="[")return ge("array",JSON.parse(F));if(F[0]==="{")return ge("object",JSON.parse(F));if(F.match(/\-?\d+\.\d+/)&&F.match(/\-?\d+\.\d+/)[0]===F)return ge("float",parseFloat(F));if(F.match(/\-?\d+e-\d+/)&&F.match(/\-?\d+e-\d+/)[0]===F)return ge("float",Number(F));if(F.match(/\-?\d+/)&&F.match(/\-?\d+/)[0]===F)return ge("integer",parseInt(F));if(F.match(/\-?\d+e\+\d+/)&&F.match(/\-?\d+e\+\d+/)[0]===F)return ge("integer",Number(F))}catch{}switch(F=F.toLowerCase()){case"undefined":return ge("undefined",void 0);case"nan":return ge("nan",NaN);case"null":return ge("null",null);case"true":return ge("boolean",!0);case"false":return ge("boolean",!1);default:if(F=Date.parse(F))return ge("date",new Date(F))}return ge(!1,null)}function ge(F,L){return{type:F,value:L}}var Pe=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props,I=$.style,H=O($,["style"]);return g.a.createElement("span",H,g.a.createElement("svg",Object.assign({},Ie(I),{viewBox:"0 0 24 24",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),g.a.createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7,13H17V11H7"})))}}]),M}(g.a.PureComponent),Be=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props,I=$.style,H=O($,["style"]);return g.a.createElement("span",H,g.a.createElement("svg",Object.assign({},Ie(I),{viewBox:"0 0 24 24",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),g.a.createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})))}}]),M}(g.a.PureComponent),nt=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props,I=$.style,H=O($,["style"]),Q=Ie(I).style;return g.a.createElement("span",H,g.a.createElement("svg",{fill:Q.color,width:Q.height,height:Q.width,style:Q,viewBox:"0 0 1792 1792"},g.a.createElement("path",{d:"M1344 800v64q0 14-9 23t-23 9h-832q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h832q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"})))}}]),M}(g.a.PureComponent),Z=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props,I=$.style,H=O($,["style"]),Q=Ie(I).style;return g.a.createElement("span",H,g.a.createElement("svg",{fill:Q.color,width:Q.height,height:Q.width,style:Q,viewBox:"0 0 1792 1792"},g.a.createElement("path",{d:"M1344 800v64q0 14-9 23t-23 9h-352v352q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23v-352h-352q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h352v-352q0-14 9-23t23-9h64q14 0 23 9t9 23v352h352q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"})))}}]),M}(g.a.PureComponent),re=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props,I=$.style,H=O($,["style"]);return g.a.createElement("span",H,g.a.createElement("svg",{style:l(l({},Ie(I).style),{},{paddingLeft:"2px",verticalAlign:"top"}),viewBox:"0 0 15 15",fill:"currentColor"},g.a.createElement("path",{d:"M0 14l6-6-6-6z"})))}}]),M}(g.a.PureComponent),me=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props,I=$.style,H=O($,["style"]);return g.a.createElement("span",H,g.a.createElement("svg",{style:l(l({},Ie(I).style),{},{paddingLeft:"2px",verticalAlign:"top"}),viewBox:"0 0 15 15",fill:"currentColor"},g.a.createElement("path",{d:"M0 5l6 6 6-6z"})))}}]),M}(g.a.PureComponent),Ee=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props,I=$.style,H=O($,["style"]);return g.a.createElement("span",H,g.a.createElement("svg",Object.assign({},Ie(I),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),g.a.createElement("g",null,g.a.createElement("path",{d:"m30 35h-25v-22.5h25v7.5h2.5v-12.5c0-1.4-1.1-2.5-2.5-2.5h-7.5c0-2.8-2.2-5-5-5s-5 2.2-5 5h-7.5c-1.4 0-2.5 1.1-2.5 2.5v27.5c0 1.4 1.1 2.5 2.5 2.5h25c1.4 0 2.5-1.1 2.5-2.5v-5h-2.5v5z m-20-27.5h2.5s2.5-1.1 2.5-2.5 1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5 1.3 2.5 2.5 2.5h2.5s2.5 1.1 2.5 2.5h-20c0-1.5 1.1-2.5 2.5-2.5z m-2.5 20h5v-2.5h-5v2.5z m17.5-5v-5l-10 7.5 10 7.5v-5h12.5v-5h-12.5z m-17.5 10h7.5v-2.5h-7.5v2.5z m12.5-17.5h-12.5v2.5h12.5v-2.5z m-7.5 5h-5v2.5h5v-2.5z"}))))}}]),M}(g.a.PureComponent),Ae=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props,I=$.style,H=O($,["style"]);return g.a.createElement("span",H,g.a.createElement("svg",Object.assign({},Ie(I),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),g.a.createElement("g",null,g.a.createElement("path",{d:"m28.6 25q0-0.5-0.4-1l-4-4 4-4q0.4-0.5 0.4-1 0-0.6-0.4-1.1l-2-2q-0.4-0.4-1-0.4-0.6 0-1 0.4l-4.1 4.1-4-4.1q-0.4-0.4-1-0.4-0.6 0-1 0.4l-2 2q-0.5 0.5-0.5 1.1 0 0.5 0.5 1l4 4-4 4q-0.5 0.5-0.5 1 0 0.7 0.5 1.1l2 2q0.4 0.4 1 0.4 0.6 0 1-0.4l4-4.1 4.1 4.1q0.4 0.4 1 0.4 0.6 0 1-0.4l2-2q0.4-0.4 0.4-1z m8.7-5q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),M}(g.a.PureComponent),ot=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props,I=$.style,H=O($,["style"]);return g.a.createElement("span",H,g.a.createElement("svg",Object.assign({},Ie(I),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),g.a.createElement("g",null,g.a.createElement("path",{d:"m30.1 21.4v-2.8q0-0.6-0.4-1t-1-0.5h-5.7v-5.7q0-0.6-0.4-1t-1-0.4h-2.9q-0.6 0-1 0.4t-0.4 1v5.7h-5.7q-0.6 0-1 0.5t-0.5 1v2.8q0 0.6 0.5 1t1 0.5h5.7v5.7q0 0.5 0.4 1t1 0.4h2.9q0.6 0 1-0.4t0.4-1v-5.7h5.7q0.6 0 1-0.5t0.4-1z m7.2-1.4q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),M}(g.a.PureComponent),_t=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props,I=$.style,H=O($,["style"]);return g.a.createElement("span",H,g.a.createElement("svg",Object.assign({},Ie(I),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),g.a.createElement("g",null,g.a.createElement("path",{d:"m31.6 21.6h-10v10h-3.2v-10h-10v-3.2h10v-10h3.2v10h10v3.2z"}))))}}]),M}(g.a.PureComponent),Xt=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props,I=$.style,H=O($,["style"]);return g.a.createElement("span",H,g.a.createElement("svg",Object.assign({},Ie(I),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),g.a.createElement("g",null,g.a.createElement("path",{d:"m19.8 26.4l2.6-2.6-3.4-3.4-2.6 2.6v1.3h2.2v2.1h1.2z m9.8-16q-0.3-0.4-0.7 0l-7.8 7.8q-0.4 0.4 0 0.7t0.7 0l7.8-7.8q0.4-0.4 0-0.7z m1.8 13.2v4.3q0 2.6-1.9 4.5t-4.5 1.9h-18.6q-2.6 0-4.5-1.9t-1.9-4.5v-18.6q0-2.7 1.9-4.6t4.5-1.8h18.6q1.4 0 2.6 0.5 0.3 0.2 0.4 0.5 0.1 0.4-0.2 0.7l-1.1 1.1q-0.3 0.3-0.7 0.1-0.5-0.1-1-0.1h-18.6q-1.4 0-2.5 1.1t-1 2.5v18.6q0 1.4 1 2.5t2.5 1h18.6q1.5 0 2.5-1t1.1-2.5v-2.9q0-0.2 0.2-0.4l1.4-1.5q0.3-0.3 0.8-0.1t0.4 0.6z m-2.1-16.5l6.4 6.5-15 15h-6.4v-6.5z m9.9 3l-2.1 2-6.4-6.4 2.1-2q0.6-0.7 1.5-0.7t1.5 0.7l3.4 3.4q0.6 0.6 0.6 1.5t-0.6 1.5z"}))))}}]),M}(g.a.PureComponent),Nt=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props,I=$.style,H=O($,["style"]);return g.a.createElement("span",H,g.a.createElement("svg",Object.assign({},Ie(I),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),g.a.createElement("g",null,g.a.createElement("path",{d:"m31.7 16.4q0-0.6-0.4-1l-2.1-2.1q-0.4-0.4-1-0.4t-1 0.4l-9.1 9.1-5-5q-0.5-0.4-1-0.4t-1 0.4l-2.1 2q-0.4 0.4-0.4 1 0 0.6 0.4 1l8.1 8.1q0.4 0.4 1 0.4 0.6 0 1-0.4l12.2-12.1q0.4-0.4 0.4-1z m5.6 3.6q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),M}(g.a.PureComponent);function Ie(F){return F||(F={}),{style:l(l({verticalAlign:"middle"},F),{},{color:F.color?F.color:"#000000",height:"1em",width:"1em"})}}var Bt=function(F){h(M,F);var L=v(M);function M($){var I;return u(this,M),(I=L.call(this,$)).copiedTimer=null,I.handleCopy=function(){var H=document.createElement("textarea"),Q=I.props,G=Q.clickCallback,V=Q.src,te=Q.namespace;H.innerHTML=JSON.stringify(I.clipboardValue(V),null,"  "),document.body.appendChild(H),H.select(),document.execCommand("copy"),document.body.removeChild(H),I.copiedTimer=setTimeout(function(){I.setState({copied:!1})},5500),I.setState({copied:!0},function(){typeof G=="function"&&G({src:V,namespace:te,name:te[te.length-1]})})},I.getClippyIcon=function(){var H=I.props.theme;return I.state.copied?g.a.createElement("span",null,g.a.createElement(Ee,Object.assign({className:"copy-icon"},S(H,"copy-icon"))),g.a.createElement("span",S(H,"copy-icon-copied"),"")):g.a.createElement(Ee,Object.assign({className:"copy-icon"},S(H,"copy-icon")))},I.clipboardValue=function(H){switch(N(H)){case"function":case"regexp":return H.toString();default:return H}},I.state={copied:!1},I}return f(M,[{key:"componentWillUnmount",value:function(){this.copiedTimer&&(clearTimeout(this.copiedTimer),this.copiedTimer=null)}},{key:"render",value:function(){var $=this.props,I=($.src,$.theme),H=$.hidden,Q=$.rowHovered,G=S(I,"copy-to-clipboard").style,V="inline";return H&&(V="none"),g.a.createElement("span",{className:"copy-to-clipboard-container",title:"Copy to clipboard",style:{verticalAlign:"top",display:Q?"inline-block":"none"}},g.a.createElement("span",{style:l(l({},G),{},{display:V}),onClick:this.handleCopy},this.getClippyIcon()))}}]),M}(g.a.PureComponent),Wt=function(F){h(M,F);var L=v(M);function M($){var I;return u(this,M),(I=L.call(this,$)).getEditIcon=function(){var H=I.props,Q=H.variable,G=H.theme;return g.a.createElement("div",{className:"click-to-edit",style:{verticalAlign:"top",display:I.state.hovered?"inline-block":"none"}},g.a.createElement(Xt,Object.assign({className:"click-to-edit-icon"},S(G,"editVarIcon"),{onClick:function(){I.prepopInput(Q)}})))},I.prepopInput=function(H){if(I.props.onEdit!==!1){var Q=function(V){var te;switch(N(V)){case"undefined":te="undefined";break;case"nan":te="NaN";break;case"string":te=V;break;case"date":case"function":case"regexp":te=V.toString();break;default:try{te=JSON.stringify(V,null,"  ")}catch{te=""}}return te}(H.value),G=se(Q);I.setState({editMode:!0,editValue:Q,parsedInput:{type:G.type,value:G.value}})}},I.getRemoveIcon=function(){var H=I.props,Q=H.variable,G=H.namespace,V=H.theme,te=H.rjvId;return g.a.createElement("div",{className:"click-to-remove",style:{verticalAlign:"top",display:I.state.hovered?"inline-block":"none"}},g.a.createElement(Ae,Object.assign({className:"click-to-remove-icon"},S(V,"removeVarIcon"),{onClick:function(){ve.dispatch({name:"VARIABLE_REMOVED",rjvId:te,data:{name:Q.name,namespace:G,existing_value:Q.value,variable_removed:!0}})}})))},I.getValue=function(H,Q){var G=!Q&&H.type,V=b(I).props;switch(G){case!1:return I.getEditInput();case"string":return g.a.createElement(De,Object.assign({value:H.value},V));case"integer":return g.a.createElement(Ce,Object.assign({value:H.value},V));case"float":return g.a.createElement(z,Object.assign({value:H.value},V));case"boolean":return g.a.createElement(B,Object.assign({value:H.value},V));case"function":return g.a.createElement(Oe,Object.assign({value:H.value},V));case"null":return g.a.createElement(mt,V);case"nan":return g.a.createElement(Fe,V);case"undefined":return g.a.createElement(Le,V);case"date":return g.a.createElement(j,Object.assign({value:H.value},V));case"regexp":return g.a.createElement(pe,Object.assign({value:H.value},V));default:return g.a.createElement("div",{className:"object-value"},JSON.stringify(H.value))}},I.getEditInput=function(){var H=I.props.theme,Q=I.state.editValue;return g.a.createElement("div",null,g.a.createElement(X,Object.assign({type:"text",inputRef:function(G){return G&&G.focus()},value:Q,className:"variable-editor",onChange:function(G){var V=G.target.value,te=se(V);I.setState({editValue:V,parsedInput:{type:te.type,value:te.value}})},onKeyDown:function(G){switch(G.key){case"Escape":I.setState({editMode:!1,editValue:""});break;case"Enter":(G.ctrlKey||G.metaKey)&&I.submitEdit(!0)}G.stopPropagation()},placeholder:"update this value",minRows:2},S(H,"edit-input"))),g.a.createElement("div",S(H,"edit-icon-container"),g.a.createElement(Ae,Object.assign({className:"edit-cancel"},S(H,"cancel-icon"),{onClick:function(){I.setState({editMode:!1,editValue:""})}})),g.a.createElement(Nt,Object.assign({className:"edit-check string-value"},S(H,"check-icon"),{onClick:function(){I.submitEdit()}})),g.a.createElement("div",null,I.showDetected())))},I.submitEdit=function(H){var Q=I.props,G=Q.variable,V=Q.namespace,te=Q.rjvId,be=I.state,Ve=be.editValue,Ge=be.parsedInput,lt=Ve;H&&Ge.type&&(lt=Ge.value),I.setState({editMode:!1}),ve.dispatch({name:"VARIABLE_UPDATED",rjvId:te,data:{name:G.name,namespace:V,existing_value:G.value,new_value:lt,variable_removed:!1}})},I.showDetected=function(){var H=I.props,Q=H.theme,G=(H.variable,H.namespace,H.rjvId,I.state.parsedInput),V=(G.type,G.value,I.getDetectedInput());if(V)return g.a.createElement("div",null,g.a.createElement("div",S(Q,"detected-row"),V,g.a.createElement(Nt,{className:"edit-check detected",style:l({verticalAlign:"top",paddingLeft:"3px"},S(Q,"check-icon").style),onClick:function(){I.submitEdit(!0)}})))},I.getDetectedInput=function(){var H=I.state.parsedInput,Q=H.type,G=H.value,V=b(I).props,te=V.theme;if(Q!==!1)switch(Q.toLowerCase()){case"object":return g.a.createElement("span",null,g.a.createElement("span",{style:l(l({},S(te,"brace").style),{},{cursor:"default"})},"{"),g.a.createElement("span",{style:l(l({},S(te,"ellipsis").style),{},{cursor:"default"})},"..."),g.a.createElement("span",{style:l(l({},S(te,"brace").style),{},{cursor:"default"})},"}"));case"array":return g.a.createElement("span",null,g.a.createElement("span",{style:l(l({},S(te,"brace").style),{},{cursor:"default"})},"["),g.a.createElement("span",{style:l(l({},S(te,"ellipsis").style),{},{cursor:"default"})},"..."),g.a.createElement("span",{style:l(l({},S(te,"brace").style),{},{cursor:"default"})},"]"));case"string":return g.a.createElement(De,Object.assign({value:G},V));case"integer":return g.a.createElement(Ce,Object.assign({value:G},V));case"float":return g.a.createElement(z,Object.assign({value:G},V));case"boolean":return g.a.createElement(B,Object.assign({value:G},V));case"function":return g.a.createElement(Oe,Object.assign({value:G},V));case"null":return g.a.createElement(mt,V);case"nan":return g.a.createElement(Fe,V);case"undefined":return g.a.createElement(Le,V);case"date":return g.a.createElement(j,Object.assign({value:new Date(G)},V))}},I.state={editMode:!1,editValue:"",hovered:!1,renameKey:!1,parsedInput:{type:!1,value:null}},I}return f(M,[{key:"render",value:function(){var $=this,I=this.props,H=I.variable,Q=I.singleIndent,G=I.type,V=I.theme,te=I.namespace,be=I.indentWidth,Ve=I.enableClipboard,Ge=I.onEdit,lt=I.onDelete,qe=I.onSelect,ut=I.displayArrayKey,Pt=I.quotesOnKeys,Ne=this.state.editMode;return g.a.createElement("div",Object.assign({},S(V,"objectKeyVal",{paddingLeft:be*Q}),{onMouseEnter:function(){return $.setState(l(l({},$.state),{},{hovered:!0}))},onMouseLeave:function(){return $.setState(l(l({},$.state),{},{hovered:!1}))},className:"variable-row",key:H.name}),G=="array"?ut?g.a.createElement("span",Object.assign({},S(V,"array-key"),{key:H.name+"_"+te}),H.name,g.a.createElement("div",S(V,"colon"),":")):null:g.a.createElement("span",null,g.a.createElement("span",Object.assign({},S(V,"object-name"),{className:"object-key",key:H.name+"_"+te}),!!Pt&&g.a.createElement("span",{style:{verticalAlign:"top"}},'"'),g.a.createElement("span",{style:{display:"inline-block"}},H.name),!!Pt&&g.a.createElement("span",{style:{verticalAlign:"top"}},'"')),g.a.createElement("span",S(V,"colon"),":")),g.a.createElement("div",Object.assign({className:"variable-value",onClick:qe===!1&&Ge===!1?null:function(rn){var Nr=fe(te);(rn.ctrlKey||rn.metaKey)&&Ge!==!1?$.prepopInput(H):qe!==!1&&(Nr.shift(),qe(l(l({},H),{},{namespace:Nr})))}},S(V,"variableValue",{cursor:qe===!1?"default":"pointer"})),this.getValue(H,Ne)),Ve?g.a.createElement(Bt,{rowHovered:this.state.hovered,hidden:Ne,src:H.value,clickCallback:Ve,theme:V,namespace:[].concat(fe(te),[H.name])}):null,Ge!==!1&&Ne==0?this.getEditIcon():null,lt!==!1&&Ne==0?this.getRemoveIcon():null)}}]),M}(g.a.PureComponent),vn=function(F){h(M,F);var L=v(M);function M(){var $;u(this,M);for(var I=arguments.length,H=new Array(I),Q=0;Q<I;Q++)H[Q]=arguments[Q];return($=L.call.apply(L,[this].concat(H))).getObjectSize=function(){var G=$.props,V=G.size,te=G.theme;if(G.displayObjectSize)return g.a.createElement("span",Object.assign({className:"object-size"},S(te,"object-size")),V," item",V===1?"":"s")},$.getAddAttribute=function(G){var V=$.props,te=V.theme,be=V.namespace,Ve=V.name,Ge=V.src,lt=V.rjvId,qe=V.depth;return g.a.createElement("span",{className:"click-to-add",style:{verticalAlign:"top",display:G?"inline-block":"none"}},g.a.createElement(ot,Object.assign({className:"click-to-add-icon"},S(te,"addVarIcon"),{onClick:function(){var ut={name:qe>0?Ve:null,namespace:be.splice(0,be.length-1),existing_value:Ge,variable_removed:!1,key_name:null};N(Ge)==="object"?ve.dispatch({name:"ADD_VARIABLE_KEY_REQUEST",rjvId:lt,data:ut}):ve.dispatch({name:"VARIABLE_ADDED",rjvId:lt,data:l(l({},ut),{},{new_value:[].concat(fe(Ge),[null])})})}})))},$.getRemoveObject=function(G){var V=$.props,te=V.theme,be=(V.hover,V.namespace),Ve=V.name,Ge=V.src,lt=V.rjvId;if(be.length!==1)return g.a.createElement("span",{className:"click-to-remove",style:{display:G?"inline-block":"none"}},g.a.createElement(Ae,Object.assign({className:"click-to-remove-icon"},S(te,"removeVarIcon"),{onClick:function(){ve.dispatch({name:"VARIABLE_REMOVED",rjvId:lt,data:{name:Ve,namespace:be.splice(0,be.length-1),existing_value:Ge,variable_removed:!0}})}})))},$.render=function(){var G=$.props,V=G.theme,te=G.onDelete,be=G.onAdd,Ve=G.enableClipboard,Ge=G.src,lt=G.namespace,qe=G.rowHovered;return g.a.createElement("div",Object.assign({},S(V,"object-meta-data"),{className:"object-meta-data",onClick:function(ut){ut.stopPropagation()}}),$.getObjectSize(),Ve?g.a.createElement(Bt,{rowHovered:qe,clickCallback:Ve,src:Ge,theme:V,namespace:lt}):null,be!==!1?$.getAddAttribute(qe):null,te!==!1?$.getRemoveObject(qe):null)},$}return M}(g.a.PureComponent);function Dr(F){var L=F.parent_type,M=F.namespace,$=F.quotesOnKeys,I=F.theme,H=F.jsvRoot,Q=F.name,G=F.displayArrayKey,V=F.name?F.name:"";return!H||Q!==!1&&Q!==null?L=="array"?G?g.a.createElement("span",Object.assign({},S(I,"array-key"),{key:M}),g.a.createElement("span",{className:"array-key"},V),g.a.createElement("span",S(I,"colon"),":")):g.a.createElement("span",null):g.a.createElement("span",Object.assign({},S(I,"object-name"),{key:M}),g.a.createElement("span",{className:"object-key"},$&&g.a.createElement("span",{style:{verticalAlign:"top"}},'"'),g.a.createElement("span",null,V),$&&g.a.createElement("span",{style:{verticalAlign:"top"}},'"')),g.a.createElement("span",S(I,"colon"),":")):g.a.createElement("span",null)}function wn(F){var L=F.theme;switch(F.iconStyle){case"triangle":return g.a.createElement(me,Object.assign({},S(L,"expanded-icon"),{className:"expanded-icon"}));case"square":return g.a.createElement(nt,Object.assign({},S(L,"expanded-icon"),{className:"expanded-icon"}));default:return g.a.createElement(Pe,Object.assign({},S(L,"expanded-icon"),{className:"expanded-icon"}))}}function $n(F){var L=F.theme;switch(F.iconStyle){case"triangle":return g.a.createElement(re,Object.assign({},S(L,"collapsed-icon"),{className:"collapsed-icon"}));case"square":return g.a.createElement(Z,Object.assign({},S(L,"collapsed-icon"),{className:"collapsed-icon"}));default:return g.a.createElement(Be,Object.assign({},S(L,"collapsed-icon"),{className:"collapsed-icon"}))}}var jl=function(F){h(M,F);var L=v(M);function M($){var I;return u(this,M),(I=L.call(this,$)).toggleCollapsed=function(H){var Q=[];for(var G in I.state.expanded)Q.push(I.state.expanded[G]);Q[H]=!Q[H],I.setState({expanded:Q})},I.state={expanded:[]},I}return f(M,[{key:"getExpandedIcon",value:function($){var I=this.props,H=I.theme,Q=I.iconStyle;return this.state.expanded[$]?g.a.createElement(wn,{theme:H,iconStyle:Q}):g.a.createElement($n,{theme:H,iconStyle:Q})}},{key:"render",value:function(){var $=this,I=this.props,H=I.src,Q=I.groupArraysAfterLength,G=(I.depth,I.name),V=I.theme,te=I.jsvRoot,be=I.namespace,Ve=(I.parent_type,O(I,["src","groupArraysAfterLength","depth","name","theme","jsvRoot","namespace","parent_type"])),Ge=0,lt=5*this.props.indentWidth;te||(Ge=5*this.props.indentWidth);var qe=Q,ut=Math.ceil(H.length/qe);return g.a.createElement("div",Object.assign({className:"object-key-val"},S(V,te?"jsv-root":"objectKeyVal",{paddingLeft:Ge})),g.a.createElement(Dr,this.props),g.a.createElement("span",null,g.a.createElement(vn,Object.assign({size:H.length},this.props))),fe(Array(ut)).map(function(Pt,Ne){return g.a.createElement("div",Object.assign({key:Ne,className:"object-key-val array-group"},S(V,"objectKeyVal",{marginLeft:6,paddingLeft:lt})),g.a.createElement("span",S(V,"brace-row"),g.a.createElement("div",Object.assign({className:"icon-container"},S(V,"icon-container"),{onClick:function(rn){$.toggleCollapsed(Ne)}}),$.getExpandedIcon(Ne)),$.state.expanded[Ne]?g.a.createElement(Bh,Object.assign({key:G+Ne,depth:0,name:!1,collapsed:!1,groupArraysAfterLength:qe,index_offset:Ne*qe,src:H.slice(Ne*qe,Ne*qe+qe),namespace:be,type:"array",parent_type:"array_group",theme:V},Ve)):g.a.createElement("span",Object.assign({},S(V,"brace"),{onClick:function(rn){$.toggleCollapsed(Ne)},className:"array-group-brace"}),"[",g.a.createElement("div",Object.assign({},S(V,"array-group-meta-data"),{className:"array-group-meta-data"}),g.a.createElement("span",Object.assign({className:"object-size"},S(V,"object-size")),Ne*qe," - ",Ne*qe+qe>H.length?H.length:Ne*qe+qe)),"]")))}))}}]),M}(g.a.PureComponent),Gc=function(F){h(M,F);var L=v(M);function M($){var I;u(this,M),(I=L.call(this,$)).toggleCollapsed=function(){I.setState({expanded:!I.state.expanded},function(){Se.set(I.props.rjvId,I.props.namespace,"expanded",I.state.expanded)})},I.getObjectContent=function(Q,G,V){return g.a.createElement("div",{className:"pushed-content object-container"},g.a.createElement("div",Object.assign({className:"object-content"},S(I.props.theme,"pushed-content")),I.renderObjectContents(G,V)))},I.getEllipsis=function(){return I.state.size===0?null:g.a.createElement("div",Object.assign({},S(I.props.theme,"ellipsis"),{className:"node-ellipsis",onClick:I.toggleCollapsed}),"...")},I.getObjectMetaData=function(Q){var G=I.props,V=(G.rjvId,G.theme,I.state),te=V.size,be=V.hovered;return g.a.createElement(vn,Object.assign({rowHovered:be,size:te},I.props))},I.renderObjectContents=function(Q,G){var V,te=I.props,be=te.depth,Ve=te.parent_type,Ge=te.index_offset,lt=te.groupArraysAfterLength,qe=te.namespace,ut=I.state.object_type,Pt=[],Ne=Object.keys(Q||{});return I.props.sortKeys&&ut!=="array"&&(Ne=Ne.sort()),Ne.forEach(function(rn){if(V=new uF(rn,Q[rn]),Ve==="array_group"&&Ge&&(V.name=parseInt(V.name)+Ge),Q.hasOwnProperty(rn))if(V.type==="object")Pt.push(g.a.createElement(Bh,Object.assign({key:V.name,depth:be+1,name:V.name,src:V.value,namespace:qe.concat(V.name),parent_type:ut},G)));else if(V.type==="array"){var Nr=Bh;lt&&V.value.length>lt&&(Nr=jl),Pt.push(g.a.createElement(Nr,Object.assign({key:V.name,depth:be+1,name:V.name,src:V.value,namespace:qe.concat(V.name),type:"array",parent_type:ut},G)))}else Pt.push(g.a.createElement(Wt,Object.assign({key:V.name+"_"+qe,variable:V,singleIndent:5,namespace:qe,type:I.props.type},G)))}),Pt};var H=M.getState($);return I.state=l(l({},H),{},{prevProps:{}}),I}return f(M,[{key:"getBraceStart",value:function($,I){var H=this,Q=this.props,G=Q.src,V=Q.theme,te=Q.iconStyle;if(Q.parent_type==="array_group")return g.a.createElement("span",null,g.a.createElement("span",S(V,"brace"),$==="array"?"[":"{"),I?this.getObjectMetaData(G):null);var be=I?wn:$n;return g.a.createElement("span",null,g.a.createElement("span",Object.assign({onClick:function(Ve){H.toggleCollapsed()}},S(V,"brace-row")),g.a.createElement("div",Object.assign({className:"icon-container"},S(V,"icon-container")),g.a.createElement(be,{theme:V,iconStyle:te})),g.a.createElement(Dr,this.props),g.a.createElement("span",S(V,"brace"),$==="array"?"[":"{")),I?this.getObjectMetaData(G):null)}},{key:"render",value:function(){var $=this,I=this.props,H=I.depth,Q=I.src,G=(I.namespace,I.name,I.type,I.parent_type),V=I.theme,te=I.jsvRoot,be=I.iconStyle,Ve=O(I,["depth","src","namespace","name","type","parent_type","theme","jsvRoot","iconStyle"]),Ge=this.state,lt=Ge.object_type,qe=Ge.expanded,ut={};return te||G==="array_group"?G==="array_group"&&(ut.borderLeft=0,ut.display="inline"):ut.paddingLeft=5*this.props.indentWidth,g.a.createElement("div",Object.assign({className:"object-key-val",onMouseEnter:function(){return $.setState(l(l({},$.state),{},{hovered:!0}))},onMouseLeave:function(){return $.setState(l(l({},$.state),{},{hovered:!1}))}},S(V,te?"jsv-root":"objectKeyVal",ut)),this.getBraceStart(lt,qe),qe?this.getObjectContent(H,Q,l({theme:V,iconStyle:be},Ve)):this.getEllipsis(),g.a.createElement("span",{className:"brace-row"},g.a.createElement("span",{style:l(l({},S(V,"brace").style),{},{paddingLeft:qe?"3px":"0px"})},lt==="array"?"]":"}"),qe?null:this.getObjectMetaData(Q)))}}],[{key:"getDerivedStateFromProps",value:function($,I){var H=I.prevProps;return $.src!==H.src||$.collapsed!==H.collapsed||$.name!==H.name||$.namespace!==H.namespace||$.rjvId!==H.rjvId?l(l({},M.getState($)),{},{prevProps:$}):null}}]),M}(g.a.PureComponent);Gc.getState=function(F){var L=Object.keys(F.src).length,M=(F.collapsed===!1||F.collapsed!==!0&&F.collapsed>F.depth)&&(!F.shouldCollapse||F.shouldCollapse({name:F.name,src:F.src,type:N(F.src),namespace:F.namespace})===!1)&&L!==0;return{expanded:Se.get(F.rjvId,F.namespace,"expanded",M),object_type:F.type==="array"?"array":"object",parent_type:F.type==="array"?"array":"object",size:L,hovered:!1}};var uF=function F(L,M){u(this,F),this.name=L,this.value=M,this.type=N(M)};D(Gc);var Bh=Gc,cF=function(F){h(M,F);var L=v(M);function M(){var $;u(this,M);for(var I=arguments.length,H=new Array(I),Q=0;Q<I;Q++)H[Q]=arguments[Q];return($=L.call.apply(L,[this].concat(H))).render=function(){var G=b($).props,V=[G.name],te=Bh;return Array.isArray(G.src)&&G.groupArraysAfterLength&&G.src.length>G.groupArraysAfterLength&&(te=jl),g.a.createElement("div",{className:"pretty-json-container object-container"},g.a.createElement("div",{className:"object-content"},g.a.createElement(te,Object.assign({namespace:V,depth:0,jsvRoot:!0},G))))},$}return M}(g.a.PureComponent),fF=function(F){h(M,F);var L=v(M);function M($){var I;return u(this,M),(I=L.call(this,$)).closeModal=function(){ve.dispatch({rjvId:I.props.rjvId,name:"RESET"})},I.submit=function(){I.props.submit(I.state.input)},I.state={input:$.input?$.input:""},I}return f(M,[{key:"render",value:function(){var $=this,I=this.props,H=I.theme,Q=I.rjvId,G=I.isValid,V=this.state.input,te=G(V);return g.a.createElement("div",Object.assign({className:"key-modal-request"},S(H,"key-modal-request"),{onClick:this.closeModal}),g.a.createElement("div",Object.assign({},S(H,"key-modal"),{onClick:function(be){be.stopPropagation()}}),g.a.createElement("div",S(H,"key-modal-label"),"Key Name:"),g.a.createElement("div",{style:{position:"relative"}},g.a.createElement("input",Object.assign({},S(H,"key-modal-input"),{className:"key-modal-input",ref:function(be){return be&&be.focus()},spellCheck:!1,value:V,placeholder:"...",onChange:function(be){$.setState({input:be.target.value})},onKeyPress:function(be){te&&be.key==="Enter"?$.submit():be.key==="Escape"&&$.closeModal()}})),te?g.a.createElement(Nt,Object.assign({},S(H,"key-modal-submit"),{className:"key-modal-submit",onClick:function(be){return $.submit()}})):null),g.a.createElement("span",S(H,"key-modal-cancel"),g.a.createElement(_t,Object.assign({},S(H,"key-modal-cancel-icon"),{className:"key-modal-cancel",onClick:function(){ve.dispatch({rjvId:Q,name:"RESET"})}})))))}}]),M}(g.a.PureComponent),dF=function(F){h(M,F);var L=v(M);function M(){var $;u(this,M);for(var I=arguments.length,H=new Array(I),Q=0;Q<I;Q++)H[Q]=arguments[Q];return($=L.call.apply(L,[this].concat(H))).isValid=function(G){var V=$.props.rjvId,te=Se.get(V,"action","new-key-request");return G!=""&&Object.keys(te.existing_value).indexOf(G)===-1},$.submit=function(G){var V=$.props.rjvId,te=Se.get(V,"action","new-key-request");te.new_value=l({},te.existing_value),te.new_value[G]=$.props.defaultValue,ve.dispatch({name:"VARIABLE_ADDED",rjvId:V,data:te})},$}return f(M,[{key:"render",value:function(){var $=this.props,I=$.active,H=$.theme,Q=$.rjvId;return I?g.a.createElement(fF,{rjvId:Q,theme:H,isValid:this.isValid,submit:this.submit}):null}}]),M}(g.a.PureComponent),hF=function(F){h(M,F);var L=v(M);function M(){return u(this,M),L.apply(this,arguments)}return f(M,[{key:"render",value:function(){var $=this.props,I=$.message,H=$.active,Q=$.theme,G=$.rjvId;return H?g.a.createElement("div",Object.assign({className:"validation-failure"},S(Q,"validation-failure"),{onClick:function(){ve.dispatch({rjvId:G,name:"RESET"})}}),g.a.createElement("span",S(Q,"validation-failure-label"),I),g.a.createElement(_t,S(Q,"validation-failure-clear"))):null}}]),M}(g.a.PureComponent),Ph=function(F){h(M,F);var L=v(M);function M($){var I;return u(this,M),(I=L.call(this,$)).rjvId=Date.now().toString(),I.getListeners=function(){return{reset:I.resetState,"variable-update":I.updateSrc,"add-key-request":I.addKeyRequest}},I.updateSrc=function(){var H,Q=Se.get(I.rjvId,"action","variable-update"),G=Q.name,V=Q.namespace,te=Q.new_value,be=Q.existing_value,Ve=(Q.variable_removed,Q.updated_src),Ge=Q.type,lt=I.props,qe=lt.onEdit,ut=lt.onDelete,Pt=lt.onAdd,Ne={existing_src:I.state.src,new_value:te,updated_src:Ve,name:G,namespace:V,existing_value:be};switch(Ge){case"variable-added":H=Pt(Ne);break;case"variable-edited":H=qe(Ne);break;case"variable-removed":H=ut(Ne)}H!==!1?(Se.set(I.rjvId,"global","src",Ve),I.setState({src:Ve})):I.setState({validationFailure:!0})},I.addKeyRequest=function(){I.setState({addKeyRequest:!0})},I.resetState=function(){I.setState({validationFailure:!1,addKeyRequest:!1})},I.state={addKeyRequest:!1,editKeyRequest:!1,validationFailure:!1,src:M.defaultProps.src,name:M.defaultProps.name,theme:M.defaultProps.theme,validationMessage:M.defaultProps.validationMessage,prevSrc:M.defaultProps.src,prevName:M.defaultProps.name,prevTheme:M.defaultProps.theme},I}return f(M,[{key:"componentDidMount",value:function(){Se.set(this.rjvId,"global","src",this.state.src);var $=this.getListeners();for(var I in $)Se.on(I+"-"+this.rjvId,$[I]);this.setState({addKeyRequest:!1,editKeyRequest:!1})}},{key:"componentDidUpdate",value:function($,I){I.addKeyRequest!==!1&&this.setState({addKeyRequest:!1}),I.editKeyRequest!==!1&&this.setState({editKeyRequest:!1}),$.src!==this.state.src&&Se.set(this.rjvId,"global","src",this.state.src)}},{key:"componentWillUnmount",value:function(){var $=this.getListeners();for(var I in $)Se.removeListener(I+"-"+this.rjvId,$[I])}},{key:"render",value:function(){var $=this.state,I=$.validationFailure,H=$.validationMessage,Q=$.addKeyRequest,G=$.theme,V=$.src,te=$.name,be=this.props,Ve=be.style,Ge=be.defaultValue;return g.a.createElement("div",{className:"react-json-view",style:l(l({},S(G,"app-container").style),Ve)},g.a.createElement(hF,{message:H,active:I,theme:G,rjvId:this.rjvId}),g.a.createElement(cF,Object.assign({},this.props,{src:V,name:te,theme:G,type:N(V),rjvId:this.rjvId})),g.a.createElement(dF,{active:Q,theme:G,rjvId:this.rjvId,defaultValue:Ge}))}}],[{key:"getDerivedStateFromProps",value:function($,I){if($.src!==I.prevSrc||$.name!==I.prevName||$.theme!==I.prevTheme){var H={src:$.src,name:$.name,theme:$.theme,validationMessage:$.validationMessage,prevSrc:$.src,prevName:$.name,prevTheme:$.theme};return M.validateState(H)}return null}}]),M}(g.a.PureComponent);Ph.defaultProps={src:{},name:"root",theme:"rjv-default",collapsed:!1,collapseStringsAfterLength:!1,shouldCollapse:!1,sortKeys:!1,quotesOnKeys:!0,groupArraysAfterLength:100,indentWidth:4,enableClipboard:!0,displayObjectSize:!0,displayDataTypes:!0,onEdit:!1,onDelete:!1,onAdd:!1,onSelect:!1,iconStyle:"triangle",style:{},validationMessage:"Validation Error",defaultValue:null,displayArrayKey:!0},Ph.validateState=function(F){var L={};return N(F.theme)!=="object"||function(M){var $=["base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F"];if(N(M)==="object"){for(var I=0;I<$.length;I++)if(!($[I]in M))return!1;return!0}return!1}(F.theme)||(console.error("react-json-view error:","theme prop must be a theme name or valid base-16 theme object.",'defaulting to "rjv-default" theme'),L.theme="rjv-default"),N(F.src)!=="object"&&N(F.src)!=="array"&&(console.error("react-json-view error:","src property must be a valid json object"),L.name="ERROR",L.src={message:"src property must be a valid json object"}),l(l({},F),L)},D(Ph),i.default=Ph}])})})(iI);var iue=iI.exports;const oue=D1(iue);function Cn(t){this.content=t}Cn.prototype={constructor:Cn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Cn(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Cn(n)},addToStart:function(t,e){return new Cn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Cn(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Cn(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Cn.from(t),t.size?new Cn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Cn.from(t),t.size?new Cn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Cn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Cn.from=function(t){if(t instanceof Cn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Cn(e)};function oI(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=oI(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function sI(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let u=0,c=Math.min(s.text.length,a.text.length);for(;u<c&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let u=sI(s.content,a.content,n-1,r-1);if(u)return u}n-=l,r-=l}}class ue{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,a=0;a<n;s++){let l=this.content[s],u=a+l.nodeSize;if(u>e&&r(l,i+a,o||null,s)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,e-c),Math.min(l.content.size,n-c),r,i+c)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(a,l)=>{let u=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&r&&(s?s=!1:o+=r),o+=u},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new ue(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=l}return new ue(r,i)}cutByIndex(e,n){return e==n?ue.empty:e==0&&n==this.content.length?this:new ue(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new ue(i,o)}addToStart(e){return new ue([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ue(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return oI(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return sI(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Op(0,e);if(e==this.size)return Op(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?Op(r+1,s):Op(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return ue.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ue(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ue.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new ue(n||e,r)}static from(e){if(!e)return ue.empty;if(e instanceof ue)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ue([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ue.empty=new ue([],0);const Qb={index:0,offset:0};function Op(t,e){return Qb.index=t,Qb.offset=e,Qb}function f1(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!f1(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!f1(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let yt=class ik{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&f1(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ik.none;if(e instanceof ik)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};yt.none=[];class d1 extends Error{}class Me{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=lI(this.content,e+this.openStart,n);return r&&new Me(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Me(aI(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Me.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Me(ue.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new Me(e,r,i)}}Me.empty=new Me(ue.empty,0,0);function aI(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(aI(o.content,e-i-1,n-i-1)))}function lI(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=lI(s.content,e-o-1,n);return a&&t.replaceChild(i,s.copy(a))}function sue(t,e,n){if(n.openStart>t.depth)throw new d1("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new d1("Inconsistent open depths");return uI(t,e,n,0)}function uI(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=uI(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return vl(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=aue(n,t);return vl(o,fI(t,s,a,e,r))}else return vl(o,h1(t,e,r))}function cI(t,e){if(!e.type.compatibleContent(t.type))throw new d1("Cannot join "+e.type.name+" onto "+t.type.name)}function ok(t,e,n){let r=t.node(n);return cI(r,e.node(n)),r}function bl(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function fd(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(bl(t.nodeAfter,r),o++));for(let a=o;a<s;a++)bl(i.child(a),r);e&&e.depth==n&&e.textOffset&&bl(e.nodeBefore,r)}function vl(t,e){return t.type.checkContent(e),t.copy(e)}function fI(t,e,n,r,i){let o=t.depth>i&&ok(t,e,i+1),s=r.depth>i&&ok(n,r,i+1),a=[];return fd(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(cI(o,s),bl(vl(o,fI(t,e,n,r,i+1)),a)):(o&&bl(vl(o,h1(t,e,i+1)),a),fd(e,n,i,a),s&&bl(vl(s,h1(n,r,i+1)),a)),fd(r,null,i,a),new ue(a)}function h1(t,e,n){let r=[];if(fd(null,t,n,r),t.depth>n){let i=ok(t,e,n+1);bl(vl(i,h1(t,e,n+1)),r)}return fd(e,null,n,r),new ue(r)}function aue(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(ue.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Xd{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return yt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new p1(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),u=o-l;if(r.push(s,a,i+l),!u||(s=s.child(a),s.isText))break;o=u-1,i+=l+1}return new Xd(n,r,o)}static resolveCached(e,n){let r=__.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else __.set(e,r=new lue);let i=r.elts[r.i]=Xd.resolve(e,n);return r.i=(r.i+1)%uue,i}}class lue{constructor(){this.elts=[],this.i=0}}const uue=12,__=new WeakMap;class p1{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const cue=Object.create(null);let Vu=class sk{constructor(e,n,r,i=yt.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||ue.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&f1(this.attrs,n||e.defaultAttrs||cue)&&yt.sameSet(this.marks,r||yt.none)}copy(e=null){return e==this.content?this:new sk(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new sk(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Me.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),a=i.start(s),u=i.node(s).content.cut(i.pos-a,o.pos-a);return new Me(u,i.depth-s,o.depth-s)}replace(e,n,r){return sue(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Xd.resolveCached(this,e)}resolveNoCache(e){return Xd.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),dI(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=ue.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=yt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!yt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=ue.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Vu.prototype.text=void 0;class m1 extends Vu{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):dI(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new m1(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new m1(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function dI(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class $l{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new fue(e,n);if(r.next==null)return $l.empty;let i=hI(r);r.next&&r.err("Unexpected trailing text");let o=bue(yue(i));return vue(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return ue.from(a.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:f}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=o(f,a.concat(c));if(d)return d}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}$l.empty=new $l(!0);class fue{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function hI(t){let e=[];do e.push(due(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function due(t){let e=[];do e.push(hue(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function hue(t){let e=gue(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=pue(t,e);else break;return e}function A_(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function pue(t,e){let n=A_(t),r=n;return t.eat(",")&&(t.next!="}"?r=A_(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function mue(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function gue(t){if(t.eat("(")){let e=hI(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=mue(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function yue(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let u={term:l,to:a};return e[s].push(u),u}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,u)=>l.concat(o(u,a)),[]);if(s.type=="seq")for(let l=0;;l++){let u=o(s.exprs[l],a);if(l==s.exprs.length-1)return u;i(u,a=n())}else if(s.type=="star"){let l=n();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let u=0;u<s.min;u++){let c=n();i(o(s.expr,l),c),l=c}if(s.max==-1)i(o(s.expr,l),l);else for(let u=s.min;u<s.max;u++){let c=n();r(l,c),i(o(s.expr,l),c),l=c}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function pI(t,e){return e-t}function T_(t,e){let n=[];return r(e),n.sort(pI);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&n.indexOf(l)==-1&&r(l)}}}function bue(t){let e=Object.create(null);return n(T_(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let c=0;c<i.length;c++)i[c][0]==a&&(u=i[c][1]);T_(t,l).forEach(c=>{u||i.push([a,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new $l(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(pI);o.next.push({type:i[s][0],next:e[a.join(",")]||n(a)})}return o}}function vue(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function mI(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function gI(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function yI(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function bI(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new kue(t[n]);return e}class g1{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=bI(r.attrs),this.defaultAttrs=mI(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==$l.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:gI(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Vu(this,this.computeAttrs(e),ue.from(n),yt.setFrom(r))}createChecked(e=null,n,r){return n=ue.from(n),this.checkContent(n),new Vu(this,this.computeAttrs(e),n,yt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=ue.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(ue.empty,!0);return o?new Vu(this,e,n.append(o),yt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){yI(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:yt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new g1(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}function wue(t){let e=t.split("|");return n=>{let r=n===null?"null":typeof n;if(e.indexOf(r)<0)throw new RangeError(`Expected value of type ${e}, got ${r}`)}}class kue{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default,this.validate=typeof e.validate=="string"?wue(e.validate):e.validate}get isRequired(){return!this.hasDefault}}class gE{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=bI(i.attrs),this.excluded=null;let o=mI(this.attrs);this.instance=o?new yt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new yt(this,gI(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new gE(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){yI(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class vI{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Cn.from(e.nodes),n.marks=Cn.from(e.marks||{}),this.nodes=g1.compile(this.spec.nodes,this),this.marks=gE.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=$l.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?M_(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:M_(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof g1){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new m1(r,r.defaultAttrs,e,yt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Vu.fromJSON(this,e)}markFromJSON(e){return yt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function M_(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function xue(t){return t.tag!=null}function Eue(t){return t.style!=null}class eh{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(xue(i))this.tags.push(i);else if(Eue(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new D_(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new D_(this,n,!0);return r.addAll(e,n.from,n.to),Me.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(_ue(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=N_(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=N_(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new eh(e,eh.schemaRules(e)))}}const wI={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Sue={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},kI={ol:!0,ul:!0},y1=1,b1=2,dd=4;function O_(t,e,n){return e!=null?(e?y1:0)|(e==="full"?b1:0):t&&t.whitespace=="pre"?y1|b1:n&~dd}class Dp{constructor(e,n,r,i,o,s,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=a,this.content=[],this.activeMarks=yt.none,this.stashMarks=[],this.match=s||(a&dd?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ue.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&y1)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=ue.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(ue.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):Aue(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!wI.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class D_{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,o,s=O_(null,n.preserveWhitespace,0)|(r?dd:0);i?o=new Dp(i.type,i.attrs,yt.none,yt.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Dp(null,null,yt.none,yt.none,!0,null,s):o=new Dp(e.schema.topNodeType,null,yt.none,yt.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.style;if(!r||!r.length)return n();let i=this.readStyles(e.style);if(!i)return;let[o,s]=i,a=this.top;for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l]);n();for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&b1||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&y1)r.options&b1?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;kI.hasOwnProperty(r)&&this.parser.normalizeLists&&Cue(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(o?o.ignore:Sue.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let s,a=this.top,l=this.needsBlock;if(wI.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),s=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}o&&o.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),s&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,o,o.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=yt.none,r=yt.none;if(e.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=e.getPropertyValue(o);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(o,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(u=>{l.clearMark(u)&&(r=u.addToSet(r))}):n=this.parser.schema.marks[l.mark].create(l.attrs).addToSet(n),l.consuming===!1)a=l;else break}}return[n,r]}addElementByRule(e,n,r){let i,o,s;n.node?(o=this.parser.schema.nodes[n.node],o.isLeaf?this.insertNode(o.create(n.attrs))||this.leafFallback(e):i=this.enter(o,n.attrs||null,n.preserveWhitespace)):(s=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(s));let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,s&&this.removePendingMark(s,a)}addAll(e,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=r==null?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let o=this.nodes[i],s=o.findWrapping(e);if(s&&(!n||n.length>s.length)&&(n=s,r=o,!s.length)||o.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let s=O_(e,i,o.options);o.options&dd&&o.content.length==0&&(s|=dd),this.nodes.push(new Dp(e,n,o.activeMarks,o.pendingMarks,r,null,s)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let u=n[a];if(u==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!c||c.name!=u&&c.groups.indexOf(u)==-1)return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=Tue(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let s=i.popFromStashMark(e);s&&i.type&&i.type.allowsMarkType(s.type)&&(i.activeMarks=s.addToSet(i.activeMarks))}if(i==n)break}}}function Cue(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&kI.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function _ue(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function N_(t){let e={};for(let n in t)e[n]=t[n];return e}function Aue(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:c}=a.edge(l);if(u==e||o.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}function Tue(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class yE{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Xb(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let u=s.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(o[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let u=s.marks[l++],c=this.serializeMark(u,s.isInline,n);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=x0(Xb(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&x0(Xb(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null){return x0(e,n,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new yE(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=$_(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return $_(e.marks)}}function $_(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Xb(t){return t.document||window.document}const I_=new WeakMap;function Mue(t){let e=I_.get(t);return e===void 0&&I_.set(t,e=Oue(t)),e}function Oue(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function x0(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=Mue(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let f in u)if(u[f]!=null){let d=f.indexOf(" ");d>0?l.setAttributeNS(f.slice(0,d),f.slice(d+1),u[f]):l.setAttribute(f,u[f])}}for(let f=c;f<e.length;f++){let d=e[f];if(d===0){if(f<e.length-1||f>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:p}=x0(t,d,n,r);if(l.appendChild(h),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const xI=65535,EI=Math.pow(2,16);function Due(t,e){return t+e*EI}function R_(t){return t&xI}function Nue(t){return(t-(t&xI))/EI}const SI=1,CI=2,E0=4,_I=8;class F_{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&_I)>0}get deletedBefore(){return(this.delInfo&(SI|E0))>0}get deletedAfter(){return(this.delInfo&(CI|E0))>0}get deletedAcross(){return(this.delInfo&E0)>0}}class Fr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Fr.empty)return Fr.empty}recover(e){let n=0,r=R_(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Nue(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[a+o],c=this.ranges[a+s],f=l+u;if(e<=f){let d=u?e==l?-1:e==f?1:n:n,h=l+i+(d<0?0:c);if(r)return h;let p=e==(n<0?l:f)?null:Due(a/3,e-l),m=e==l?CI:e==f?SI:E0;return(n<0?e!=l:e!=f)&&(m|=_I),new F_(h,m,p)}i+=c-u}return r?e+i:new F_(e+i,0,null)}touches(e,n){let r=0,i=R_(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let u=this.ranges[a+o],c=l+u;if(e<=c&&a==i*3)return!0;r+=this.ranges[a+s]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),u=this.ranges[i+n],c=this.ranges[i+r];e(a,a+u,l,l+c),o+=c-u}}invert(){return new Fr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Fr.empty:new Fr(e<0?[0,-e,0]:[0,0,e])}}Fr.empty=new Fr([]);const e2=Object.create(null);class Kn{getMap(){return Fr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=e2[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in e2)throw new RangeError("Duplicate use of step JSON ID "+e);return e2[e]=n,n.prototype.jsonID=e,n}}class Gt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Gt(e,null)}static fail(e){return new Gt(null,e)}static fromReplace(e,n,r,i){try{return Gt.ok(e.replace(n,r,i))}catch(o){if(o instanceof d1)return Gt.fail(o.message);throw o}}}function bE(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(bE(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return ue.fromArray(r)}class tl extends Kn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new Me(bE(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Gt.fromReplace(e,this.from,this.to,o)}invert(){return new nl(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new tl(n.pos,r.pos,this.mark)}merge(e){return e instanceof tl&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new tl(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new tl(n.from,n.to,e.markFromJSON(n.mark))}}Kn.jsonID("addMark",tl);class nl extends Kn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Me(bE(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Gt.fromReplace(e,this.from,this.to,r)}invert(){return new tl(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new nl(n.pos,r.pos,this.mark)}merge(e){return e instanceof nl&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new nl(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new nl(n.from,n.to,e.markFromJSON(n.mark))}}Kn.jsonID("removeMark",nl);class rl extends Kn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Gt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Gt.fromReplace(e,this.pos,this.pos+1,new Me(ue.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new rl(this.pos,n.marks[i]);return new rl(this.pos,this.mark)}}return new th(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new rl(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new rl(n.pos,e.markFromJSON(n.mark))}}Kn.jsonID("addNodeMark",rl);class th extends Kn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Gt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Gt.fromReplace(e,this.pos,this.pos+1,new Me(ue.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new rl(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new th(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new th(n.pos,e.markFromJSON(n.mark))}}Kn.jsonID("removeNodeMark",th);class Rr extends Kn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&ak(e,this.from,this.to)?Gt.fail("Structure replace would overwrite content"):Gt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Fr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Rr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Rr(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Rr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Me.empty:new Me(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Rr(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Me.empty:new Me(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Rr(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Rr(n.from,n.to,Me.fromJSON(e,n.slice),!!n.structure)}}Kn.jsonID("replace",Rr);class Cr extends Kn{constructor(e,n,r,i,o,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(ak(e,this.from,this.gapFrom)||ak(e,this.gapTo,this.to)))return Gt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Gt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Gt.fromReplace(e,this.from,this.to,r):Gt.fail("Content does not fit in gap")}getMap(){return new Fr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Cr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Cr(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Cr(n.from,n.to,n.gapFrom,n.gapTo,Me.fromJSON(e,n.slice),n.insert,!!n.structure)}}Kn.jsonID("replaceAround",Cr);function ak(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function $ue(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function qc(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!$ue(i,o,s))break}return null}function AI(t,e,n=null,r=t){let i=Iue(t,e),o=i&&Rue(r,e);return o?i.map(L_).concat({type:e,attrs:n}).concat(o.map(L_)):null}function L_(t){return{type:t,attrs:null}}function Iue(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function Rue(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:s}function Uu(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>o;u--,c--){let f=i.node(u),d=i.index(u);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),p=r&&r[c+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[c]||f;if(!f.canReplace(d+1,f.childCount)||!m.type.validContent(h))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function Bl(t,e){let n=t.resolve(e),r=n.index();return TI(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function TI(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function Hg(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&TI(o,s)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function vE(t,e,n=e,r=Me.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return Fue(i,o,r)?new Rr(e,n,r):new Lue(i,o,r).fit()}function Fue(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Lue{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ue.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=ue.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new Me(o,s,a);return e>-1?new Cr(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Rr(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=t2(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],c,f=null;if(n==1&&(s?u.matchType(s.type)||(f=u.fillBefore(ue.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:f};if(n==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=t2(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Me(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=t2(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new Me(Bf(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new Me(Bf(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));f=f.matchFragment(i)}let h=a.size+e-(s.content.size-s.openEnd);for(;u<a.childCount;){let m=a.child(u),b=f.matchType(m.type);if(!b)break;u++,(u>1||l==0||m.content.size)&&(f=b,c.push(MI(m.mark(d.allowedMarks(m.marks)),u==1?l:0,u==a.childCount?h:-1)))}let p=u==a.childCount;p||(h=-1),this.placed=Pf(this.placed,n,ue.from(c)),this.frontier[n].match=f,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,b=a;m<h;m++){let y=b.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),b=y.content}this.unplaced=p?e==0?Me.empty:new Me(Bf(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new Me(Bf(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!n2(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=n2(e,n,i,r,o);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],c=n2(e,a,u,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Pf(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Pf(this.placed,this.depth,ue.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ue.empty,!0);n.childCount&&(this.placed=Pf(this.placed,this.frontier.length,n))}}function Bf(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Bf(t.firstChild.content,e-1,n)))}function Pf(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Pf(t.lastChild.content,e-1,n)))}function t2(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function MI(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,MI(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(ue.empty,!0)))),t.copy(r)}function n2(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!Bue(n,o.content,s)?a:null}function Bue(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}class hd extends Kn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Gt.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Gt.fromReplace(e,this.pos,this.pos+1,new Me(ue.from(i),0,n.isLeaf?0:1))}getMap(){return Fr.empty}invert(e){return new hd(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new hd(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new hd(n.pos,n.attr,n.value)}}Kn.jsonID("attr",hd);class v1 extends Kn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Gt.ok(r)}getMap(){return Fr.empty}invert(e){return new v1(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new v1(n.attr,n.value)}}Kn.jsonID("docAttr",v1);let nh=class extends Error{};nh=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};nh.prototype=Object.create(Error.prototype);nh.prototype.constructor=nh;nh.prototype.name="TransformError";const r2=Object.create(null);class pt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Pue(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Me.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:u}=s[a],c=e.mapping.slice(o);e.replaceRange(c.map(l.pos),c.map(u.pos),a?Me.empty:n),a==0&&z_(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=e.mapping.slice(r),u=l.map(s.pos),c=l.map(a.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),z_(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Mt(e):hu(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?hu(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):hu(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new yo(e.node(0))}static atStart(e){return hu(e,e,0,0,1)||new yo(e)}static atEnd(e){return hu(e,e,e.content.size,e.childCount,-1)||new yo(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=r2[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in r2)throw new RangeError("Duplicate use of selection JSON ID "+e);return r2[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Mt.between(this.$anchor,this.$head).getBookmark()}}pt.prototype.visible=!0;class Pue{constructor(e,n){this.$from=e,this.$to=n}}let B_=!1;function P_(t){!B_&&!t.parent.inlineContent&&(B_=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Mt extends pt{constructor(e,n=e){P_(e),P_(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return pt.near(r);let i=e.resolve(n.map(this.anchor));return new Mt(i.parent.inlineContent?i:r,r)}replace(e,n=Me.empty){if(super.replace(e,n),n==Me.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Mt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Wg(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Mt(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=pt.findFrom(n,r,!0)||pt.findFrom(n,-r,!0);if(o)n=o.$head;else return pt.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(pt.findFrom(e,-r,!0)||pt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Mt(e,n)}}pt.jsonID("text",Mt);class Wg{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Wg(e.map(this.anchor),e.map(this.head))}resolve(e){return Mt.between(e.resolve(this.anchor),e.resolve(this.head))}}class St extends pt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?pt.near(o):new St(o)}content(){return new Me(ue.from(this.node),0,0)}eq(e){return e instanceof St&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new wE(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new St(e.resolve(n.anchor))}static create(e,n){return new St(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}St.prototype.visible=!1;pt.jsonID("node",St);class wE{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Wg(r,r):new wE(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&St.isSelectable(r)?new St(n):pt.near(n)}}class yo extends pt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Me.empty){if(n==Me.empty){e.delete(0,e.doc.content.size);let r=pt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new yo(e)}map(e){return new yo(e)}eq(e){return e instanceof yo}getBookmark(){return zue}}pt.jsonID("all",yo);const zue={map(){return this},resolve(t){return new yo(t)}};function hu(t,e,n,r,i,o=!1){if(e.inlineContent)return Mt.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&St.isSelectable(a))return St.create(t,n-(i<0?a.nodeSize:0))}else{let l=hu(t,a,n+i,i<0?a.childCount:0,i,o);if(l)return l}n+=a.nodeSize*i}return null}function z_(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Rr||i instanceof Cr))return;let o=t.mapping.maps[r],s;o.forEach((a,l,u,c)=>{s==null&&(s=c)}),t.setSelection(pt.near(t.doc.resolve(s),n))}function j_(t,e){return!e||!t?t:t.bind(e)}class Np{constructor(e,n,r){this.name=e,this.init=j_(n.init,r),this.apply=j_(n.apply,r)}}new Np("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Np("selection",{init(t,e){return t.selection||pt.atStart(e.doc)},apply(t){return t.selection}}),new Np("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Np("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}});function OI(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=OI(i,e,{})),n[r]=i}return n}class Vc{constructor(e){this.spec=e,this.props={},e.props&&OI(e.props,this,this.props),this.key=e.key?e.key.key:DI("plugin")}getState(e){return e[this.key]}}const i2=Object.create(null);function DI(t){return t in i2?t+"$"+ ++i2[t]:(i2[t]=0,t+"$")}class Uc{constructor(e="key"){this.key=DI(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const jue=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function NI(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const que=(t,e,n)=>{let r=NI(t,n);if(!r)return!1;let i=kE(r);if(!i){let s=r.blockRange(),a=s&&qc(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&FI(t,i,e))return!0;if(r.parent.content.size==0&&(Sc(o,"end")||St.isSelectable(o))){let s=vE(t.doc,r.before(),r.after(),Me.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(Sc(o,"end")?pt.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):St.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},Vue=(t,e,n)=>{let r=NI(t,n);if(!r)return!1;let i=kE(r);return i?$I(t,i,e):!1},Uue=(t,e,n)=>{let r=II(t,n);if(!r)return!1;let i=xE(r);return i?$I(t,i,e):!1};function $I(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let u=vE(t.doc,o,l,Me.empty);if(!u||u.from!=o||u instanceof Rr&&u.slice.size>=l-o)return!1;if(n){let c=t.tr.step(u);c.setSelection(Mt.create(c.doc,o)),n(c.scrollIntoView())}return!0}function Sc(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Hue=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=kE(r)}let s=o&&o.nodeBefore;return!s||!St.isSelectable(s)?!1:(e&&e(t.tr.setSelection(St.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function kE(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function II(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Wue=(t,e,n)=>{let r=II(t,n);if(!r)return!1;let i=xE(r);if(!i)return!1;let o=i.nodeAfter;if(FI(t,i,e))return!0;if(r.parent.content.size==0&&(Sc(o,"start")||St.isSelectable(o))){let s=vE(t.doc,r.before(),r.after(),Me.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(Sc(o,"start")?pt.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):St.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},Jue=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=xE(r)}let s=o&&o.nodeAfter;return!s||!St.isSelectable(s)?!1:(e&&e(t.tr.setSelection(St.create(t.doc,o.pos)).scrollIntoView()),!0)};function xE(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Kue=(t,e)=>{let n=t.selection,r=n instanceof St,i;if(r){if(n.node.isTextblock||!Bl(t.doc,n.from))return!1;i=n.from}else if(i=Hg(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(St.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Zue=(t,e)=>{let n=t.selection,r;if(n instanceof St){if(n.node.isTextblock||!Bl(t.doc,n.to))return!1;r=n.to}else if(r=Hg(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Gue=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&qc(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},Yue=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function RI(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Que=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=RI(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(pt.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Xue=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof yo||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=RI(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(Mt.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},ece=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Uu(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&qc(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},tce=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(St.create(t.doc,i))),!0)};function nce(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Bl(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function FI(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(nce(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(n){let f=e.pos+i.nodeSize,d=ue.empty;for(let m=o.length-1;m>=0;m--)d=ue.from(o[m].create(null,d));d=ue.from(r.copy(d));let h=t.tr.step(new Cr(e.pos-1,f,e.pos,f,new Me(d,1,0),o.length,!0)),p=f+2*o.length;Bl(h.doc,p)&&h.join(p),n(h.scrollIntoView())}return!0}let l=pt.findFrom(e,1),u=l&&l.$from.blockRange(l.$to),c=u&&qc(u);if(c!=null&&c>=e.depth)return n&&n(t.tr.lift(u,c).scrollIntoView()),!0;if(a&&Sc(i,"start",!0)&&Sc(r,"end")){let f=r,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(f.canReplace(f.childCount,f.childCount,h.content)){if(n){let m=ue.empty;for(let y=d.length-1;y>=0;y--)m=ue.from(d[y].copy(m));let b=t.tr.step(new Cr(e.pos-d.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new Me(m,d.length,0),0,!0));n(b.scrollIntoView())}return!0}}return!1}function LI(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(Mt.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const rce=LI(-1),ice=LI(1);function oce(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&AI(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function q_(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(s,a,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let c=n.doc.resolve(u),f=c.index();i=c.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];o.setBlockType(a,l,t,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function sce(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(t)&&s.startIndex==0){if(i.index(s.depth-1)==0)return!1;let c=n.doc.resolve(s.start-2);l=new p1(c,c,s.depth),s.endIndex<s.parent.childCount&&(s=new p1(i,n.doc.resolve(o.end(s.depth)),s.depth)),a=!0}let u=AI(l,t,e,s);return u?(r&&r(ace(n.tr,s,u,a,t).scrollIntoView()),!0):!1}}function ace(t,e,n,r,i){let o=ue.empty;for(let c=n.length-1;c>=0;c--)o=ue.from(n[c].type.create(n[c].attrs,o));t.step(new Cr(e.start-(r?2:0),e.end,e.start,e.end,new Me(o,0,0),n.length,!0));let s=0;for(let c=0;c<n.length;c++)n[c].type==i&&(s=c+1);let a=n.length-s,l=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,f=e.endIndex,d=!0;c<f;c++,d=!1)!d&&Uu(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=u.child(c).nodeSize;return t}function lce(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?uce(e,n,t,o):cce(e,n,o):!0:!1}}function uce(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Cr(o-1,s,o,s,new Me(ue.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new p1(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=qc(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(o,-1)-1;return Bl(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function cce(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(a?0:1),c+1,s.content.append(l?ue.empty:ue.from(i))))return!1;let f=o.pos,d=f+s.nodeSize;return r.step(new Cr(f-(a?1:0),d+(l?1:0),f+1,d-1,new Me((a?ue.empty:ue.from(i.copy(ue.empty))).append(l?ue.empty:ue.from(i.copy(ue.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function fce(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let u=l.lastChild&&l.lastChild.type==a.type,c=ue.from(u?t.create():null),f=new Me(ue.from(t.create(null,ue.from(a.type.create(null,c)))),u?3:1,0),d=o.start,h=o.end;n(e.tr.step(new Cr(d-(u?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}function BI(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class dce{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>{const f=l(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a=[],l=!!e,u=e||o.tr,c=()=>(!l&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),a.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...m)=>{const b=this.buildProps(u,n),y=h(...m)(b);return a.push(y),f}])),run:c};return f}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...c)=>u(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a={tr:e,editor:i,view:s,state:BI({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,u])=>[l,(...c)=>u(...c)(a)]))}};return a}}function rr(t,e,n){return t.config[e]===void 0&&t.parent?rr(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?rr(t.parent,e,n):null}):t.config[e]}function hce(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Hn(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function pce(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const a=o?o.split(" "):[],l=r[i]?r[i].split(" "):[],u=a.filter(c=>!l.includes(c));r[i]=[...l,...u].join(" ")}else i==="style"?r[i]=[r[i],o].join("; "):r[i]=o}),r},{})}function mce(t){return typeof t=="function"}function Pr(t,e=void 0,...n){return mce(t)?e?t.bind(e)(...n):t(...n):t}function gce(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function yce(t){return Object.prototype.toString.call(t).slice(8,-1)}function $p(t){return yce(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Jg(t,e){const n={...t};return $p(t)&&$p(e)&&Object.keys(e).forEach(r=>{$p(e[r])&&$p(t[r])?n[r]=Jg(t[r],e[r]):n[r]=e[r]}),n}class yi{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Pr(rr(this,"addOptions",{name:this.name}))),this.storage=Pr(rr(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new yi(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Jg(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new yi({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Pr(rr(n,"addOptions",{name:n.name})),n.storage=Pr(rr(n,"addStorage",{name:n.name,options:n.options})),n}}function bce(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let a="";return t.nodesBetween(r,i,(l,u,c,f)=>{var d;l.isBlock&&u>r&&(a+=o);const h=s==null?void 0:s[l.type.name];if(h)return c&&(a+=h({node:l,pos:u,parent:c,index:f,range:e})),!1;l.isText&&(a+=(d=l==null?void 0:l.text)===null||d===void 0?void 0:d.slice(Math.max(r,u)-u,i-u))}),a}function vce(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const wce=yi.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Vc({key:new Uc("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(c=>c.$from.pos)),a=Math.max(...o.map(c=>c.$to.pos)),l=vce(n);return bce(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),kce=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),xce=(t=!1)=>({commands:e})=>e.setContent("",t),Ece=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:c}=e,f=u.resolve(c.map(l)),d=u.resolve(c.map(l+a.nodeSize)),h=f.blockRange(d);if(!h)return;const p=qc(h);if(a.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},Sce=t=>e=>t(e),Cce=()=>({state:t,dispatch:e})=>Xue(t,e),_ce=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new Mt(r.doc.resolve(s-1))),!0},Ace=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const a=i.before(o),l=i.after(o);t.delete(a,l).scrollIntoView()}return!0}return!1},Tce=t=>({tr:e,state:n,dispatch:r})=>{const i=Hn(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const l=o.before(s),u=o.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},Mce=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},Oce=()=>({state:t,dispatch:e})=>jue(t,e),Dce=()=>({commands:t})=>t.keyboardShortcut("Enter"),Nce=()=>({state:t,dispatch:e})=>Que(t,e);function w1(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:gce(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function lk(t,e,n={}){return t.find(r=>r.type===e&&w1(r.attrs,n))}function $ce(t,e,n={}){return!!lk(t,e,n)}function PI(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=lk([...r.node.marks],e,n);if(!i)return;let o=r.index,s=t.start()+r.offset,a=o+1,l=s+r.node.nodeSize;for(lk([...r.node.marks],e,n);o>0&&i.isInSet(t.parent.child(o-1).marks);)o-=1,s-=t.parent.child(o).nodeSize;for(;a<t.parent.childCount&&$ce([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function Da(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const Ice=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Da(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:u,to:c}=a;if(i){const f=PI(l,o,e);if(f&&f.from<=u&&f.to>=c){const d=Mt.create(s,f.from,f.to);n.setSelection(d)}}return!0},Rce=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function zI(t){return t instanceof Mt}function il(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Fce(t,e=null){if(!e)return null;const n=pt.atStart(t),r=pt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?Mt.create(t,il(0,i,o),il(t.content.size,i,o)):Mt.create(t,il(e,i,o),il(e,i,o))}function EE(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Lce=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{EE()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!zI(n.state.selection))return s(),!0;const a=Fce(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},Bce=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),Pce=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),jI=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&jI(r)}return t};function V_(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return jI(n)}function k1(t,e,n){n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{return Array.isArray(t)&&t.length>0?ue.fromArray(t.map(s=>e.nodeFromJSON(s))):e.nodeFromJSON(t)}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),k1("",e,n)}if(i){let o=e,s=!1,a="";n.errorOnInvalidContent&&(o=new vI({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})}));const l=eh.fromSchema(o),u=n.slice?l.parseSlice(V_(t),n.parseOptions).content:l.parse(V_(t),n.parseOptions);if(n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)});return u}return k1("",e,n)}function zce(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Rr||i instanceof Cr))return;const o=t.mapping.maps[r];let s=0;o.forEach((a,l,u,c)=>{s===0&&(s=c)}),t.setSelection(pt.near(t.doc.resolve(s),n))}const jce=t=>!("type"in t),qce=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=k1(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch{return!1}let{from:l,to:u}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,f=!0;if((jce(a)?a:[a]).forEach(p=>{p.check(),c=c?p.isText&&p.marks.length===0:!1,f=f?p.isBlock:!1}),l===u&&f){const{parent:p}=r.doc.resolve(l);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(l-=1,u+=1)}let h;c?(Array.isArray(e)?h=e.map(p=>p.text||"").join(""):typeof e=="object"&&e&&e.text?h=e.text:h=e,r.insertText(h,l,u)):(h=a,r.replaceWith(l,u,h)),n.updateSelection&&zce(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:h}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:h})}return!0},Vce=()=>({state:t,dispatch:e})=>Kue(t,e),Uce=()=>({state:t,dispatch:e})=>Zue(t,e),Hce=()=>({state:t,dispatch:e})=>que(t,e),Wce=()=>({state:t,dispatch:e})=>Wue(t,e),Jce=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Hg(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Kce=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Hg(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Zce=()=>({state:t,dispatch:e})=>Vue(t,e),Gce=()=>({state:t,dispatch:e})=>Uue(t,e);function qI(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Yce(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))EE()||qI()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const Qce=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=Yce(t).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,a))});return l==null||l.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function SE(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?Hn(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(f,d)=>{if(f.isText)return;const h=Math.max(r,d),p=Math.min(i,d+f.nodeSize);a.push({node:f,from:h,to:p})});const l=i-r,u=a.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>w1(f.node.attrs,n,{strict:!1}));return o?!!u.length:u.reduce((f,d)=>f+d.to-d.from,0)>=l}const Xce=(t,e={})=>({state:n,dispatch:r})=>{const i=Hn(t,n.schema);return SE(n,i,e)?Gue(n,r):!1},efe=()=>({state:t,dispatch:e})=>ece(t,e),tfe=t=>({state:e,dispatch:n})=>{const r=Hn(t,e.schema);return lce(r)(e,n)},nfe=()=>({state:t,dispatch:e})=>Yue(t,e);function VI(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function U_(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const rfe=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=VI(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Hn(t,r.schema)),a==="mark"&&(s=Da(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,c)=>{o&&o===u.type&&n.setNodeMarkup(c,void 0,U_(u.attrs,e)),s&&u.marks.length&&u.marks.forEach(f=>{s===f.type&&n.addMark(c,c+u.nodeSize,s.create(U_(f.attrs,e)))})})}),!0):!1},ife=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),ofe=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),sfe=()=>({state:t,dispatch:e})=>Hue(t,e),afe=()=>({state:t,dispatch:e})=>Jue(t,e),lfe=()=>({state:t,dispatch:e})=>tce(t,e),ufe=()=>({state:t,dispatch:e})=>ice(t,e),cfe=()=>({state:t,dispatch:e})=>rce(t,e);function ffe(t,e,n={},r={}){return k1(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const dfe=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:a})=>{var l,u;const{doc:c}=o;if(n.preserveWhitespace!=="full"){const f=ffe(t,i.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return s&&o.replaceWith(0,c.content.size,f).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:c.content.size},t,{parseOptions:n,errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:i.options.enableContentCheck})};function hfe(t,e){const n=Da(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function pfe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function mfe(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function CE(t){return e=>mfe(e.$from,t)}function UI(t,e){const n=yE.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function S0(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function gfe(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Da(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>w1(f.attrs,n,{strict:!1}));let s=0;const a=[];if(i.forEach(({$from:f,$to:d})=>{const h=f.pos,p=d.pos;t.doc.nodesBetween(h,p,(m,b)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,b),v=Math.min(p,b+m.nodeSize),w=v-y;s+=w,a.push(...m.marks.map(g=>({mark:g,from:y,to:v})))})}),s===0)return!1;const l=a.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>w1(f.mark.attrs,n,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),u=a.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,d)=>f+d.to-d.from,0);return(l>0?l+u:l)>=s}function H_(t,e){const{nodeExtensions:n}=hce(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Pr(rr(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function yfe(t,e,n){var r;const{selection:i}=e;let o=null;if(zI(i)&&(o=i.$cursor),o){const a=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:a,$to:l})=>{let u=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(c,f,d)=>{if(u)return!1;if(c.isInline){const h=!d||d.type.allowsMarkType(n),p=!!n.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(n));u=h&&p}return!u}),u})}const bfe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,l=Da(t,r.schema);if(i)if(s){const u=hfe(r,l);n.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const c=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(c,f,(d,h)=>{const p=Math.max(h,c),m=Math.min(h+d.nodeSize,f);d.marks.find(y=>y.type===l)?d.marks.forEach(y=>{l===y.type&&n.addMark(p,m,l.create({...y.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return yfe(r,n,l)},vfe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),wfe=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Hn(t,n.schema);return o.isTextblock?i().command(({commands:s})=>q_(o,e)(n)?!0:s.clearNodes()).command(({state:s})=>q_(o,e)(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},kfe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=il(t,0,r.content.size),o=St.create(r,i);e.setSelection(o)}return!0},xfe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=Mt.atStart(r).from,a=Mt.atEnd(r).to,l=il(i,s,a),u=il(o,s,a),c=Mt.create(r,l,u);e.setSelection(c)}return!0},Efe=t=>({state:e,dispatch:n})=>{const r=Hn(t,e.schema);return fce(r)(e,n)};function W_(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const Sfe=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:a,$to:l}=o,u=i.extensionManager.attributes,c=S0(u,a.node().type.name,a.node().attrs);if(o instanceof St&&o.node.isBlock)return!a.parentOffset||!Uu(s,a.pos)?!1:(r&&(t&&W_(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const f=l.parentOffset===l.parent.content.size;o instanceof Mt&&e.deleteSelection();const d=a.depth===0?void 0:pfe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=f&&d?[{type:d,attrs:c}]:void 0,p=Uu(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&Uu(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,h=d?[{type:d,attrs:c}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),d&&!f&&!a.parentOffset&&a.parent.type!==d)){const m=e.mapping.map(a.before()),b=e.doc.resolve(m);a.node(-1).canReplaceWith(b.index(),b.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}t&&W_(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},Cfe=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var o;const s=Hn(t,n.schema),{$from:a,$to:l}=n.selection,u=n.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(l))return!1;const c=a.node(-1);if(c.type!==s)return!1;const f=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==s||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let b=ue.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let E=a.depth-y;E>=a.depth-3;E-=1)b=ue.from(a.node(E).copy(b));const v=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,w=S0(f,a.node().type.name,a.node().attrs),g=((o=s.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(w))||void 0;b=b.append(ue.from(s.createAndFill(null,g)||void 0));const x=a.before(a.depth-(y-1));e.replace(x,a.after(-v),new Me(b,4-y,0));let k=-1;e.doc.nodesBetween(x,e.doc.content.size,(E,D)=>{if(k>-1)return!1;E.isTextblock&&E.content.size===0&&(k=D+1)}),k>-1&&e.setSelection(Mt.near(e.doc.resolve(k))),e.scrollIntoView()}return!0}const d=l.pos===a.end()?c.contentMatchAt(0).defaultType:null,h=S0(f,c.type.name,c.attrs),p=S0(f,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=d?[{type:s,attrs:h},{type:d,attrs:p}]:[{type:s,attrs:h}];if(!Uu(e.doc,a.pos,2))return!1;if(r){const{selection:b,storedMarks:y}=n,{splittableMarks:v}=i.extensionManager,w=y||b.$to.parentOffset&&b.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!w||!r)return!0;const g=w.filter(x=>v.includes(x.type.name));e.ensureMarks(g)}return!0},o2=(t,e)=>{const n=CE(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Bl(t.doc,n.pos)&&t.join(n.pos),!0},s2=(t,e)=>{const n=CE(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Bl(t.doc,r)&&t.join(r),!0},_fe=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:u,can:c})=>{const{extensions:f,splittableMarks:d}=i.extensionManager,h=Hn(t,s.schema),p=Hn(e,s.schema),{selection:m,storedMarks:b}=s,{$from:y,$to:v}=m,w=y.blockRange(v),g=b||m.$to.parentOffset&&m.$from.marks();if(!w)return!1;const x=CE(k=>H_(k.type.name,f))(m);if(w.depth>=1&&x&&w.depth-x.depth<=1){if(x.node.type===h)return u.liftListItem(p);if(H_(x.node.type.name,f)&&h.validContent(x.node.content)&&a)return l().command(()=>(o.setNodeMarkup(x.pos,h),!0)).command(()=>o2(o,h)).command(()=>s2(o,h)).run()}return!n||!g||!a?l().command(()=>c().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>o2(o,h)).command(()=>s2(o,h)).run():l().command(()=>{const k=c().wrapInList(h,r),E=g.filter(D=>d.includes(D.type.name));return o.ensureMarks(E),k?!0:u.clearNodes()}).wrapInList(h,r).command(()=>o2(o,h)).command(()=>s2(o,h)).run()},Afe=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Da(t,r.schema);return gfe(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},Tfe=(t,e,n={})=>({state:r,commands:i})=>{const o=Hn(t,r.schema),s=Hn(e,r.schema);return SE(r,o,n)?i.setNode(s):i.setNode(o,n)},Mfe=(t,e={})=>({state:n,commands:r})=>{const i=Hn(t,n.schema);return SE(n,i,e)?r.lift(i):r.wrapIn(i,e)},Ofe=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,l))}else s.delete(o.from,o.to)}return!0}}return!1},Dfe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},Nfe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=Da(t,r.schema),{$from:u,empty:c,ranges:f}=a;if(!i)return!0;if(c&&s){let{from:d,to:h}=a;const p=(o=u.marks().find(b=>b.type===l))===null||o===void 0?void 0:o.attrs,m=PI(u,l,p);m&&(d=m.from,h=m.to),n.removeMark(d,h,l)}else f.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,l)});return n.removeStoredMark(l),!0},$fe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=VI(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Hn(t,r.schema)),a==="mark"&&(s=Da(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const u=l.$from.pos,c=l.$to.pos;r.doc.nodesBetween(u,c,(f,d)=>{o&&o===f.type&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),s&&f.marks.length&&f.marks.forEach(h=>{if(s===h.type){const p=Math.max(d,u),m=Math.min(d+f.nodeSize,c);n.addMark(p,m,s.create({...h.attrs,...e}))}})})}),!0):!1},Ife=(t,e={})=>({state:n,dispatch:r})=>{const i=Hn(t,n.schema);return oce(i,e)(n,r)},Rfe=(t,e={})=>({state:n,dispatch:r})=>{const i=Hn(t,n.schema);return sce(i,e)(n,r)};var Ffe=Object.freeze({__proto__:null,blur:kce,clearContent:xce,clearNodes:Ece,command:Sce,createParagraphNear:Cce,cut:_ce,deleteCurrentNode:Ace,deleteNode:Tce,deleteRange:Mce,deleteSelection:Oce,enter:Dce,exitCode:Nce,extendMarkRange:Ice,first:Rce,focus:Lce,forEach:Bce,insertContent:Pce,insertContentAt:qce,joinBackward:Hce,joinDown:Uce,joinForward:Wce,joinItemBackward:Jce,joinItemForward:Kce,joinTextblockBackward:Zce,joinTextblockForward:Gce,joinUp:Vce,keyboardShortcut:Qce,lift:Xce,liftEmptyBlock:efe,liftListItem:tfe,newlineInCode:nfe,resetAttributes:rfe,scrollIntoView:ife,selectAll:ofe,selectNodeBackward:sfe,selectNodeForward:afe,selectParentNode:lfe,selectTextblockEnd:ufe,selectTextblockStart:cfe,setContent:dfe,setMark:bfe,setMeta:vfe,setNode:wfe,setNodeSelection:kfe,setTextSelection:xfe,sinkListItem:Efe,splitBlock:Sfe,splitListItem:Cfe,toggleList:_fe,toggleMark:Afe,toggleNode:Tfe,toggleWrap:Mfe,undoInputRule:Ofe,unsetAllMarks:Dfe,unsetMark:Nfe,updateAttributes:$fe,wrapIn:Ife,wrapInList:Rfe});const Lfe=yi.create({name:"commands",addCommands(){return{...Ffe}}}),Bfe=yi.create({name:"editable",addProseMirrorPlugins(){return[new Vc({key:new Uc("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Pfe=yi.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Vc({key:new Uc("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),zfe=yi.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:c,$anchor:f}=l,{pos:d,parent:h}=f,p=f.parent.isTextblock&&d>0?a.doc.resolve(d-1):f,m=p.parent.type.spec.isolating,b=f.pos-f.parentOffset,y=m&&p.parent.childCount===1?b===f.pos:pt.atStart(u).from===d;return!c||!h.type.isTextblock||h.textContent.length||!y||y&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return EE()||qI()?o:i},addProseMirrorPlugins(){return[new Vc({key:new Uc("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:o,to:s}=e.selection,a=pt.atStart(e.doc).from,l=pt.atEnd(e.doc).to;if(i||!(o===a&&s===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const f=n.tr,d=BI({state:n,transaction:f}),{commands:h}=new dce({editor:this.editor,state:d});if(h.clearNodes(),!!f.steps.length)return f}})]}}),jfe=yi.create({name:"tabindex",addProseMirrorPlugins(){return[new Vc({key:new Uc("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var qfe=Object.freeze({__proto__:null,ClipboardTextSerializer:wce,Commands:Lfe,Editable:Bfe,FocusEvents:Pfe,Keymap:zfe,Tabindex:jfe});class Xo{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Pr(rr(this,"addOptions",{name:this.name}))),this.storage=Pr(rr(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Xo(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Jg(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Xo(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Pr(rr(n,"addOptions",{name:n.name})),n.storage=Pr(rr(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const l=s.find(u=>(u==null?void 0:u.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}let bn=class uk{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Pr(rr(this,"addOptions",{name:this.name}))),this.storage=Pr(rr(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new uk(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Jg(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new uk(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Pr(rr(n,"addOptions",{name:n.name})),n.storage=Pr(rr(n,"addStorage",{name:n.name,options:n.options})),n}};const J_={};function Vfe(t){let e=J_[t];if(e)return e;e=J_[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);e.push(r)}for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function Cc(t,e){typeof e!="string"&&(e=Cc.defaultChars);const n=Vfe(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let o=0,s=r.length;o<s;o+=3){const a=parseInt(r.slice(o+1,o+3),16);if(a<128){i+=n[a];continue}if((a&224)===192&&o+3<s){const l=parseInt(r.slice(o+4,o+6),16);if((l&192)===128){const u=a<<6&1984|l&63;u<128?i+="":i+=String.fromCharCode(u),o+=3;continue}}if((a&240)===224&&o+6<s){const l=parseInt(r.slice(o+4,o+6),16),u=parseInt(r.slice(o+7,o+9),16);if((l&192)===128&&(u&192)===128){const c=a<<12&61440|l<<6&4032|u&63;c<2048||c>=55296&&c<=57343?i+="":i+=String.fromCharCode(c),o+=6;continue}}if((a&248)===240&&o+9<s){const l=parseInt(r.slice(o+4,o+6),16),u=parseInt(r.slice(o+7,o+9),16),c=parseInt(r.slice(o+10,o+12),16);if((l&192)===128&&(u&192)===128&&(c&192)===128){let f=a<<18&1835008|l<<12&258048|u<<6&4032|c&63;f<65536||f>1114111?i+="":(f-=65536,i+=String.fromCharCode(55296+(f>>10),56320+(f&1023))),o+=9;continue}}i+=""}return i})}Cc.defaultChars=";/?:@&=+$,#";Cc.componentChars="";const K_={};function Ufe(t){let e=K_[t];if(e)return e;e=K_[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<t.length;n++)e[t.charCodeAt(n)]=t[n];return e}function Dh(t,e,n){typeof e!="string"&&(n=e,e=Dh.defaultChars),typeof n>"u"&&(n=!0);const r=Ufe(e);let i="";for(let o=0,s=t.length;o<s;o++){const a=t.charCodeAt(o);if(n&&a===37&&o+2<s&&/^[0-9a-f]{2}$/i.test(t.slice(o+1,o+3))){i+=t.slice(o,o+3),o+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s){const l=t.charCodeAt(o+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(t[o]+t[o+1]),o++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(t[o])}return i}Dh.defaultChars=";/?:@&=+$,-_.!~*'()#";Dh.componentChars="-_.!~*'()";function _E(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function x1(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const Hfe=/^([a-z0-9.+-]+:)/i,Wfe=/:[0-9]*$/,Jfe=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Kfe=["<",">",'"',"`"," ","\r",`
`,"	"],Zfe=["{","}","|","\\","^","`"].concat(Kfe),Gfe=["'"].concat(Zfe),Z_=["%","/","?",";","#"].concat(Gfe),G_=["/","?","#"],Yfe=255,Y_=/^[+a-z0-9A-Z_-]{0,63}$/,Qfe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Q_={javascript:!0,"javascript:":!0},X_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function AE(t,e){if(t&&t instanceof x1)return t;const n=new x1;return n.parse(t,e),n}x1.prototype.parse=function(t,e){let n,r,i,o=t;if(o=o.trim(),!e&&t.split("#").length===1){const u=Jfe.exec(o);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=Hfe.exec(o);if(s&&(s=s[0],n=s.toLowerCase(),this.protocol=s,o=o.substr(s.length)),(e||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=o.substr(0,2)==="//",i&&!(s&&Q_[s])&&(o=o.substr(2),this.slashes=!0)),!Q_[s]&&(i||s&&!X_[s])){let u=-1;for(let p=0;p<G_.length;p++)r=o.indexOf(G_[p]),r!==-1&&(u===-1||r<u)&&(u=r);let c,f;u===-1?f=o.lastIndexOf("@"):f=o.lastIndexOf("@",u),f!==-1&&(c=o.slice(0,f),o=o.slice(f+1),this.auth=c),u=-1;for(let p=0;p<Z_.length;p++)r=o.indexOf(Z_[p]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=o.length),o[u-1]===":"&&u--;const d=o.slice(0,u);o=o.slice(u),this.parseHost(d),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const p=this.hostname.split(/\./);for(let m=0,b=p.length;m<b;m++){const y=p[m];if(y&&!y.match(Y_)){let v="";for(let w=0,g=y.length;w<g;w++)y.charCodeAt(w)>127?v+="x":v+=y[w];if(!v.match(Y_)){const w=p.slice(0,m),g=p.slice(m+1),x=y.match(Qfe);x&&(w.push(x[1]),g.unshift(x[2])),g.length&&(o=g.join(".")+o),this.hostname=w.join(".");break}}}}this.hostname.length>Yfe&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=o.indexOf("#");a!==-1&&(this.hash=o.substr(a),o=o.slice(0,a));const l=o.indexOf("?");return l!==-1&&(this.search=o.substr(l),o=o.slice(0,l)),o&&(this.pathname=o),X_[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};x1.prototype.parseHost=function(t){let e=Wfe.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const Xfe=Object.freeze(Object.defineProperty({__proto__:null,decode:Cc,encode:Dh,format:_E,parse:AE},Symbol.toStringTag,{value:"Module"})),HI=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,WI=/[\0-\x1F\x7F-\x9F]/,ede=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,TE=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,JI=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,KI=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,tde=Object.freeze(Object.defineProperty({__proto__:null,Any:HI,Cc:WI,Cf:ede,P:TE,S:JI,Z:KI},Symbol.toStringTag,{value:"Module"})),nde=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),rde=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var a2;const ide=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),ode=(a2=String.fromCodePoint)!==null&&a2!==void 0?a2:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function sde(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=ide.get(t))!==null&&e!==void 0?e:t}var fn;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(fn||(fn={}));const ade=32;var Ks;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Ks||(Ks={}));function ck(t){return t>=fn.ZERO&&t<=fn.NINE}function lde(t){return t>=fn.UPPER_A&&t<=fn.UPPER_F||t>=fn.LOWER_A&&t<=fn.LOWER_F}function ude(t){return t>=fn.UPPER_A&&t<=fn.UPPER_Z||t>=fn.LOWER_A&&t<=fn.LOWER_Z||ck(t)}function cde(t){return t===fn.EQUALS||ude(t)}var sn;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(sn||(sn={}));var zs;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(zs||(zs={}));class fde{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=sn.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=zs.Strict}startEntity(e){this.decodeMode=e,this.state=sn.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case sn.EntityStart:return e.charCodeAt(n)===fn.NUM?(this.state=sn.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=sn.NamedEntity,this.stateNamedEntity(e,n));case sn.NumericStart:return this.stateNumericStart(e,n);case sn.NumericDecimal:return this.stateNumericDecimal(e,n);case sn.NumericHex:return this.stateNumericHex(e,n);case sn.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|ade)===fn.LOWER_X?(this.state=sn.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=sn.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,i){if(n!==r){const o=r-n;this.result=this.result*Math.pow(i,o)+parseInt(e.substr(n,o),i),this.consumed+=o}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(ck(i)||lde(i))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(ck(i))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===fn.SEMI)this.consumed+=1;else if(this.decodeMode===zs.Strict)return 0;return this.emitCodePoint(sde(this.result),this.consumed),this.errors&&(e!==fn.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let i=r[this.treeIndex],o=(i&Ks.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const s=e.charCodeAt(n);if(this.treeIndex=dde(r,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===zs.Attribute&&(o===0||cde(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],o=(i&Ks.VALUE_LENGTH)>>14,o!==0){if(s===fn.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==zs.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,i=(r[n]&Ks.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[e]&~Ks.VALUE_LENGTH:i[e+1],r),n===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case sn.NamedEntity:return this.result!==0&&(this.decodeMode!==zs.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case sn.NumericDecimal:return this.emitNumericEntity(0,2);case sn.NumericHex:return this.emitNumericEntity(0,3);case sn.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case sn.EntityStart:return 0}}}function ZI(t){let e="";const n=new fde(t,r=>e+=ode(r));return function(i,o){let s=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(s,a),n.startEntity(o);const u=n.write(i,a+1);if(u<0){s=a+n.end();break}s=a+u,a=u===0?s+1:s}const l=e+i.slice(s);return e="",l}}function dde(t,e,n,r){const i=(e&Ks.BRANCH_LENGTH)>>7,o=e&Ks.JUMP_TABLE;if(i===0)return o!==0&&r===o?n:-1;if(o){const l=r-o;return l<0||l>=i?-1:t[n+l]-1}let s=n,a=s+i-1;for(;s<=a;){const l=s+a>>>1,u=t[l];if(u<r)s=l+1;else if(u>r)a=l-1;else return t[l+i]}return-1}const hde=ZI(nde);ZI(rde);function GI(t,e=zs.Legacy){return hde(t,e)}function pde(t){return Object.prototype.toString.call(t)}function ME(t){return pde(t)==="[object String]"}const mde=Object.prototype.hasOwnProperty;function gde(t,e){return mde.call(t,e)}function Kg(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){t[r]=n[r]})}}),t}function YI(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))}function OE(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function E1(t){if(t>65535){t-=65536;const e=55296+(t>>10),n=56320+(t&1023);return String.fromCharCode(e,n)}return String.fromCharCode(t)}const QI=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,yde=/&([a-z#][a-z0-9]{1,31});/gi,bde=new RegExp(QI.source+"|"+yde.source,"gi"),vde=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function wde(t,e){if(e.charCodeAt(0)===35&&vde.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return OE(r)?E1(r):t}const n=GI(t);return n!==t?n:t}function kde(t){return t.indexOf("\\")<0?t:t.replace(QI,"$1")}function _c(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(bde,function(e,n,r){return n||wde(e,r)})}const xde=/[&<>"]/,Ede=/[&<>"]/g,Sde={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Cde(t){return Sde[t]}function ga(t){return xde.test(t)?t.replace(Ede,Cde):t}const _de=/[.?*+^$[\]\\(){}|-]/g;function Ade(t){return t.replace(_de,"\\$&")}function kt(t){switch(t){case 9:case 32:return!0}return!1}function rh(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function ih(t){return TE.test(t)||JI.test(t)}function oh(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Zg(t){return t=t.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(t=t.replace(//g,"")),t.toLowerCase().toUpperCase()}const Tde={mdurl:Xfe,ucmicro:tde},Mde=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:YI,assign:Kg,escapeHtml:ga,escapeRE:Ade,fromCodePoint:E1,has:gde,isMdAsciiPunct:oh,isPunctChar:ih,isSpace:kt,isString:ME,isValidEntityCode:OE,isWhiteSpace:rh,lib:Tde,normalizeReference:Zg,unescapeAll:_c,unescapeMd:kde},Symbol.toStringTag,{value:"Module"}));function Ode(t,e,n){let r,i,o,s;const a=t.posMax,l=t.pos;for(t.pos=e+1,r=1;t.pos<a;){if(o=t.src.charCodeAt(t.pos),o===93&&(r--,r===0)){i=!0;break}if(s=t.pos,t.md.inline.skipToken(t),o===91){if(s===t.pos-1)r++;else if(n)return t.pos=l,-1}}let u=-1;return i&&(u=t.pos),t.pos=l,u}function Dde(t,e,n){let r,i=e;const o={ok:!1,pos:0,str:""};if(t.charCodeAt(i)===60){for(i++;i<n;){if(r=t.charCodeAt(i),r===10||r===60)return o;if(r===62)return o.pos=i+1,o.str=_c(t.slice(e+1,i)),o.ok=!0,o;if(r===92&&i+1<n){i+=2;continue}i++}return o}let s=0;for(;i<n&&(r=t.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<n){if(t.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(s++,s>32))return o;if(r===41){if(s===0)break;s--}i++}return e===i||s!==0||(o.str=_c(t.slice(e,i)),o.pos=i,o.ok=!0),o}function Nde(t,e,n,r){let i,o=e;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(o>=n)return s;let a=t.charCodeAt(o);if(a!==34&&a!==39&&a!==40)return s;e++,o++,a===40&&(a=41),s.marker=a}for(;o<n;){if(i=t.charCodeAt(o),i===s.marker)return s.pos=o+1,s.str+=_c(t.slice(e,o)),s.ok=!0,s;if(i===40&&s.marker===41)return s;i===92&&o+1<n&&o++,o++}return s.can_continue=!0,s.str+=_c(t.slice(e,o)),s}const $de=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Dde,parseLinkLabel:Ode,parseLinkTitle:Nde},Symbol.toStringTag,{value:"Module"})),_o={};_o.code_inline=function(t,e,n,r,i){const o=t[e];return"<code"+i.renderAttrs(o)+">"+ga(o.content)+"</code>"};_o.code_block=function(t,e,n,r,i){const o=t[e];return"<pre"+i.renderAttrs(o)+"><code>"+ga(t[e].content)+`</code></pre>
`};_o.fence=function(t,e,n,r,i){const o=t[e],s=o.info?_c(o.info).trim():"";let a="",l="";if(s){const c=s.split(/(\s+)/g);a=c[0],l=c.slice(2).join("")}let u;if(n.highlight?u=n.highlight(o.content,a,l)||ga(o.content):u=ga(o.content),u.indexOf("<pre")===0)return u+`
`;if(s){const c=o.attrIndex("class"),f=o.attrs?o.attrs.slice():[];c<0?f.push(["class",n.langPrefix+a]):(f[c]=f[c].slice(),f[c][1]+=" "+n.langPrefix+a);const d={attrs:f};return`<pre><code${i.renderAttrs(d)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(o)}>${u}</code></pre>
`};_o.image=function(t,e,n,r,i){const o=t[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,n,r),i.renderToken(t,e,n)};_o.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};_o.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};_o.text=function(t,e){return ga(t[e].content)};_o.html_block=function(t,e){return t[e].content};_o.html_inline=function(t,e){return t[e].content};function Hc(){this.rules=Kg({},_o)}Hc.prototype.renderAttrs=function(e){let n,r,i;if(!e.attrs)return"";for(i="",n=0,r=e.attrs.length;n<r;n++)i+=" "+ga(e.attrs[n][0])+'="'+ga(e.attrs[n][1])+'"';return i};Hc.prototype.renderToken=function(e,n,r){const i=e[n];let o="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&e[n-1].hidden&&(o+=`
`),o+=(i.nesting===-1?"</":"<")+i.tag,o+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(o+=" /");let s=!1;if(i.block&&(s=!0,i.nesting===1&&n+1<e.length)){const a=e[n+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(s=!1)}return o+=s?`>
`:">",o};Hc.prototype.renderInline=function(t,e,n){let r="";const i=this.rules;for(let o=0,s=t.length;o<s;o++){const a=t[o].type;typeof i[a]<"u"?r+=i[a](t,o,e,n,this):r+=this.renderToken(t,o,e)}return r};Hc.prototype.renderInlineAsText=function(t,e,n){let r="";for(let i=0,o=t.length;i<o;i++)switch(t[i].type){case"text":r+=t[i].content;break;case"image":r+=this.renderInlineAsText(t[i].children,e,n);break;case"html_inline":case"html_block":r+=t[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Hc.prototype.render=function(t,e,n){let r="";const i=this.rules;for(let o=0,s=t.length;o<s;o++){const a=t[o].type;a==="inline"?r+=this.renderInline(t[o].children,e,n):typeof i[a]<"u"?r+=i[a](t,o,e,n,this):r+=this.renderToken(t,o,e,n)}return r};function Mr(){this.__rules__=[],this.__cache__=null}Mr.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Mr.prototype.__compile__=function(){const t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};Mr.prototype.at=function(t,e,n){const r=this.__find__(t),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Mr.prototype.before=function(t,e,n,r){const i=this.__find__(t),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};Mr.prototype.after=function(t,e,n,r){const i=this.__find__(t),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};Mr.prototype.push=function(t,e,n){const r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};Mr.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};Mr.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(t,e)};Mr.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};Mr.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function zi(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}zi.prototype.attrIndex=function(e){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,i=n.length;r<i;r++)if(n[r][0]===e)return r;return-1};zi.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};zi.prototype.attrSet=function(e,n){const r=this.attrIndex(e),i=[e,n];r<0?this.attrPush(i):this.attrs[r]=i};zi.prototype.attrGet=function(e){const n=this.attrIndex(e);let r=null;return n>=0&&(r=this.attrs[n][1]),r};zi.prototype.attrJoin=function(e,n){const r=this.attrIndex(e);r<0?this.attrPush([e,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function XI(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}XI.prototype.Token=zi;const Ide=/\r\n?|\n/g,Rde=/\0/g;function Fde(t){let e;e=t.src.replace(Ide,`
`),e=e.replace(Rde,""),t.src=e}function Lde(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function Bde(t){const e=t.tokens;for(let n=0,r=e.length;n<r;n++){const i=e[n];i.type==="inline"&&t.md.inline.parse(i.content,t.md,t.env,i.children)}}function Pde(t){return/^<a[>\s]/i.test(t)}function zde(t){return/^<\/a\s*>/i.test(t)}function jde(t){const e=t.tokens;if(t.md.options.linkify)for(let n=0,r=e.length;n<r;n++){if(e[n].type!=="inline"||!t.md.linkify.pretest(e[n].content))continue;let i=e[n].children,o=0;for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.type==="link_close"){for(s--;i[s].level!==a.level&&i[s].type!=="link_open";)s--;continue}if(a.type==="html_inline"&&(Pde(a.content)&&o>0&&o--,zde(a.content)&&o++),!(o>0)&&a.type==="text"&&t.md.linkify.test(a.content)){const l=a.content;let u=t.md.linkify.match(l);const c=[];let f=a.level,d=0;u.length>0&&u[0].index===0&&s>0&&i[s-1].type==="text_special"&&(u=u.slice(1));for(let h=0;h<u.length;h++){const p=u[h].url,m=t.md.normalizeLink(p);if(!t.md.validateLink(m))continue;let b=u[h].text;u[h].schema?u[h].schema==="mailto:"&&!/^mailto:/i.test(b)?b=t.md.normalizeLinkText("mailto:"+b).replace(/^mailto:/,""):b=t.md.normalizeLinkText(b):b=t.md.normalizeLinkText("http://"+b).replace(/^http:\/\//,"");const y=u[h].index;if(y>d){const x=new t.Token("text","",0);x.content=l.slice(d,y),x.level=f,c.push(x)}const v=new t.Token("link_open","a",1);v.attrs=[["href",m]],v.level=f++,v.markup="linkify",v.info="auto",c.push(v);const w=new t.Token("text","",0);w.content=b,w.level=f,c.push(w);const g=new t.Token("link_close","a",-1);g.level=--f,g.markup="linkify",g.info="auto",c.push(g),d=u[h].lastIndex}if(d<l.length){const h=new t.Token("text","",0);h.content=l.slice(d),h.level=f,c.push(h)}e[n].children=i=YI(i,s,c)}}}}const e7=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,qde=/\((c|tm|r)\)/i,Vde=/\((c|tm|r)\)/ig,Ude={c:"",r:"",tm:""};function Hde(t,e){return Ude[e.toLowerCase()]}function Wde(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&(r.content=r.content.replace(Vde,Hde)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function Jde(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&e7.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function Kde(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(qde.test(t.tokens[e].content)&&Wde(t.tokens[e].children),e7.test(t.tokens[e].content)&&Jde(t.tokens[e].children))}const Zde=/['"]/,eA=/['"]/g,tA="";function Ip(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}function Gde(t,e){let n;const r=[];for(let i=0;i<t.length;i++){const o=t[i],s=t[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=s);n--);if(r.length=n+1,o.type!=="text")continue;let a=o.content,l=0,u=a.length;e:for(;l<u;){eA.lastIndex=l;const c=eA.exec(a);if(!c)break;let f=!0,d=!0;l=c.index+1;const h=c[0]==="'";let p=32;if(c.index-1>=0)p=a.charCodeAt(c.index-1);else for(n=i-1;n>=0&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n--)if(t[n].content){p=t[n].content.charCodeAt(t[n].content.length-1);break}let m=32;if(l<u)m=a.charCodeAt(l);else for(n=i+1;n<t.length&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n++)if(t[n].content){m=t[n].content.charCodeAt(0);break}const b=oh(p)||ih(String.fromCharCode(p)),y=oh(m)||ih(String.fromCharCode(m)),v=rh(p),w=rh(m);if(w?f=!1:y&&(v||b||(f=!1)),v?d=!1:b&&(w||y||(d=!1)),m===34&&c[0]==='"'&&p>=48&&p<=57&&(d=f=!1),f&&d&&(f=b,d=y),!f&&!d){h&&(o.content=Ip(o.content,c.index,tA));continue}if(d)for(n=r.length-1;n>=0;n--){let g=r[n];if(r[n].level<s)break;if(g.single===h&&r[n].level===s){g=r[n];let x,k;h?(x=e.md.options.quotes[2],k=e.md.options.quotes[3]):(x=e.md.options.quotes[0],k=e.md.options.quotes[1]),o.content=Ip(o.content,c.index,k),t[g.token].content=Ip(t[g.token].content,g.pos,x),l+=k.length-1,g.token===i&&(l+=x.length-1),a=o.content,u=a.length,r.length=n;continue e}}f?r.push({token:i,pos:c.index,single:h,level:s}):d&&h&&(o.content=Ip(o.content,c.index,tA))}}}function Yde(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!Zde.test(t.tokens[e].content)||Gde(t.tokens[e].children,t)}function Qde(t){let e,n;const r=t.tokens,i=r.length;for(let o=0;o<i;o++){if(r[o].type!=="inline")continue;const s=r[o].children,a=s.length;for(e=0;e<a;e++)s[e].type==="text_special"&&(s[e].type="text");for(e=n=0;e<a;e++)s[e].type==="text"&&e+1<a&&s[e+1].type==="text"?s[e+1].content=s[e].content+s[e+1].content:(e!==n&&(s[n]=s[e]),n++);e!==n&&(s.length=n)}}const l2=[["normalize",Fde],["block",Lde],["inline",Bde],["linkify",jde],["replacements",Kde],["smartquotes",Yde],["text_join",Qde]];function DE(){this.ruler=new Mr;for(let t=0;t<l2.length;t++)this.ruler.push(l2[t][0],l2[t][1])}DE.prototype.process=function(t){const e=this.ruler.getRules("");for(let n=0,r=e.length;n<r;n++)e[n](t)};DE.prototype.State=XI;function Ao(t,e,n,r){this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let o=0,s=0,a=0,l=0,u=i.length,c=!1;s<u;s++){const f=i.charCodeAt(s);if(!c)if(kt(f)){a++,f===9?l+=4-l%4:l++;continue}else c=!0;(f===10||s===u-1)&&(f!==10&&s++,this.bMarks.push(o),this.eMarks.push(s),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),c=!1,a=0,l=0,o=s+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Ao.prototype.push=function(t,e,n){const r=new zi(t,e,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Ao.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Ao.prototype.skipEmptyLines=function(e){for(let n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Ao.prototype.skipSpaces=function(e){for(let n=this.src.length;e<n;e++){const r=this.src.charCodeAt(e);if(!kt(r))break}return e};Ao.prototype.skipSpacesBack=function(e,n){if(e<=n)return e;for(;e>n;)if(!kt(this.src.charCodeAt(--e)))return e+1;return e};Ao.prototype.skipChars=function(e,n){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};Ao.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};Ao.prototype.getLines=function(e,n,r,i){if(e>=n)return"";const o=new Array(n-e);for(let s=0,a=e;a<n;a++,s++){let l=0;const u=this.bMarks[a];let c=u,f;for(a+1<n||i?f=this.eMarks[a]+1:f=this.eMarks[a];c<f&&l<r;){const d=this.src.charCodeAt(c);if(kt(d))d===9?l+=4-(l+this.bsCount[a])%4:l++;else if(c-u<this.tShift[a])l++;else break;c++}l>r?o[s]=new Array(l-r+1).join(" ")+this.src.slice(c,f):o[s]=this.src.slice(c,f)}return o.join("")};Ao.prototype.Token=zi;const Xde=65536;function u2(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];return t.src.slice(n,r)}function nA(t){const e=[],n=t.length;let r=0,i=t.charCodeAt(r),o=!1,s=0,a="";for(;r<n;)i===124&&(o?(a+=t.substring(s,r-1),s=r):(e.push(a+t.substring(s,r)),a="",s=r+1)),o=i===92,r++,i=t.charCodeAt(r);return e.push(a+t.substring(s)),e}function ehe(t,e,n,r){if(e+2>n)return!1;let i=e+1;if(t.sCount[i]<t.blkIndent||t.sCount[i]-t.blkIndent>=4)return!1;let o=t.bMarks[i]+t.tShift[i];if(o>=t.eMarks[i])return!1;const s=t.src.charCodeAt(o++);if(s!==124&&s!==45&&s!==58||o>=t.eMarks[i])return!1;const a=t.src.charCodeAt(o++);if(a!==124&&a!==45&&a!==58&&!kt(a)||s===45&&kt(a))return!1;for(;o<t.eMarks[i];){const g=t.src.charCodeAt(o);if(g!==124&&g!==45&&g!==58&&!kt(g))return!1;o++}let l=u2(t,e+1),u=l.split("|");const c=[];for(let g=0;g<u.length;g++){const x=u[g].trim();if(!x){if(g===0||g===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(x))return!1;x.charCodeAt(x.length-1)===58?c.push(x.charCodeAt(0)===58?"center":"right"):x.charCodeAt(0)===58?c.push("left"):c.push("")}if(l=u2(t,e).trim(),l.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;u=nA(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const f=u.length;if(f===0||f!==c.length)return!1;if(r)return!0;const d=t.parentType;t.parentType="table";const h=t.md.block.ruler.getRules("blockquote"),p=t.push("table_open","table",1),m=[e,0];p.map=m;const b=t.push("thead_open","thead",1);b.map=[e,e+1];const y=t.push("tr_open","tr",1);y.map=[e,e+1];for(let g=0;g<u.length;g++){const x=t.push("th_open","th",1);c[g]&&(x.attrs=[["style","text-align:"+c[g]]]);const k=t.push("inline","",0);k.content=u[g].trim(),k.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let v,w=0;for(i=e+2;i<n&&!(t.sCount[i]<t.blkIndent);i++){let g=!1;for(let k=0,E=h.length;k<E;k++)if(h[k](t,i,n,!0)){g=!0;break}if(g||(l=u2(t,i).trim(),!l)||t.sCount[i]-t.blkIndent>=4||(u=nA(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),w+=f-u.length,w>Xde))break;if(i===e+2){const k=t.push("tbody_open","tbody",1);k.map=v=[e+2,0]}const x=t.push("tr_open","tr",1);x.map=[i,i+1];for(let k=0;k<f;k++){const E=t.push("td_open","td",1);c[k]&&(E.attrs=[["style","text-align:"+c[k]]]);const D=t.push("inline","",0);D.content=u[k]?u[k].trim():"",D.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return v&&(t.push("tbody_close","tbody",-1),v[1]=i),t.push("table_close","table",-1),m[1]=i,t.parentType=d,t.line=i,!0}function the(t,e,n){if(t.sCount[e]-t.blkIndent<4)return!1;let r=e+1,i=r;for(;r<n;){if(t.isEmpty(r)){r++;continue}if(t.sCount[r]-t.blkIndent>=4){r++,i=r;continue}break}t.line=i;const o=t.push("code_block","code",0);return o.content=t.getLines(e,i,4+t.blkIndent,!1)+`
`,o.map=[e,t.line],!0}function nhe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||i+3>o)return!1;const s=t.src.charCodeAt(i);if(s!==126&&s!==96)return!1;let a=i;i=t.skipChars(i,s);let l=i-a;if(l<3)return!1;const u=t.src.slice(a,i),c=t.src.slice(i,o);if(s===96&&c.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let f=e,d=!1;for(;f++,!(f>=n||(i=a=t.bMarks[f]+t.tShift[f],o=t.eMarks[f],i<o&&t.sCount[f]<t.blkIndent));)if(t.src.charCodeAt(i)===s&&!(t.sCount[f]-t.blkIndent>=4)&&(i=t.skipChars(i,s),!(i-a<l)&&(i=t.skipSpaces(i),!(i<o)))){d=!0;break}l=t.sCount[e],t.line=f+(d?1:0);const h=t.push("fence","code",0);return h.info=c,h.content=t.getLines(e+1,f,l,!0),h.markup=u,h.map=[e,t.line],!0}function rhe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];const s=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==62)return!1;if(r)return!0;const a=[],l=[],u=[],c=[],f=t.md.block.ruler.getRules("blockquote"),d=t.parentType;t.parentType="blockquote";let h=!1,p;for(p=e;p<n;p++){const w=t.sCount[p]<t.blkIndent;if(i=t.bMarks[p]+t.tShift[p],o=t.eMarks[p],i>=o)break;if(t.src.charCodeAt(i++)===62&&!w){let x=t.sCount[p]+1,k,E;t.src.charCodeAt(i)===32?(i++,x++,E=!1,k=!0):t.src.charCodeAt(i)===9?(k=!0,(t.bsCount[p]+x)%4===3?(i++,x++,E=!1):E=!0):k=!1;let D=x;for(a.push(t.bMarks[p]),t.bMarks[p]=i;i<o;){const O=t.src.charCodeAt(i);if(kt(O))O===9?D+=4-(D+t.bsCount[p]+(E?1:0))%4:D++;else break;i++}h=i>=o,l.push(t.bsCount[p]),t.bsCount[p]=t.sCount[p]+1+(k?1:0),u.push(t.sCount[p]),t.sCount[p]=D-x,c.push(t.tShift[p]),t.tShift[p]=i-t.bMarks[p];continue}if(h)break;let g=!1;for(let x=0,k=f.length;x<k;x++)if(f[x](t,p,n,!0)){g=!0;break}if(g){t.lineMax=p,t.blkIndent!==0&&(a.push(t.bMarks[p]),l.push(t.bsCount[p]),c.push(t.tShift[p]),u.push(t.sCount[p]),t.sCount[p]-=t.blkIndent);break}a.push(t.bMarks[p]),l.push(t.bsCount[p]),c.push(t.tShift[p]),u.push(t.sCount[p]),t.sCount[p]=-1}const m=t.blkIndent;t.blkIndent=0;const b=t.push("blockquote_open","blockquote",1);b.markup=">";const y=[e,0];b.map=y,t.md.block.tokenize(t,e,p);const v=t.push("blockquote_close","blockquote",-1);v.markup=">",t.lineMax=s,t.parentType=d,y[1]=t.line;for(let w=0;w<c.length;w++)t.bMarks[w+e]=a[w],t.tShift[w+e]=c[w],t.sCount[w+e]=u[w],t.bsCount[w+e]=l[w];return t.blkIndent=m,!0}function ihe(t,e,n,r){const i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let o=t.bMarks[e]+t.tShift[e];const s=t.src.charCodeAt(o++);if(s!==42&&s!==45&&s!==95)return!1;let a=1;for(;o<i;){const u=t.src.charCodeAt(o++);if(u!==s&&!kt(u))return!1;u===s&&a++}if(a<3)return!1;if(r)return!0;t.line=e+1;const l=t.push("hr","hr",0);return l.map=[e,t.line],l.markup=Array(a+1).join(String.fromCharCode(s)),!0}function rA(t,e){const n=t.eMarks[e];let r=t.bMarks[e]+t.tShift[e];const i=t.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<n){const o=t.src.charCodeAt(r);if(!kt(o))return-1}return r}function iA(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];let i=n;if(i+1>=r)return-1;let o=t.src.charCodeAt(i++);if(o<48||o>57)return-1;for(;;){if(i>=r)return-1;if(o=t.src.charCodeAt(i++),o>=48&&o<=57){if(i-n>=10)return-1;continue}if(o===41||o===46)break;return-1}return i<r&&(o=t.src.charCodeAt(i),!kt(o))?-1:i}function ohe(t,e){const n=t.level+2;for(let r=e+2,i=t.tokens.length-2;r<i;r++)t.tokens[r].level===n&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}function she(t,e,n,r){let i,o,s,a,l=e,u=!0;if(t.sCount[l]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[l]-t.listIndent>=4&&t.sCount[l]<t.blkIndent)return!1;let c=!1;r&&t.parentType==="paragraph"&&t.sCount[l]>=t.blkIndent&&(c=!0);let f,d,h;if((h=iA(t,l))>=0){if(f=!0,s=t.bMarks[l]+t.tShift[l],d=Number(t.src.slice(s,h-1)),c&&d!==1)return!1}else if((h=rA(t,l))>=0)f=!1;else return!1;if(c&&t.skipSpaces(h)>=t.eMarks[l])return!1;if(r)return!0;const p=t.src.charCodeAt(h-1),m=t.tokens.length;f?(a=t.push("ordered_list_open","ol",1),d!==1&&(a.attrs=[["start",d]])):a=t.push("bullet_list_open","ul",1);const b=[l,0];a.map=b,a.markup=String.fromCharCode(p);let y=!1;const v=t.md.block.ruler.getRules("list"),w=t.parentType;for(t.parentType="list";l<n;){o=h,i=t.eMarks[l];const g=t.sCount[l]+h-(t.bMarks[l]+t.tShift[l]);let x=g;for(;o<i;){const A=t.src.charCodeAt(o);if(A===9)x+=4-(x+t.bsCount[l])%4;else if(A===32)x++;else break;o++}const k=o;let E;k>=i?E=1:E=x-g,E>4&&(E=1);const D=g+E;a=t.push("list_item_open","li",1),a.markup=String.fromCharCode(p);const O=[l,0];a.map=O,f&&(a.info=t.src.slice(s,h-1));const N=t.tight,C=t.tShift[l],R=t.sCount[l],T=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=D,t.tight=!0,t.tShift[l]=k-t.bMarks[l],t.sCount[l]=x,k>=i&&t.isEmpty(l+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,l,n,!0),(!t.tight||y)&&(u=!1),y=t.line-l>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=T,t.tShift[l]=C,t.sCount[l]=R,t.tight=N,a=t.push("list_item_close","li",-1),a.markup=String.fromCharCode(p),l=t.line,O[1]=l,l>=n||t.sCount[l]<t.blkIndent||t.sCount[l]-t.blkIndent>=4)break;let q=!1;for(let A=0,S=v.length;A<S;A++)if(v[A](t,l,n,!0)){q=!0;break}if(q)break;if(f){if(h=iA(t,l),h<0)break;s=t.bMarks[l]+t.tShift[l]}else if(h=rA(t,l),h<0)break;if(p!==t.src.charCodeAt(h-1))break}return f?a=t.push("ordered_list_close","ol",-1):a=t.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(p),b[1]=l,t.line=l,t.parentType=w,u&&ohe(t,m),!0}function ahe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],s=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==91)return!1;function a(v){const w=t.lineMax;if(v>=w||t.isEmpty(v))return null;let g=!1;if(t.sCount[v]-t.blkIndent>3&&(g=!0),t.sCount[v]<0&&(g=!0),!g){const E=t.md.block.ruler.getRules("reference"),D=t.parentType;t.parentType="reference";let O=!1;for(let N=0,C=E.length;N<C;N++)if(E[N](t,v,w,!0)){O=!0;break}if(t.parentType=D,O)return null}const x=t.bMarks[v]+t.tShift[v],k=t.eMarks[v];return t.src.slice(x,k+1)}let l=t.src.slice(i,o+1);o=l.length;let u=-1;for(i=1;i<o;i++){const v=l.charCodeAt(i);if(v===91)return!1;if(v===93){u=i;break}else if(v===10){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}else if(v===92&&(i++,i<o&&l.charCodeAt(i)===10)){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(i=u+2;i<o;i++){const v=l.charCodeAt(i);if(v===10){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}else if(!kt(v))break}const c=t.md.helpers.parseLinkDestination(l,i,o);if(!c.ok)return!1;const f=t.md.normalizeLink(c.str);if(!t.md.validateLink(f))return!1;i=c.pos;const d=i,h=s,p=i;for(;i<o;i++){const v=l.charCodeAt(i);if(v===10){const w=a(s);w!==null&&(l+=w,o=l.length,s++)}else if(!kt(v))break}let m=t.md.helpers.parseLinkTitle(l,i,o);for(;m.can_continue;){const v=a(s);if(v===null)break;l+=v,i=o,o=l.length,s++,m=t.md.helpers.parseLinkTitle(l,i,o,m)}let b;for(i<o&&p!==i&&m.ok?(b=m.str,i=m.pos):(b="",i=d,s=h);i<o;){const v=l.charCodeAt(i);if(!kt(v))break;i++}if(i<o&&l.charCodeAt(i)!==10&&b)for(b="",i=d,s=h;i<o;){const v=l.charCodeAt(i);if(!kt(v))break;i++}if(i<o&&l.charCodeAt(i)!==10)return!1;const y=Zg(l.slice(1,u));return y?(r||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[y]>"u"&&(t.env.references[y]={title:b,href:f}),t.line=s),!0):!1}const lhe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],uhe="[a-zA-Z_:][a-zA-Z0-9:._-]*",che="[^\"'=<>`\\x00-\\x20]+",fhe="'[^']*'",dhe='"[^"]*"',hhe="(?:"+che+"|"+fhe+"|"+dhe+")",phe="(?:\\s+"+uhe+"(?:\\s*=\\s*"+hhe+")?)",t7="<[A-Za-z][A-Za-z0-9\\-]*"+phe+"*\\s*\\/?>",n7="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",mhe="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",ghe="<[?][\\s\\S]*?[?]>",yhe="<![A-Za-z][^>]*>",bhe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",vhe=new RegExp("^(?:"+t7+"|"+n7+"|"+mhe+"|"+ghe+"|"+yhe+"|"+bhe+")"),whe=new RegExp("^(?:"+t7+"|"+n7+")"),eu=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+lhe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(whe.source+"\\s*$"),/^$/,!1]];function khe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(i)!==60)return!1;let s=t.src.slice(i,o),a=0;for(;a<eu.length&&!eu[a][0].test(s);a++);if(a===eu.length)return!1;if(r)return eu[a][2];let l=e+1;if(!eu[a][1].test(s)){for(;l<n&&!(t.sCount[l]<t.blkIndent);l++)if(i=t.bMarks[l]+t.tShift[l],o=t.eMarks[l],s=t.src.slice(i,o),eu[a][1].test(s)){s.length!==0&&l++;break}}t.line=l;const u=t.push("html_block","",0);return u.map=[e,l],u.content=t.getLines(e,l,t.blkIndent,!0),!0}function xhe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let s=t.src.charCodeAt(i);if(s!==35||i>=o)return!1;let a=1;for(s=t.src.charCodeAt(++i);s===35&&i<o&&a<=6;)a++,s=t.src.charCodeAt(++i);if(a>6||i<o&&!kt(s))return!1;if(r)return!0;o=t.skipSpacesBack(o,i);const l=t.skipCharsBack(o,35,i);l>i&&kt(t.src.charCodeAt(l-1))&&(o=l),t.line=e+1;const u=t.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[e,t.line];const c=t.push("inline","",0);c.content=t.src.slice(i,o).trim(),c.map=[e,t.line],c.children=[];const f=t.push("heading_close","h"+String(a),-1);return f.markup="########".slice(0,a),!0}function Ehe(t,e,n){const r=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;const i=t.parentType;t.parentType="paragraph";let o=0,s,a=e+1;for(;a<n&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3)continue;if(t.sCount[a]>=t.blkIndent){let h=t.bMarks[a]+t.tShift[a];const p=t.eMarks[a];if(h<p&&(s=t.src.charCodeAt(h),(s===45||s===61)&&(h=t.skipChars(h,s),h=t.skipSpaces(h),h>=p))){o=s===61?1:2;break}}if(t.sCount[a]<0)continue;let d=!1;for(let h=0,p=r.length;h<p;h++)if(r[h](t,a,n,!0)){d=!0;break}if(d)break}if(!o)return!1;const l=t.getLines(e,a,t.blkIndent,!1).trim();t.line=a+1;const u=t.push("heading_open","h"+String(o),1);u.markup=String.fromCharCode(s),u.map=[e,t.line];const c=t.push("inline","",0);c.content=l,c.map=[e,t.line-1],c.children=[];const f=t.push("heading_close","h"+String(o),-1);return f.markup=String.fromCharCode(s),t.parentType=i,!0}function She(t,e,n){const r=t.md.block.ruler.getRules("paragraph"),i=t.parentType;let o=e+1;for(t.parentType="paragraph";o<n&&!t.isEmpty(o);o++){if(t.sCount[o]-t.blkIndent>3||t.sCount[o]<0)continue;let u=!1;for(let c=0,f=r.length;c<f;c++)if(r[c](t,o,n,!0)){u=!0;break}if(u)break}const s=t.getLines(e,o,t.blkIndent,!1).trim();t.line=o;const a=t.push("paragraph_open","p",1);a.map=[e,t.line];const l=t.push("inline","",0);return l.content=s,l.map=[e,t.line],l.children=[],t.push("paragraph_close","p",-1),t.parentType=i,!0}const Rp=[["table",ehe,["paragraph","reference"]],["code",the],["fence",nhe,["paragraph","reference","blockquote","list"]],["blockquote",rhe,["paragraph","reference","blockquote","list"]],["hr",ihe,["paragraph","reference","blockquote","list"]],["list",she,["paragraph","reference","blockquote"]],["reference",ahe],["html_block",khe,["paragraph","reference","blockquote"]],["heading",xhe,["paragraph","reference","blockquote"]],["lheading",Ehe],["paragraph",She]];function Gg(){this.ruler=new Mr;for(let t=0;t<Rp.length;t++)this.ruler.push(Rp[t][0],Rp[t][1],{alt:(Rp[t][2]||[]).slice()})}Gg.prototype.tokenize=function(t,e,n){const r=this.ruler.getRules(""),i=r.length,o=t.md.options.maxNesting;let s=e,a=!1;for(;s<n&&(t.line=s=t.skipEmptyLines(s),!(s>=n||t.sCount[s]<t.blkIndent));){if(t.level>=o){t.line=n;break}const l=t.line;let u=!1;for(let c=0;c<i;c++)if(u=r[c](t,s,n,!1),u){if(l>=t.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),s=t.line,s<n&&t.isEmpty(s)&&(a=!0,s++,t.line=s)}};Gg.prototype.parse=function(t,e,n,r){if(!t)return;const i=new this.State(t,e,n,r);this.tokenize(i,i.line,i.lineMax)};Gg.prototype.State=Ao;function Nh(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Nh.prototype.pushPending=function(){const t=new zi("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};Nh.prototype.push=function(t,e,n){this.pending&&this.pushPending();const r=new zi(t,e,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};Nh.prototype.scanDelims=function(t,e){const n=this.posMax,r=this.src.charCodeAt(t),i=t>0?this.src.charCodeAt(t-1):32;let o=t;for(;o<n&&this.src.charCodeAt(o)===r;)o++;const s=o-t,a=o<n?this.src.charCodeAt(o):32,l=oh(i)||ih(String.fromCharCode(i)),u=oh(a)||ih(String.fromCharCode(a)),c=rh(i),f=rh(a),d=!f&&(!u||c||l),h=!c&&(!l||f||u);return{can_open:d&&(e||!h||l),can_close:h&&(e||!d||u),length:s}};Nh.prototype.Token=zi;function Che(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function _he(t,e){let n=t.pos;for(;n<t.posMax&&!Che(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}const Ahe=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function The(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;const n=t.pos,r=t.posMax;if(n+3>r||t.src.charCodeAt(n)!==58||t.src.charCodeAt(n+1)!==47||t.src.charCodeAt(n+2)!==47)return!1;const i=t.pending.match(Ahe);if(!i)return!1;const o=i[1],s=t.md.linkify.matchAtStart(t.src.slice(n-o.length));if(!s)return!1;let a=s.url;if(a.length<=o.length)return!1;a=a.replace(/\*+$/,"");const l=t.md.normalizeLink(a);if(!t.md.validateLink(l))return!1;if(!e){t.pending=t.pending.slice(0,-o.length);const u=t.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const c=t.push("text","",0);c.content=t.md.normalizeLinkText(a);const f=t.push("link_close","a",-1);f.markup="linkify",f.info="auto"}return t.pos+=a.length-o.length,!0}function Mhe(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==10)return!1;const r=t.pending.length-1,i=t.posMax;if(!e)if(r>=0&&t.pending.charCodeAt(r)===32)if(r>=1&&t.pending.charCodeAt(r-1)===32){let o=r-1;for(;o>=1&&t.pending.charCodeAt(o-1)===32;)o--;t.pending=t.pending.slice(0,o),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(n++;n<i&&kt(t.src.charCodeAt(n));)n++;return t.pos=n,!0}const NE=[];for(let t=0;t<256;t++)NE.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){NE[t.charCodeAt(0)]=1});function Ohe(t,e){let n=t.pos;const r=t.posMax;if(t.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let i=t.src.charCodeAt(n);if(i===10){for(e||t.push("hardbreak","br",0),n++;n<r&&(i=t.src.charCodeAt(n),!!kt(i));)n++;return t.pos=n,!0}let o=t.src[n];if(i>=55296&&i<=56319&&n+1<r){const a=t.src.charCodeAt(n+1);a>=56320&&a<=57343&&(o+=t.src[n+1],n++)}const s="\\"+o;if(!e){const a=t.push("text_special","",0);i<256&&NE[i]!==0?a.content=o:a.content=s,a.markup=s,a.info="escape"}return t.pos=n+1,!0}function Dhe(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==96)return!1;const i=n;n++;const o=t.posMax;for(;n<o&&t.src.charCodeAt(n)===96;)n++;const s=t.src.slice(i,n),a=s.length;if(t.backticksScanned&&(t.backticks[a]||0)<=i)return e||(t.pending+=s),t.pos+=a,!0;let l=n,u;for(;(u=t.src.indexOf("`",l))!==-1;){for(l=u+1;l<o&&t.src.charCodeAt(l)===96;)l++;const c=l-u;if(c===a){if(!e){const f=t.push("code_inline","code",0);f.markup=s,f.content=t.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=l,!0}t.backticks[c]=u}return t.backticksScanned=!0,e||(t.pending+=s),t.pos+=a,!0}function Nhe(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==126)return!1;const i=t.scanDelims(t.pos,!0);let o=i.length;const s=String.fromCharCode(r);if(o<2)return!1;let a;o%2&&(a=t.push("text","",0),a.content=s,o--);for(let l=0;l<o;l+=2)a=t.push("text","",0),a.content=s+s,t.delimiters.push({marker:r,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0}function oA(t,e){let n;const r=[],i=e.length;for(let o=0;o<i;o++){const s=e[o];if(s.marker!==126||s.end===-1)continue;const a=e[s.end];n=t.tokens[s.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=t.tokens[a.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",t.tokens[a.token-1].type==="text"&&t.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const o=r.pop();let s=o+1;for(;s<t.tokens.length&&t.tokens[s].type==="s_close";)s++;s--,o!==s&&(n=t.tokens[s],t.tokens[s]=t.tokens[o],t.tokens[o]=n)}}function $he(t){const e=t.tokens_meta,n=t.tokens_meta.length;oA(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&oA(t,e[r].delimiters)}const r7={tokenize:Nhe,postProcess:$he};function Ihe(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==95&&r!==42)return!1;const i=t.scanDelims(t.pos,r===42);for(let o=0;o<i.length;o++){const s=t.push("text","",0);s.content=String.fromCharCode(r),t.delimiters.push({marker:r,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return t.pos+=i.length,!0}function sA(t,e){const n=e.length;for(let r=n-1;r>=0;r--){const i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const o=e[i.end],s=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===o.token+1,a=String.fromCharCode(i.marker),l=t.tokens[i.token];l.type=s?"strong_open":"em_open",l.tag=s?"strong":"em",l.nesting=1,l.markup=s?a+a:a,l.content="";const u=t.tokens[o.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?a+a:a,u.content="",s&&(t.tokens[e[r-1].token].content="",t.tokens[e[i.end+1].token].content="",r--)}}function Rhe(t){const e=t.tokens_meta,n=t.tokens_meta.length;sA(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&sA(t,e[r].delimiters)}const i7={tokenize:Ihe,postProcess:Rhe};function Fhe(t,e){let n,r,i,o,s="",a="",l=t.pos,u=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;const c=t.pos,f=t.posMax,d=t.pos+1,h=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(h<0)return!1;let p=h+1;if(p<f&&t.src.charCodeAt(p)===40){for(u=!1,p++;p<f&&(n=t.src.charCodeAt(p),!(!kt(n)&&n!==10));p++);if(p>=f)return!1;if(l=p,i=t.md.helpers.parseLinkDestination(t.src,p,t.posMax),i.ok){for(s=t.md.normalizeLink(i.str),t.md.validateLink(s)?p=i.pos:s="",l=p;p<f&&(n=t.src.charCodeAt(p),!(!kt(n)&&n!==10));p++);if(i=t.md.helpers.parseLinkTitle(t.src,p,t.posMax),p<f&&l!==p&&i.ok)for(a=i.str,p=i.pos;p<f&&(n=t.src.charCodeAt(p),!(!kt(n)&&n!==10));p++);}(p>=f||t.src.charCodeAt(p)!==41)&&(u=!0),p++}if(u){if(typeof t.env.references>"u")return!1;if(p<f&&t.src.charCodeAt(p)===91?(l=p+1,p=t.md.helpers.parseLinkLabel(t,p),p>=0?r=t.src.slice(l,p++):p=h+1):p=h+1,r||(r=t.src.slice(d,h)),o=t.env.references[Zg(r)],!o)return t.pos=c,!1;s=o.href,a=o.title}if(!e){t.pos=d,t.posMax=h;const m=t.push("link_open","a",1),b=[["href",s]];m.attrs=b,a&&b.push(["title",a]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=p,t.posMax=f,!0}function Lhe(t,e){let n,r,i,o,s,a,l,u,c="";const f=t.pos,d=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;const h=t.pos+2,p=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(p<0)return!1;if(o=p+1,o<d&&t.src.charCodeAt(o)===40){for(o++;o<d&&(n=t.src.charCodeAt(o),!(!kt(n)&&n!==10));o++);if(o>=d)return!1;for(u=o,a=t.md.helpers.parseLinkDestination(t.src,o,t.posMax),a.ok&&(c=t.md.normalizeLink(a.str),t.md.validateLink(c)?o=a.pos:c=""),u=o;o<d&&(n=t.src.charCodeAt(o),!(!kt(n)&&n!==10));o++);if(a=t.md.helpers.parseLinkTitle(t.src,o,t.posMax),o<d&&u!==o&&a.ok)for(l=a.str,o=a.pos;o<d&&(n=t.src.charCodeAt(o),!(!kt(n)&&n!==10));o++);else l="";if(o>=d||t.src.charCodeAt(o)!==41)return t.pos=f,!1;o++}else{if(typeof t.env.references>"u")return!1;if(o<d&&t.src.charCodeAt(o)===91?(u=o+1,o=t.md.helpers.parseLinkLabel(t,o),o>=0?i=t.src.slice(u,o++):o=p+1):o=p+1,i||(i=t.src.slice(h,p)),s=t.env.references[Zg(i)],!s)return t.pos=f,!1;c=s.href,l=s.title}if(!e){r=t.src.slice(h,p);const m=[];t.md.inline.parse(r,t.md,t.env,m);const b=t.push("image","img",0),y=[["src",c],["alt",""]];b.attrs=y,b.children=m,b.content=r,l&&y.push(["title",l])}return t.pos=o,t.posMax=d,!0}const Bhe=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Phe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function zhe(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==60)return!1;const r=t.pos,i=t.posMax;for(;;){if(++n>=i)return!1;const s=t.src.charCodeAt(n);if(s===60)return!1;if(s===62)break}const o=t.src.slice(r+1,n);if(Phe.test(o)){const s=t.md.normalizeLink(o);if(!t.md.validateLink(s))return!1;if(!e){const a=t.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";const l=t.push("text","",0);l.content=t.md.normalizeLinkText(o);const u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=o.length+2,!0}if(Bhe.test(o)){const s=t.md.normalizeLink("mailto:"+o);if(!t.md.validateLink(s))return!1;if(!e){const a=t.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";const l=t.push("text","",0);l.content=t.md.normalizeLinkText(o);const u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=o.length+2,!0}return!1}function jhe(t){return/^<a[>\s]/i.test(t)}function qhe(t){return/^<\/a\s*>/i.test(t)}function Vhe(t){const e=t|32;return e>=97&&e<=122}function Uhe(t,e){if(!t.md.options.html)return!1;const n=t.posMax,r=t.pos;if(t.src.charCodeAt(r)!==60||r+2>=n)return!1;const i=t.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!Vhe(i))return!1;const o=t.src.slice(r).match(vhe);if(!o)return!1;if(!e){const s=t.push("html_inline","",0);s.content=o[0],jhe(s.content)&&t.linkLevel++,qhe(s.content)&&t.linkLevel--}return t.pos+=o[0].length,!0}const Hhe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Whe=/^&([a-z][a-z0-9]{1,31});/i;function Jhe(t,e){const n=t.pos,r=t.posMax;if(t.src.charCodeAt(n)!==38||n+1>=r)return!1;if(t.src.charCodeAt(n+1)===35){const o=t.src.slice(n).match(Hhe);if(o){if(!e){const s=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),a=t.push("text_special","",0);a.content=OE(s)?E1(s):E1(65533),a.markup=o[0],a.info="entity"}return t.pos+=o[0].length,!0}}else{const o=t.src.slice(n).match(Whe);if(o){const s=GI(o[0]);if(s!==o[0]){if(!e){const a=t.push("text_special","",0);a.content=s,a.markup=o[0],a.info="entity"}return t.pos+=o[0].length,!0}}}return!1}function aA(t){const e={},n=t.length;if(!n)return;let r=0,i=-2;const o=[];for(let s=0;s<n;s++){const a=t[s];if(o.push(0),(t[r].marker!==a.marker||i!==a.token-1)&&(r=s),i=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);const l=e[a.marker][(a.open?3:0)+a.length%3];let u=r-o[r]-1,c=u;for(;u>l;u-=o[u]+1){const f=t[u];if(f.marker===a.marker&&f.open&&f.end<0){let d=!1;if((f.close||a.open)&&(f.length+a.length)%3===0&&(f.length%3!==0||a.length%3!==0)&&(d=!0),!d){const h=u>0&&!t[u-1].open?o[u-1]+1:0;o[s]=s-u+h,o[u]=h,a.open=!1,f.end=s,f.close=!1,c=-1,i=-2;break}}}c!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=c)}}function Khe(t){const e=t.tokens_meta,n=t.tokens_meta.length;aA(t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&aA(e[r].delimiters)}function Zhe(t){let e,n,r=0;const i=t.tokens,o=t.tokens.length;for(e=n=0;e<o;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<o&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==n&&(i[n]=i[e]),n++);e!==n&&(i.length=n)}const c2=[["text",_he],["linkify",The],["newline",Mhe],["escape",Ohe],["backticks",Dhe],["strikethrough",r7.tokenize],["emphasis",i7.tokenize],["link",Fhe],["image",Lhe],["autolink",zhe],["html_inline",Uhe],["entity",Jhe]],f2=[["balance_pairs",Khe],["strikethrough",r7.postProcess],["emphasis",i7.postProcess],["fragments_join",Zhe]];function $h(){this.ruler=new Mr;for(let t=0;t<c2.length;t++)this.ruler.push(c2[t][0],c2[t][1]);this.ruler2=new Mr;for(let t=0;t<f2.length;t++)this.ruler2.push(f2[t][0],f2[t][1])}$h.prototype.skipToken=function(t){const e=t.pos,n=this.ruler.getRules(""),r=n.length,i=t.md.options.maxNesting,o=t.cache;if(typeof o[e]<"u"){t.pos=o[e];return}let s=!1;if(t.level<i){for(let a=0;a<r;a++)if(t.level++,s=n[a](t,!0),t.level--,s){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;s||t.pos++,o[e]=t.pos};$h.prototype.tokenize=function(t){const e=this.ruler.getRules(""),n=e.length,r=t.posMax,i=t.md.options.maxNesting;for(;t.pos<r;){const o=t.pos;let s=!1;if(t.level<i){for(let a=0;a<n;a++)if(s=e[a](t,!1),s){if(o>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(t.pos>=r)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};$h.prototype.parse=function(t,e,n,r){const i=new this.State(t,e,n,r);this.tokenize(i);const o=this.ruler2.getRules(""),s=o.length;for(let a=0;a<s;a++)o[a](i)};$h.prototype.State=Nh;function Ghe(t){const e={};t=t||{},e.src_Any=HI.source,e.src_Cc=WI.source,e.src_Z=KI.source,e.src_P=TE.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const n="[><]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function fk(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t}function Yg(t){return Object.prototype.toString.call(t)}function Yhe(t){return Yg(t)==="[object String]"}function Qhe(t){return Yg(t)==="[object Object]"}function Xhe(t){return Yg(t)==="[object RegExp]"}function lA(t){return Yg(t)==="[object Function]"}function epe(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const o7={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function tpe(t){return Object.keys(t||{}).reduce(function(e,n){return e||o7.hasOwnProperty(n)},!1)}const npe={"http:":{validate:function(t,e,n){const r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){const r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){const r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},rpe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",ipe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function ope(t){t.__index__=-1,t.__text_cache__=""}function spe(t){return function(e,n){const r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}function uA(){return function(t,e){e.normalize(t)}}function S1(t){const e=t.re=Ghe(t.__opts__),n=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||n.push(rpe),n.push(e.src_xn),e.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];t.__compiled__={};function o(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(t.__schemas__).forEach(function(a){const l=t.__schemas__[a];if(l===null)return;const u={validate:null,link:null};if(t.__compiled__[a]=u,Qhe(l)){Xhe(l.validate)?u.validate=spe(l.validate):lA(l.validate)?u.validate=l.validate:o(a,l),lA(l.normalize)?u.normalize=l.normalize:l.normalize?o(a,l):u.normalize=uA();return}if(Yhe(l)){i.push(a);return}o(a,l)}),i.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:uA()};const s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(epe).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),ope(t)}function ape(t,e){const n=t.__index__,r=t.__last_index__,i=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function dk(t,e){const n=new ape(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function Hr(t,e){if(!(this instanceof Hr))return new Hr(t,e);e||tpe(t)&&(e=t,t={}),this.__opts__=fk({},o7,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=fk({},npe,t),this.__compiled__={},this.__tlds__=ipe,this.__tlds_replaced__=!1,this.re={},S1(this)}Hr.prototype.add=function(e,n){return this.__schemas__[e]=n,S1(this),this};Hr.prototype.set=function(e){return this.__opts__=fk(this.__opts__,e),this};Hr.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let n,r,i,o,s,a,l,u,c;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(e))!==null;)if(o=this.testSchemaAt(e,n[2],l.lastIndex),o){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};Hr.prototype.pretest=function(e){return this.re.pretest.test(e)};Hr.prototype.testSchemaAt=function(e,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(e,r,this):0};Hr.prototype.match=function(e){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(n.push(dk(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)n.push(dk(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Hr.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const n=this.re.schema_at_start.exec(e);if(!n)return null;const r=this.testSchemaAt(e,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,dk(this,0)):null};Hr.prototype.tlds=function(e,n){return e=Array.isArray(e)?e:[e],n?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,o){return r!==o[i-1]}).reverse(),S1(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,S1(this),this)};Hr.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Hr.prototype.onCompile=function(){};const Hu=2147483647,fo=36,$E=1,sh=26,lpe=38,upe=700,s7=72,a7=128,l7="-",cpe=/^xn--/,fpe=/[^\0-\x7F]/,dpe=/[\x2E\u3002\uFF0E\uFF61]/g,hpe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d2=fo-$E,ho=Math.floor,h2=String.fromCharCode;function $s(t){throw new RangeError(hpe[t])}function ppe(t,e){const n=[];let r=t.length;for(;r--;)n[r]=e(t[r]);return n}function u7(t,e){const n=t.split("@");let r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(dpe,".");const i=t.split("."),o=ppe(i,e).join(".");return r+o}function c7(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const o=t.charCodeAt(n++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}const mpe=t=>String.fromCodePoint(...t),gpe=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:fo},cA=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},f7=function(t,e,n){let r=0;for(t=n?ho(t/upe):t>>1,t+=ho(t/e);t>d2*sh>>1;r+=fo)t=ho(t/d2);return ho(r+(d2+1)*t/(t+lpe))},d7=function(t){const e=[],n=t.length;let r=0,i=a7,o=s7,s=t.lastIndexOf(l7);s<0&&(s=0);for(let a=0;a<s;++a)t.charCodeAt(a)>=128&&$s("not-basic"),e.push(t.charCodeAt(a));for(let a=s>0?s+1:0;a<n;){const l=r;for(let c=1,f=fo;;f+=fo){a>=n&&$s("invalid-input");const d=gpe(t.charCodeAt(a++));d>=fo&&$s("invalid-input"),d>ho((Hu-r)/c)&&$s("overflow"),r+=d*c;const h=f<=o?$E:f>=o+sh?sh:f-o;if(d<h)break;const p=fo-h;c>ho(Hu/p)&&$s("overflow"),c*=p}const u=e.length+1;o=f7(r-l,u,l==0),ho(r/u)>Hu-i&&$s("overflow"),i+=ho(r/u),r%=u,e.splice(r++,0,i)}return String.fromCodePoint(...e)},h7=function(t){const e=[];t=c7(t);const n=t.length;let r=a7,i=0,o=s7;for(const l of t)l<128&&e.push(h2(l));const s=e.length;let a=s;for(s&&e.push(l7);a<n;){let l=Hu;for(const c of t)c>=r&&c<l&&(l=c);const u=a+1;l-r>ho((Hu-i)/u)&&$s("overflow"),i+=(l-r)*u,r=l;for(const c of t)if(c<r&&++i>Hu&&$s("overflow"),c===r){let f=i;for(let d=fo;;d+=fo){const h=d<=o?$E:d>=o+sh?sh:d-o;if(f<h)break;const p=f-h,m=fo-h;e.push(h2(cA(h+p%m,0))),f=ho(p/m)}e.push(h2(cA(f,0))),o=f7(i,u,a===s),i=0,++a}++i,++r}return e.join("")},ype=function(t){return u7(t,function(e){return cpe.test(e)?d7(e.slice(4).toLowerCase()):e})},bpe=function(t){return u7(t,function(e){return fpe.test(e)?"xn--"+h7(e):e})},p7={version:"2.3.1",ucs2:{decode:c7,encode:mpe},decode:d7,encode:h7,toASCII:bpe,toUnicode:ype},vpe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},wpe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},kpe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},xpe={default:vpe,zero:wpe,commonmark:kpe},Epe=/^(vbscript|javascript|file|data):/,Spe=/^data:image\/(gif|png|jpeg|webp);/;function Cpe(t){const e=t.trim().toLowerCase();return Epe.test(e)?Spe.test(e):!0}const m7=["http:","https:","mailto:"];function _pe(t){const e=AE(t,!0);if(e.hostname&&(!e.protocol||m7.indexOf(e.protocol)>=0))try{e.hostname=p7.toASCII(e.hostname)}catch{}return Dh(_E(e))}function Ape(t){const e=AE(t,!0);if(e.hostname&&(!e.protocol||m7.indexOf(e.protocol)>=0))try{e.hostname=p7.toUnicode(e.hostname)}catch{}return Cc(_E(e),Cc.defaultChars+"%")}function Or(t,e){if(!(this instanceof Or))return new Or(t,e);e||ME(t)||(e=t||{},t="default"),this.inline=new $h,this.block=new Gg,this.core=new DE,this.renderer=new Hc,this.linkify=new Hr,this.validateLink=Cpe,this.normalizeLink=_pe,this.normalizeLinkText=Ape,this.utils=Mde,this.helpers=Kg({},$de),this.options={},this.configure(t),e&&this.set(e)}Or.prototype.set=function(t){return Kg(this.options,t),this};Or.prototype.configure=function(t){const e=this;if(ME(t)){const n=t;if(t=xpe[n],!t)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};Or.prototype.enable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(t,!0))},this),n=n.concat(this.inline.ruler2.enable(t,!0));const r=t.filter(function(i){return n.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Or.prototype.disable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(t,!0))},this),n=n.concat(this.inline.ruler2.disable(t,!0));const r=t.filter(function(i){return n.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Or.prototype.use=function(t){const e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};Or.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");const n=new this.core.State(t,this,e);return this.core.process(n),n.tokens};Or.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};Or.prototype.parseInline=function(t,e){const n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens};Or.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};const Tpe=new vI({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:t=>({params:t.getAttribute("data-params")||""})}],toDOM(t){return["pre",t.attrs.params?{"data-params":t.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1,tight:t.hasAttribute("data-tight")}}}],toDOM(t){return["ol",{start:t.attrs.order==1?null:t.attrs.order,"data-tight":t.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:t=>({tight:t.hasAttribute("data-tight")})}],toDOM(t){return["ul",{"data-tight":t.attrs.tight?"true":null},0]}},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM(t){return["img",t.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:t=>t.type.name=="em"}],toDOM(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name=="strong"},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM(t){return["a",t.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}});function Mpe(t,e){if(t.isText&&e.isText&&yt.sameSet(t.marks,e.marks))return t.withText(t.text+e.text)}class Ope{constructor(e,n){this.schema=e,this.tokenHandlers=n,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:yt.none}]}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(!e)return;let n=this.top(),r=n.content,i=r[r.length-1],o=this.schema.text(e,n.marks),s;i&&(s=Mpe(i,o))?r[r.length-1]=s:r.push(o)}openMark(e){let n=this.top();n.marks=e.addToSet(n.marks)}closeMark(e){let n=this.top();n.marks=e.removeFromSet(n.marks)}parseTokens(e){for(let n=0;n<e.length;n++){let r=e[n],i=this.tokenHandlers[r.type];if(!i)throw new Error("Token type `"+r.type+"` not supported by Markdown parser");i(this,r,e,n)}}addNode(e,n,r){let i=this.top(),o=e.createAndFill(n,r,i?i.marks:[]);return o?(this.push(o),o):null}openNode(e,n){this.stack.push({type:e,attrs:n,content:[],marks:yt.none})}closeNode(){let e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}}function df(t,e,n,r){return t.getAttrs?t.getAttrs(e,n,r):t.attrs instanceof Function?t.attrs(e):t.attrs}function p2(t,e){return t.noCloseToken||e=="code_inline"||e=="code_block"||e=="fence"}function fA(t){return t[t.length-1]==`
`?t.slice(0,t.length-1):t}function m2(){}function Dpe(t,e){let n=Object.create(null);for(let r in e){let i=e[r];if(i.block){let o=t.nodeType(i.block);p2(i,r)?n[r]=(s,a,l,u)=>{s.openNode(o,df(i,a,l,u)),s.addText(fA(a.content)),s.closeNode()}:(n[r+"_open"]=(s,a,l,u)=>s.openNode(o,df(i,a,l,u)),n[r+"_close"]=s=>s.closeNode())}else if(i.node){let o=t.nodeType(i.node);n[r]=(s,a,l,u)=>s.addNode(o,df(i,a,l,u))}else if(i.mark){let o=t.marks[i.mark];p2(i,r)?n[r]=(s,a,l,u)=>{s.openMark(o.create(df(i,a,l,u))),s.addText(fA(a.content)),s.closeMark(o)}:(n[r+"_open"]=(s,a,l,u)=>s.openMark(o.create(df(i,a,l,u))),n[r+"_close"]=s=>s.closeMark(o))}else if(i.ignore)p2(i,r)?n[r]=m2:(n[r+"_open"]=m2,n[r+"_close"]=m2);else throw new RangeError("Unrecognized parsing spec "+JSON.stringify(i))}return n.text=(r,i)=>r.addText(i.content),n.inline=(r,i)=>r.parseTokens(i.children),n.softbreak=n.softbreak||(r=>r.addText(" ")),n}let Npe=class{constructor(e,n,r){this.schema=e,this.tokenizer=n,this.tokens=r,this.tokenHandlers=Dpe(e,r)}parse(e,n={}){let r=new Ope(this.schema,this.tokenHandlers),i;r.parseTokens(this.tokenizer.parse(e,n));do i=r.closeNode();while(r.stack.length);return i||this.schema.topNodeType.createAndFill()}};function dA(t,e){for(;++e<t.length;)if(t[e].type!="list_item_open")return t[e].hidden;return!1}new Npe(Tpe,Or("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(t,e,n)=>({tight:dA(e,n)})},ordered_list:{block:"ordered_list",getAttrs:(t,e,n)=>({order:+t.attrGet("start")||1,tight:dA(e,n)})},heading:{block:"heading",getAttrs:t=>({level:+t.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:t=>({params:t.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:t=>({src:t.attrGet("src"),title:t.attrGet("title")||null,alt:t.children[0]&&t.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:t=>({href:t.attrGet("href"),title:t.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});const $pe={open:"",close:"",mixable:!0};let Ipe=class{constructor(e,n,r={}){this.nodes=e,this.marks=n,this.options=r}serialize(e,n={}){n=Object.assign({},this.options,n);let r=new g7(this.nodes,this.marks,n);return r.renderContent(e),r.out}};const To=new Ipe({blockquote(t,e){t.wrapBlock("> ",null,e,()=>t.renderContent(e))},code_block(t,e){const n=e.textContent.match(/`{3,}/gm),r=n?n.sort().slice(-1)[0]+"`":"```";t.write(r+(e.attrs.params||"")+`
`),t.text(e.textContent,!1),t.write(`
`),t.write(r),t.closeBlock(e)},heading(t,e){t.write(t.repeat("#",e.attrs.level)+" "),t.renderInline(e,!1),t.closeBlock(e)},horizontal_rule(t,e){t.write(e.attrs.markup||"---"),t.closeBlock(e)},bullet_list(t,e){t.renderList(e,"  ",()=>(e.attrs.bullet||"*")+" ")},ordered_list(t,e){let n=e.attrs.order||1,r=String(n+e.childCount-1).length,i=t.repeat(" ",r+2);t.renderList(e,i,o=>{let s=String(n+o);return t.repeat(" ",r-s.length)+s+". "})},list_item(t,e){t.renderContent(e)},paragraph(t,e){t.renderInline(e),t.closeBlock(e)},image(t,e){t.write("!["+t.esc(e.attrs.alt||"")+"]("+e.attrs.src.replace(/[\(\)]/g,"\\$&")+(e.attrs.title?' "'+e.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(t,e,n,r){for(let i=r+1;i<n.childCount;i++)if(n.child(i).type!=e.type){t.write(`\\
`);return}},text(t,e){t.text(e.text,!t.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open(t,e,n,r){return t.inAutolink=Rpe(e,n,r),t.inAutolink?"<":"["},close(t,e,n,r){let{inAutolink:i}=t;return t.inAutolink=void 0,i?">":"]("+e.attrs.href.replace(/[\(\)"]/g,"\\$&")+(e.attrs.title?` "${e.attrs.title.replace(/"/g,'\\"')}"`:"")+")"},mixable:!0},code:{open(t,e,n,r){return hA(n.child(r),-1)},close(t,e,n,r){return hA(n.child(r-1),1)},escape:!1}});function hA(t,e){let n=/`+/g,r,i=0;if(t.isText)for(;r=n.exec(t.text);)i=Math.max(i,r[0].length);let o=i>0&&e>0?" `":"`";for(let s=0;s<i;s++)o+="`";return i>0&&e<0&&(o+=" "),o}function Rpe(t,e,n){if(t.attrs.title||!/^\w+:/.test(t.attrs.href))return!1;let r=e.child(n);return!r.isText||r.text!=t.attrs.href||r.marks[r.marks.length-1]!=t?!1:n==e.childCount-1||!t.isInSet(e.child(n+1).marks)}let g7=class{constructor(e,n,r){this.nodes=e,this.marks=n,this.options=r,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists>"u"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName>"u"&&(this.options.hardBreakNodeName="hard_break")}flushClose(e=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),e>1){let n=this.delim,r=/\s+$/.exec(n);r&&(n=n.slice(0,n.length-r[0].length));for(let i=1;i<e;i++)this.out+=n+`
`}this.closed=null}}getMark(e){let n=this.marks[e];if(!n){if(this.options.strict!==!1)throw new Error(`Mark type \`${e}\` not supported by Markdown renderer`);n=$pe}return n}wrapBlock(e,n,r,i){let o=this.delim;this.write(n??e),this.delim+=e,i(),this.delim=o,this.closeBlock(r)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e,n=!0){let r=e.split(`
`);for(let i=0;i<r.length;i++)this.write(),!n&&r[i][0]=="["&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=n?this.esc(r[i],this.atBlockStart):r[i],i!=r.length-1&&(this.out+=`
`)}render(e,n,r){if(this.nodes[e.type.name])this.nodes[e.type.name](this,e,n,r);else{if(this.options.strict!==!1)throw new Error("Token type `"+e.type.name+"` not supported by Markdown renderer");e.type.isLeaf||(e.type.inlineContent?this.renderInline(e):this.renderContent(e),e.isBlock&&this.closeBlock(e))}}renderContent(e){e.forEach((n,r,i)=>this.render(n,e,i))}renderInline(e,n=!0){this.atBlockStart=n;let r=[],i="",o=(s,a,l)=>{let u=s?s.marks:[];s&&s.type.name===this.options.hardBreakNodeName&&(u=u.filter(m=>{if(l+1==e.childCount)return!1;let b=e.child(l+1);return m.isInSet(b.marks)&&(!b.isText||/\S/.test(b.text))}));let c=i;if(i="",s&&s.isText&&u.some(m=>{let b=this.getMark(m.type.name);return b&&b.expelEnclosingWhitespace&&!m.isInSet(r)})){let[m,b,y]=/^(\s*)(.*)$/m.exec(s.text);b&&(c+=b,s=y?s.withText(y):null,s||(u=r))}if(s&&s.isText&&u.some(m=>{let b=this.getMark(m.type.name);return b&&b.expelEnclosingWhitespace&&(l==e.childCount-1||!m.isInSet(e.child(l+1).marks))})){let[m,b,y]=/^(.*?)(\s*)$/m.exec(s.text);y&&(i=y,s=b?s.withText(b):null,s||(u=r))}let f=u.length?u[u.length-1]:null,d=f&&this.getMark(f.type.name).escape===!1,h=u.length-(d?1:0);e:for(let m=0;m<h;m++){let b=u[m];if(!this.getMark(b.type.name).mixable)break;for(let y=0;y<r.length;y++){let v=r[y];if(!this.getMark(v.type.name).mixable)break;if(b.eq(v)){m>y?u=u.slice(0,y).concat(b).concat(u.slice(y,m)).concat(u.slice(m+1,h)):y>m&&(u=u.slice(0,m).concat(u.slice(m+1,y)).concat(b).concat(u.slice(y,h)));continue e}}}let p=0;for(;p<Math.min(r.length,h)&&u[p].eq(r[p]);)++p;for(;p<r.length;)this.text(this.markString(r.pop(),!1,e,l),!1);if(c&&this.text(c),s){for(;r.length<h;){let m=u[r.length];r.push(m),this.text(this.markString(m,!0,e,l),!1),this.atBlockStart=!1}d&&s.isText?this.text(this.markString(f,!0,e,l)+s.text+this.markString(f,!1,e,l+1),!1):this.render(s,e,l),this.atBlockStart=!1}s!=null&&s.isText&&s.nodeSize>0&&(this.atBlockStart=!1)};e.forEach(o),o(null,0,e.childCount),this.atBlockStart=!1}renderList(e,n,r){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let i=typeof e.attrs.tight<"u"?e.attrs.tight:this.options.tightLists,o=this.inTightList;this.inTightList=i,e.forEach((s,a,l)=>{l&&i&&this.flushClose(1),this.wrapBlock(n,r(l),e,()=>this.render(s,e,l))}),this.inTightList=o}esc(e,n=!1){return e=e.replace(/[`*\\~\[\]_]/g,(r,i)=>r=="_"&&i>0&&i+1<e.length&&e[i-1].match(/\w/)&&e[i+1].match(/\w/)?r:"\\"+r),n&&(e=e.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(e=e.replace(this.options.escapeExtraCharacters,"\\$&")),e}quote(e){let n=e.indexOf('"')==-1?'""':e.indexOf("'")==-1?"''":"()";return n[0]+e+n[1]}repeat(e,n){let r="";for(let i=0;i<n;i++)r+=e;return r}markString(e,n,r,i){let o=this.getMark(e.type.name),s=n?o.open:o.close;return typeof s=="string"?s:s(this,e,r,i)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}};var hk=!0,y7=!1,b7=!1,Fpe=function(t,e){e&&(hk=!e.enabled,y7=!!e.label,b7=!!e.labelAfter),t.core.ruler.after("inline","github-task-lists",function(n){for(var r=n.tokens,i=2;i<r.length;i++)Bpe(r,i)&&(Ppe(r[i],n.Token),pA(r[i-2],"class","task-list-item"+(hk?"":" enabled")),pA(r[Lpe(r,i-2)],"class","contains-task-list"))})};function pA(t,e,n){var r=t.attrIndex(e),i=[e,n];r<0?t.attrPush(i):t.attrs[r]=i}function Lpe(t,e){for(var n=t[e].level-1,r=e-1;r>=0;r--)if(t[r].level===n)return r;return-1}function Bpe(t,e){return Upe(t[e])&&Hpe(t[e-1])&&Wpe(t[e-2])&&Jpe(t[e])}function Ppe(t,e){if(t.children.unshift(zpe(t,e)),t.children[1].content=t.children[1].content.slice(3),t.content=t.content.slice(3),y7)if(b7){t.children.pop();var n="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);t.children[0].content=t.children[0].content.slice(0,-1)+' id="'+n+'">',t.children.push(Vpe(t.content,n,e))}else t.children.unshift(jpe(e)),t.children.push(qpe(e))}function zpe(t,e){var n=new e("html_inline","",0),r=hk?' disabled="" ':"";return t.content.indexOf("[ ] ")===0?n.content='<input class="task-list-item-checkbox"'+r+'type="checkbox">':(t.content.indexOf("[x] ")===0||t.content.indexOf("[X] ")===0)&&(n.content='<input class="task-list-item-checkbox" checked=""'+r+'type="checkbox">'),n}function jpe(t){var e=new t("html_inline","",0);return e.content="<label>",e}function qpe(t){var e=new t("html_inline","",0);return e.content="</label>",e}function Vpe(t,e,n){var r=new n("html_inline","",0);return r.content='<label class="task-list-item-label" for="'+e+'">'+t+"</label>",r.attrs=[{for:e}],r}function Upe(t){return t.type==="inline"}function Hpe(t){return t.type==="paragraph_open"}function Wpe(t){return t.type==="list_item_open"}function Jpe(t){return t.content.indexOf("[ ] ")===0||t.content.indexOf("[x] ")===0||t.content.indexOf("[X] ")===0}const Kpe=D1(Fpe);var Zpe=Object.defineProperty,Gpe=(t,e,n)=>e in t?Zpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,C1=(t,e,n)=>(Gpe(t,typeof e!="symbol"?e+"":e,n),n);const Ype=yi.create({name:"markdownTightLists",addOptions:()=>({tight:!0,tightClass:"tight",listTypes:["bulletList","orderedList"]}),addGlobalAttributes(){return[{types:this.options.listTypes,attributes:{tight:{default:this.options.tight,parseHTML:t=>t.getAttribute("data-tight")==="true"||!t.querySelector("p"),renderHTML:t=>({class:t.tight?this.options.tightClass:null,"data-tight":t.tight?"true":null})}}}]},addCommands(){var t=this;return{toggleTight:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return n=>{let{editor:r,commands:i}=n;function o(s){if(!r.isActive(s))return!1;const a=r.getAttributes(s);return i.updateAttributes(s,{tight:e??!(a!=null&&a.tight)})}return t.options.listTypes.some(s=>o(s))}}}}}),mA=Or();function v7(t,e){return mA.inline.State.prototype.scanDelims.call({src:t,posMax:t.length}),new mA.inline.State(t,null,null,[]).scanDelims(e,!0)}function w7(t,e,n,r){let i=t.substring(0,n)+t.substring(n+e.length);return i=i.substring(0,n+r)+e+i.substring(n+r),i}function Qpe(t,e,n,r){let i=n,o=t;for(;i<r&&!v7(o,i).can_open;)o=w7(o,e,i,1),i++;return{text:o,from:i,to:r}}function Xpe(t,e,n,r){let i=r,o=t;for(;i>n&&!v7(o,i).can_close;)o=w7(o,e,i,-1),i--;return{text:o,from:n,to:i}}function e0e(t,e,n,r){let i={text:t,from:n,to:r};return i=Qpe(i.text,e,i.from,i.to),i=Xpe(i.text,e,i.from,i.to),i.to-i.from<e.length+1&&(i.text=i.text.substring(0,i.from)+i.text.substring(i.to+e.length)),i.text}class t0e extends g7{constructor(e,n,r){super(e,n,r??{}),C1(this,"inTable",!1),this.inlines=[]}render(e,n,r){super.render(e,n,r);const i=this.inlines[this.inlines.length-1];if(i!=null&&i.start&&i!==null&&i!==void 0&&i.end){const{delimiter:o,start:s,end:a}=this.normalizeInline(i);this.out=e0e(this.out,o,s,a),this.inlines.pop()}}markString(e,n,r,i){const o=this.marks[e.type.name];if(o.expelEnclosingWhitespace)if(n)this.inlines.push({start:this.out.length,delimiter:o.open});else{const s=this.inlines.pop();this.inlines.push({...s,end:this.out.length})}return super.markString(e,n,r,i)}normalizeInline(e){let{start:n,end:r}=e;for(;this.out.charAt(n).match(/\s/);)n++;return{...e,start:n}}}const k7=Xo.create({name:"markdownHTMLMark",addStorage(){return{markdown:{serialize:{open(t,e){var n,r;return this.editor.storage.markdown.options.html?(n=(r=gA(e))===null||r===void 0?void 0:r[0])!==null&&n!==void 0?n:"":(console.warn(`Tiptap Markdown: "${e.type.name}" mark is only available in html mode`),"")},close(t,e){var n,r;return this.editor.storage.markdown.options.html&&(n=(r=gA(e))===null||r===void 0?void 0:r[1])!==null&&n!==void 0?n:""}},parse:{}}}}});function gA(t){const e=t.type.schema,n=e.text(" ",[t]),i=UI(ue.from(n),e).match(/^(<.*?>) (<\/.*?>)$/);return i?[i[1],i[2]]:null}function IE(t){const e=`<body>${t}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function n0e(t){return t==null?void 0:t.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r0e(t){const e=t.parentElement,n=e.cloneNode();for(;e.firstChild&&e.firstChild!==t;)n.appendChild(e.firstChild);n.childNodes.length>0&&e.parentElement.insertBefore(n,e),e.parentElement.insertBefore(t,e),e.childNodes.length===0&&e.remove()}function i0e(t){const e=t.parentNode;for(;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t)}const Qg=bn.create({name:"markdownHTMLNode",addStorage(){return{markdown:{serialize(t,e,n){this.editor.storage.markdown.options.html?t.write(o0e(e,n)):(console.warn(`Tiptap Markdown: "${e.type.name}" node is only available in html mode`),t.write(`[${e.type.name}]`)),e.isBlock&&t.closeBlock(e)},parse:{}}}}});function o0e(t,e){const n=t.type.schema,r=UI(ue.from(t),n);return t.isBlock&&(e instanceof ue||e.type.name===n.topNodeType.name)?s0e(r):r}function s0e(t){const n=IE(t).firstElementChild;return n.innerHTML=n.innerHTML.trim()?`
${n.innerHTML}
`:`
`,n.outerHTML}const a0e=bn.create({name:"blockquote"}),l0e=a0e.extend({addStorage(){return{markdown:{serialize:To.nodes.blockquote,parse:{}}}}}),u0e=bn.create({name:"bulletList"}),x7=u0e.extend({addStorage(){return{markdown:{serialize(t,e){return t.renderList(e,"  ",()=>(this.editor.storage.markdown.options.bulletListMarker||"-")+" ")},parse:{}}}}}),c0e=bn.create({name:"codeBlock"}),f0e=c0e.extend({addStorage(){return{markdown:{serialize(t,e){t.write("```"+(e.attrs.language||"")+`
`),t.text(e.textContent,!1),t.ensureNewLine(),t.write("```"),t.closeBlock(e)},parse:{setup(t){var e;t.set({langPrefix:(e=this.options.languageClassPrefix)!==null&&e!==void 0?e:"language-"})},updateDOM(t){t.innerHTML=t.innerHTML.replace(/\n<\/code><\/pre>/g,"</code></pre>")}}}}}}),d0e=bn.create({name:"hardBreak"}),E7=d0e.extend({addStorage(){return{markdown:{serialize(t,e,n,r){for(let i=r+1;i<n.childCount;i++)if(n.child(i).type!=e.type){t.write(t.inTable?Qg.storage.markdown.serialize.call(this,t,e,n):`\\
`);return}},parse:{}}}}}),h0e=bn.create({name:"heading"}),p0e=h0e.extend({addStorage(){return{markdown:{serialize:To.nodes.heading,parse:{}}}}}),m0e=bn.create({name:"horizontalRule"}),g0e=m0e.extend({addStorage(){return{markdown:{serialize:To.nodes.horizontal_rule,parse:{}}}}}),y0e=bn.create({name:"image"}),b0e=y0e.extend({addStorage(){return{markdown:{serialize:To.nodes.image,parse:{}}}}}),v0e=bn.create({name:"listItem"}),w0e=v0e.extend({addStorage(){return{markdown:{serialize:To.nodes.list_item,parse:{}}}}}),k0e=bn.create({name:"orderedList"});function x0e(t,e,n){let r=0;for(;n-r>0&&e.child(n-r-1).type.name===t.type.name;r++);return r}const E0e=k0e.extend({addStorage(){return{markdown:{serialize(t,e,n,r){const i=e.attrs.start||1,o=String(i+e.childCount-1).length,s=t.repeat(" ",o+2),l=x0e(e,n,r)%2?") ":". ";t.renderList(e,s,u=>{const c=String(i+u);return t.repeat(" ",o-c.length)+c+l})},parse:{}}}}}),S0e=bn.create({name:"paragraph"}),C0e=S0e.extend({addStorage(){return{markdown:{serialize:To.nodes.paragraph,parse:{}}}}});function g2(t){var e,n;return(e=t==null||(n=t.content)===null||n===void 0?void 0:n.content)!==null&&e!==void 0?e:[]}const _0e=bn.create({name:"table"}),A0e=_0e.extend({addStorage(){return{markdown:{serialize(t,e,n){if(!T0e(e)){Qg.storage.markdown.serialize.call(this,t,e,n);return}t.inTable=!0,e.forEach((r,i,o)=>{if(t.write("| "),r.forEach((s,a,l)=>{l&&t.write(" | ");const u=s.firstChild;u.textContent.trim()&&t.renderInline(u)}),t.write(" |"),t.ensureNewLine(),!o){const s=Array.from({length:r.childCount}).map(()=>"---").join(" | ");t.write(`| ${s} |`),t.ensureNewLine()}}),t.closeBlock(e),t.inTable=!1},parse:{}}}}});function yA(t){return t.attrs.colspan>1||t.attrs.rowspan>1}function T0e(t){const e=g2(t),n=e[0],r=e.slice(1);return!(g2(n).some(i=>i.type.name!=="tableHeader"||yA(i)||i.childCount>1)||r.some(i=>g2(i).some(o=>o.type.name==="tableHeader"||yA(o)||o.childCount>1)))}const M0e=bn.create({name:"taskItem"}),O0e=M0e.extend({addStorage(){return{markdown:{serialize(t,e){const n=e.attrs.checked?"[x]":"[ ]";t.write(`${n} `),t.renderContent(e)},parse:{updateDOM(t){[...t.querySelectorAll(".task-list-item")].forEach(e=>{const n=e.querySelector("input");e.setAttribute("data-type","taskItem"),n&&(e.setAttribute("data-checked",n.checked),n.remove())})}}}}}}),D0e=bn.create({name:"taskList"}),N0e=D0e.extend({addStorage(){return{markdown:{serialize:x7.storage.markdown.serialize,parse:{setup(t){t.use(Kpe)},updateDOM(t){[...t.querySelectorAll(".contains-task-list")].forEach(e=>{e.setAttribute("data-type","taskList")})}}}}}}),$0e=bn.create({name:"text"}),I0e=$0e.extend({addStorage(){return{markdown:{serialize(t,e){t.text(n0e(e.text))},parse:{}}}}}),R0e=Xo.create({name:"bold"}),F0e=R0e.extend({addStorage(){return{markdown:{serialize:To.marks.strong,parse:{}}}}}),L0e=Xo.create({name:"code"}),B0e=L0e.extend({addStorage(){return{markdown:{serialize:To.marks.code,parse:{}}}}}),P0e=Xo.create({name:"italic"}),z0e=P0e.extend({addStorage(){return{markdown:{serialize:To.marks.em,parse:{}}}}}),j0e=Xo.create({name:"link"}),q0e=j0e.extend({addStorage(){return{markdown:{serialize:To.marks.link,parse:{}}}}}),V0e=Xo.create({name:"strike"}),U0e=V0e.extend({addStorage(){return{markdown:{serialize:{open:"~~",close:"~~",expelEnclosingWhitespace:!0},parse:{}}}}}),H0e=[l0e,x7,f0e,E7,p0e,g0e,Qg,b0e,w0e,E0e,C0e,A0e,O0e,N0e,I0e,F0e,B0e,k7,z0e,q0e,U0e];function _1(t){var e,n;const r=(e=t.storage)===null||e===void 0?void 0:e.markdown,i=(n=H0e.find(o=>o.name===t.name))===null||n===void 0?void 0:n.storage.markdown;return r||i?{...i,...r}:null}class W0e{constructor(e){C1(this,"editor",null),this.editor=e}serialize(e){const n=new t0e(this.nodes,this.marks,{hardBreakNodeName:E7.name});return n.renderContent(e),n.out}get nodes(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.nodes).map(n=>[n,this.serializeNode(Qg)])),...Object.fromEntries((e=this.editor.extensionManager.extensions.filter(n=>n.type==="node"&&this.serializeNode(n)).map(n=>[n.name,this.serializeNode(n)]))!==null&&e!==void 0?e:[])}}get marks(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.marks).map(n=>[n,this.serializeMark(k7)])),...Object.fromEntries((e=this.editor.extensionManager.extensions.filter(n=>n.type==="mark"&&this.serializeMark(n)).map(n=>[n.name,this.serializeMark(n)]))!==null&&e!==void 0?e:[])}}serializeNode(e){var n;return(n=_1(e))===null||n===void 0||(n=n.serialize)===null||n===void 0?void 0:n.bind({editor:this.editor,options:e.options})}serializeMark(e){var n;const r=(n=_1(e))===null||n===void 0?void 0:n.serialize;return r?{...r,open:typeof r.open=="function"?r.open.bind({editor:this.editor,options:e.options}):r.open,close:typeof r.close=="function"?r.close.bind({editor:this.editor,options:e.options}):r.close}:null}}class J0e{constructor(e,n){C1(this,"editor",null),C1(this,"md",null);let{html:r,linkify:i,breaks:o}=n;this.editor=e,this.md=this.withPatchedRenderer(Or({html:r,linkify:i,breaks:o}))}parse(e){let{inline:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e=="string"){this.editor.extensionManager.extensions.forEach(o=>{var s;return(s=_1(o))===null||s===void 0||(s=s.parse)===null||s===void 0||(s=s.setup)===null||s===void 0?void 0:s.call({editor:this.editor,options:o.options},this.md)});const r=this.md.render(e),i=IE(r);return this.editor.extensionManager.extensions.forEach(o=>{var s;return(s=_1(o))===null||s===void 0||(s=s.parse)===null||s===void 0||(s=s.updateDOM)===null||s===void 0?void 0:s.call({editor:this.editor,options:o.options},i)}),this.normalizeDOM(i,{inline:n,content:e}),i.innerHTML}return e}normalizeDOM(e,n){let{inline:r,content:i}=n;return this.normalizeBlocks(e),e.querySelectorAll("*").forEach(o=>{var s;((s=o.nextSibling)===null||s===void 0?void 0:s.nodeType)===Node.TEXT_NODE&&!o.closest("pre")&&(o.nextSibling.textContent=o.nextSibling.textContent.replace(/^\n/,""))}),r&&this.normalizeInline(e,i),e}normalizeBlocks(e){const r=Object.values(this.editor.schema.nodes).filter(i=>i.isBlock).map(i=>{var o;return(o=i.spec.parseDOM)===null||o===void 0?void 0:o.map(s=>s.tag)}).flat().filter(Boolean).join(",");r&&[...e.querySelectorAll(r)].forEach(i=>{i.parentElement.matches("p")&&r0e(i)})}normalizeInline(e,n){var r;if((r=e.firstElementChild)!==null&&r!==void 0&&r.matches("p")){var i,o,s,a;const l=e.firstElementChild,{nextElementSibling:u}=l,c=(i=(o=n.match(/^\s+/))===null||o===void 0?void 0:o[0])!==null&&i!==void 0?i:"",f=u?"":(s=(a=n.match(/\s+$/))===null||a===void 0?void 0:a[0])!==null&&s!==void 0?s:"";if(n.match(/^\n\n/)){l.innerHTML=`${l.innerHTML}${f}`;return}i0e(l),e.innerHTML=`${c}${e.innerHTML}${f}`}}withPatchedRenderer(e){const n=r=>function(){const i=r(...arguments);return i===`
`?i:i[i.length-1]===`
`?i.slice(0,-1):i};return e.renderer.rules.hardbreak=n(e.renderer.rules.hardbreak),e.renderer.rules.softbreak=n(e.renderer.rules.softbreak),e.renderer.rules.fence=n(e.renderer.rules.fence),e.renderer.rules.code_block=n(e.renderer.rules.code_block),e.renderer.renderToken=n(e.renderer.renderToken.bind(e.renderer)),e}}const K0e=yi.create({name:"markdownClipboard",addOptions(){return{transformPastedText:!1,transformCopiedText:!1}},addProseMirrorPlugins(){return[new Vc({key:new Uc("markdownClipboard"),props:{clipboardTextParser:(t,e,n)=>{if(n||!this.options.transformPastedText)return null;const r=this.editor.storage.markdown.parser.parse(t,{inline:!0});return eh.fromSchema(this.editor.schema).parseSlice(IE(r),{preserveWhitespace:!0,context:e})},clipboardTextSerializer:t=>this.options.transformCopiedText?this.editor.storage.markdown.serializer.serialize(t.content):null}})]}}),S7=yi.create({name:"markdown",priority:50,addOptions(){return{html:!0,tightLists:!0,tightListClass:"tight",bulletListMarker:"-",linkify:!1,breaks:!1,transformPastedText:!1,transformCopiedText:!1}},addCommands(){const t=qfe.Commands.config.addCommands();return{setContent:(e,n,r)=>i=>t.setContent(i.editor.storage.markdown.parser.parse(e),n,r)(i),insertContentAt:(e,n,r)=>i=>t.insertContentAt(e,i.editor.storage.markdown.parser.parse(n,{inline:!0}),r)(i)}},onBeforeCreate(){this.editor.storage.markdown={options:{...this.options},parser:new J0e(this.editor,this.options),serializer:new W0e(this.editor),getMarkdown:()=>this.editor.storage.markdown.serializer.serialize(this.editor.state.doc)},this.editor.options.initialContent=this.editor.options.content,this.editor.options.content=this.editor.storage.markdown.parser.parse(this.editor.options.content)},onCreate(){this.editor.options.content=this.editor.options.initialContent,delete this.editor.options.initialContent},addStorage(){return{}},addExtensions(){return[Ype.configure({tight:this.options.tightLists,tightClass:this.options.tightListClass}),K0e.configure({transformPastedText:this.options.transformPastedText,transformCopiedText:this.options.transformCopiedText})]}});/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z0e={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=(t,e,n,r)=>{const i=ee.forwardRef(({color:o="currentColor",size:s=24,stroke:a=2,title:l,className:u,children:c,...f},d)=>ee.createElement("svg",{ref:d,...Z0e[t],width:s,height:s,className:["tabler-icon",`tabler-icon-${e}`,u].join(" "),strokeWidth:a,stroke:o,...f},[l&&ee.createElement("title",{key:"svg-title"},l),...r.map(([h,p])=>ee.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var G0e=Pl("outline","bolt","IconBolt",[["path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xg=Pl("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var C7=Pl("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y0e=Pl("outline","chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _7=Pl("outline","copy","IconCopy",[["path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var A7=Pl("outline","file-x","IconFileX",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q0e=Pl("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);function T7(t){const[e,n]=ee.useState(!1);return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:`absolute transition-all ease-in duration-100 z-40 flex left-0 top-0 right-0 bottom-0 text-center items-center justify-center rounded-lg ${e?"bg-black/70":""} text-white ${e?"":"pointer-events-none"}`,children:e&&_.jsx("textarea",{autoFocus:!0,value:t.value,className:"bg-transparent mx-4 w-full outline-none text-sm h-28 mt-14 resize-none",placeholder:"Alt description",onChange:r=>t.onChange(r.currentTarget.value)})}),_.jsx("div",{className:"w-full",children:_.jsx("button",{onClick:()=>n(r=>!r),className:`relative py-1 px-2 bg-black/80 border border-white/20 rounded-full ${e?"text-white":"text-gray-200"} z-50 text-xs`,children:"Alt"})})]})}function ey(t){return _.jsx("button",{className:"absolute bg-black/80 p-1 right-2 top-2 rounded-full text-white z-10",onClick:()=>t.onClick(),children:_.jsx(Q0e,{strokeWidth:"2.0",size:18})})}function M7(t){return _.jsx("div",{className:"absolute bottom-0 left-0 right-0 top-0 flex flex-row items-end justify-between p-2",children:t.children})}function O7(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var D7=typeof window<"u"&&typeof document<"u";function pk(t,e){t&&(typeof t=="function"&&t(e),{}.hasOwnProperty.call(t,"current")&&(t.current=e))}function bA(){return D7&&document.createElement("div")}function X0e(t){var e={"data-placement":t.placement};return t.referenceHidden&&(e["data-reference-hidden"]=""),t.escaped&&(e["data-escaped"]=""),e}function N7(t,e){if(t===e)return!0;if(typeof t=="object"&&t!=null&&typeof e=="object"&&e!=null){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(e.hasOwnProperty(n)){if(!N7(t[n],e[n]))return!1}else return!1;return!0}else return!1}function eme(t){var e=[];return t.forEach(function(n){e.find(function(r){return N7(n,r)})||e.push(n)}),e}function tme(t,e){var n,r;return Object.assign({},e,{popperOptions:Object.assign({},t.popperOptions,e.popperOptions,{modifiers:eme([].concat(((n=t.popperOptions)==null?void 0:n.modifiers)||[],((r=e.popperOptions)==null?void 0:r.modifiers)||[]))})})}var y2=D7?ee.useLayoutEffect:ee.useEffect;function nme(t){var e=ee.useRef();return e.current||(e.current=typeof t=="function"?t():t),e.current}function vA(t,e,n){n.split(/\s+/).forEach(function(r){r&&t.classList[e](r)})}var rme={name:"className",defaultValue:"",fn:function(e){var n=e.popper.firstElementChild,r=function(){var a;return!!((a=e.props.render)!=null&&a.$$tippy)};function i(){e.props.className&&!r()||vA(n,"add",e.props.className)}function o(){r()&&vA(n,"remove",e.props.className)}return{onCreate:i,onBeforeUpdate:o,onAfterUpdate:i}}};function ime(t){function e(n){var r=n.children,i=n.content,o=n.visible,s=n.singleton,a=n.render,l=n.reference,u=n.disabled,c=u===void 0?!1:u,f=n.ignoreAttributes,d=f===void 0?!0:f;n.__source,n.__self;var h=O7(n,["children","content","visible","singleton","render","reference","disabled","ignoreAttributes","__source","__self"]),p=o!==void 0,m=s!==void 0,b=ee.useState(!1),y=b[0],v=b[1],w=ee.useState({}),g=w[0],x=w[1],k=ee.useState(),E=k[0],D=k[1],O=nme(function(){return{container:bA(),renders:1}}),N=Object.assign({ignoreAttributes:d},h,{content:O.container});p&&(N.trigger="manual",N.hideOnClick=!1),m&&(c=!0);var C=N,R=N.plugins||[];a&&(C=Object.assign({},N,{plugins:m&&s.data!=null?[].concat(R,[{fn:function(){return{onTrigger:function(S,P){var B=s.data.children.find(function(j){var z=j.instance;return z.reference===P.currentTarget});S.state.$$activeSingletonInstance=B.instance,D(B.content)}}}}]):R,render:function(){return{popper:O.container}}}));var T=[l].concat(r?[r.type]:[]);return y2(function(){var q=l;l&&l.hasOwnProperty("current")&&(q=l.current);var A=t(q||O.ref||bA(),Object.assign({},C,{plugins:[rme].concat(N.plugins||[])}));return O.instance=A,c&&A.disable(),o&&A.show(),m&&s.hook({instance:A,content:i,props:C,setSingletonContent:D}),v(!0),function(){A.destroy(),s==null||s.cleanup(A)}},T),y2(function(){var q;if(O.renders===1){O.renders++;return}var A=O.instance;A.setProps(tme(A.props,C)),(q=A.popperInstance)==null||q.forceUpdate(),c?A.disable():A.enable(),p&&(o?A.show():A.hide()),m&&s.hook({instance:A,content:i,props:C,setSingletonContent:D})}),y2(function(){var q;if(a){var A=O.instance;A.setProps({popperOptions:Object.assign({},A.props.popperOptions,{modifiers:[].concat((((q=A.props.popperOptions)==null?void 0:q.modifiers)||[]).filter(function(S){var P=S.name;return P!=="$$tippyReact"}),[{name:"$$tippyReact",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(P){var B,j=P.state,z=(B=j.modifiersData)==null?void 0:B.hide;(g.placement!==j.placement||g.referenceHidden!==(z==null?void 0:z.isReferenceHidden)||g.escaped!==(z==null?void 0:z.hasPopperEscaped))&&x({placement:j.placement,referenceHidden:z==null?void 0:z.isReferenceHidden,escaped:z==null?void 0:z.hasPopperEscaped}),j.attributes.popper={}}}])})})}},[g.placement,g.referenceHidden,g.escaped].concat(T)),tt.createElement(tt.Fragment,null,r?ee.cloneElement(r,{ref:function(A){O.ref=A,pk(r.ref,A)}}):null,y&&K1.createPortal(a?a(X0e(g),E,O.instance):i,O.container))}return e}var ome=function(t,e){return ee.forwardRef(function(r,i){var o=r.children,s=O7(r,["children"]);return tt.createElement(t,Object.assign({},e,s),o?ee.cloneElement(o,{ref:function(l){pk(i,l),pk(o.ref,l)}}):null)})},sme=ome(ime($c));const ame=["https://nostr.build","https://nostrcheck.me","https://nostrage.com"];function wA(t){const{url:e,onClick:n}=t;return _.jsx("li",{className:"cursor-pointer w-full py-1 pl-2 hover:bg-white/10",onClick:()=>n(),children:e},e)}function $7(t){const[e,n]=ee.useState(!1),{uploadUrl:r,onChange:i}=t,o=ee.useMemo(()=>new URL(r),[r]).hostname;return _.jsx(_.Fragment,{children:_.jsx(sme,{interactive:!0,placement:"bottom-end",visible:e,className:"relative",onClickOutside:()=>n(!1),content:_.jsxs("div",{className:"pt-2 bg-black text-white text-sm rounded-lg min-h-12 w-48 z-50 relative",style:{zIndex:1e6,position:"relative"},children:[_.jsx("span",{className:"p-2 font-bold",children:"NIP-96 Servers"}),_.jsx("ul",{className:"m-0 mb-1 list-none",children:ame.map(s=>_.jsx(wA,{url:s,onClick:()=>{i("nip96",s),n(!1)}},s))}),_.jsx("span",{className:"p-2 font-bold",children:"Blossom Servers:"}),_.jsx("ul",{className:"m-0 mb-1 list-none",children:_.jsx(wA,{url:"http://localhost:3000",onClick:()=>{i("blossom","http://localhost:3000"),n(!1)}})})]}),children:_.jsx("button",{className:"py-1 px-2 rounded-full border border-white/20 bg-black text-white",onClick:s=>{n(!e),s.preventDefault()},children:_.jsxs("span",{className:"text-sm flex flex-row items-center text-ellipsis overflow-hidden max-w-28",children:[o," ",_.jsx(C7,{size:16})]})})})})}function I7(t){const{uploading:e=!0}=t;return _.jsx("div",{className:`absolute top-0 bottom-0 left-0 right-0 bg-black/50 flex items-center justify-center pointer-events-none rounded-lg ease-in transition-opacity ${e?"opacity-100":"opacity-0"}`,children:_.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})}function R7(t){const{src:e}=t;return _.jsx(_.Fragment,{children:_.jsx("img",{src:e,className:"max-h-80 rounded-lg my-2"})})}function lme(t){const{src:e,alt:n,uploadUrl:r,uploading:i,uploadError:o,sha256:s}=t.node.attrs;return _.jsxs(Ca,{"data-drag-handle":"",draggable:t.node.type.spec.draggable,className:`relative my-2 [&>img]:m-0 w-fit h-fit ${t.selected?"opacity-90":""}`,children:[_.jsx(ey,{onClick:()=>t.deleteNode()}),_.jsx(I7,{uploading:i}),_.jsx(R7,{src:e}),_.jsxs(M7,{children:[s?_.jsx("div",{}):_.jsx(T7,{value:n,onChange:a=>t.updateAttributes({alt:a})}),!s&&_.jsx($7,{uploadUrl:r,onChange:(a,l)=>{t.updateAttributes({uploadType:a,uploadUrl:l})}}),s&&_.jsx("span",{"data-tooltip":e,children:_.jsx(Xg,{size:26,strokeWidth:"2.5",className:"p-1 flex flex-row justify-between rounded-full border border-white/20 bg-black text-green-300 text-xs right-2 bottom-2 z-50"})}),o&&_.jsx("span",{"data-tooltip":o,className:"",children:_.jsx(A7,{size:28,strokeWidth:"1.5",className:"border border-white/20 bg-black rounded-full py-1 ml-1 text-red-500 relative top-0"})})]})]})}const ume=function(e){const{bolt11:n,lnbc:r}=e.node.attrs,[i,o]=ee.useState(!1),s=ee.useMemo(()=>{var u;return(((u=n.sections.find(c=>c.name==="amount"))==null?void 0:u.value)||0)/1e3},[n]),a=ee.useMemo(()=>{var c;const u=(c=n.sections.find(f=>f.name==="timestamp"))==null?void 0:c.value;return Date.now()>(u+n.expiry)*1e3},[n]),l=ee.useCallback(()=>{navigator.clipboard.writeText(r).then(()=>{o(!0),setTimeout(()=>{o(!1)},2e3)})},[r]);return _.jsx(Ca,{"data-drag-handle":"",draggable:e.node.type.spec.draggable,children:_.jsxs("div",{className:`relative my-2 bg-gray-100 border-gray-200 border border-solid py-8 px-8 rounded-xl ${e.selected?"opacity-60":""}`,children:[_.jsxs("button",{className:"absolute right-4 top-4",onClick:()=>l(),children:[i&&_.jsx(Xg,{size:20,strokeWidth:"2.5",className:"text-green-600"}),!i&&_.jsx(_7,{size:20})]}),_.jsxs("h3",{className:"flex flex-row items-center",children:[_.jsx(G0e,{strokeWidth:"1.4",size:34,className:"mr-4 bg-gray-200 rounded-full p-1 text-purple-500"}),"Lightning Invoice"]}),_.jsxs("h1",{className:"mt-12",children:[s," SATS"]}),a&&"expired"]})})};var za=Symbol("verified"),cme=t=>t instanceof Object;function fme(t){if(!cme(t)||typeof t.kind!="number"||typeof t.content!="string"||typeof t.created_at!="number"||typeof t.pubkey!="string"||!t.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(t.tags))return!1;for(let e=0;e<t.tags.length;e++){let n=t.tags[e];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var dme=new TextEncoder;function zf(t){t.indexOf("://")===-1&&(t="wss://"+t);let e=new URL(t);return e.pathname=e.pathname.replace(/\/+/g,"/"),e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1)),(e.port==="80"&&e.protocol==="ws:"||e.port==="443"&&e.protocol==="wss:")&&(e.port=""),e.searchParams.sort(),e.hash="",e.toString()}var hme=class{constructor(t){Te(this,"value");Te(this,"next",null);Te(this,"prev",null);this.value=t}},pme=class{constructor(){Te(this,"first");Te(this,"last");this.first=null,this.last=null}enqueue(t){const e=new hme(t);return this.last?this.last===this.first?(this.last=e,this.last.prev=this.first,this.first.next=e):(e.prev=this.last,this.last.next=e,this.last=e):(this.first=e,this.last=e),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const e=this.first;return this.first=null,this.last=null,e.value}const t=this.first;return this.first=t.next,t.value}},mme=class{generateSecretKey(){return no.utils.randomPrivateKey()}getPublicKey(t){return un(no.getPublicKey(t))}finalizeEvent(t,e){const n=t;return n.pubkey=un(no.getPublicKey(e)),n.id=b2(n),n.sig=un(no.sign(b2(n),e)),n[za]=!0,n}verifyEvent(t){if(typeof t[za]=="boolean")return t[za];const e=b2(t);if(e!==t.id)return t[za]=!1,!1;try{const n=no.verify(t.sig,e,t.pubkey);return t[za]=n,n}catch{return t[za]=!1,!1}}};function gme(t){if(!fme(t))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content])}function b2(t){let e=zc(dme.encode(gme(t)));return un(e)}var ty=new mme;ty.generateSecretKey;ty.getPublicKey;ty.finalizeEvent;var yme=ty.verifyEvent,bme=22242;function vme(t,e){if(t.ids&&t.ids.indexOf(e.id)===-1||t.kinds&&t.kinds.indexOf(e.kind)===-1||t.authors&&t.authors.indexOf(e.pubkey)===-1)return!1;for(let n in t)if(n[0]==="#"){let r=n.slice(1),i=t[`#${r}`];if(i&&!e.tags.find(([o,s])=>o===n.slice(1)&&i.indexOf(s)!==-1))return!1}return!(t.since&&e.created_at<t.since||t.until&&e.created_at>t.until)}function wme(t,e){for(let n=0;n<t.length;n++)if(vme(t[n],e))return!0;return!1}function kme(t,e){let n=e.length+3,r=t.indexOf(`"${e}":`)+n,i=t.slice(r).indexOf('"')+r+1;return t.slice(i,i+64)}function xme(t){let e=t.slice(0,22).indexOf('"EVENT"');if(e===-1)return null;let n=t.slice(e+7+1).indexOf('"');if(n===-1)return null;let r=e+7+1+n,i=t.slice(r+1,80).indexOf('"');if(i===-1)return null;let o=r+1+i;return t.slice(r+1,o)}function Eme(t,e){return{kind:bme,created_at:Math.floor(Date.now()/1e3),tags:[["relay",t],["challenge",e]],content:""}}async function Sme(){return new Promise(t=>{const e=new MessageChannel,n=()=>{e.port1.removeEventListener("message",n),t()};e.port1.addEventListener("message",n),e.port2.postMessage(0),e.port1.start()})}var Cme=t=>(t[za]=!0,!0),F7=class{constructor(t,e){Te(this,"url");Te(this,"_connected",!1);Te(this,"onclose",null);Te(this,"onnotice",t=>console.debug(`NOTICE from ${this.url}: ${t}`));Te(this,"_onauth",null);Te(this,"baseEoseTimeout",4400);Te(this,"connectionTimeout",4400);Te(this,"openSubs",new Map);Te(this,"connectionTimeoutHandle");Te(this,"connectionPromise");Te(this,"openCountRequests",new Map);Te(this,"openEventPublishes",new Map);Te(this,"ws");Te(this,"incomingMessageQueue",new pme);Te(this,"queueRunning",!1);Te(this,"challenge");Te(this,"serial",0);Te(this,"verifyEvent");Te(this,"_WebSocket");this.url=zf(t),this.verifyEvent=e.verifyEvent,this._WebSocket=e.websocketImplementation||WebSocket}static async connect(t,e){const n=new F7(t,e);return await n.connect(),n}closeAllSubscriptions(t){for(let[e,n]of this.openSubs)n.close(t);this.openSubs.clear();for(let[e,n]of this.openEventPublishes)n.reject(new Error(t));this.openEventPublishes.clear();for(let[e,n]of this.openCountRequests)n.reject(new Error(t));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((t,e)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;e("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(n){e(n);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,t()},this.ws.onerror=n=>{var r;e(n.message||"websocket error"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var n;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await Sme();this.queueRunning=!1}handleNext(){var n,r,i;const t=this.incomingMessageQueue.dequeue();if(!t)return!1;const e=xme(t);if(e){const o=this.openSubs.get(e);if(!o)return;const s=kme(t,"id"),a=(n=o.alreadyHaveEvent)==null?void 0:n.call(o,s);if((r=o.receivedEvent)==null||r.call(o,this,s),a)return}try{let o=JSON.parse(t);switch(o[0]){case"EVENT":{const s=this.openSubs.get(o[1]),a=o[2];this.verifyEvent(a)&&wme(s.filters,a)&&s.onevent(a);return}case"COUNT":{const s=o[1],a=o[2],l=this.openCountRequests.get(s);l&&(l.resolve(a.count),this.openCountRequests.delete(s));return}case"EOSE":{const s=this.openSubs.get(o[1]);if(!s)return;s.receivedEose();return}case"OK":{const s=o[1],a=o[2],l=o[3],u=this.openEventPublishes.get(s);a?u.resolve(l):u.reject(new Error(l)),this.openEventPublishes.delete(s);return}case"CLOSED":{const s=o[1],a=this.openSubs.get(s);if(!a)return;a.closed=!0,a.close(o[2]);return}case"NOTICE":this.onnotice(o[1]);return;case"AUTH":{this.challenge=o[1],(i=this._onauth)==null||i.call(this,o[1]);return}}}catch{return}}async send(t){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var e;(e=this.ws)==null||e.send(t)})}async auth(t){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const e=await t(Eme(this.url,this.challenge)),n=new Promise((r,i)=>{this.openEventPublishes.set(e.id,{resolve:r,reject:i})});return this.send('["AUTH",'+JSON.stringify(e)+"]"),n}async publish(t){const e=new Promise((n,r)=>{this.openEventPublishes.set(t.id,{resolve:n,reject:r})});return this.send('["EVENT",'+JSON.stringify(t)+"]"),e}async count(t,e){this.serial++;const n=(e==null?void 0:e.id)||"count:"+this.serial,r=new Promise((i,o)=>{this.openCountRequests.set(n,{resolve:i,reject:o})});return this.send('["COUNT","'+n+'",'+JSON.stringify(t).substring(1)),r}subscribe(t,e){const n=this.prepareSubscription(t,e);return n.fire(),n}prepareSubscription(t,e){this.serial++;const n=e.id||"sub:"+this.serial,r=new _me(this,n,t,e);return this.openSubs.set(n,r),r}close(){var t;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(t=this.ws)==null||t.close()}_onmessage(t){this.incomingMessageQueue.enqueue(t.data),this.queueRunning||this.runQueue()}},_me=class{constructor(t,e,n,r){Te(this,"relay");Te(this,"id");Te(this,"closed",!1);Te(this,"eosed",!1);Te(this,"filters");Te(this,"alreadyHaveEvent");Te(this,"receivedEvent");Te(this,"onevent");Te(this,"oneose");Te(this,"onclose");Te(this,"eoseTimeout");Te(this,"eoseTimeoutHandle");this.relay=t,this.filters=n,this.id=e,this.alreadyHaveEvent=r.alreadyHaveEvent,this.receivedEvent=r.receivedEvent,this.eoseTimeout=r.eoseTimeout||t.baseEoseTimeout,this.oneose=r.oneose,this.onclose=r.onclose,this.onevent=r.onevent||(i=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,i)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var t;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(t=this.oneose)==null||t.call(this))}close(t="closed by caller"){var e;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(e=this.onclose)==null||e.call(this,t)}},Ame=class{constructor(t){Te(this,"relays",new Map);Te(this,"seenOn",new Map);Te(this,"trackRelays",!1);Te(this,"verifyEvent");Te(this,"trustedRelayURLs",new Set);Te(this,"_WebSocket");this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation}async ensureRelay(t,e){t=zf(t);let n=this.relays.get(t);return n||(n=new F7(t,{verifyEvent:this.trustedRelayURLs.has(t)?Cme:this.verifyEvent,websocketImplementation:this._WebSocket}),e!=null&&e.connectionTimeout&&(n.connectionTimeout=e.connectionTimeout),this.relays.set(t,n)),await n.connect(),n}close(t){t.map(zf).forEach(e=>{var n;(n=this.relays.get(e))==null||n.close()})}subscribeMany(t,e,n){return this.subscribeManyMap(Object.fromEntries(t.map(r=>[r,e])),n)}subscribeManyMap(t,e){this.trackRelays&&(e.receivedEvent=(f,d)=>{let h=this.seenOn.get(d);h||(h=new Set,this.seenOn.set(d,h)),h.add(f)});const n=new Set,r=[],i=Object.keys(t).length,o=[];let s=f=>{var d;o[f]=!0,o.filter(h=>h).length===i&&((d=e.oneose)==null||d.call(e),s=()=>{})};const a=[];let l=(f,d)=>{var h;s(f),a[f]=d,a.filter(p=>p).length===i&&((h=e.onclose)==null||h.call(e,a),l=()=>{})};const u=f=>{var h;if((h=e.alreadyHaveEvent)!=null&&h.call(e,f))return!0;const d=n.has(f);return n.add(f),d},c=Promise.all(Object.entries(t).map(async(f,d,h)=>{if(h.indexOf(f)!==d){l(d,"duplicate url");return}let[p,m]=f;p=zf(p);let b;try{b=await this.ensureRelay(p,{connectionTimeout:e.maxWait?Math.max(e.maxWait*.8,e.maxWait-1e3):void 0})}catch(v){l(d,(v==null?void 0:v.message)||String(v));return}let y=b.subscribe(m,{...e,oneose:()=>s(d),onclose:v=>l(d,v),alreadyHaveEvent:u,eoseTimeout:e.maxWait});r.push(y)}));return{async close(){await c,r.forEach(f=>{f.close()})}}}subscribeManyEose(t,e,n){const r=this.subscribeMany(t,e,{...n,oneose(){r.close()}});return r}async querySync(t,e,n){return new Promise(async r=>{const i=[];this.subscribeManyEose(t,[e],{...n,onevent(o){i.push(o)},onclose(o){r(i)}})})}async get(t,e,n){e.limit=1;const r=await this.querySync(t,e,n);return r.sort((i,o)=>o.created_at-i.created_at),r[0]||null}publish(t,e){return t.map(zf).map(async(n,r,i)=>i.indexOf(n)!==r?Promise.reject("duplicate url"):(await this.ensureRelay(n)).publish(e))}listConnectionStatus(){const t=new Map;return this.relays.forEach((e,n)=>t.set(n,e.connected)),t}destroy(){this.relays.forEach(t=>t.close()),this.relays=new Map}},L7;try{L7=WebSocket}catch{}var Tme=class extends Ame{constructor(){super({verifyEvent:yme,websocketImplementation:L7})}};const RE=new Tme;function FE(t,e=[]){const[n,r]=ee.useState(),i=(n==null?void 0:n.created_at)||0;return ee.useEffect(()=>{if(t){const o=RE.subscribeMany([...e,"wss://purplepag.es"],[{kinds:[0],authors:[t]}],{onevent(s){s.created_at>=i&&r(s)}});return()=>o.close()}},[t,e,i]),n}function LE(t){return ee.useMemo(()=>{if(t)return JSON.parse(t.content||"{}")||{}},[t])}function B7(t){const{pubkey:e,relays:n}=t,r=FE(e,n),i=LE(r);return _.jsxs("span",{"data-tooltip":`
Pubkey: ${e}
.

Relays: ${JSON.stringify(n)}
          `,children:[i&&_.jsxs("a",{children:["@",i.display_name||i.name||""]}),!i&&_.jsx("span",{className:"text-gray-600",children:"loading"})]})}function Mme(t){return _.jsx(_.Fragment,{children:_.jsx(Ca,{as:"span",children:_.jsx(B7,{...t.node.attrs})})})}function Ome(t){const{pubkey:e,identifier:n}=t,r=FE(e),i=LE(r);return _.jsxs("div",{className:"border rounded-md p-2 pt-4 my-2",children:[_.jsxs("div",{className:"flex flex-row",children:[_.jsx("img",{src:i==null?void 0:i.picture,className:"size-8 rounded-full"}),_.jsx("span",{className:"ml-4",children:(i==null?void 0:i.display_name)||(i==null?void 0:i.name)})]}),_.jsx("div",{className:"border rounded-md p-2 mt-2",children:_.jsx("h6",{children:n})})]})}function Dme(t){return _.jsx(Ca,{"data-drag-handle":"",draggable:t.node.type.spec.draggable,children:_.jsx("div",{className:`select-none rounded-md ${t.selected?"bg-blue-100":""}`,children:_.jsx(Ome,{...t.node.attrs})})})}const Nme=bn.create({name:"doc",topNode:!0,content:"block+"}),$me=bn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",pce(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&l&&s){const f=l.filter(d=>a.includes(d.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Ime=bn.create({name:"text",group:"inline"});class zl extends Error{}class Rme extends zl{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Fme extends zl{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class Lme extends zl{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Ou extends zl{}class P7 extends zl{constructor(e){super(`Invalid unit ${e}`)}}class pr extends zl{}class Ss extends zl{constructor(){super("Zone is an abstract class")}}const le="numeric",Bi="short",jr="long",A1={year:le,month:le,day:le},z7={year:le,month:Bi,day:le},Bme={year:le,month:Bi,day:le,weekday:Bi},j7={year:le,month:jr,day:le},q7={year:le,month:jr,day:le,weekday:jr},V7={hour:le,minute:le},U7={hour:le,minute:le,second:le},H7={hour:le,minute:le,second:le,timeZoneName:Bi},W7={hour:le,minute:le,second:le,timeZoneName:jr},J7={hour:le,minute:le,hourCycle:"h23"},K7={hour:le,minute:le,second:le,hourCycle:"h23"},Z7={hour:le,minute:le,second:le,hourCycle:"h23",timeZoneName:Bi},G7={hour:le,minute:le,second:le,hourCycle:"h23",timeZoneName:jr},Y7={year:le,month:le,day:le,hour:le,minute:le},Q7={year:le,month:le,day:le,hour:le,minute:le,second:le},X7={year:le,month:Bi,day:le,hour:le,minute:le},eR={year:le,month:Bi,day:le,hour:le,minute:le,second:le},Pme={year:le,month:Bi,day:le,weekday:Bi,hour:le,minute:le},tR={year:le,month:jr,day:le,hour:le,minute:le,timeZoneName:Bi},nR={year:le,month:jr,day:le,hour:le,minute:le,second:le,timeZoneName:Bi},rR={year:le,month:jr,day:le,weekday:jr,hour:le,minute:le,timeZoneName:jr},iR={year:le,month:jr,day:le,weekday:jr,hour:le,minute:le,second:le,timeZoneName:jr};class Ih{get type(){throw new Ss}get name(){throw new Ss}get ianaName(){return this.name}get isUniversal(){throw new Ss}offsetName(e,n){throw new Ss}formatOffset(e,n){throw new Ss}offset(e){throw new Ss}equals(e){throw new Ss}get isValid(){throw new Ss}}let v2=null;class ny extends Ih{static get instance(){return v2===null&&(v2=new ny),v2}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return hR(e,n,r)}formatOffset(e,n){return pd(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let C0={};function zme(t){return C0[t]||(C0[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),C0[t]}const jme={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function qme(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,o,s,a,l,u,c]=r;return[s,i,o,a,l,u,c]}function Vme(t,e){const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const{type:o,value:s}=n[i],a=jme[o];o==="era"?r[a]=s:$e(a)||(r[a]=parseInt(s,10))}return r}let Fp={};class es extends Ih{static create(e){return Fp[e]||(Fp[e]=new es(e)),Fp[e]}static resetCache(){Fp={},C0={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=es.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return hR(e,n,r,this.name)}formatOffset(e,n){return pd(this.offset(e),n)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const r=zme(this.name);let[i,o,s,a,l,u,c]=r.formatToParts?Vme(r,n):qme(r,n);a==="BC"&&(i=-Math.abs(i)+1);const d=iy({year:i,month:o,day:s,hour:l===24?0:l,minute:u,second:c,millisecond:0});let h=+n;const p=h%1e3;return h-=p>=0?p:1e3+p,(d-h)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let kA={};function Ume(t,e={}){const n=JSON.stringify([t,e]);let r=kA[n];return r||(r=new Intl.ListFormat(t,e),kA[n]=r),r}let mk={};function gk(t,e={}){const n=JSON.stringify([t,e]);let r=mk[n];return r||(r=new Intl.DateTimeFormat(t,e),mk[n]=r),r}let yk={};function Hme(t,e={}){const n=JSON.stringify([t,e]);let r=yk[n];return r||(r=new Intl.NumberFormat(t,e),yk[n]=r),r}let bk={};function Wme(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let o=bk[i];return o||(o=new Intl.RelativeTimeFormat(t,e),bk[i]=o),o}let jf=null;function Jme(){return jf||(jf=new Intl.DateTimeFormat().resolvedOptions().locale,jf)}let xA={};function Kme(t){let e=xA[t];if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,xA[t]=e}return e}function Zme(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=gk(t).resolvedOptions(),i=t}catch{const l=t.substring(0,n);r=gk(l).resolvedOptions(),i=l}const{numberingSystem:o,calendar:s}=r;return[i,o,s]}}function Gme(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function Yme(t){const e=[];for(let n=1;n<=12;n++){const r=Re.utc(2009,n,1);e.push(t(r))}return e}function Qme(t){const e=[];for(let n=1;n<=7;n++){const r=Re.utc(2016,11,13+n);e.push(t(r))}return e}function Lp(t,e,n,r){const i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function Xme(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class e1e{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:o,...s}=r;if(!n||Object.keys(s).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=Hme(e,a)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):jE(e,3);return Jt(n,this.padTo)}}}class t1e{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const s=-1*(e.offset/60),a=s>=0?`Etc/GMT+${s}`:`Etc/GMT${s}`;e.offset!==0&&es.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const o={...this.opts};o.timeZone=o.timeZone||i,this.dtf=gk(n,o)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class n1e{constructor(e,n,r){this.opts={style:"long",...r},!n&&fR()&&(this.rtf=Wme(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):x1e(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const r1e={firstDay:1,minimalDays:4,weekend:[6,7]};class ct{static fromOpts(e){return ct.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,r,i,o=!1){const s=e||zt.defaultLocale,a=s||(o?"en-US":Jme()),l=n||zt.defaultNumberingSystem,u=r||zt.defaultOutputCalendar,c=vk(i)||zt.defaultWeekSettings;return new ct(a,l,u,c,s)}static resetCache(){jf=null,mk={},yk={},bk={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return ct.create(e,n,r,i)}constructor(e,n,r,i,o){const[s,a,l]=Zme(e);this.locale=s,this.numberingSystem=n||a||null,this.outputCalendar=r||l||null,this.weekSettings=i,this.intl=Gme(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Xme(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:ct.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,vk(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return Lp(this,e,gR,()=>{const r=n?{month:e,day:"numeric"}:{month:e},i=n?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=Yme(o=>this.extract(o,r,"month"))),this.monthsCache[i][e]})}weekdays(e,n=!1){return Lp(this,e,vR,()=>{const r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=Qme(o=>this.extract(o,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Lp(this,void 0,()=>wR,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Re.utc(2016,11,13,9),Re.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Lp(this,e,kR,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[Re.utc(-40,1,1),Re.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){const i=this.dtFormatter(e,n),o=i.formatToParts(),s=o.find(a=>a.type.toLowerCase()===r);return s?s.value:null}numberFormatter(e={}){return new e1e(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new t1e(e,this.intl,n)}relFormatter(e={}){return new n1e(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Ume(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:dR()?Kme(this.locale):r1e}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let w2=null;class ir extends Ih{static get utcInstance(){return w2===null&&(w2=new ir(0)),w2}static instance(e){return e===0?ir.utcInstance:new ir(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new ir(oy(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${pd(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${pd(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return pd(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class i1e extends Ih{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function js(t,e){if($e(t)||t===null)return e;if(t instanceof Ih)return t;if(a1e(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?ny.instance:n==="utc"||n==="gmt"?ir.utcInstance:ir.parseSpecifier(n)||es.create(t)}else return wl(t)?ir.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new i1e(t)}let EA=()=>Date.now(),SA="system",CA=null,_A=null,AA=null,TA=60,MA,OA=null;class zt{static get now(){return EA}static set now(e){EA=e}static set defaultZone(e){SA=e}static get defaultZone(){return js(SA,ny.instance)}static get defaultLocale(){return CA}static set defaultLocale(e){CA=e}static get defaultNumberingSystem(){return _A}static set defaultNumberingSystem(e){_A=e}static get defaultOutputCalendar(){return AA}static set defaultOutputCalendar(e){AA=e}static get defaultWeekSettings(){return OA}static set defaultWeekSettings(e){OA=vk(e)}static get twoDigitCutoffYear(){return TA}static set twoDigitCutoffYear(e){TA=e%100}static get throwOnInvalid(){return MA}static set throwOnInvalid(e){MA=e}static resetCaches(){ct.resetCache(),es.resetCache()}}class Ti{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const oR=[0,31,59,90,120,151,181,212,243,273,304,334],sR=[0,31,60,91,121,152,182,213,244,274,305,335];function ai(t,e){return new Ti("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function BE(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function aR(t,e,n){return n+(Rh(t)?sR:oR)[e-1]}function lR(t,e){const n=Rh(t)?sR:oR,r=n.findIndex(o=>o<e),i=e-n[r];return{month:r+1,day:i}}function PE(t,e){return(t-e+7)%7+1}function T1(t,e=4,n=1){const{year:r,month:i,day:o}=t,s=aR(r,i,o),a=PE(BE(r,i,o),n);let l=Math.floor((s-a+14-e)/7),u;return l<1?(u=r-1,l=ah(u,e,n)):l>ah(r,e,n)?(u=r+1,l=1):u=r,{weekYear:u,weekNumber:l,weekday:a,...sy(t)}}function DA(t,e=4,n=1){const{weekYear:r,weekNumber:i,weekday:o}=t,s=PE(BE(r,1,e),n),a=Wu(r);let l=i*7+o-s-7+e,u;l<1?(u=r-1,l+=Wu(u)):l>a?(u=r+1,l-=Wu(r)):u=r;const{month:c,day:f}=lR(u,l);return{year:u,month:c,day:f,...sy(t)}}function k2(t){const{year:e,month:n,day:r}=t,i=aR(e,n,r);return{year:e,ordinal:i,...sy(t)}}function NA(t){const{year:e,ordinal:n}=t,{month:r,day:i}=lR(e,n);return{year:e,month:r,day:i,...sy(t)}}function $A(t,e){if(!$e(t.localWeekday)||!$e(t.localWeekNumber)||!$e(t.localWeekYear)){if(!$e(t.weekday)||!$e(t.weekNumber)||!$e(t.weekYear))throw new Ou("Cannot mix locale-based week fields with ISO-based week fields");return $e(t.localWeekday)||(t.weekday=t.localWeekday),$e(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),$e(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function o1e(t,e=4,n=1){const r=ry(t.weekYear),i=li(t.weekNumber,1,ah(t.weekYear,e,n)),o=li(t.weekday,1,7);return r?i?o?!1:ai("weekday",t.weekday):ai("week",t.weekNumber):ai("weekYear",t.weekYear)}function s1e(t){const e=ry(t.year),n=li(t.ordinal,1,Wu(t.year));return e?n?!1:ai("ordinal",t.ordinal):ai("year",t.year)}function uR(t){const e=ry(t.year),n=li(t.month,1,12),r=li(t.day,1,M1(t.year,t.month));return e?n?r?!1:ai("day",t.day):ai("month",t.month):ai("year",t.year)}function cR(t){const{hour:e,minute:n,second:r,millisecond:i}=t,o=li(e,0,23)||e===24&&n===0&&r===0&&i===0,s=li(n,0,59),a=li(r,0,59),l=li(i,0,999);return o?s?a?l?!1:ai("millisecond",i):ai("second",r):ai("minute",n):ai("hour",e)}function $e(t){return typeof t>"u"}function wl(t){return typeof t=="number"}function ry(t){return typeof t=="number"&&t%1===0}function a1e(t){return typeof t=="string"}function l1e(t){return Object.prototype.toString.call(t)==="[object Date]"}function fR(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function dR(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function u1e(t){return Array.isArray(t)?t:[t]}function IA(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{const o=[e(i),i];return r&&n(r[0],o[0])===r[0]?r:o},null)[1]}function c1e(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Ac(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vk(t){if(t==null)return null;if(typeof t!="object")throw new pr("Week settings must be an object");if(!li(t.firstDay,1,7)||!li(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!li(e,1,7)))throw new pr("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function li(t,e,n){return ry(t)&&t>=e&&t<=n}function f1e(t,e){return t-e*Math.floor(t/e)}function Jt(t,e=2){const n=t<0;let r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Is(t){if(!($e(t)||t===null||t===""))return parseInt(t,10)}function Na(t){if(!($e(t)||t===null||t===""))return parseFloat(t)}function zE(t){if(!($e(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function jE(t,e,n=!1){const r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function Rh(t){return t%4===0&&(t%100!==0||t%400===0)}function Wu(t){return Rh(t)?366:365}function M1(t,e){const n=f1e(e-1,12)+1,r=t+(e-n)/12;return n===2?Rh(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function iy(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function RA(t,e,n){return-PE(BE(t,1,e),n)+e-1}function ah(t,e=4,n=1){const r=RA(t,e,n),i=RA(t+1,e,n);return(Wu(t)-r+i)/7}function wk(t){return t>99?t:t>zt.twoDigitCutoffYear?1900+t:2e3+t}function hR(t,e,n,r=null){const i=new Date(t),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(o.timeZone=r);const s={timeZoneName:e,...o},a=new Intl.DateTimeFormat(n,s).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function oy(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function pR(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new pr(`Invalid unit value ${t}`);return e}function O1(t,e){const n={};for(const r in t)if(Ac(t,r)){const i=t[r];if(i==null)continue;n[e(r)]=pR(i)}return n}function pd(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Jt(n,2)}:${Jt(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Jt(n,2)}${Jt(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function sy(t){return c1e(t,["hour","minute","second","millisecond"])}const d1e=["January","February","March","April","May","June","July","August","September","October","November","December"],mR=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h1e=["J","F","M","A","M","J","J","A","S","O","N","D"];function gR(t){switch(t){case"narrow":return[...h1e];case"short":return[...mR];case"long":return[...d1e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const yR=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],bR=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],p1e=["M","T","W","T","F","S","S"];function vR(t){switch(t){case"narrow":return[...p1e];case"short":return[...bR];case"long":return[...yR];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const wR=["AM","PM"],m1e=["Before Christ","Anno Domini"],g1e=["BC","AD"],y1e=["B","A"];function kR(t){switch(t){case"narrow":return[...y1e];case"short":return[...g1e];case"long":return[...m1e];default:return null}}function b1e(t){return wR[t.hour<12?0:1]}function v1e(t,e){return vR(e)[t.weekday-1]}function w1e(t,e){return gR(e)[t.month-1]}function k1e(t,e){return kR(e)[t.year<0?0:1]}function x1e(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&o){const f=t==="days";switch(e){case 1:return f?"tomorrow":`next ${i[t][0]}`;case-1:return f?"yesterday":`last ${i[t][0]}`;case 0:return f?"today":`this ${i[t][0]}`}}const s=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,u=i[t],c=r?l?u[1]:u[2]||u[1]:l?i[t][0]:t;return s?`${a} ${c} ago`:`in ${a} ${c}`}function FA(t,e){let n="";for(const r of t)r.literal?n+=r.val:n+=e(r.val);return n}const E1e={D:A1,DD:z7,DDD:j7,DDDD:q7,t:V7,tt:U7,ttt:H7,tttt:W7,T:J7,TT:K7,TTT:Z7,TTTT:G7,f:Y7,ff:X7,fff:tR,ffff:rR,F:Q7,FF:eR,FFF:nR,FFFF:iR};class jn{static create(e,n={}){return new jn(e,n)}static parseFormat(e){let n=null,r="",i=!1;const o=[];for(let s=0;s<e.length;s++){const a=e.charAt(s);a==="'"?(r.length>0&&o.push({literal:i||/^\s+$/.test(r),val:r}),n=null,r="",i=!i):i||a===n?r+=a:(r.length>0&&o.push({literal:/^\s+$/.test(r),val:r}),r=a,n=a)}return r.length>0&&o.push({literal:i||/^\s+$/.test(r),val:r}),o}static macroTokenToFormatOpts(e){return E1e[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return Jt(e,n);const r={...this.opts};return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(h,p)=>this.loc.extract(e,h,p),s=h=>e.isOffsetFixed&&e.offset===0&&h.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,h.format):"",a=()=>r?b1e(e):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(h,p)=>r?w1e(e,h):o(p?{month:h}:{month:h,day:"numeric"},"month"),u=(h,p)=>r?v1e(e,h):o(p?{weekday:h}:{weekday:h,month:"long",day:"numeric"},"weekday"),c=h=>{const p=jn.macroTokenToFormatOpts(h);return p?this.formatWithSystemDefault(e,p):h},f=h=>r?k1e(e,h):o({era:h},"era"),d=h=>{switch(h){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return s({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return s({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return s({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?o({day:"numeric"},"day"):this.num(e.day);case"dd":return i?o({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return i?o({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?o({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?o({month:"numeric"},"month"):this.num(e.month);case"MM":return i?o({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?o({year:"numeric"},"year"):this.num(e.year);case"yy":return i?o({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?o({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?o({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(h)}};return FA(jn.parseFormat(n),d)}formatDurationFromString(e,n){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=l=>u=>{const c=r(u);return c?this.num(l.get(c),u.length):u},o=jn.parseFormat(n),s=o.reduce((l,{literal:u,val:c})=>u?l:l.concat(c),[]),a=e.shiftTo(...s.map(r).filter(l=>l));return FA(o,i(a))}}const xR=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Wc(...t){const e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function Jc(...t){return e=>t.reduce(([n,r,i],o)=>{const[s,a,l]=o(e,i);return[{...n,...s},a||r,l]},[{},null,1]).slice(0,2)}function Kc(t,...e){if(t==null)return[null,null];for(const[n,r]of e){const i=n.exec(t);if(i)return r(i)}return[null,null]}function ER(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=Is(e[n+i]);return[r,null,n+i]}}const SR=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,S1e=`(?:${SR.source}?(?:\\[(${xR.source})\\])?)?`,qE=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,CR=RegExp(`${qE.source}${S1e}`),VE=RegExp(`(?:T${CR.source})?`),C1e=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,_1e=/(\d{4})-?W(\d\d)(?:-?(\d))?/,A1e=/(\d{4})-?(\d{3})/,T1e=ER("weekYear","weekNumber","weekDay"),M1e=ER("year","ordinal"),O1e=/(\d{4})-(\d\d)-(\d\d)/,_R=RegExp(`${qE.source} ?(?:${SR.source}|(${xR.source}))?`),D1e=RegExp(`(?: ${_R.source})?`);function Ju(t,e,n){const r=t[e];return $e(r)?n:Is(r)}function N1e(t,e){return[{year:Ju(t,e),month:Ju(t,e+1,1),day:Ju(t,e+2,1)},null,e+3]}function Zc(t,e){return[{hours:Ju(t,e,0),minutes:Ju(t,e+1,0),seconds:Ju(t,e+2,0),milliseconds:zE(t[e+3])},null,e+4]}function Fh(t,e){const n=!t[e]&&!t[e+1],r=oy(t[e+1],t[e+2]),i=n?null:ir.instance(r);return[{},i,e+3]}function Lh(t,e){const n=t[e]?es.create(t[e]):null;return[{},n,e+1]}const $1e=RegExp(`^T?${qE.source}$`),I1e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function R1e(t){const[e,n,r,i,o,s,a,l,u]=t,c=e[0]==="-",f=l&&l[0]==="-",d=(h,p=!1)=>h!==void 0&&(p||h&&c)?-h:h;return[{years:d(Na(n)),months:d(Na(r)),weeks:d(Na(i)),days:d(Na(o)),hours:d(Na(s)),minutes:d(Na(a)),seconds:d(Na(l),l==="-0"),milliseconds:d(zE(u),f)}]}const F1e={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function UE(t,e,n,r,i,o,s){const a={year:e.length===2?wk(Is(e)):Is(e),month:mR.indexOf(n)+1,day:Is(r),hour:Is(i),minute:Is(o)};return s&&(a.second=Is(s)),t&&(a.weekday=t.length>3?yR.indexOf(t)+1:bR.indexOf(t)+1),a}const L1e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function B1e(t){const[,e,n,r,i,o,s,a,l,u,c,f]=t,d=UE(e,i,r,n,o,s,a);let h;return l?h=F1e[l]:u?h=0:h=oy(c,f),[d,new ir(h)]}function P1e(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const z1e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,j1e=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,q1e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function LA(t){const[,e,n,r,i,o,s,a]=t;return[UE(e,i,r,n,o,s,a),ir.utcInstance]}function V1e(t){const[,e,n,r,i,o,s,a]=t;return[UE(e,a,n,r,i,o,s),ir.utcInstance]}const U1e=Wc(C1e,VE),H1e=Wc(_1e,VE),W1e=Wc(A1e,VE),J1e=Wc(CR),AR=Jc(N1e,Zc,Fh,Lh),K1e=Jc(T1e,Zc,Fh,Lh),Z1e=Jc(M1e,Zc,Fh,Lh),G1e=Jc(Zc,Fh,Lh);function Y1e(t){return Kc(t,[U1e,AR],[H1e,K1e],[W1e,Z1e],[J1e,G1e])}function Q1e(t){return Kc(P1e(t),[L1e,B1e])}function X1e(t){return Kc(t,[z1e,LA],[j1e,LA],[q1e,V1e])}function ege(t){return Kc(t,[I1e,R1e])}const tge=Jc(Zc);function nge(t){return Kc(t,[$1e,tge])}const rge=Wc(O1e,D1e),ige=Wc(_R),oge=Jc(Zc,Fh,Lh);function sge(t){return Kc(t,[rge,AR],[ige,oge])}const BA="Invalid Duration",TR={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},age={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...TR},ei=146097/400,tu=146097/4800,lge={years:{quarters:4,months:12,weeks:ei/7,days:ei,hours:ei*24,minutes:ei*24*60,seconds:ei*24*60*60,milliseconds:ei*24*60*60*1e3},quarters:{months:3,weeks:ei/28,days:ei/4,hours:ei*24/4,minutes:ei*24*60/4,seconds:ei*24*60*60/4,milliseconds:ei*24*60*60*1e3/4},months:{weeks:tu/7,days:tu,hours:tu*24,minutes:tu*24*60,seconds:tu*24*60*60,milliseconds:tu*24*60*60*1e3},...TR},ol=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],uge=ol.slice(0).reverse();function Cs(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Je(r)}function MR(t,e){let n=e.milliseconds??0;for(const r of uge.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function PA(t,e){const n=MR(t,e)<0?-1:1;ol.reduceRight((r,i)=>{if($e(e[i]))return r;if(r){const o=e[r]*n,s=t[i][r],a=Math.floor(o/s);e[i]+=a*n,e[r]-=a*s*n}return i},null),ol.reduce((r,i)=>{if($e(e[i]))return r;if(r){const o=e[r]%1;e[r]-=o,e[i]+=o*t[r][i]}return i},null)}function cge(t){const e={};for(const[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}class Je{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let r=n?lge:age;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||ct.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return Je.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new pr(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Je({values:O1(e,Je.normalizeUnit),loc:ct.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(wl(e))return Je.fromMillis(e);if(Je.isDuration(e))return e;if(typeof e=="object")return Je.fromObject(e);throw new pr(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[r]=ege(e);return r?Je.fromObject(r,n):Je.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[r]=nge(e);return r?Je.fromObject(r,n):Je.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new pr("need to specify a reason the Duration is invalid");const r=e instanceof Ti?e:new Ti(e,n);if(zt.throwOnInvalid)throw new Lme(r);return new Je({invalid:r})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new P7(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?jn.create(this.loc,r).formatDurationFromString(this,e):BA}toHuman(e={}){if(!this.isValid)return BA;const n=ol.map(r=>{const i=this.values[r];return $e(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=jE(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Re.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?MR(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=Je.fromDurationLike(e),r={};for(const i of ol)(Ac(n.values,i)||Ac(this.values,i))&&(r[i]=n.get(i)+this.get(i));return Cs(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const n=Je.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=pR(e(this.values[r],r));return Cs(this,{values:n},!0)}get(e){return this[Je.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...O1(e,Je.normalizeUnit)};return Cs(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const s={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return Cs(this,s)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return PA(this.matrix,e),Cs(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=cge(this.normalize().shiftToAll().toObject());return Cs(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(s=>Je.normalizeUnit(s));const n={},r={},i=this.toObject();let o;for(const s of ol)if(e.indexOf(s)>=0){o=s;let a=0;for(const u in r)a+=this.matrix[u][s]*r[u],r[u]=0;wl(i[s])&&(a+=i[s]);const l=Math.trunc(a);n[s]=l,r[s]=(a*1e3-l*1e3)/1e3}else wl(i[s])&&(r[s]=i[s]);for(const s in r)r[s]!==0&&(n[o]+=s===o?r[s]:r[s]/this.matrix[o][s]);return PA(this.matrix,n),Cs(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return Cs(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of ol)if(!n(this.values[r],e.values[r]))return!1;return!0}}const nu="Invalid Interval";function fge(t,e){return!t||!t.isValid?$t.invalid("missing or invalid start"):!e||!e.isValid?$t.invalid("missing or invalid end"):e<t?$t.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class $t{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new pr("need to specify a reason the Interval is invalid");const r=e instanceof Ti?e:new Ti(e,n);if(zt.throwOnInvalid)throw new Fme(r);return new $t({invalid:r})}static fromDateTimes(e,n){const r=pf(e),i=pf(n),o=fge(r,i);return o??new $t({start:r,end:i})}static after(e,n){const r=Je.fromDurationLike(n),i=pf(e);return $t.fromDateTimes(i,i.plus(r))}static before(e,n){const r=Je.fromDurationLike(n),i=pf(e);return $t.fromDateTimes(i.minus(r),i)}static fromISO(e,n){const[r,i]=(e||"").split("/",2);if(r&&i){let o,s;try{o=Re.fromISO(r,n),s=o.isValid}catch{s=!1}let a,l;try{a=Re.fromISO(i,n),l=a.isValid}catch{l=!1}if(s&&l)return $t.fromDateTimes(o,a);if(s){const u=Je.fromISO(i,n);if(u.isValid)return $t.after(o,u)}else if(l){const u=Je.fromISO(r,n);if(u.isValid)return $t.before(a,u)}}return $t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(e,n);let i;return n!=null&&n.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,n),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?$t.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(pf).filter(s=>this.contains(s)).sort((s,a)=>s.toMillis()-a.toMillis()),r=[];let{s:i}=this,o=0;for(;i<this.e;){const s=n[o]||this.e,a=+s>+this.e?this.e:s;r.push($t.fromDateTimes(i,a)),i=a,o+=1}return r}splitBy(e){const n=Je.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,o;const s=[];for(;r<this.e;){const a=this.start.plus(n.mapUnits(l=>l*i));o=+a>+this.e?this.e:a,s.push($t.fromDateTimes(r,o)),r=o,i+=1}return s}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:$t.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return $t.fromDateTimes(n,r)}static merge(e){const[n,r]=e.sort((i,o)=>i.s-o.s).reduce(([i,o],s)=>o?o.overlaps(s)||o.abutsStart(s)?[i,o.union(s)]:[i.concat([o]),s]:[i,s],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0;const i=[],o=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),s=Array.prototype.concat(...o),a=s.sort((l,u)=>l.time-u.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?n=l.time:(n&&+n!=+l.time&&i.push($t.fromDateTimes(n,l.time)),n=null);return $t.merge(i)}difference(...e){return $t.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:nu}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=A1,n={}){return this.isValid?jn.create(this.s.loc.clone(n),e).formatInterval(this):nu}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:nu}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:nu}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:nu}toFormat(e,{separator:n="  "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:nu}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):Je.invalid(this.invalidReason)}mapEndpoints(e){return $t.fromDateTimes(e(this.s),e(this.e))}}class Bp{static hasDST(e=zt.defaultZone){const n=Re.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return es.isValidZone(e)}static normalizeZone(e){return js(e,zt.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||ct.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||ct.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||ct.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||ct.create(n,r,o)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||ct.create(n,r,o)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||ct.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||ct.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return ct.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return ct.create(n,null,"gregory").eras(e)}static features(){return{relative:fR(),localeWeek:dR()}}}function zA(t,e){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(Je.fromMillis(r).as("days"))}function dge(t,e,n){const r=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{const c=zA(l,u);return(c-c%7)/7}],["days",zA]],i={},o=t;let s,a;for(const[l,u]of r)n.indexOf(l)>=0&&(s=l,i[l]=u(t,e),a=o.plus(i),a>e?(i[l]--,t=o.plus(i),t>e&&(a=t,i[l]--,t=o.plus(i))):t=a);return[t,i,a,s]}function hge(t,e,n,r){let[i,o,s,a]=dge(t,e,n);const l=e-i,u=n.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);u.length===0&&(s<e&&(s=i.plus({[a]:1})),s!==i&&(o[a]=(o[a]||0)+l/(s-i)));const c=Je.fromObject(o,r);return u.length>0?Je.fromMillis(l,r).shiftTo(...u).plus(c):c}const HE={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},jA={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},pge=HE.hanidec.replace(/[\[|\]]/g,"").split("");function mge(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(t[n].search(HE.hanidec)!==-1)e+=pge.indexOf(t[n]);else for(const i in jA){const[o,s]=jA[i];r>=o&&r<=s&&(e+=r-o)}}return parseInt(e,10)}else return e}function vi({numberingSystem:t},e=""){return new RegExp(`${HE[t||"latn"]}${e}`)}const gge="missing Intl.DateTimeFormat.formatToParts support";function et(t,e=n=>n){return{regex:t,deser:([n])=>e(mge(n))}}const yge="",OR=`[ ${yge}]`,DR=new RegExp(OR,"g");function bge(t){return t.replace(/\./g,"\\.?").replace(DR,OR)}function qA(t){return t.replace(/\./g,"").replace(DR," ").toLowerCase()}function wi(t,e){return t===null?null:{regex:RegExp(t.map(bge).join("|")),deser:([n])=>t.findIndex(r=>qA(n)===qA(r))+e}}function VA(t,e){return{regex:t,deser:([,n,r])=>oy(n,r),groups:e}}function Pp(t){return{regex:t,deser:([e])=>e}}function vge(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function wge(t,e){const n=vi(e),r=vi(e,"{2}"),i=vi(e,"{3}"),o=vi(e,"{4}"),s=vi(e,"{6}"),a=vi(e,"{1,2}"),l=vi(e,"{1,3}"),u=vi(e,"{1,6}"),c=vi(e,"{1,9}"),f=vi(e,"{2,4}"),d=vi(e,"{4,6}"),h=b=>({regex:RegExp(vge(b.val)),deser:([y])=>y,literal:!0}),m=(b=>{if(t.literal)return h(b);switch(b.val){case"G":return wi(e.eras("short"),0);case"GG":return wi(e.eras("long"),0);case"y":return et(u);case"yy":return et(f,wk);case"yyyy":return et(o);case"yyyyy":return et(d);case"yyyyyy":return et(s);case"M":return et(a);case"MM":return et(r);case"MMM":return wi(e.months("short",!0),1);case"MMMM":return wi(e.months("long",!0),1);case"L":return et(a);case"LL":return et(r);case"LLL":return wi(e.months("short",!1),1);case"LLLL":return wi(e.months("long",!1),1);case"d":return et(a);case"dd":return et(r);case"o":return et(l);case"ooo":return et(i);case"HH":return et(r);case"H":return et(a);case"hh":return et(r);case"h":return et(a);case"mm":return et(r);case"m":return et(a);case"q":return et(a);case"qq":return et(r);case"s":return et(a);case"ss":return et(r);case"S":return et(l);case"SSS":return et(i);case"u":return Pp(c);case"uu":return Pp(a);case"uuu":return et(n);case"a":return wi(e.meridiems(),0);case"kkkk":return et(o);case"kk":return et(f,wk);case"W":return et(a);case"WW":return et(r);case"E":case"c":return et(n);case"EEE":return wi(e.weekdays("short",!1),1);case"EEEE":return wi(e.weekdays("long",!1),1);case"ccc":return wi(e.weekdays("short",!0),1);case"cccc":return wi(e.weekdays("long",!0),1);case"Z":case"ZZ":return VA(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return VA(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return Pp(/[a-z_+-/]{1,256}?/i);case" ":return Pp(/[^\S\n\r]/);default:return h(b)}})(t)||{invalidReason:gge};return m.token=t,m}const kge={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function xge(t,e,n){const{type:r,value:i}=t;if(r==="literal"){const l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}const o=e[r];let s=r;r==="hour"&&(e.hour12!=null?s=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?s="hour12":s="hour24":s=n.hour12?"hour12":"hour24");let a=kge[s];if(typeof a=="object"&&(a=a[o]),a)return{literal:!1,val:a}}function Ege(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function Sge(t,e,n){const r=t.match(e);if(r){const i={};let o=1;for(const s in n)if(Ac(n,s)){const a=n[s],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(o,o+l))),o+=l}return[r,i]}else return[r,{}]}function Cge(t){const e=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return $e(t.z)||(n=es.create(t.z)),$e(t.Z)||(n||(n=new ir(t.Z)),r=t.Z),$e(t.q)||(t.M=(t.q-1)*3+1),$e(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),$e(t.u)||(t.S=zE(t.u)),[Object.keys(t).reduce((o,s)=>{const a=e(s);return a&&(o[a]=t[s]),o},{}),n,r]}let x2=null;function _ge(){return x2||(x2=Re.fromMillis(1555555555555)),x2}function Age(t,e){if(t.literal)return t;const n=jn.macroTokenToFormatOpts(t.val),r=IR(n,e);return r==null||r.includes(void 0)?t:r}function NR(t,e){return Array.prototype.concat(...t.map(n=>Age(n,e)))}function $R(t,e,n){const r=NR(jn.parseFormat(n),t),i=r.map(s=>wge(s,t)),o=i.find(s=>s.invalidReason);if(o)return{input:e,tokens:r,invalidReason:o.invalidReason};{const[s,a]=Ege(i),l=RegExp(s,"i"),[u,c]=Sge(e,l,a),[f,d,h]=c?Cge(c):[null,null,void 0];if(Ac(c,"a")&&Ac(c,"H"))throw new Ou("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:l,rawMatches:u,matches:c,result:f,zone:d,specificOffset:h}}}function Tge(t,e,n){const{result:r,zone:i,specificOffset:o,invalidReason:s}=$R(t,e,n);return[r,i,o,s]}function IR(t,e){if(!t)return null;const r=jn.create(e,t).dtFormatter(_ge()),i=r.formatToParts(),o=r.resolvedOptions();return i.map(s=>xge(s,t,o))}const E2="Invalid DateTime",UA=864e13;function zp(t){return new Ti("unsupported zone",`the zone "${t.name}" is not supported`)}function S2(t){return t.weekData===null&&(t.weekData=T1(t.c)),t.weekData}function C2(t){return t.localWeekData===null&&(t.localWeekData=T1(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function $a(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Re({...n,...e,old:n})}function RR(t,e,n){let r=t-e*60*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const o=n.offset(r);return i===o?[r,i]:[t-Math.min(i,o)*60*1e3,Math.max(i,o)]}function jp(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function _0(t,e,n){return RR(iy(t),e,n)}function HA(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,o={...t.c,year:r,month:i,day:Math.min(t.c.day,M1(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},s=Je.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=iy(o);let[l,u]=RR(a,n,t.zone);return s!==0&&(l+=s,u=t.zone.offset(l)),{ts:l,o:u}}function hf(t,e,n,r,i,o){const{setZone:s,zone:a}=n;if(t&&Object.keys(t).length!==0||e){const l=e||a,u=Re.fromObject(t,{...n,zone:l,specificOffset:o});return s?u:u.setZone(a)}else return Re.invalid(new Ti("unparsable",`the input "${i}" can't be parsed as ${r}`))}function qp(t,e,n=!0){return t.isValid?jn.create(ct.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function _2(t,e){const n=t.c.year>9999||t.c.year<0;let r="";return n&&t.c.year>=0&&(r+="+"),r+=Jt(t.c.year,n?6:4),e?(r+="-",r+=Jt(t.c.month),r+="-",r+=Jt(t.c.day)):(r+=Jt(t.c.month),r+=Jt(t.c.day)),r}function WA(t,e,n,r,i,o){let s=Jt(t.c.hour);return e?(s+=":",s+=Jt(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(s+=":")):s+=Jt(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(s+=Jt(t.c.second),(t.c.millisecond!==0||!r)&&(s+=".",s+=Jt(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!o?s+="Z":t.o<0?(s+="-",s+=Jt(Math.trunc(-t.o/60)),s+=":",s+=Jt(Math.trunc(-t.o%60))):(s+="+",s+=Jt(Math.trunc(t.o/60)),s+=":",s+=Jt(Math.trunc(t.o%60)))),o&&(s+="["+t.zone.ianaName+"]"),s}const FR={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Mge={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Oge={ordinal:1,hour:0,minute:0,second:0,millisecond:0},LR=["year","month","day","hour","minute","second","millisecond"],Dge=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Nge=["year","ordinal","hour","minute","second","millisecond"];function $ge(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new P7(t);return e}function JA(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return $ge(t)}}function KA(t,e){const n=js(e.zone,zt.defaultZone),r=ct.fromObject(e),i=zt.now();let o,s;if($e(t.year))o=i;else{for(const u of LR)$e(t[u])&&(t[u]=FR[u]);const a=uR(t)||cR(t);if(a)return Re.invalid(a);const l=n.offset(i);[o,s]=_0(t,l,n)}return new Re({ts:o,zone:n,loc:r,o:s})}function ZA(t,e,n){const r=$e(n.round)?!0:n.round,i=(s,a)=>(s=jE(s,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(s,a)),o=s=>n.calendary?e.hasSame(t,s)?0:e.startOf(s).diff(t.startOf(s),s).get(s):e.diff(t,s).get(s);if(n.unit)return i(o(n.unit),n.unit);for(const s of n.units){const a=o(s);if(Math.abs(a)>=1)return i(a,s)}return i(t>e?-0:0,n.units[n.units.length-1])}function GA(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}class Re{constructor(e){const n=e.zone||zt.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Ti("invalid input"):null)||(n.isValid?null:zp(n));this.ts=$e(e.ts)?zt.now():e.ts;let i=null,o=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,o]=[e.old.c,e.old.o];else{const a=n.offset(this.ts);i=jp(this.ts,a),r=Number.isNaN(i.year)?new Ti("invalid input"):null,i=r?null:i,o=r?null:a}this._zone=n,this.loc=e.loc||ct.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=o,this.isLuxonDateTime=!0}static now(){return new Re({})}static local(){const[e,n]=GA(arguments),[r,i,o,s,a,l,u]=n;return KA({year:r,month:i,day:o,hour:s,minute:a,second:l,millisecond:u},e)}static utc(){const[e,n]=GA(arguments),[r,i,o,s,a,l,u]=n;return e.zone=ir.utcInstance,KA({year:r,month:i,day:o,hour:s,minute:a,second:l,millisecond:u},e)}static fromJSDate(e,n={}){const r=l1e(e)?e.valueOf():NaN;if(Number.isNaN(r))return Re.invalid("invalid input");const i=js(n.zone,zt.defaultZone);return i.isValid?new Re({ts:r,zone:i,loc:ct.fromObject(n)}):Re.invalid(zp(i))}static fromMillis(e,n={}){if(wl(e))return e<-UA||e>UA?Re.invalid("Timestamp out of range"):new Re({ts:e,zone:js(n.zone,zt.defaultZone),loc:ct.fromObject(n)});throw new pr(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(wl(e))return new Re({ts:e*1e3,zone:js(n.zone,zt.defaultZone),loc:ct.fromObject(n)});throw new pr("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const r=js(n.zone,zt.defaultZone);if(!r.isValid)return Re.invalid(zp(r));const i=ct.fromObject(n),o=O1(e,JA),{minDaysInFirstWeek:s,startOfWeek:a}=$A(o,i),l=zt.now(),u=$e(n.specificOffset)?r.offset(l):n.specificOffset,c=!$e(o.ordinal),f=!$e(o.year),d=!$e(o.month)||!$e(o.day),h=f||d,p=o.weekYear||o.weekNumber;if((h||c)&&p)throw new Ou("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&c)throw new Ou("Can't mix ordinal dates with month/day");const m=p||o.weekday&&!h;let b,y,v=jp(l,u);m?(b=Dge,y=Mge,v=T1(v,s,a)):c?(b=Nge,y=Oge,v=k2(v)):(b=LR,y=FR);let w=!1;for(const N of b){const C=o[N];$e(C)?w?o[N]=y[N]:o[N]=v[N]:w=!0}const g=m?o1e(o,s,a):c?s1e(o):uR(o),x=g||cR(o);if(x)return Re.invalid(x);const k=m?DA(o,s,a):c?NA(o):o,[E,D]=_0(k,u,r),O=new Re({ts:E,zone:r,o:D,loc:i});return o.weekday&&h&&e.weekday!==O.weekday?Re.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${O.toISO()}`):O}static fromISO(e,n={}){const[r,i]=Y1e(e);return hf(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[r,i]=Q1e(e);return hf(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[r,i]=X1e(e);return hf(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if($e(e)||$e(n))throw new pr("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:o=null}=r,s=ct.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0}),[a,l,u,c]=Tge(s,e,n);return c?Re.invalid(c):hf(a,l,r,`format ${n}`,e,u)}static fromString(e,n,r={}){return Re.fromFormat(e,n,r)}static fromSQL(e,n={}){const[r,i]=sge(e);return hf(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new pr("need to specify a reason the DateTime is invalid");const r=e instanceof Ti?e:new Ti(e,n);if(zt.throwOnInvalid)throw new Rme(r);return new Re({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const r=IR(e,ct.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return NR(jn.parseFormat(e),ct.fromObject(n)).map(i=>i.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?S2(this).weekYear:NaN}get weekNumber(){return this.isValid?S2(this).weekNumber:NaN}get weekday(){return this.isValid?S2(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?C2(this).weekday:NaN}get localWeekNumber(){return this.isValid?C2(this).weekNumber:NaN}get localWeekYear(){return this.isValid?C2(this).weekYear:NaN}get ordinal(){return this.isValid?k2(this.c).ordinal:NaN}get monthShort(){return this.isValid?Bp.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Bp.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Bp.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Bp.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,r=iy(this.c),i=this.zone.offset(r-e),o=this.zone.offset(r+e),s=this.zone.offset(r-i*n),a=this.zone.offset(r-o*n);if(s===a)return[this];const l=r-s*n,u=r-a*n,c=jp(l,s),f=jp(u,a);return c.hour===f.hour&&c.minute===f.minute&&c.second===f.second&&c.millisecond===f.millisecond?[$a(this,{ts:l}),$a(this,{ts:u})]:[this]}get isInLeapYear(){return Rh(this.year)}get daysInMonth(){return M1(this.year,this.month)}get daysInYear(){return this.isValid?Wu(this.year):NaN}get weeksInWeekYear(){return this.isValid?ah(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?ah(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:r,calendar:i}=jn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(ir.instance(e),n)}toLocal(){return this.setZone(zt.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=js(e,zt.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){const o=e.offset(this.ts),s=this.toObject();[i]=_0(s,o,e)}return $a(this,{ts:i,zone:e})}else return Re.invalid(zp(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return $a(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=O1(e,JA),{minDaysInFirstWeek:r,startOfWeek:i}=$A(n,this.loc),o=!$e(n.weekYear)||!$e(n.weekNumber)||!$e(n.weekday),s=!$e(n.ordinal),a=!$e(n.year),l=!$e(n.month)||!$e(n.day),u=a||l,c=n.weekYear||n.weekNumber;if((u||s)&&c)throw new Ou("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&s)throw new Ou("Can't mix ordinal dates with month/day");let f;o?f=DA({...T1(this.c,r,i),...n},r,i):$e(n.ordinal)?(f={...this.toObject(),...n},$e(n.day)&&(f.day=Math.min(M1(f.year,f.month),f.day))):f=NA({...k2(this.c),...n});const[d,h]=_0(f,this.o,this.zone);return $a(this,{ts:d,o:h})}plus(e){if(!this.isValid)return this;const n=Je.fromDurationLike(e);return $a(this,HA(this,n))}minus(e){if(!this.isValid)return this;const n=Je.fromDurationLike(e).negate();return $a(this,HA(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=Je.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const o=this.loc.getStartOfWeek(),{weekday:s}=this;s<o&&(r.weekNumber=this.weekNumber-1),r.weekday=o}else r.weekday=1;if(i==="quarters"){const o=Math.ceil(this.month/3);r.month=(o-1)*3+1}return this.set(r)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?jn.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):E2}toLocaleString(e=A1,n={}){return this.isValid?jn.create(this.loc.clone(n),e).formatDateTime(this):E2}toLocaleParts(e={}){return this.isValid?jn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;const s=e==="extended";let a=_2(this,s);return a+="T",a+=WA(this,s,n,r,i,o),a}toISODate({format:e="extended"}={}){return this.isValid?_2(this,e==="extended"):null}toISOWeekDate(){return qp(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:o=!1,format:s="extended"}={}){return this.isValid?(i?"T":"")+WA(this,s==="extended",n,e,r,o):null}toRFC2822(){return qp(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return qp(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?_2(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),qp(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():E2}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return Je.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},o=u1e(n).map(Je.normalizeUnit),s=e.valueOf()>this.valueOf(),a=s?this:e,l=s?e:this,u=hge(a,l,o,i);return s?u.negate():u}diffNow(e="milliseconds",n={}){return this.diff(Re.now(),e,n)}until(e){return this.isValid?$t.fromDateTimes(this,e):this}hasSame(e,n,r){if(!this.isValid)return!1;const i=e.valueOf(),o=this.setZone(e.zone,{keepLocalTime:!0});return o.startOf(n,r)<=i&&i<=o.endOf(n,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||Re.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],o=e.unit;return Array.isArray(e.unit)&&(i=e.unit,o=void 0),ZA(n,this.plus(r),{...e,numeric:"always",units:i,unit:o})}toRelativeCalendar(e={}){return this.isValid?ZA(e.base||Re.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Re.isDateTime))throw new pr("min requires all arguments be DateTimes");return IA(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(Re.isDateTime))throw new pr("max requires all arguments be DateTimes");return IA(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){const{locale:i=null,numberingSystem:o=null}=r,s=ct.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});return $R(s,e,n)}static fromStringExplain(e,n,r={}){return Re.fromFormatExplain(e,n,r)}static get DATE_SHORT(){return A1}static get DATE_MED(){return z7}static get DATE_MED_WITH_WEEKDAY(){return Bme}static get DATE_FULL(){return j7}static get DATE_HUGE(){return q7}static get TIME_SIMPLE(){return V7}static get TIME_WITH_SECONDS(){return U7}static get TIME_WITH_SHORT_OFFSET(){return H7}static get TIME_WITH_LONG_OFFSET(){return W7}static get TIME_24_SIMPLE(){return J7}static get TIME_24_WITH_SECONDS(){return K7}static get TIME_24_WITH_SHORT_OFFSET(){return Z7}static get TIME_24_WITH_LONG_OFFSET(){return G7}static get DATETIME_SHORT(){return Y7}static get DATETIME_SHORT_WITH_SECONDS(){return Q7}static get DATETIME_MED(){return X7}static get DATETIME_MED_WITH_SECONDS(){return eR}static get DATETIME_MED_WITH_WEEKDAY(){return Pme}static get DATETIME_FULL(){return tR}static get DATETIME_FULL_WITH_SECONDS(){return nR}static get DATETIME_HUGE(){return rR}static get DATETIME_HUGE_WITH_SECONDS(){return iR}}function pf(t){if(Re.isDateTime(t))return t;if(t&&t.valueOf&&wl(t.valueOf()))return Re.fromJSDate(t);if(t&&typeof t=="object")return Re.fromObject(t);throw new pr(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function Ige(t){const{text:e,marks:n=[]}=t.node;return _.jsx(_.Fragment,{children:n.reduce((r,i)=>{switch(i.type){case"bold":return _.jsx("b",{children:r});case"italic":return _.jsx("i",{children:r});case"strike":return _.jsx("s",{children:r});case"code":return _.jsx("span",{className:"px-2 rounded-lg text-nowrap bg-gray-200",children:r});case"tag":return _.jsx("a",{href:"#",children:r});case"link":return _.jsx("a",{href:i.attrs.href,children:r});default:return r}},_.jsx("span",{children:e}))})}function BR(t){var e;return _.jsx(_.Fragment,{children:(e=t.node.content)==null?void 0:e.map((n,r)=>_.jsxs(tt.Fragment,{children:[n.type==="nprofile"&&_.jsx(B7,{...n.attrs}),n.type==="text"&&_.jsx(Ige,{node:n}),n.type==="hardBreak"&&_.jsx("div",{className:"mt-4"})]},n.type+r))})}function WE(t){return _.jsx("div",{className:"mt-2 ml-2",children:_.jsx(BR,{node:t.node})})}function Rge(t){var e;return _.jsx("div",{className:"ml-2 my-4 px-2 py-1 border-l-4 border-gray-200 italic text-gray-600",children:(e=t.node.content)==null?void 0:e.map((n,r)=>_.jsx(tt.Fragment,{children:n.type==="paragraph"&&_.jsx(WE,{node:n})},n.type+r))})}function PR(t){const e=ee.useRef(null),[n,r]=ee.useState(!1),i=ee.useCallback(()=>{var o;e.current&&navigator.clipboard.writeText((o=e.current)==null?void 0:o.innerText).then(()=>{r(!0),setTimeout(()=>{r(!1)},2e3)})},[]);return _.jsxs("div",{className:"mx-2 pr-6 rounded-lg bg-gray-200 relative",children:[_.jsx("pre",{className:"my-1 py-2 px-2 overflow-scroll",ref:e,children:t.node.content.map((o,s)=>_.jsx(tt.Fragment,{children:o.type==="text"&&o.text},o.type+s))}),_.jsx("div",{className:"absolute top-0 right-0",children:_.jsx("button",{className:"p-4",onClick:i,children:n?_.jsx(Xg,{size:20,strokeWidth:"1.5"}):_.jsx(_7,{size:20,strokeWidth:"1.5"})})})]})}const Fge={1:"text-3xl",2:"text-2xl",3:"text-xl",4:"text-lg",5:"text-lg",6:"text-lg"};function Lge(t){return _.jsx("div",{className:`mt-8 ml-2 ${Fge[t.node.attrs.level]||""}`,children:_.jsx(BR,{node:t.node})})}function YA(t){const{type:e,node:n}=t,r=e;return _.jsx(r,{className:"ml-10",children:n.content.map((i,o)=>_.jsx("li",{children:i.content.map((s,a)=>_.jsxs(tt.Fragment,{children:[s.type==="paragraph"&&_.jsx(WE,{node:s}),s.type==="codeBlock"&&_.jsx(PR,{node:s})]},s.type+a))},i.type+o))})}const Bge="_verified_lvyh0_1",JE={verified:Bge},Pge=()=>_.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:JE.verified,children:_.jsx("g",{children:_.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),zge=()=>_.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:JE.verified,children:_.jsxs("g",{children:[_.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[_.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),_.jsx("stop",{offset:".539",stopColor:"#cd8105"}),_.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),_.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),_.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),_.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[_.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),_.jsx("stop",{offset:".406",stopColor:"#e2b719"}),_.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),_.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[_.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),_.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),_.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),jge=()=>_.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:JE.verified,children:_.jsx("g",{children:_.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function zR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=zR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ua(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=zR(t))&&(r&&(r+=" "),r+=e);return r}const qge="_root_98iqw_1",Vge="_article_98iqw_21",QA={root:qge,article:Vge},KE=({className:t,children:e})=>_.jsx("div",{className:ua("react-tweet-theme",QA.root,t),children:_.jsx("article",{className:QA.article,children:e})}),jR=t=>_.jsx("img",{...t}),Uge="_header_nqq4j_1",Hge="_avatar_nqq4j_11",Wge="_avatarOverflow_nqq4j_16",Jge="_avatarSquare_nqq4j_23",Kge="_avatarShadow_nqq4j_26",Zge="_author_nqq4j_37",Gge="_authorLink_nqq4j_44",Yge="_authorVerified_nqq4j_53",Qge="_authorLinkText_nqq4j_56",Xge="_authorMeta_nqq4j_63",eye="_authorFollow_nqq4j_66",tye="_username_nqq4j_69",nye="_follow_nqq4j_74",rye="_separator_nqq4j_82",iye="_brand_nqq4j_86",oye="_twitterIcon_nqq4j_90",kn={header:Uge,avatar:Hge,avatarOverflow:Wge,avatarSquare:Jge,avatarShadow:Kge,author:Zge,authorLink:Gge,authorVerified:Yge,authorLinkText:Qge,authorMeta:Xge,authorFollow:eye,username:tye,follow:nye,separator:rye,brand:iye,twitterIcon:oye},sye="_verifiedOld_lcna5_1",aye="_verifiedBlue_lcna5_4",lye="_verifiedGovernment_lcna5_7",A2={verifiedOld:sye,verifiedBlue:aye,verifiedGovernment:lye},qR=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=_.jsx(Pge,{}),i=A2.verifiedBlue;if(n)switch(t.is_blue_verified||(i=A2.verifiedOld),t.verified_type){case"Government":r=_.jsx(jge,{}),i=A2.verifiedGovernment;break;case"Business":r=_.jsx(zge,{}),i=null;break}return n?_.jsx("div",{className:ua(e,i),children:r}):null},uye=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:jR,{user:i}=t;return _.jsxs("div",{className:kn.header,children:[_.jsxs("a",{href:t.url,className:kn.avatar,target:"_blank",rel:"noopener noreferrer",children:[_.jsx("div",{className:ua(kn.avatarOverflow,i.profile_image_shape==="Square"&&kn.avatarSquare),children:_.jsx(r,{src:i.profile_image_url_https,alt:i.name,width:48,height:48})}),_.jsx("div",{className:kn.avatarOverflow,children:_.jsx("div",{className:kn.avatarShadow})})]}),_.jsxs("div",{className:kn.author,children:[_.jsxs("a",{href:t.url,className:kn.authorLink,target:"_blank",rel:"noopener noreferrer",children:[_.jsx("div",{className:kn.authorLinkText,children:_.jsx("span",{title:i.name,children:i.name})}),_.jsx(qR,{user:i,className:kn.authorVerified})]}),_.jsxs("div",{className:kn.authorMeta,children:[_.jsx("a",{href:t.url,className:kn.username,target:"_blank",rel:"noopener noreferrer",children:_.jsxs("span",{title:`@${i.screen_name}`,children:["@",i.screen_name]})}),_.jsxs("div",{className:kn.authorFollow,children:[_.jsx("span",{className:kn.separator,children:""}),_.jsx("a",{href:i.follow_url,className:kn.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),_.jsx("a",{href:t.url,className:kn.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:_.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:kn.twitterIcon,children:_.jsx("g",{children:_.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},cye="_root_1ec15_1",fye={root:cye},dye=({tweet:t})=>_.jsxs("a",{href:t.in_reply_to_url,className:fye.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),hye="_root_eihfa_1",pye={root:hye},mye=({href:t,children:e})=>_.jsx("a",{href:t,className:pye.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),gye="_root_1xq52_1",yye={root:gye},bye=({tweet:t})=>_.jsx("p",{className:yye.root,children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return _.jsx(mye,{href:e.href,children:e.text},n);case"media":return;default:return _.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),XA=t=>`https://twitter.com/${t.user.screen_name}/status/${t.id_str}`,VR=t=>`https://twitter.com/${typeof t=="string"?t:t.user.screen_name}`,vye=t=>`https://twitter.com/intent/like?tweet_id=${t.id_str}`,wye=t=>`https://twitter.com/intent/tweet?in_reply_to=${t.id_str}`,kye=t=>`https://twitter.com/intent/follow?screen_name=${t.user.screen_name}`,xye=t=>`https://twitter.com/hashtag/${t.text}`,Eye=t=>`https://twitter.com/search?q=%24${t.text}`,Sye=t=>`https://twitter.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,UR=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},Cye=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,i)=>{var o,s;return((o=i.bitrate)!=null?o:0)-((s=r.bitrate)!=null?s:0)})},_ye=t=>{const e=Cye(t);return e.length>1?e[1]:e[0]},kk=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function e5(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return mf(n,"hashtag",t.entities.hashtags),mf(n,"mention",t.entities.user_mentions),mf(n,"url",t.entities.urls),mf(n,"symbol",t.entities.symbols),t.entities.media&&mf(n,"media",t.entities.media),Aye(t,n),n.map(r=>{const i=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:xye(r),text:i});case"mention":return Object.assign(r,{href:VR(r.screen_name),text:i});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:Eye(r),text:i});default:return Object.assign(r,{text:i})}})}function mf(t,e,n){for(const r of n)for(const[i,o]of t.entries()){if(o.indices[0]>r.indices[0]||o.indices[1]<r.indices[1])continue;const s=[{...r,type:e}];o.indices[0]<r.indices[0]&&s.unshift({indices:[o.indices[0],r.indices[0]],type:"text"}),o.indices[1]>r.indices[1]&&s.push({indices:[r.indices[1],o.indices[1]],type:"text"}),t.splice(i,1,...s);break}}function Aye(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const Tye=t=>({...t,url:XA(t),user:{...t.user,url:VR(t),follow_url:kye(t)},like_url:vye(t),reply_url:wye(t),in_reply_to_url:t.in_reply_to_screen_name?Sye(t):void 0,entities:e5(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:XA(t.quoted_tweet),entities:e5(t.quoted_tweet)}:void 0}),Mye="_root_g9tkv_1",Oye="_rounded_g9tkv_6",Dye="_mediaWrapper_g9tkv_10",Nye="_grid2Columns_g9tkv_17",$ye="_grid3_g9tkv_20",Iye="_grid2x2_g9tkv_23",Rye="_mediaContainer_g9tkv_26",Fye="_mediaLink_g9tkv_34",Lye="_skeleton_g9tkv_38",Bye="_image_g9tkv_43",$r={root:Mye,rounded:Oye,mediaWrapper:Dye,grid2Columns:Nye,grid3:$ye,grid2x2:Iye,mediaContainer:Rye,mediaLink:Fye,skeleton:Lye,image:Bye},Pye="_anchor_fp31d_1",zye="_videoButton_fp31d_17",jye="_videoButtonIcon_fp31d_35",qye="_watchOnTwitter_fp31d_44",Vye="_viewReplies_fp31d_60",ru={anchor:Pye,videoButton:zye,videoButtonIcon:jye,watchOnTwitter:qye,viewReplies:Vye},Uye=({tweet:t,media:e})=>{const[n,r]=ee.useState(!0),[i,o]=ee.useState(!1),[s,a]=ee.useState(!1),l=_ye(e);let u=0;return _.jsxs(_.Fragment,{children:[_.jsx("video",{className:$r.image,poster:UR(e,"small"),controls:!n,muted:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{u&&window.clearTimeout(u),i||o(!0),s&&a(!1)},onPause:()=>{u&&window.clearTimeout(u),u=window.setTimeout(()=>{i&&o(!1),u=0},100)},onEnded:()=>{a(!0)},children:_.jsx("source",{src:l.url,type:l.content_type})}),n&&_.jsx("button",{type:"button",className:ru.videoButton,"aria-label":"View video on X",onClick:c=>{const f=c.currentTarget.previousSibling;c.preventDefault(),r(!1),o(!0),f.play(),f.focus()},children:_.jsx("svg",{viewBox:"0 0 24 24",className:ru.videoButtonIcon,"aria-hidden":"true",children:_.jsx("g",{children:_.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!i&&!s&&_.jsx("div",{className:ru.watchOnTwitter,children:_.jsx("a",{href:t.url,className:ru.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),s&&_.jsx("a",{href:t.url,className:ua(ru.anchor,ru.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},Hye=t=>_.jsx("img",{...t}),t5=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},HR=({tweet:t,components:e,quoted:n})=>{var r,i,o;const s=(o=(r=t.mediaDetails)==null?void 0:r.length)!=null?o:0;var a;const l=(a=e==null?void 0:e.MediaImg)!=null?a:Hye;return _.jsx("div",{className:ua($r.root,!n&&$r.rounded),children:_.jsx("div",{className:ua($r.mediaWrapper,s>1&&$r.grid2Columns,s===3&&$r.grid3,s>4&&$r.grid2x2),children:(i=t.mediaDetails)==null?void 0:i.map(u=>_.jsx(ee.Fragment,{children:u.type==="photo"?_.jsxs("a",{href:t.url,className:ua($r.mediaContainer,$r.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[_.jsx("div",{className:$r.skeleton,style:t5(u,s)}),_.jsx(l,{src:UR(u,"small"),alt:u.ext_alt_text||"Image",className:$r.image,draggable:!0})]},u.media_url_https):_.jsxs("div",{className:$r.mediaContainer,children:[_.jsx("div",{className:$r.skeleton,style:t5(u,s)}),_.jsx(Uye,{tweet:t,media:u})]},u.media_url_https)},u.media_url_https))})})},Wye={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},Jye=new Intl.DateTimeFormat("en-US",Wye),Kye=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},Zye=t=>{const e=Kye(Jye.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n}  ${r}`},Gye="_root_i24yn_1",Yye={root:Gye},Qye=({tweet:t})=>{const e=new Date(t.created_at),n=Zye(e);return _.jsx("a",{className:Yye.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:_.jsx("time",{dateTime:e.toISOString(),children:n})})},Xye="_info_19qcj_1",ebe="_infoLink_19qcj_10",tbe="_infoIcon_19qcj_30",T2={info:Xye,infoLink:ebe,infoIcon:tbe},nbe=({tweet:t})=>_.jsxs("div",{className:T2.info,children:[_.jsx(Qye,{tweet:t}),_.jsx("a",{className:T2.infoLink,href:"https://help.twitter.com/en/twitter-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:_.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:T2.infoIcon,children:_.jsx("g",{children:_.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),rbe="_actions_n2anf_1",ibe="_like_n2anf_13",obe="_reply_n2anf_14",sbe="_copy_n2anf_15",abe="_likeIconWrapper_n2anf_27",lbe="_likeCount_n2anf_30",ube="_replyIconWrapper_n2anf_35",cbe="_copyIconWrapper_n2anf_36",fbe="_likeIcon_n2anf_27",dbe="_replyIcon_n2anf_35",hbe="_copyIcon_n2anf_36",pbe="_replyText_n2anf_56",mbe="_copyText_n2anf_57",fr={actions:rbe,like:ibe,reply:obe,copy:sbe,likeIconWrapper:abe,likeCount:lbe,replyIconWrapper:ube,copyIconWrapper:cbe,likeIcon:fbe,replyIcon:dbe,copyIcon:hbe,replyText:pbe,copyText:mbe},gbe=({tweet:t})=>{const[e,n]=ee.useState(!1),[r,i]=ee.useState(!1),o=()=>{navigator.clipboard.writeText(t.url),n(!0)};return ee.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1),i(!0)},6e3);return()=>clearTimeout(s)}},[e]),_.jsxs("button",{type:"button",className:fr.copy,"aria-label":"Copy link",onClick:o,children:[_.jsx("div",{className:fr.copyIconWrapper,children:e?_.jsx("svg",{viewBox:"0 0 24 24",className:fr.copyIcon,"aria-hidden":"true",children:_.jsx("g",{children:_.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):_.jsx("svg",{viewBox:"0 0 24 24",className:fr.copyIcon,"aria-hidden":"true",children:_.jsx("g",{children:_.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),_.jsx("span",{className:fr.copyText,children:e?"Copied!":r?"Copy link to Tweet":"Copy link"})]})},ybe=({tweet:t})=>{const e=kk(t.favorite_count);return _.jsxs("div",{className:fr.actions,children:[_.jsxs("a",{className:fr.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[_.jsx("div",{className:fr.likeIconWrapper,children:_.jsx("svg",{viewBox:"0 0 24 24",className:fr.likeIcon,"aria-hidden":"true",children:_.jsx("g",{children:_.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),_.jsx("span",{className:fr.likeCount,children:e})]}),_.jsxs("a",{className:fr.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[_.jsx("div",{className:fr.replyIconWrapper,children:_.jsx("svg",{viewBox:"0 0 24 24",className:fr.replyIcon,"aria-hidden":"true",children:_.jsx("g",{children:_.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),_.jsx("span",{className:fr.replyText,children:"Reply"})]}),_.jsx(gbe,{tweet:t})]})},bbe="_replies_1cutb_1",vbe="_link_1cutb_4",wbe="_text_1cutb_23",M2={replies:bbe,link:vbe,text:wbe},kbe=({tweet:t})=>_.jsx("div",{className:M2.replies,children:_.jsx("a",{className:M2.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:_.jsx("span",{className:M2.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${kk(t.conversation_count)} reply`:`Read ${kk(t.conversation_count)} replies`})})}),xbe="_root_q5799_1",Ebe="_article_q5799_16",n5={root:xbe,article:Ebe},Sbe=({tweet:t,children:e})=>_.jsx("div",{className:n5.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:_.jsx("article",{className:n5.article,children:e})}),Cbe="_header_r31i5_1",_be="_avatar_r31i5_11",Abe="_avatarSquare_r31i5_17",Tbe="_author_r31i5_21",Mbe="_authorText_r31i5_26",Obe="_username_r31i5_33",Ia={header:Cbe,avatar:_be,avatarSquare:Abe,author:Tbe,authorText:Mbe,username:Obe},Dbe=({tweet:t})=>{const{user:e}=t;return _.jsxs("div",{className:Ia.header,children:[_.jsx("a",{href:t.url,className:Ia.avatar,target:"_blank",rel:"noopener noreferrer",children:_.jsx("div",{className:ua(Ia.avatarOverflow,e.profile_image_shape==="Square"&&Ia.avatarSquare),children:_.jsx(jR,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),_.jsxs("div",{className:Ia.author,children:[_.jsx("div",{className:Ia.authorText,children:_.jsx("span",{title:e.name,children:e.name})}),_.jsx(qR,{user:e}),_.jsx("div",{className:Ia.username,children:_.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},Nbe="_root_175ot_1",$be={root:Nbe},Ibe=({tweet:t})=>_.jsx("p",{className:$be.root,children:t.entities.map((e,n)=>_.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),Rbe=({tweet:t})=>{var e;return _.jsxs(Sbe,{tweet:t,children:[_.jsx(Dbe,{tweet:t}),_.jsx(Ibe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?_.jsx(HR,{quoted:!0,tweet:t}):null]})},Fbe=({tweet:t,components:e})=>{var n;const r=ee.useMemo(()=>Tye(t),[t]);return _.jsxs(KE,{children:[_.jsx(uye,{tweet:r,components:e}),r.in_reply_to_status_id_str&&_.jsx(dye,{tweet:r}),_.jsx(bye,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?_.jsx(HR,{tweet:r,components:e}):null,r.quoted_tweet&&_.jsx(Rbe,{tweet:r.quoted_tweet}),_.jsx(nbe,{tweet:r}),_.jsx(ybe,{tweet:r}),_.jsx(kbe,{tweet:r})]})},Lbe="_root_16yxa_1",Bbe={root:Lbe},Pbe=t=>_.jsx(KE,{children:_.jsxs("div",{className:Bbe.root,children:[_.jsx("h3",{children:"Tweet not found"}),_.jsx("p",{children:"The embedded tweet could not be found"})]})}),zbe="_skeleton_oi7hr_1",jbe="_loading_oi7hr_1",qbe={skeleton:zbe,loading:jbe},Vp=({style:t})=>_.jsx("span",{className:qbe.skeleton,style:t}),Vbe="_root_17qqv_1",Ube={root:Vbe},Hbe=()=>_.jsxs(KE,{className:Ube.root,children:[_.jsx(Vp,{style:{height:"3rem",marginBottom:"0.75rem"}}),_.jsx(Vp,{style:{height:"6rem",margin:"0.5rem 0"}}),_.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),_.jsx(Vp,{style:{height:"2rem"}}),_.jsx(Vp,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var WR={exports:{}},JR={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc=ee;function Wbe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jbe=typeof Object.is=="function"?Object.is:Wbe,Kbe=Tc.useState,Zbe=Tc.useEffect,Gbe=Tc.useLayoutEffect,Ybe=Tc.useDebugValue;function Qbe(t,e){var n=e(),r=Kbe({inst:{value:n,getSnapshot:e}}),i=r[0].inst,o=r[1];return Gbe(function(){i.value=n,i.getSnapshot=e,O2(i)&&o({inst:i})},[t,n,e]),Zbe(function(){return O2(i)&&o({inst:i}),t(function(){O2(i)&&o({inst:i})})},[t]),Ybe(n),n}function O2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jbe(t,n)}catch{return!0}}function Xbe(t,e){return e()}var e2e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Xbe:Qbe;JR.useSyncExternalStore=Tc.useSyncExternalStore!==void 0?Tc.useSyncExternalStore:e2e;WR.exports=JR;var t2e=WR.exports;const Zs=()=>{},mr=Zs(),D2=Object,Xe=t=>t===mr,io=t=>typeof t=="function",ya=(t,e)=>({...t,...e}),n2e=t=>io(t.then),Up=new WeakMap;let r2e=0;const lh=t=>{const e=typeof t,n=t&&t.constructor,r=n==Date;let i,o;if(D2(t)===t&&!r&&n!=RegExp){if(i=Up.get(t),i)return i;if(i=++r2e+"~",Up.set(t,i),n==Array){for(i="@",o=0;o<t.length;o++)i+=lh(t[o])+",";Up.set(t,i)}if(n==D2){i="#";const s=D2.keys(t).sort();for(;!Xe(o=s.pop());)Xe(t[o])||(i+=o+":"+lh(t[o])+",");Up.set(t,i)}}else i=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},Po=new WeakMap,N2={},Hp={},ZE="undefined",ay=typeof window!=ZE,xk=typeof document!=ZE,i2e=()=>ay&&typeof window.requestAnimationFrame!=ZE,KR=(t,e)=>{const n=Po.get(t);return[()=>!Xe(e)&&t.get(e)||N2,r=>{if(!Xe(e)){const i=t.get(e);e in Hp||(Hp[e]=i),n[5](e,ya(i,r),i||N2)}},n[6],()=>!Xe(e)&&e in Hp?Hp[e]:!Xe(e)&&t.get(e)||N2]};let Ek=!0;const o2e=()=>Ek,[Sk,Ck]=ay&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Zs,Zs],s2e=()=>{const t=xk&&document.visibilityState;return Xe(t)||t!=="hidden"},a2e=t=>(xk&&document.addEventListener("visibilitychange",t),Sk("focus",t),()=>{xk&&document.removeEventListener("visibilitychange",t),Ck("focus",t)}),l2e=t=>{const e=()=>{Ek=!0,t()},n=()=>{Ek=!1};return Sk("online",e),Sk("offline",n),()=>{Ck("online",e),Ck("offline",n)}},u2e={isOnline:o2e,isVisible:s2e},c2e={initFocus:a2e,initReconnect:l2e},r5=!tt.useId,uh=!ay||"Deno"in window,f2e=t=>i2e()?window.requestAnimationFrame(t):setTimeout(t,1),$2=uh?ee.useEffect:ee.useLayoutEffect,I2=typeof navigator<"u"&&navigator.connection,i5=!uh&&I2&&(["slow-2g","2g"].includes(I2.effectiveType)||I2.saveData),GE=t=>{if(io(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?lh(t):"",[t,e]};let d2e=0;const _k=()=>++d2e,ZR=0,GR=1,YR=2,h2e=3;var gf={__proto__:null,ERROR_REVALIDATE_EVENT:h2e,FOCUS_EVENT:ZR,MUTATE_EVENT:YR,RECONNECT_EVENT:GR};async function QR(...t){const[e,n,r,i]=t,o=ya({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let s=o.populateCache;const a=o.rollbackOnError;let l=o.optimisticData;const u=d=>typeof a=="function"?a(d):a!==!1,c=o.throwOnError;if(io(n)){const d=n,h=[],p=e.keys();for(const m of p)!/^\$(inf|sub)\$/.test(m)&&d(e.get(m)._k)&&h.push(m);return Promise.all(h.map(f))}return f(n);async function f(d){const[h]=GE(d);if(!h)return;const[p,m]=KR(e,h),[b,y,v,w]=Po.get(e),g=()=>{const T=b[h];return(io(o.revalidate)?o.revalidate(p().data,d):o.revalidate!==!1)&&(delete v[h],delete w[h],T&&T[0])?T[0](YR).then(()=>p().data):p().data};if(t.length<3)return g();let x=r,k;const E=_k();y[h]=[E,0];const D=!Xe(l),O=p(),N=O.data,C=O._c,R=Xe(C)?N:C;if(D&&(l=io(l)?l(R,N):l,m({data:l,_c:R})),io(x))try{x=x(R)}catch(T){k=T}if(x&&n2e(x))if(x=await x.catch(T=>{k=T}),E!==y[h][0]){if(k)throw k;return x}else k&&D&&u(k)&&(s=!0,m({data:R,_c:mr}));if(s&&!k)if(io(s)){const T=s(x,R);m({data:T,error:mr,_c:mr})}else m({data:x,error:mr,_c:mr});if(y[h][1]=_k(),Promise.resolve(g()).then(()=>{m({_c:mr})}),k){if(c)throw k;return}return x}}const o5=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},p2e=(t,e)=>{if(!Po.has(t)){const n=ya(c2e,e),r={},i=QR.bind(mr,t);let o=Zs;const s={},a=(c,f)=>{const d=s[c]||[];return s[c]=d,d.push(f),()=>d.splice(d.indexOf(f),1)},l=(c,f,d)=>{t.set(c,f);const h=s[c];if(h)for(const p of h)p(f,d)},u=()=>{if(!Po.has(t)&&(Po.set(t,[r,{},{},{},i,l,a]),!uh)){const c=n.initFocus(setTimeout.bind(mr,o5.bind(mr,r,ZR))),f=n.initReconnect(setTimeout.bind(mr,o5.bind(mr,r,GR)));o=()=>{c&&c(),f&&f(),Po.delete(t)}}};return u(),[t,i,u,o]}return[t,Po.get(t)[4]]},m2e=(t,e,n,r,i)=>{const o=n.errorRetryCount,s=i.retryCount,a=~~((Math.random()+.5)*(1<<(s<8?s:8)))*n.errorRetryInterval;!Xe(o)&&s>o||setTimeout(r,a,i)},g2e=(t,e)=>lh(t)==lh(e),[XR,y2e]=p2e(new Map),b2e=ya({onLoadingSlow:Zs,onSuccess:Zs,onError:Zs,onErrorRetry:m2e,onDiscarded:Zs,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:i5?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:i5?5e3:3e3,compare:g2e,isPaused:()=>!1,cache:XR,mutate:y2e,fallback:{}},u2e),v2e=(t,e)=>{const n=ya(t,e);if(e){const{use:r,fallback:i}=t,{use:o,fallback:s}=e;r&&o&&(n.use=r.concat(o)),i&&s&&(n.fallback=ya(i,s))}return n},w2e=ee.createContext({}),k2e="$inf$",eF=ay&&window.__SWR_DEVTOOLS_USE__,x2e=eF?window.__SWR_DEVTOOLS_USE__:[],E2e=()=>{eF&&(window.__SWR_DEVTOOLS_REACT__=tt)},S2e=t=>io(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],C2e=()=>ya(b2e,ee.useContext(w2e)),_2e=t=>(e,n,r)=>t(e,n&&((...o)=>{const[s]=GE(e),[,,,a]=Po.get(XR);if(s.startsWith(k2e))return n(...o);const l=a[s];return Xe(l)?n(...o):(delete a[s],l)}),r),A2e=x2e.concat(_2e),T2e=t=>function(...n){const r=C2e(),[i,o,s]=S2e(n),a=v2e(r,s);let l=t;const{use:u}=a,c=(u||[]).concat(A2e);for(let f=c.length;f--;)l=c[f](l);return l(i,o||a.fetcher||null,a)},M2e=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i>=0&&(r[i]=r[r.length-1],r.pop())}};E2e();const s5=tt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),R2={dedupe:!0},O2e=(t,e,n)=>{const{cache:r,compare:i,suspense:o,fallbackData:s,revalidateOnMount:a,revalidateIfStale:l,refreshInterval:u,refreshWhenHidden:c,refreshWhenOffline:f,keepPreviousData:d}=n,[h,p,m,b]=Po.get(r),[y,v]=GE(t),w=ee.useRef(!1),g=ee.useRef(!1),x=ee.useRef(y),k=ee.useRef(e),E=ee.useRef(n),D=()=>E.current,O=()=>D().isVisible()&&D().isOnline(),[N,C,R,T]=KR(r,y),q=ee.useRef({}).current,A=Xe(s)?n.fallback[y]:s,S=(Ce,pe)=>{for(const De in q){const Le=De;if(Le==="data"){if(!i(Ce[Le],pe[Le])&&(!Xe(Ce[Le])||!i(ke,pe[Le])))return!1}else if(pe[Le]!==Ce[Le])return!1}return!0},P=ee.useMemo(()=>{const Ce=!y||!e?!1:Xe(a)?D().isPaused()||o?!1:Xe(l)?!0:l:a,pe=it=>{const bt=ya(it);return delete bt._k,Ce?{isValidating:!0,isLoading:!0,...bt}:bt},De=N(),Le=T(),Ze=pe(De),Qt=De===Le?Ze:pe(Le);let rt=Ze;return[()=>{const it=pe(N());return S(it,rt)?(rt.data=it.data,rt.isLoading=it.isLoading,rt.isValidating=it.isValidating,rt.error=it.error,rt):(rt=it,it)},()=>Qt]},[r,y]),B=t2e.useSyncExternalStore(ee.useCallback(Ce=>R(y,(pe,De)=>{S(De,pe)||Ce()}),[r,y]),P[0],P[1]),j=!w.current,z=h[y]&&h[y].length>0,J=B.data,K=Xe(J)?A:J,ae=B.error,fe=ee.useRef(K),ke=d?Xe(J)?fe.current:J:K,ve=z&&!Xe(ae)?!1:j&&!Xe(a)?a:D().isPaused()?!1:o?Xe(K)?!1:l:Xe(K)||l,xe=!!(y&&e&&j&&ve),Se=Xe(B.isValidating)?xe:B.isValidating,Oe=Xe(B.isLoading)?xe:B.isLoading,Fe=ee.useCallback(async Ce=>{const pe=k.current;if(!y||!pe||g.current||D().isPaused())return!1;let De,Le,Ze=!0;const Qt=Ce||{},rt=!m[y]||!Qt.dedupe,it=()=>r5?!g.current&&y===x.current&&w.current:y===x.current,bt={isValidating:!1,isLoading:!1},Ft=()=>{C(bt)},Lt=()=>{const gt=m[y];gt&&gt[1]===Le&&delete m[y]},at={isValidating:!0};Xe(N().data)&&(at.isLoading=!0);try{if(rt&&(C(at),n.loadingTimeout&&Xe(N().data)&&setTimeout(()=>{Ze&&it()&&D().onLoadingSlow(y,n)},n.loadingTimeout),m[y]=[pe(v),_k()]),[De,Le]=m[y],De=await De,rt&&setTimeout(Lt,n.dedupingInterval),!m[y]||m[y][1]!==Le)return rt&&it()&&D().onDiscarded(y),!1;bt.error=mr;const gt=p[y];if(!Xe(gt)&&(Le<=gt[0]||Le<=gt[1]||gt[1]===0))return Ft(),rt&&it()&&D().onDiscarded(y),!1;const Y=N().data;bt.data=i(Y,De)?Y:De,rt&&it()&&D().onSuccess(De,y,n)}catch(gt){Lt();const Y=D(),{shouldRetryOnError:U}=Y;Y.isPaused()||(bt.error=gt,rt&&it()&&(Y.onError(gt,y,Y),(U===!0||io(U)&&U(gt))&&(!D().revalidateOnFocus||!D().revalidateOnReconnect||O())&&Y.onErrorRetry(gt,y,Y,W=>{const X=h[y];X&&X[0]&&X[0](gf.ERROR_REVALIDATE_EVENT,W)},{retryCount:(Qt.retryCount||0)+1,dedupe:!0})))}return Ze=!1,Ft(),!0},[y,r]),mt=ee.useCallback((...Ce)=>QR(r,x.current,...Ce),[]);if($2(()=>{k.current=e,E.current=n,Xe(J)||(fe.current=J)}),$2(()=>{if(!y)return;const Ce=Fe.bind(mr,R2);let pe=0;const Le=M2e(y,h,(Ze,Qt={})=>{if(Ze==gf.FOCUS_EVENT){const rt=Date.now();D().revalidateOnFocus&&rt>pe&&O()&&(pe=rt+D().focusThrottleInterval,Ce())}else if(Ze==gf.RECONNECT_EVENT)D().revalidateOnReconnect&&O()&&Ce();else{if(Ze==gf.MUTATE_EVENT)return Fe();if(Ze==gf.ERROR_REVALIDATE_EVENT)return Fe(Qt)}});return g.current=!1,x.current=y,w.current=!0,C({_k:v}),ve&&(Xe(K)||uh?Ce():f2e(Ce)),()=>{g.current=!0,Le()}},[y]),$2(()=>{let Ce;function pe(){const Le=io(u)?u(N().data):u;Le&&Ce!==-1&&(Ce=setTimeout(De,Le))}function De(){!N().error&&(c||D().isVisible())&&(f||D().isOnline())?Fe(R2).then(pe):pe()}return pe(),()=>{Ce&&(clearTimeout(Ce),Ce=-1)}},[u,c,f,y]),ee.useDebugValue(ke),o&&Xe(K)&&y){if(!r5&&uh)throw new Error("Fallback data is required when using suspense in SSR.");k.current=e,E.current=n,g.current=!1;const Ce=b[y];if(!Xe(Ce)){const pe=mt(Ce);s5(pe)}if(Xe(ae)){const pe=Fe(R2);Xe(ke)||(pe.status="fulfilled",pe.value=!0),s5(pe)}else throw ae}return{mutate:mt,get data(){return q.data=!0,ke},get error(){return q.error=!0,ae},get isValidating(){return q.isValidating=!0,Se},get isLoading(){return q.isLoading=!0,Oe}}},a5=T2e(O2e);class D2e extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const N2e=a5.default||a5,$2e="https://react-tweet.vercel.app";async function I2e([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new D2e({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const R2e=(t,e,n)=>{const{isLoading:r,data:i,error:o}=N2e(()=>e||t?[e||t&&`${$2e}/api/tweet/${t}`,n]:null,I2e,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||i===void 0&&!o),data:i,error:o}},F2e=({id:t,apiUrl:e,fallback:n=_.jsx(Hbe,{}),components:r,fetchOptions:i,onError:o})=>{const{data:s,error:a,isLoading:l}=R2e(t,e,i);if(l)return n;if(a||!s){const u=(r==null?void 0:r.TweetNotFound)||Pbe;return _.jsx(u,{error:o?o(a):a})}return _.jsx(Fbe,{tweet:s,components:r})};function tF(t){const{src:e}=t,n=e.slice(e.lastIndexOf("/")+1);return _.jsx(F2e,{id:n})}function nF(t){const{src:e,controls:n=!0}=t,r=ee.useMemo(()=>new URL(e).pathname.split(".").pop(),[e]);return _.jsx("video",{autoPlay:!0,loop:!0,muted:!0,controls:n,src:e,className:"my-2 rounded-lg z-auto",style:{maxHeight:400},children:_.jsx("source",{src:e,type:`video/${r==="mov"?"mp4":r}`})})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ak=function(){return Ak=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ak.apply(this,arguments)};function L2e(t,e){var n=ee.useState(!1),r=n[0],i=n[1],o=ee.useState(!1),s=o[0],a=o[1],l=encodeURIComponent(t.id),u=typeof t.playlistCoverId=="string"?encodeURIComponent(t.playlistCoverId):null,c=t.title,f=t.poster||"hqdefault",d="&".concat(t.params)||"",h=t.muted?"&mute=1":"",p=t.announce||"Watch",m=t.webp?"webp":"jpg",b=t.webp?"vi_webp":"vi",y=t.thumbnail||(t.playlist?"https://i.ytimg.com/".concat(b,"/").concat(u,"/").concat(f,".").concat(m):"https://i.ytimg.com/".concat(b,"/").concat(l,"/").concat(f,".").concat(m)),v=t.noCookie?"https://www.youtube-nocookie.com":"https://www.youtube.com";v=t.cookie?"https://www.youtube.com":"https://www.youtube-nocookie.com";var w=t.playlist?"".concat(v,"/embed/videoseries?autoplay=1").concat(h,"&list=").concat(l).concat(d):"".concat(v,"/embed/").concat(l,"?autoplay=1&state=1").concat(h).concat(d),g=t.activatedClass||"lyt-activated",x=t.adNetwork||!1,k=t.aspectHeight||9,E=t.aspectWidth||16,D=t.iframeClass||"",O=t.playerClass||"lty-playbtn",N=t.wrapperClass||"yt-lite",C=t.onIframeAdded||function(){},R=t.rel?"prefetch":"preload",T=t.containerElement||"article",q=function(){r||i(!0)},A=function(){s||a(!0)};return ee.useEffect(function(){s&&C()},[s]),ee.createElement(ee.Fragment,null,ee.createElement("link",{rel:R,href:y,as:"image"}),ee.createElement(ee.Fragment,null,r&&ee.createElement(ee.Fragment,null,ee.createElement("link",{rel:"preconnect",href:v}),ee.createElement("link",{rel:"preconnect",href:"https://www.google.com"}),x&&ee.createElement(ee.Fragment,null,ee.createElement("link",{rel:"preconnect",href:"https://static.doubleclick.net"}),ee.createElement("link",{rel:"preconnect",href:"https://googleads.g.doubleclick.net"})))),ee.createElement(T,{onPointerOver:q,onClick:A,className:"".concat(N," ").concat(s?g:""),"data-title":c,style:Ak({backgroundImage:"url(".concat(y,")")},{"--aspect-ratio":"".concat(k/E*100,"%")})},ee.createElement("button",{type:"button",className:O,"aria-label":"".concat(p," ").concat(c)}),s&&ee.createElement("iframe",{ref:e,className:D,title:c,width:"560",height:"315",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,src:w})))}var B2e=ee.forwardRef(L2e);function rF(t){const{src:e}=t,n=ee.useMemo(()=>{const r=new URL(e),i=r.host==="youtu.be"?r.pathname:new URLSearchParams(r.search).get("v");return i==null?void 0:i.replace(/^\//,"")},[e]);return _.jsxs("div",{children:[_.jsx("style",{children:`
        .lty-playbtn {
          border: none;
          border-radius: 16%;
        }
      `}),n&&_.jsx("div",{className:"overflow-hidden rounded-lg",children:_.jsx(B2e,{id:n,title:""})})]})}const P2e=function(e){const{schema:n}=e;return _.jsx(_.Fragment,{children:n.content.map((r,i)=>_.jsxs(tt.Fragment,{children:[r.type==="heading"&&_.jsx(Lge,{node:r}),r.type==="paragraph"&&_.jsx(WE,{node:r}),r.type==="horizontalRule"&&_.jsx("hr",{className:"mt-6 mb-6"}),r.type==="image"&&_.jsx(R7,{src:r.attrs.src}),r.type==="video"&&_.jsx(nF,{src:r.attrs.src}),r.type==="nevent"&&_.jsx(iF,{...r.attrs}),r.type==="orderedList"&&_.jsx(YA,{type:"ol",node:r}),r.type==="bulletList"&&_.jsx(YA,{type:"ul",node:r}),r.type==="codeBlock"&&_.jsx(PR,{node:r}),r.type==="blockquote"&&_.jsx(Rge,{node:r}),r.type==="tweet"&&_.jsx(tF,{src:r.attrs.src}),r.type==="youtube"&&_.jsx(rF,{src:r.attrs.src})]},r.type+i))})};function iF(t){const{id:e,relays:n,author:r}=t,[i,o]=ee.useState(),s=FE(r,n),a=LE(s);ee.useEffect(()=>{const d=RE.subscribeMany([...n,"wss://relay.damus.io"],[{ids:[e]}],{onevent(h){o(h)}});return()=>d.close()},[e,r,n]);const l=ee.useMemo(()=>{if(i!=null&&i.content){const d=i.kind===30023?[uw,S7,Hw]:[Nme,DO,Ime,$me,Hw],h=new iO({extensions:d});return h.commands.parseNote(i),h.getJSON()}},[i==null?void 0:i.content]),u=(a==null?void 0:a.display_name)||(a==null?void 0:a.name)||"",c=a==null?void 0:a.picture,f=ee.useMemo(()=>{var d;return s?(d=Re.fromSeconds(s.created_at).toRelative({style:"narrow"}))==null?void 0:d.replace("ago",""):null},[s]);return _.jsxs("div",{className:"relative px-4 py-4 my-2 border rounded-xl w-full l",children:[!i&&"Loading",i&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex flex-row items-center py-2",children:[_.jsx("img",{className:"w-8 rounded-full mr-4",src:c}),_.jsx("div",{children:u}),_.jsx("div",{className:"text-xs text-gray-500 ml-2",children:f})]}),l&&_.jsx(P2e,{schema:l})]})]})}function z2e(t){const e=t.node.attrs;return _.jsx(Ca,{as:"div","data-nevent":e.nevent,"data-drag-handle":"",draggable:t.node.type.spec.draggable,children:_.jsxs("div",{className:`relative select-none w-10/12 rounded-xl ${t.selected?"bg-blue-100":""}`,children:[_.jsx(iF,{...e}),_.jsx(ey,{onClick:()=>t.deleteNode()})]})})}function j2e(t,e=500){const[n,r]=ee.useState(t),i=ee.useRef(null);return ee.useEffect(()=>{const o=Date.now();if(i.current&&o>=i.current+e)i.current=o,r(t);else{const s=window.setTimeout(()=>{i.current=o,r(t)},e);return()=>window.clearTimeout(s)}},[t,e]),n}function q2e(t){const[e,n]=ee.useState([]),r=j2e(t,500);return ee.useEffect(()=>{if(r){n([]);const i=RE.subscribeMany(["wss://relay.nostr.band"],[{kinds:[0],search:r}],{onevent:o=>{n(s=>[...s,o])}});return()=>i.close()}},[r]),e}const V2e=ee.forwardRef(function(e,n){const[r,i]=ee.useState(0),o=q2e(e.query),s=c=>{const f=o[c];f&&e.command(f)},a=()=>{i((r+o.length-1)%o.length)},l=()=>{i((r+1)%o.length)},u=()=>{s(r)};return ee.useEffect(()=>i(0),[o]),ee.useImperativeHandle(n,()=>({onKeyDown:({event:c})=>c.key==="ArrowUp"?(a(),!0):c.key==="ArrowDown"?(l(),!0):c.key==="Enter"?(u(),!0):!1})),_.jsx("div",{className:"flex flex-col items-start bg-white py-1 rounded-lg border border-solid border-gray-300",children:o.map((c,f)=>{const{name:d,display_name:h}=JSON.parse(c.content);return _.jsx("div",{className:`px-3 py-2 w-full text-left justify-start items-start hover:bg-gray-100 cursor-pointer ${f===r?"bg-gray-100":""}`,onClick:()=>s(f),children:h||d},f)})})});function U2e(t){const{src:e}=t.node.attrs;return _.jsx(Ca,{"data-drag-handle":"",draggable:t.node.type.spec.draggable,children:_.jsx(tF,{src:e})})}function H2e(t){const{src:e,alt:n,sha256:r,uploadError:i,uploadUrl:o,uploading:s}=t.node.attrs;return _.jsxs(Ca,{"data-drag-handle":"",draggable:t.node.type.spec.draggable,className:`relative w-fit h-fit ${t.selected?"opacity-90":""}`,children:[_.jsx(ey,{onClick:()=>t.deleteNode()}),_.jsx(I7,{uploading:s}),_.jsx(nF,{controls:!1,src:e}),_.jsxs(M7,{children:[r?_.jsx("div",{}):_.jsx(T7,{value:n,onChange:a=>t.updateAttributes({alt:a})}),!r&&_.jsx($7,{uploadUrl:o,onChange:(a,l)=>t.updateAttributes({uploadType:a,uploadUrl:l})}),r&&_.jsx("span",{"data-tooltip":e,children:_.jsx(Xg,{size:26,strokeWidth:"2.5",className:"p-1 flex flex-row justify-between rounded-full border border-white/20 bg-black text-green-300 text-xs right-2 bottom-2 z-50"})}),i&&_.jsx("span",{"data-tooltip":i,className:"",children:_.jsx(A7,{size:28,strokeWidth:"1.5",className:"border border-white/20 bg-black rounded-full py-1 ml-1 text-red-500 relative top-0"})})]})]})}function W2e(t){const e=t.node.attrs;return _.jsx(Ca,{as:"div","data-drag-handle":"",draggable:t.node.type.spec.draggable,children:_.jsxs("div",{className:`relative select-none w-10/12 rounded-xl ${t.selected?"bg-blue-100":""}`,children:[_.jsx(ey,{onClick:()=>t.deleteNode()}),_.jsx(rF,{...e})]})})}function No(t){return _.jsx("button",{disabled:t.disabled,className:`rounded-lg p-1 mb-1 mr-1 text-sm bg-gray-100  ${t.isActive?"bg-indigo-600 text-white":"bg-gray-200"} disabled:line-through disabled:bg-gray-50`,onClick:t.onClick,children:t.children})}function J2e(t){return _.jsx("nav",{className:"fixed overflow-y-auto h-full right-0 w-1/2 bg-gray-100 p-4",children:t.children})}const oF="nostr:nprofile1qy88wumn8ghj7mn0wvhxcmmv9uq32amnwvaz7tmjv4kxz7fwv3sk6atn9e5k7tcprfmhxue69uhhyetvv9ujuem9w3skccne9e3k7mf0wccsqgxxvqas78x0a339m8qgkaf7fam5atmarne8dy3rzfd4l4x6w2qpncmfs8zh",K2e="nostr:nprofile1qyd8wumn8ghj7urewfsk66ty9enxjct5dfskvtnrdakj7qgmwaehxw309aex2mrp0yh8wetnw3jhymnzw33jucm0d5hsz9thwden5te0wfjkccte9ejxzmt4wvhxjme0qqsrhuxx8l9ex335q7he0f09aej04zpazpl0ne2cgukyawd24mayt8gfnma0u",Z2e="nostr:nprofile1qyfhwumn8ghj7ur4wfcxcetsv9njuetn9uqsuamnwvaz7tmwdaejumr0dshsz9mhwden5te0wfjkccte9ec8y6tdv9kzumn9wshsqgyzxs0cs2mw40xjhfl3a7g24ktpeur54u2mnm6y5z0e6250h7lx5gflu83m",sF="nostr:nevent1qvzqqqqqqypzplnld0r0wvutw6alsrd5q2k7vk2nug9j7glxd6ycyp9k8nzz2wdrqyg8wumn8ghj7mn0wd68ytnhd9hx2qg5waehxw309aex2mrp0yhxgctdw4eju6t0qyxhwumn8ghj7mn0wvhxcmmvqqs9gg4thq8ng87z8377jxksjwhk9dl0f8su9c4kq335ydzp0ykmv5gqt3csa",G2e="nostr:note1dezy67z2sl5yxm6scwmy6w4k0zjleyw3tnttxyduygz96cl79fnsgcsf6g",aF="nostr:naddr1qqwysetjv5syxmmdv4ejqsnfw33k76twyp38jgznwp5hyctvqgsph3c2q9yt8uckmgelu0yf7glruudvfluesqn7cuftjpwdynm2gygrqsqqqa2w4ua43m",lF="lnbc15u1p3xnhl2pp5jptserfk3zk4qy42tlucycrfwxhydvlemu9pqr93tuzlv9cc7g3sdqsvfhkcap3xyhx7un8cqzpgxqzjcsp5f8c52y2stc300gl6s4xswtjpc37hrnnr3c9wvtgjfuvqmpm35evq9qyyssqy4lgd8tj637qcjp05rdpxxykjenthxftej7a2zzmwrmrl70fyj9hvj0rewhzj7jfyuwkwcg9g2jpwtk3wkjtwnkdks84hsnu8xps5vsq4gj5hs",Y2e="https://image.nostr.build/87dbc55a6391d15bddda206561d53867a5679dd95e84fe8ed62bfe2e3adcadf3.jpg",Q2e=()=>{const[t,e]=ee.useState(!1);return _.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex flex-row items-center justify-start mt-4",children:[_.jsx("button",{className:"hover:bg-gray-200 rounded-full w-6 h-6 mr-2",onClick:()=>e(n=>!n),children:t?_.jsx(C7,{}):_.jsx(Y0e,{})}),_.jsx("h6",{className:"text-gray-800",children:"Testing text"})]}),t&&_.jsxs("span",{id:"raw",className:"text-xs break-words text-wrap relative",children:["Try copy & paste some of text below into the editor. ",_.jsx("br",{}),"Hello ",oF,_.jsx("br",{}),K2e,_.jsx("br",{}),Z2e,_.jsx("br",{}),sF,_.jsx("br",{}),G2e,_.jsx("br",{}),aF,_.jsx("br",{}),Y2e,_.jsx("br",{}),lF]})]})};function X2e(){const[t,e]=ee.useState(""),[n,r]=ee.useState("text"),[i,o]=ee.useState({}),[s]=ee.useState({nevent1:!0,nprofile1:!0,naddr1:!0,links:!0,images:!0,tags:!0,videos:!0,youtube:!0,tweet:!0,bolt11:!0,nsecReject:!0,fileUpload:!0}),[a,l]=ee.useState(!1),u=ee.useRef(""),c=ee.useMemo(()=>n==="text"?[uw.configure({heading:!1,bold:!1,italic:!1,strike:!1,listItem:!1,bulletList:!1,orderedList:!1,code:!1,codeBlock:!1,blockquote:!1})]:[S7.configure({linkify:!0,transformCopiedText:!0,transformPastedText:!0}),uw],[n]),f=LH({autofocus:!0,extensions:[...c,Hw.configure({extend:{bolt11:{addNodeView:()=>hs(ume)},naddr:{addNodeView:()=>hs(Dme)},nevent:{addNodeView:()=>hs(z2e)},image:{addNodeView:()=>hs(lme)},video:{addNodeView:()=>hs(H2e)},tweet:{addNodeView:()=>hs(U2e)},youtube:{addNodeView:()=>hs(W2e)},nprofile:{addNodeView:()=>hs(Mme),addProseMirrorPlugins(){return[VW({char:"@",editor:this.editor,pluginKey:new xo("@"),command:({editor:p,range:m,props:b})=>{var g,x;const y=p.view.state.selection.$to.nodeAfter;((g=y==null?void 0:y.text)==null?void 0:g.startsWith(" "))&&(m.to+=1);const w={pubkey:b.pubkey,relays:["wss://purplepag.es","wss://relay.nostr.band"]};w.nprofile="nostr:"+$9.nprofileEncode(w),p.chain().focus().insertContentAt(m,[{type:"nprofile",attrs:w},{type:"text",text:" "}]).run(),(x=window.getSelection())==null||x.collapseToEnd()},render:()=>{let p,m;return{onStart:b=>{p=new CO(V2e,{props:b,editor:b.editor}),m=$c("body",{getReferenceClientRect:b.clientRect,appendTo:()=>document.body,content:p.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"})},onUpdate:b=>{p.updateProps(b),b.clientRect&&m[0].setProps({getReferenceClientRect:b.clientRect})},onKeyDown:b=>{var y,v;return b.event.key==="Escape"?(m[0].hide(),!0):(v=(y=p.ref)==null?void 0:y.onKeyDown)==null?void 0:v.call(y,b)},onExit(){m[0].destroy(),p.destroy()}}}})]}}},link:{autolink:n==="markdown"},fileUpload:s.fileUpload!==!1&&{immediateUpload:!1,sign:async p=>"nostr"in window?await window.nostr.signEvent(p):(console.error("No nostr extension found"),Promise.reject("No signer found, install a nostr browser extension")),onDrop(){l(!0)},onComplete(p){console.log("Upload Completed",p.getText()),l(!1)}}})],onUpdate:()=>{d()}},[c]),d=ee.useCallback(()=>{f&&(u.current=f.getText(),e(n==="text"?f.getText({blockSeparator:`
`}):f.storage.markdown.getMarkdown()),o(JSON.parse(JSON.stringify((f==null?void 0:f.getJSON().content)||{}))))},[n,f]),h=ee.useCallback(p=>{r(p),e("")},[n]);return _.jsxs("div",{className:"flex flex-row",children:[_.jsxs("main",{className:"fixed overflow-y-auto h-full w-1/2 p-4",children:[_.jsx("div",{className:"bg-black text-white py-1 px-4 rounded-tl-lg rounded-tr-lg",children:_.jsx("h4",{className:"bg-white/20 inline px-2 rounded-full pb-0.5",children:"nostr-editor"})}),_.jsxs("div",{className:"mb-2 z-20 relative border border-gray-100 border-solid rounded-bl-2xl rounded-br-2xl p-8",children:[_.jsxs("div",{className:"",children:[_.jsxs("div",{children:[_.jsx(No,{isActive:n==="text",onClick:()=>h("text"),children:"Text"}),_.jsx(No,{isActive:n==="markdown",onClick:()=>h("markdown"),children:"Markdown"})]}),_.jsx(No,{onClick:()=>{f.chain().insertContent({type:"text",text:" "}).insertNEvent({nevent:sF}).run()},children:"Add NEvent"}),_.jsx(No,{onClick:()=>{f.chain().insertNProfile({nprofile:oF}).focus().run()},children:"Add NProfile"}),_.jsx(No,{onClick:()=>{f.chain().insertContent({type:"text",text:" "}).insertNAddr({naddr:aF}).focus().run()},children:"Add NAddr"}),_.jsx(No,{onClick:()=>f.chain().insertContent({type:"text",text:" "}).insertBolt11({lnbc:lF}).focus().run(),children:"Add Bolt11"}),_.jsx(No,{onClick:()=>f.chain().selectFile().run(),children:"Add Media"}),_.jsx(No,{onClick:()=>f.chain().uploadFiles().run(),children:"Upload"}),_.jsx(No,{disabled:a,onClick:()=>{},children:"Sign"})]}),_.jsx(TH,{editor:f,id:"editor",className:"text-lg font-normal"})]}),_.jsx(Q2e,{})]}),_.jsxs(J2e,{children:[t&&_.jsxs(_.Fragment,{children:[_.jsx("h3",{children:n==="text"?"editor.getText()":"editor.storage.markdown.getMarkdown()"}),_.jsx("pre",{className:"break-all mt-2 text-wrap",children:t})]}),i&&_.jsxs("div",{className:"text-left pl-0 mt-5",children:[_.jsx("h3",{className:"mb-2",children:"editor.getJSON()"}),_.jsx(oue,{src:i})]})]})]})}F2.createRoot(document.getElementById("root")).render(_.jsx(X2e,{}));
